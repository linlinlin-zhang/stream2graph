# CHANGE REPORT

- Timestamp: 2026-02-28 14:58:10 UTC
- Scope: Live session streaming upgrade + browser microphone real-time integration

## Updated Files

- `tools/realtime_frontend_server.py`
- `frontend/realtime_ui/index.html`
- `frontend/realtime_ui/styles.css`
- `frontend/realtime_ui/app.js`
- `README.md`

## Key Improvements

1. Session streaming API (server-side)
- Added stateful live session endpoints:
  - `GET /api/session/list`
  - `POST /api/session/create`
  - `POST /api/session/chunk`
  - `POST /api/session/flush`
  - `POST /api/session/close`
- Introduced in-memory session manager with per-session lock.
- Each session now maintains:
  - streaming intent engine state
  - incremental renderer state
  - event timeline and latency statistics
  - live pipeline payload export compatible with existing evaluation logic

2. Browser microphone real-time mode (frontend)
- Added microphone workflow buttons:
  - `麦克风开始`
  - `麦克风停止`
  - `结束并评测`
- Integrated browser Web Speech API (`SpeechRecognition/webkitSpeechRecognition`).
- Final ASR results are pushed chunk-by-chunk to `/api/session/chunk`.
- Live transcript log and session status strip added to control panel.

3. Live graph/metric updates
- Frontend now applies emitted events incrementally as they arrive.
- Timeline grows in real time during microphone session.
- Metric cards update continuously from session summary.
- Session flush returns final pipeline + evaluation report and closes session.

4. Documentation update
- README updated with session API list and microphone live mode instructions.

## Validation Executed

1. Python compile:
```bash
python3 -m py_compile tools/realtime_frontend_server.py
```

2. Session API smoke:
```bash
python3 tools/realtime_frontend_server.py --host 127.0.0.1 --port 8092
curl -X POST /api/session/create
curl -X POST /api/session/chunk
curl -X POST /api/session/flush
curl -X POST /api/session/close
curl /api/session/list
```

3. Result:
- Session lifecycle endpoints all returned success.
- Chunk-by-chunk emissions produced incremental events.
- Flush returned final evaluation payload with checks and metrics.
