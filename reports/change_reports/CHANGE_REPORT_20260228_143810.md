# CHANGE REPORT

- Timestamp: 2026-02-28 14:38:10 UTC
- Scope: Realtime algorithm closure, realtime evaluation, anti-flicker metrics, unified pre-training evaluation.

## Added Files

- `versions/v3_2026-02-27_latest_9k_cscw/scripts/asr_stream_adapter.py`
- `versions/v3_2026-02-27_latest_9k_cscw/scripts/incremental_renderer.py`
- `versions/v3_2026-02-27_latest_9k_cscw/scripts/run_realtime_pipeline.py`
- `versions/v3_2026-02-27_latest_9k_cscw/scripts/evaluate_realtime_pipeline.py`
- `tools/unified_pretrain_eval.py`

## Updated Files

- `README.md`

## Implemented

1. End-to-end closure
- Connected pipeline from ASR chunk stream to online intent engine and incremental renderer.
- Added runtime event outputs containing update-level latency and rendering frame metrics.

2. Realtime evaluation
- Added dedicated evaluation entrypoint to compute:
  - e2e latency stats
  - intent accuracy and macro F1 (when `expected_intent` labels are available)
  - pass/fail checks by thresholds

3. Anti-flicker metrics
- Added incremental renderer with stability-oriented placement and local relaxation.
- Added frame/global metrics:
  - `flicker_index`
  - displacement stats
  - `mental_map_score`
  - unchanged-node drift stats

4. Unified pre-training evaluation
- Added script merging dataset readiness and optional realtime report into one readiness score.
- Output includes recommendation to proceed or delay fine-tuning.

## Validation Executed

1. Compile check:
```bash
python3 -m py_compile \
  versions/v3_2026-02-27_latest_9k_cscw/scripts/asr_stream_adapter.py \
  versions/v3_2026-02-27_latest_9k_cscw/scripts/incremental_renderer.py \
  versions/v3_2026-02-27_latest_9k_cscw/scripts/run_realtime_pipeline.py \
  versions/v3_2026-02-27_latest_9k_cscw/scripts/evaluate_realtime_pipeline.py \
  tools/unified_pretrain_eval.py
```

2. Realtime evaluation smoke:
```bash
python3 versions/v3_2026-02-27_latest_9k_cscw/scripts/evaluate_realtime_pipeline.py \
  --input /tmp/stream2graph_realtime_eval_sample.jsonl \
  --report-output /tmp/stream2graph_realtime_eval_report_sample.json
```

3. Unified pre-train evaluation smoke:
```bash
python3 tools/unified_pretrain_eval.py \
  --dataset-dir versions/v3_2026-02-27_latest_9k_cscw/dataset/stream2graph_dataset/compliant_v3_repaired_20260228 \
  --realtime-report /tmp/stream2graph_realtime_eval_report_sample.json \
  --max-files 800 \
  --output /tmp/stream2graph_unified_pretrain_eval_sample.json
```
