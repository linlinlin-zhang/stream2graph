{
  "id": "gh_class_01314",
  "source": "github",
  "source_url": "https://github.com/DuongLDT2005/FA25.SWP291.SE19B06_02.Wedding_Restaurant_Management/blob/4a1fbc15fa1ec01e11bf04fdd6fe024ae8ae2980/server/docs/booking_class_diagram.mmd",
  "github_repo": "DuongLDT2005/FA25.SWP291.SE19B06_02.Wedding_Restaurant_Management",
  "github_file_path": "server/docs/booking_class_diagram.mmd",
  "diagram_type": "class",
  "code": "---\nconfig:\n  layout: elk\n---\nclassDiagram\ndirection TB\n    class Booking {\n\t    +bookingID: ID\n\t    +customerID: ID\n\t    +hallID: ID\n\t    +eventDate: Date\n\t    +startTime: String\n\t    +endTime: String\n\t    +tableCount: Number\n\t    +totalAmount: Number\n\t    +status: BookingStatus\n\t    +specialRequest: String\n\t    +createdAt: Date\n\t    +updatedAt: Date\n\t    +toDTO() : BookingResponseDTO\n    }\n    class Hall {\n\t    +hallID: ID\n\t    +restaurantID: ID\n\t    +name: String\n    }\n    class Customer {\n\t    +customerID: ID\n\t    +fullName: String\n\t    +email: String\n\t    +phone: String\n    }\n    class Restaurant {\n\t    +restaurantID: ID\n\t    +name: String\n    }\n    class BookingStatus {\n\t    PENDING\n\t    ACCEPTED\n\t    REJECTED\n\t    CONFIRMED\n\t    DEPOSITED\n\t    EXPIRED\n\t    CANCELLED\n\t    COMPLETED\n    }\n    class BookingDAO {\n\t    +createBooking(bookingData, opts)\n\t    +getBookingById(bookingID)\n\t    +getBookingDetails(bookingID)\n\t    +findByHallAndTime(hallID, eventDate, startTime, endTime)\n\t    +updateBooking(bookingID, updates)\n\t    +updateBookingStatusWithTransaction(bookingID, newStatus, transaction)\n\t    +expireByIds(ids,setChecked)\n\t    +bulkExpireConfirmedOlderThanBatch(cutoff, batchSize)\n    }\n    class BookingService {\n\t    +createBooking(data)\n\t    +getBookingById(id)\n\t    +updateBooking(id, data)\n\t    +deleteBooking(id)\n\t    +changeStatus(id, status, opts)\n\t    +acceptByPartner(id, partnerId)\n\t    +rejectByPartner(id, partnerId, reason)\n\t    +confirmBooking(id)\n\t    +depositBooking(id)\n\t    +completeBooking(id)\n    }\n    class BookingPricing {\n\t    +calculateTotals(basePrice, extras)\n    }\n    class BookingValidators {\n\t    +validateCreateData(data)\n\t    +checkHallAvailability(hallID, eventDate, startTime, endTime)\n    }\n    class BookingNotificationService {\n\t    +notifyByStatus(booking, status, reason)\n    }\n    class CronServices {\n\t    +setupExpirationChecker(days)\n    }\n    class ContractServices {\n\t    +createContractFromBooking(bookingID)\n    }\n    class BookingController {\n\t    +createBooking(req,res)\n\t    +getBookingById(req,res)\n\t    +getBookingsByCustomerId(req,res)\n\t    +getBookingsByRestaurantId(req,res)\n\t    +updateBooking(req,res)\n\t    +deleteBooking(req,res)\n\t    +updateBookingStatus(req,res)\n\t    +acceptByPartner(req,res)\n\t    +rejectByPartner(req,res)\n\t    +confirmBooking(req,res)\n\t    +markAsDeposited(req,res)\n\t    +completeBooking(req,res)\n    }\n\n\t<<enumeration>> BookingStatus\n\n    BookingController --> BookingService : uses\n    BookingService --> BookingDAO : uses\n    BookingService --> BookingPricing : uses\n    BookingService --> BookingValidators : uses\n    BookingService --> BookingNotificationService : uses\n    BookingService --> ContractServices : may create\n    BookingDAO --> Booking : persistence\n    Booking --> Hall\n    Booking --> Customer\n    Hall \"*\" -- \"1\" Restaurant : belongs_to\n    BookingNotificationService ..> BookingDAO : loads booking details\n    CronServices --> BookingDAO\n    BookingStatus -- BookingController\n",
  "content_size": 3007,
  "collected_at": "2026-02-06T01:56:00.931680",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 1
}