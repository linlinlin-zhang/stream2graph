{
  "id": "gh_sequence_00790",
  "source": "github",
  "source_url": "https://github.com/MNRainDrop/CECS-491A-Spec/blob/1b550d3e51d8eb2f48b176e022a02ab51d3e46b3/Project%20Documents/Low%20Level%20Designs/VehicleProfileLLD/VP4-VehicleProfileRetrieval/VehicleProfileLibrary_ProfileRetrieval_pass.mmd",
  "github_repo": "MNRainDrop/CECS-491A-Spec",
  "github_file_path": "Project Documents/Low Level Designs/VehicleProfileLLD/VP4-VehicleProfileRetrieval/VehicleProfileLibrary_ProfileRetrieval_pass.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\nparticipant u as Browser\nparticipant az as AuthN/AuthZ<br>(Entry Point)\nparticipant e as VehicleProfileEntryPoint<br>(Entry Point)\nparticipant vpm as VehicleProfileManager<br>(Manager Layer)\nparticipant vps as VehicleProfileRetrievalService<br>(Services Layer)\nparticipant ll as LogService<br>(Services Layer)\nparticipant dg as SqlDbVehicleTarget<br>(Data Gateway)\nparticipant da as SqlServerDAO<br>(Data Access Object)\nparticipant ds as Data Store<br>(Sql Server)\n\nNote Left of u: User attempts to to retrieve vehicle profiles\nu->>+az: CheckToken() \n    Note over u,az: *Temporary method signature*<br>Browser checks for<br>authorized access to the page.<br>See authorization success case\naz-->>-u: Return valid check\n\nu->>+e: GetMyVehicleProfiles(userAccount: IUserAccount) : IActionResult\n    Note over u,e: Invoked when user clicks button to view<br>vehicle profiles\n\n    e->>+vpm: GetVehicleProfiles(userAccont: IUserAccount) : IResponse\n        Note over e,vpm: Entry point calls upon manager<br>to retrieve vehicle profiles\n\n        vpm->>vpm: Validate Parameters\n            \n        vpm->>+vps: RetrieveVehicleProfiles(userAccount: IUserAccount) : IResponse\n            Note over vpm,vps: Returns a collection of vehicle profiles in IResponse.ReturnValue\n\n            vps->>vps: Validate Parameters\n\n            vps->>+dg: ReadVehicleProfileSql(search: ISearchParameters) : IResponse\n                Note over vps,dg: VehicleProfileRetrievalService calls upon SqlDbVehicleTarget to generate<br>the sql statement and parameters\n\n                dg->>dg: Convert search parameters into SQL statement\n\n                dg->>+da: ExecuteReadSql(sqlCommands: ICollection<KeyValuePair<sql: string, sqlParameters: HashSet<SqlParameter>>>) : IResponse\n                    Note over dg,da: SqlServerUserTarget calls upon<br>SqlServerDAO to execute the sql\n\n                    da->>+ds: SqlCommand.ExecuteReader() : SqlDataReader\n                        Note over da,ds: SqlServerDAO calls upon<br>`SqlCommand.ExecuteReader()`<br>to execute the sql command\n                        \n                        ds->>ds: SELECT (VIN, LicensePlate, Make, Model, Year, Color)<br>FROM VehicleProfile WHERE Owner_UID = @UserID;\n\n                        ds->>ds: Vehicle profile(s) is successfully retireved<br>from the Data Store\n\n                    ds-->>-da: Database returns query results\n\n                    da->>da: Check for thrown errors\n\n                    da->>da: Create new IResponse object\n                        Note over da: HasError = false<br>ErrorMessage = null<br>ReturnValue = new list containing returned query results\n\n                da-->>-dg: IResponse object returned\n\n                dg->>dg: Check for errors in returned IResponse object\n\n                dg->>dg: Extract value from IResponse.Return value and cast it into a list of IVehicleProfile objects\n\n                dg->>dg: Set IResponse.ReturnValue to the new list of IVehicleProfile objects\n\n            dg-->>-vps: IResponse object returned\n\n            vps->>vps: Check for errors in IResponseObject\n\n            # Log successful vehicle profile retrieval\n            vps-->>ll: CreateLogAsync(logLevel: string, logCategory: string, logContext: string, userHash: string) : IResponse\n                Note over vps,ll: UserService calls upon LogService to log<br>successful retrieval of vehicle profiles.<br>See logging success case\n\n        vps-->>-vpm: IResponse object returned\n\n        vpm->>vpm: Check for errors in returned IResponse object\n\n        vpm->>vpm: Check for any violations of business rules\n\n        vpm->>vpm: Convert IResponse.ReturnValue into JSON string\n\n        # Log successful vehicle profile retrieval\n        vpm-->>ll: CreateLogAsync(logLevel: string, logCategory: string, logContext: string, userHash: string) : IResponse\n            Note over vpm,ll: UserService calls upon LogService to log<br>successful retrieval of vehicle profiles.<br>See logging success case\n\n    vpm-->>-e: IResponse object returned\n\n    e->>e: Check for errors in returned IResponse object\n\n    e->>e: Inject the vehicle profiles into HTML\n\ne-->>-u: Return OK IActionResult\n",
  "content_size": 4177,
  "collected_at": "2026-02-06T01:37:06.274570",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 2,
  "repo_forks": 0,
  "repo_owner": "MNRainDrop",
  "repo_name": "CECS-491A-Spec",
  "repo_description": "CECS 491A repository for Team Spec",
  "repo_language": "C#",
  "repo_topics": [],
  "repo_created_at": "2023-09-07T01:55:44Z",
  "repo_updated_at": "2024-12-17T23:27:38Z",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}