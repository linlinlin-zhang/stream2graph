{
  "id": "gh_sequence_00362",
  "source": "github",
  "source_url": "https://github.com/comsa33/porfolio-site/blob/c73cbe20f09305f1683bb39a5801ae130d98c492/public/architecture/log-collector/batch-flow.mmd",
  "github_repo": "comsa33/porfolio-site",
  "github_file_path": "public/architecture/log-collector/batch-flow.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    participant Redis as Redis Stream\n    participant Consumer as Redis Consumer\n    participant Buffer as 메모리 버퍼\n    participant Writer as Batch Writer\n    participant PyEditor as PyEditor API\n\n    loop 메시지 수신\n        Redis->>Consumer: 로그 메시지 읽기\n        Consumer->>Buffer: 버퍼에 추가 (ACK 안 함)\n    end\n\n    alt 1초 경과 또는 버퍼 100개 도달\n        Buffer->>Writer: flush 트리거\n        Writer->>Writer: 중복 제거 + 시간순 정렬\n        Writer->>PyEditor: 배치 쓰기 (GET → POST)\n        \n        alt 성공\n            PyEditor-->>Writer: 200 OK\n            Writer->>Redis: XACK (메시지 확인)\n            Note right of Redis: 다음 메시지로 진행\n        else 실패\n            PyEditor-->>Writer: Error\n            Writer->>Buffer: 버퍼에 다시 넣기\n            Note right of Buffer: 다음 flush에서 재시도\n        end\n    end\n",
  "content_size": 776,
  "collected_at": "2026-02-06T01:31:14.141606",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "comsa33",
  "repo_name": "porfolio-site",
  "repo_description": "포트폴리오 사이트",
  "repo_language": "TypeScript",
  "repo_topics": [],
  "repo_created_at": "2025-12-13T13:44:58Z",
  "repo_updated_at": "2026-01-31T13:33:35Z",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}