{
  "id": "gh_architecture_01593",
  "source": "github",
  "source_url": "https://github.com/KDH-0309/QFN/blob/882ccca0234a0b820584a4172e9af02933c2da12/docs/architecture-diagram.mmd",
  "github_repo": "KDH-0309/QFN",
  "github_file_path": "docs/architecture-diagram.mmd",
  "diagram_type": "architecture",
  "code": "# QuantaFolio Navigator ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜\n\n## ğŸ“ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨\n\n```mermaid\ngraph LR\n    %% ìŠ¤íƒ€ì¼ ì •ì˜\n    classDef presentationStyle fill:#ffffff,stroke:#2563EB,stroke-width:3px,color:#111827\n    classDef applicationStyle fill:#ffffff,stroke:#2563EB,stroke-width:3px,color:#111827\n    classDef dataStyle fill:#ffffff,stroke:#2563EB,stroke-width:3px,color:#111827\n    \n    %% Presentation Layer\n    subgraph Presentation[\"ğŸ–¥ï¸ Presentation Layer\"]\n        P1[\"React 18<br/>Vite<br/>Tailwind CSS\"]\n        P2[\"Dashboard<br/>Portfolio<br/>Chatbot\"]\n    end\n    \n    %% Application Layer\n    subgraph Application[\"âš™ï¸ Application Layer\"]\n        A1[\"Spring Boot 3.1.5<br/>Java 17\"]\n        A2[\"Controller<br/>Service<br/>Repository\"]\n        A3[\"JWT ì¸ì¦<br/>Python ì—°ë™\"]\n    end\n    \n    %% Data Layer\n    subgraph Data[\"ğŸ’¾ Data Layer\"]\n        D1[\"MariaDB<br/>ì˜ì†í™”\"]\n        D2[\"Python<br/>QAOA/yfinance\"]\n        D3[\"ì™¸ë¶€ API<br/>ì‹¤ì‹œê°„ ì‹œì„¸\"]\n    end\n    \n    %% ì—°ê²° ê´€ê³„\n    Presentation -->|REST API| Application\n    Application -->|JPA| D1\n    Application -->|Process Exec| D2\n    D2 -->|HTTP API| D3\n    \n    %% ìŠ¤íƒ€ì¼ ì ìš©\n    class Presentation,P1,P2 presentationStyle\n    class Application,A1,A2,A3 applicationStyle\n    class Data,D1,D2,D3 dataStyle\n```\n\n---\n\n## ğŸ“ ê³„ì¸µë³„ ìƒì„¸ ì„¤ëª…\n\n### ğŸ–¥ï¸ Presentation Layer (í”„ë¡ íŠ¸ì—”ë“œ)\n\n**ì—­í• :** ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì œê³µ ë° ë°ì´í„° ì‹œê°í™”\n\n**ê¸°ìˆ  ìŠ¤íƒ:**\n- **React 18**: ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ UI ë¼ì´ë¸ŒëŸ¬ë¦¬, ìƒíƒœ ê´€ë¦¬\n- **Vite**: ë¹ ë¥¸ ë¹Œë“œ ë„êµ¬ (Webpack ëŒ€ë¹„ 10ë°° ë¹ ë¥¸ HMR)\n- **Tailwind CSS**: ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ê¸°ë°˜ ìŠ¤íƒ€ì¼ë§\n\n**ì£¼ìš” ì»´í¬ë„ŒíŠ¸:**\n- `Dashboard`: í¬íŠ¸í´ë¦¬ì˜¤ ìš”ì•½ ë° ì„±ê³¼ ì§€í‘œ ì°¨íŠ¸\n- `PortfolioOptimizer`: ì¢…ëª© ê²€ìƒ‰, ìœ„í—˜ë„ ì„¤ì •, ìµœì í™” ì‹¤í–‰\n- `Chatbot`: AI ê¸°ë°˜ íˆ¬ì ì§ˆì˜ì‘ë‹µ\n- `Settings`: ì–¸ì–´ ë³€ê²½, í…Œë§ˆ ì„¤ì •\n\n**í•µì‹¬ ê¸°ëŠ¥:**\n- ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ (ì¢…ëª© ê²€ìƒ‰, ìˆ˜ëŸ‰/ìœ„í—˜ë„ ì„¤ì •)\n- REST API í˜¸ì¶œ (Axios HTTP í´ë¼ì´ì–¸íŠ¸)\n- ì°¨íŠ¸ ì‹œê°í™” (Recharts: ë¼ì¸/íŒŒì´/ë°” ì°¨íŠ¸)\n- ë‹¤êµ­ì–´ ì§€ì› (i18next: í•œêµ­ì–´/ì˜ì–´)\n\n**ë°ì´í„° íë¦„:**\n```\nì‚¬ìš©ì ì…ë ¥ â†’ React State â†’ Axios HTTP ìš”ì²­ â†’ Backend API\nâ† JSON ì‘ë‹µ â† Backend API\nê²°ê³¼ ì‹œê°í™” â†’ ì°¨íŠ¸/í‘œ ë Œë”ë§\n```\n\n---\n\n### âš™ï¸ Application Layer (ë°±ì—”ë“œ)\n\n**ì—­í• :** ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬, API ì œê³µ, ë°ì´í„° ì—°ë™ ì¡°ìœ¨\n\n**ê¸°ìˆ  ìŠ¤íƒ:**\n- **Java 17**: LTS ë²„ì „, ìµœì‹  ë¬¸ë²• ì§€ì› (Records, Pattern Matching)\n- **Spring Boot 3.1.5**: ìë™ ì„¤ì •, ë‚´ì¥ Tomcat ì„œë²„\n- **Spring Data JPA**: ORM (Hibernate 6.2.x)\n- **Spring Security + JWT**: Stateless ì¸ì¦/ì¸ê°€\n\n**ê³„ì¸µ êµ¬ì¡° (MVC íŒ¨í„´):**\n\n**Controllers (API ë¼ìš°íŒ…)**\n- `PortfolioController`: í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë ¨ API\n  - `GET /api/portfolio/stock-price/{symbol}` - ì‹œì„¸ ì¡°íšŒ\n  - `POST /api/portfolio/optimize` - ìµœì í™” ì‹¤í–‰\n- `UserController`: íšŒì› ê´€ë¦¬ API\n  - `POST /api/users/login` - ë¡œê·¸ì¸\n  - `POST /api/users/signup` - íšŒì›ê°€ì…\n- `ChatbotController`: AI ì±—ë´‡ API\n  - `POST /api/chatbot/chat` - ëŒ€í™” ì²˜ë¦¬\n\n**Services (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)**\n- `PortfolioService`: í¬íŠ¸í´ë¦¬ì˜¤ CRUD, ìµœì í™” ì „ì²˜ë¦¬/í›„ì²˜ë¦¬\n- `PythonIntegrationService`: Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë° ê²°ê³¼ íŒŒì‹±\n- `UserService`: ì¸ì¦, JWT í† í° ìƒì„±/ê²€ì¦, ì´ë©”ì¼ ë°œì†¡\n\n**Repositories (ë°ì´í„° ì ‘ê·¼)**\n- `StockRepository`: ì¢…ëª© ì •ë³´ CRUD\n- `PortfolioRepository`: í¬íŠ¸í´ë¦¬ì˜¤ ì €ì¥/ì¡°íšŒ\n- `UserRepository`: ì‚¬ìš©ì ì •ë³´ ê´€ë¦¬\n\n**ë³´ì•ˆ:**\n- JWT í† í° ê¸°ë°˜ ì¸ì¦ (Stateless, ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥)\n- Spring Security í•„í„° ì²´ì¸ (ì¸ì¦/ì¸ê°€ ìë™ ì²˜ë¦¬)\n- ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” (BCrypt)\n\n**ë°ì´í„° íë¦„:**\n```\nHTTP ìš”ì²­ â†’ Controller (ê²€ì¦)\nâ†’ Service (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)\n  â†’ Repository (DB ì ‘ê·¼) / PythonIntegrationService (Python ì‹¤í–‰)\nâ† DTO ë³€í™˜\nâ† HTTP ì‘ë‹µ (JSON)\n```\n\n---\n\n### ğŸ’¾ Data Layer (ë°ì´í„°)\n\n**ì—­í• :** ë°ì´í„° ì˜ì†í™”, AI/ìµœì í™” ì²˜ë¦¬, ì™¸ë¶€ ë°ì´í„° ì—°ë™\n\n#### 1. MariaDB (ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤)\n\n**í…Œì´ë¸” êµ¬ì¡°:**\n- `users`: ì‚¬ìš©ì ì •ë³´ (ID, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸, ì—­í• )\n- `stocks`: ì¢…ëª© ì •ë³´ (ì‹¬ë³¼, ì´ë¦„, ê°€ê²©, ìˆ˜ëŸ‰)\n- `portfolios`: í¬íŠ¸í´ë¦¬ì˜¤ (ì‚¬ìš©ì ID, ìƒì„±ì¼)\n- `optimization_results`: ìµœì í™” ê²°ê³¼ íˆìŠ¤í† ë¦¬ (ë°°ë¶„ë¹„ìœ¨, ìˆ˜ìµë¥ , ìœ„í—˜ë„)\n\n**ì—°ë™ ë°©ì‹:**\n- JPA/Hibernate ORM (ê°ì²´-ê´€ê³„ ë§¤í•‘)\n- ìë™ ì¿¼ë¦¬ ìƒì„± (ë©”ì„œë“œ ì´ë¦„ ê·œì¹™)\n- íŠ¸ëœì­ì…˜ ê´€ë¦¬ (@Transactional)\n\n#### 2. Python Scripts (ë°ì´í„° ì²˜ë¦¬/AI)\n\n**ì‹¤í–‰ ë°©ì‹:**\n- Apache Commons Execë¡œ Python í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰\n- JSON íŒŒì¼ ì…ì¶œë ¥ (Java â†” Python í†µì‹ )\n- stdout ìº¡ì²˜ë¡œ ê²°ê³¼ ë°›ì•„ì˜´\n\n**ì£¼ìš” ìŠ¤í¬ë¦½íŠ¸:**\n\n**optimize_portfolio.py (QAOA ìµœì í™”)**\n```python\nì…ë ¥: { \"symbols\": [\"AAPL\", \"MSFT\"], \"riskFactor\": 5 }\nì²˜ë¦¬: Qiskit QAOA ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰\nì¶œë ¥: { \"allocation\": {...}, \"expectedReturn\": 0.12, \"risk\": 0.08 }\n```\n- Qiskit Optimization ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©\n- ëª©ì í•¨ìˆ˜: minimize(risk - risk_factor * return)\n- ì œì•½ì¡°ê±´: Î£ weights = 1\n\n**fetch_stock_data.py (ì‹¤ì‹œê°„ ì‹œì„¸)**\n```python\nì…ë ¥: { \"symbol\": \"AAPL\" }\nì²˜ë¦¬: yfinanceë¡œ ì‹¤ì‹œê°„ ê°€ê²© ì¡°íšŒ, ì‹¤íŒ¨ ì‹œ Mock í´ë°±\nì¶œë ¥: { \"symbol\": \"AAPL\", \"price\": 234000, \"dataSource\": \"yfinance\" }\n```\n- USD â†’ KRW í™˜ìœ¨ ìë™ ë³€í™˜ (í˜„ì¬ ê³ ì •ê°’ 1300)\n- í†µê³„ ë°ì´í„° ê³„ì‚° (í‰ê· , í‘œì¤€í¸ì°¨)\n\n#### 3. External APIs (ì™¸ë¶€ ì—°ë™)\n\n**yfinance (Yahoo Finance)**\n- ì‹¤ì‹œê°„ ì£¼ì‹ ì‹œì„¸ ì¡°íšŒ\n- ê³¼ê±° ë°ì´í„° ë‹¤ìš´ë¡œë“œ (2ë…„ì¹˜)\n- ê±°ë˜ ì‹œê°„ ì¤‘ 15-20ë¶„ ì§€ì—° ë°ì´í„°\n\n**AI Chatbot API (ì˜ˆ: OpenAI GPT)**\n- íˆ¬ì ê´€ë ¨ ì§ˆë¬¸ ë‹µë³€\n- í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ\n\n---\n\n## ğŸ”„ ì£¼ìš” ë°ì´í„° íë¦„\n\n### ì‹œë‚˜ë¦¬ì˜¤ 1: í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™” ì‹¤í–‰\n\n```\n1. ì‚¬ìš©ì (React)\n   â””â”€ ì¢…ëª© ì…ë ¥ (AAPL, MSFT), ìœ„í—˜ë„ 5\n\n2. POST /api/portfolio/optimize\n   â””â”€ { \"symbols\": [\"AAPL\", \"MSFT\"], \"riskFactor\": 5 }\n\n3. PortfolioController\n   â””â”€ portfolioService.optimize(request)\n\n4. PortfolioService\n   â”œâ”€ ì…ë ¥ ê²€ì¦ (ì¢…ëª© ìˆ˜, ìœ„í—˜ë„ ë²”ìœ„)\n   â””â”€ pythonIntegrationService.runOptimization(data)\n\n5. PythonIntegrationService\n   â”œâ”€ input.json ìƒì„±\n   â”œâ”€ python optimize_portfolio.py --input input.json\n   â””â”€ stdout ì½ê¸° â†’ JSON íŒŒì‹±\n\n6. Python (optimize_portfolio.py)\n   â”œâ”€ Qiskit QAOA ì‹¤í–‰ (5-10ì´ˆ ì†Œìš”)\n   â””â”€ ê²°ê³¼ ì¶œë ¥: {\"allocation\": {\"AAPL\": 0.6, \"MSFT\": 0.4}, ...}\n\n7. PortfolioService\n   â”œâ”€ ê²°ê³¼ DB ì €ì¥ (optimization_results í…Œì´ë¸”)\n   â””â”€ DTO ë³€í™˜\n\n8. HTTP 200 OK\n   â””â”€ {\"allocation\": {...}, \"expectedReturn\": 0.12, \"risk\": 0.08}\n\n9. React\n   â””â”€ ì°¨íŠ¸/í‘œë¡œ ì‹œê°í™” (íŒŒì´ ì°¨íŠ¸: AAPL 60%, MSFT 40%)\n```\n\n### ì‹œë‚˜ë¦¬ì˜¤ 2: ì‹¤ì‹œê°„ ì‹œì„¸ ì¡°íšŒ\n\n```\n1. GET /api/portfolio/stock-price/AAPL\n\n2. PortfolioService\n   â”œâ”€ ìºì‹œ í™•ì¸ (5ë¶„ TTL)\n   â””â”€ ìºì‹œ ì—†ìœ¼ë©´ Python ì‹¤í–‰\n\n3. Python (fetch_stock_data.py)\n   â”œâ”€ yfinance.Ticker(\"AAPL\").info\n   â”œâ”€ ì‹¤íŒ¨ ì‹œ Mock ë°ì´í„° í´ë°±\n   â””â”€ USD â†’ KRW ë³€í™˜ (180 * 1300 = 234000)\n\n4. HTTP 200 OK\n   â””â”€ {\"symbol\": \"AAPL\", \"price\": 234000, \"dataSource\": \"yfinance\"}\n\n5. React\n   â””â”€ \"AAPL - â‚©234,000\" í‘œì‹œ\n```\n\n---\n\n## ğŸ¯ ì•„í‚¤í…ì²˜ ì„¤ê³„ ì›ì¹™ ë° ì¥ì \n\n### ì„¤ê³„ ì›ì¹™\n\n1. **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ (Separation of Concerns)**\n   - ê° ê³„ì¸µì€ ìì‹ ì˜ ì—­í• ì—ë§Œ ì§‘ì¤‘\n   - Presentation: UI/UX, Application: ë¡œì§, Data: ì €ì¥/ì²˜ë¦¬\n\n2. **ëŠìŠ¨í•œ ê²°í•© (Loose Coupling)**\n   - ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ í†µì‹  (REST API, JPA Repository)\n   - êµ¬í˜„ ë³€ê²½ ì‹œ ë‹¤ë¥¸ ê³„ì¸µ ì˜í–¥ ìµœì†Œí™”\n\n3. **ë†’ì€ ì‘ì§‘ë„ (High Cohesion)**\n   - ê´€ë ¨ ê¸°ëŠ¥ì„ í•˜ë‚˜ì˜ ëª¨ë“ˆì— ì§‘ì¤‘\n   - Controller: ë¼ìš°íŒ…ë§Œ, Service: ë¹„ì¦ˆë‹ˆìŠ¤ë§Œ\n\n### í•µì‹¬ ì¥ì \n\n1. **ìœ ì§€ë³´ìˆ˜ ìš©ì´**\n   - Frontend ìˆ˜ì • ì‹œ Backend ì˜í–¥ ì—†ìŒ\n   - Python ì•Œê³ ë¦¬ì¦˜ ë³€ê²½ ì‹œ Java ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”\n\n2. **ê¸°ìˆ  ìŠ¤íƒ ìµœì  í™œìš©**\n   - React: ë¹ ë¥¸ UI ê°œë°œ, ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©\n   - Java/Spring: ì•ˆì •ì„±, ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ê¸°ëŠ¥\n   - Python: ë°ì´í„° ê³¼í•™ ìƒíƒœê³„ (Qiskit, yfinance)\n\n3. **í™•ì¥ ê°€ëŠ¥**\n   - ìƒˆë¡œìš´ ìµœì í™” ì•Œê³ ë¦¬ì¦˜ â†’ Python ìŠ¤í¬ë¦½íŠ¸ë§Œ ì¶”ê°€\n   - ìƒˆë¡œìš´ ë°ì´í„° ì†ŒìŠ¤ â†’ Service ë ˆì´ì–´ë§Œ ìˆ˜ì •\n   - ìˆ˜í‰ í™•ì¥ â†’ JWT Stateless ì¸ì¦, REST API\n\n4. **í…ŒìŠ¤íŠ¸ ìš©ì´**\n   - ê° ê³„ì¸µ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥\n   - Mock ê°ì²´ë¡œ ì˜ì¡´ì„± ê²©ë¦¬\n\n---\n\n**ì‘ì„±ì¼:** 2025.11.10  \n**í”„ë¡œì íŠ¸:** QuantaFolio Navigator  \n**íŒ€:** KDH-0309\n",
  "content_size": 6322,
  "collected_at": "2026-02-06T01:48:20.104466",
  "license": "none",
  "license_name": "No License",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}