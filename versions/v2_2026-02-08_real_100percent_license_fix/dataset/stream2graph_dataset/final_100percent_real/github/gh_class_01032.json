{
  "id": "gh_class_01032",
  "source": "github",
  "source_url": "https://github.com/tri721305/thesis-trip-planner/blob/36317385b4d12fa02198537ee93160faebe5a79c/classDiagramPayment.mmd",
  "github_repo": "tri721305/thesis-trip-planner",
  "github_file_path": "classDiagramPayment.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    class Payment {\n        +String paymentId\n        +ObjectId userId\n        +ObjectId bookingId\n        +Number amount\n        +String currency\n        +String paymentMethod\n        +String status\n        +PaymentBreakdown breakdown\n        +BillingDetails billingDetails\n        +StripeInfo stripeInfo\n        +String transactionId\n        +String referenceNumber\n        +Array refunds\n        +Number retryCount\n        +Date lastRetryAt\n        +Date nextRetryAt\n        +String description\n        +String notes\n        +String source\n        +Date processedAt\n        +Date failedAt\n        +Date refundedAt\n        +Date createdAt\n        +Date updatedAt\n        +Number totalRefunded()\n        +Number remainingAmount()\n    }\n\n    class BillingDetails {\n        +String name\n        +String email\n        +String phone\n        +Address address\n    }\n\n    class Address {\n        +String line1\n        +String line2\n        +String city\n        +String state\n        +String postalCode\n        +String country\n    }\n\n    class PaymentBreakdown {\n        +Number subtotal\n        +Number taxes\n        +Number fees\n        +Number discount\n        +Number total\n        +String currency\n    }\n\n    class StripeInfo {\n        +String paymentIntentId\n        +String clientSecret\n        +String chargeId\n        +String receiptUrl\n        +String refundId\n        +String failureCode\n        +String failureMessage\n    }\n\n    class Refund {\n        +String refundId\n        +Number amount\n        +String reason\n        +String status\n        +Date createdAt\n        +Date processedAt\n        +String stripeRefundId\n    }\n\n    class HotelBooking {\n        +String bookingId\n        +ObjectId userId\n        +ObjectId paymentId\n        +BookedHotel hotel\n        +Array rooms\n        +Date checkInDate\n        +Date checkOutDate\n        +Number nights\n        +GuestInfo guestInfo\n        +Object guestCount\n        +Object pricing\n        +String status\n        +String paymentStatus\n        +String paymentMethod\n        +Object cancellation\n        +String source\n        +Boolean confirmationEmailSent\n        +String specialRequests\n        +String notes\n        +Date createdAt\n        +Date updatedAt\n    }\n\n    class User {\n        +String name\n        +String username\n        +String email\n        +String bio\n        +String image\n        +String location\n        +String portfolio\n        +Number reputation\n        +String phone\n    }\n\n    class PaymentService {\n        +createPayment(CreatePaymentParams)\n        +createStripePaymentIntent(CreateStripePaymentIntentParams)\n        +processPayment(ProcessPaymentParams)\n        +updatePaymentStatus(UpdatePaymentStatusParams)\n        +processRefund(ProcessRefundParams)\n        +getPayments(GetPaymentsParams)\n        +getPaymentById(paymentId)\n        +resetProcessingPayment(paymentId)\n    }\n\n    class StripeAPI {\n        +createPaymentIntent(amount, currency, metadata)\n        +retrievePaymentIntent(paymentIntentId)\n        +createRefund(paymentIntentId, amount, reason)\n        +handleWebhookEvent(event)\n    }\n\n    Payment \"1\" *-- \"1\" PaymentBreakdown : contains\n    Payment \"1\" *-- \"1\" BillingDetails : contains\n    Payment \"1\" *-- \"0..1\" StripeInfo : may contain\n    Payment \"1\" *-- \"*\" Refund : contains\n    Payment \"1\" -- \"1\" HotelBooking : references\n    Payment \"1\" -- \"1\" User : belongs to\n    BillingDetails \"1\" *-- \"0..1\" Address : may contain\n    PaymentService -- Payment : manages\n    PaymentService -- StripeAPI : uses",
  "content_size": 3523,
  "collected_at": "2026-02-06T01:52:05.208914",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}