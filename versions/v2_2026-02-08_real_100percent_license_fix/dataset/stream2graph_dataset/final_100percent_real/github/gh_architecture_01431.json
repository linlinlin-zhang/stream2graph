{
  "id": "gh_architecture_01431",
  "source": "github",
  "source_url": "https://github.com/beatgeek/kernelport/blob/5b9a42cedcf50880a8a012b625dda812bedfe2ac/docs/worker_gpu.mmd",
  "github_repo": "beatgeek/kernelport",
  "github_file_path": "docs/worker_gpu.mmd",
  "diagram_type": "architecture",
  "code": "---\nconfig:\n      theme: redux-dark\n---\nflowchart LR\n  Q[Batch Job Queue] -->|dequeue| P[\"Prepare Inputs<br/>Validate · Stack · Layout\"]\n  P --> H2D[\"Host→Device Copy<br/>Pinned buffers\"]\n  H2D --> EX[\"Execute Backend<br/>LibTorch · TF · ORT · TRT\"]\n  EX --> D2H[\"Device→Host Copy<br/>(if needed)\"]\n  D2H --> SPLIT[\"Split Outputs<br/>per request\"]\n  SPLIT --> RESP[\"Respond<br/>gRPC / HTTP\"]\n\n  subgraph GPU[\"GPU Worker (bound to one GPU / MIG slice)\"]\n    direction TB\n\n    subgraph MEM[\"Memory Pools\"]\n      HP[\"Pinned Host Pool\"]\n      DP[\"Device Buffer Pool\"]\n    end\n\n    subgraph STREAMS[\"CUDA Streams\"]\n      CS[\"Compute Stream\"]\n      XS[\"Copy Stream(s)\"]\n    end\n\n    HP -.-> H2D\n    DP -.-> EX\n    XS -.-> H2D\n    CS -.-> EX\n    XS -.-> D2H\n  end\n",
  "content_size": 757,
  "collected_at": "2026-02-06T01:46:08.319361",
  "license": "apache-2.0",
  "license_name": "Apache License 2.0",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "https://api.github.com/licenses/apache-2.0",
  "repo_stars": 3,
  "repo_forks": 0
}