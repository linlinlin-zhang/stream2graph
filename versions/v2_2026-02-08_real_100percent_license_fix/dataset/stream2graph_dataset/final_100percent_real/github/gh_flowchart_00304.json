{
  "id": "gh_flowchart_00304",
  "source": "github",
  "source_url": "https://github.com/fahrilshaputraa/ansible/blob/2d41ed599fdf814b13e5ba27f543a9c9315bad33/flow/vm-troubleshooting-flow.mmd",
  "github_repo": "fahrilshaputraa/ansible",
  "github_file_path": "flow/vm-troubleshooting-flow.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TD\n    %% Start Point\n    START([START: VM Troubleshooting])\n    \n    %% Step 1: Ping Host\n    START --> PING_HOST[Step 1: Ping Host<br/>Check network connectivity]\n    PING_HOST --> PING_RESULT{Ping successful?}\n    \n    %% Step 2: Check SSH\n    PING_RESULT -->|Yes| CHECK_SSH[Step 2: Check SSH Connection<br/>Test remote access capability]\n    PING_RESULT -->|No| VM_STATUS_CHECK_EARLY[Check VM Status<br/>VM might be powered off]\n    \n    CHECK_SSH --> SSH_RESULT{SSH connection<br/>successful?}\n    \n    %% Step 3: Set Fact for SSH Result\n    SSH_RESULT --> SET_SSH_FACT[Step 3: Set Fact - SSH Result<br/>Store SSH check results for later use]\n    \n    %% Step 4: Reboot Windows (if SSH reachable)\n    SET_SSH_FACT --> SSH_REACHABLE{SSH was reachable<br/>in step 2?}\n    SSH_REACHABLE -->|Yes| REBOOT_WINDOWS[Step 4: Reboot Windows<br/>Execute reboot command via SSH]\n    SSH_REACHABLE -->|No| VM_STATUS_CHECK[Step 5: Check VM Status<br/>SSH failed - check VM power state]\n    \n    REBOOT_WINDOWS --> REBOOT_RESULT{Windows reboot<br/>successful?}\n    \n    %% Step 5: Check VM Status\n    REBOOT_RESULT -->|No| VM_STATUS_CHECK[Step 5: Check VM Status<br/>Reboot failed - check VM power state]\n    REBOOT_RESULT -->|Yes| WAIT_REBOOT[Wait for Reboot<br/>Allow time for system restart]\n    WAIT_REBOOT --> VERIFY_REBOOT[Verify Reboot Success<br/>Check if system is responsive]\n    VERIFY_REBOOT --> REBOOT_VERIFICATION{Reboot effective?<br/>System responsive?}\n    REBOOT_VERIFICATION -->|No| VM_STATUS_CHECK[Step 5: Check VM Status<br/>Reboot ineffective]\n    REBOOT_VERIFICATION -->|Yes| SUCCESS_END([SUCCESS: Issue Resolved])\n    \n    VM_STATUS_CHECK_EARLY --> VM_POWER_STATE{VM Power State?}\n    VM_STATUS_CHECK --> VM_POWER_STATE{VM Power State?}\n    \n    %% Step 6: Restart Guest VM Gracefully\n    VM_POWER_STATE -->|PoweredOn + Ping Reply| RESTART_GRACEFUL[Step 6: Restart Guest VM Gracefully<br/>Via vCenter guest OS restart]\n    RESTART_GRACEFUL --> GRACEFUL_RESULT{Graceful restart<br/>successful?}\n    \n    %% Step 7: Reset VM Forcefully\n    VM_POWER_STATE -->|PoweredOn + No Ping Reply| RESET_FORCEFUL[Step 7: Reset VM Forcefully<br/>Via vCenter hard reset]\n    GRACEFUL_RESULT -->|Failed| RESET_FORCEFUL[Step 7: Reset VM Forcefully<br/>Graceful restart failed]\n    \n    VM_POWER_STATE -->|PoweredOff| POWER_ON_VM[Power On VM<br/>Start the virtual machine]\n    POWER_ON_VM --> VERIFY_POWER_ON[Verify VM Started<br/>Check VM status after power on]\n    VERIFY_POWER_ON --> POWER_ON_SUCCESS{VM powered on<br/>successfully?}\n    POWER_ON_SUCCESS -->|Yes| SUCCESS_END\n    POWER_ON_SUCCESS -->|No| ESCALATION_END([ESCALATION: Manual Intervention Required])\n    \n    RESET_FORCEFUL --> RESET_RESULT{Force reset<br/>successful?}\n    GRACEFUL_RESULT -->|Success| VERIFY_RESTART[Verify VM Restart<br/>Check system responsiveness]\n    VERIFY_RESTART --> RESTART_SUCCESS{VM restart<br/>effective?}\n    RESTART_SUCCESS -->|Yes| SUCCESS_END\n    RESTART_SUCCESS -->|No| ESCALATION_END\n    \n    RESET_RESULT -->|Success| VERIFY_RESET[Verify VM Reset<br/>Check system recovery]\n    VERIFY_RESET --> RESET_SUCCESS{VM reset<br/>effective?}\n    RESET_SUCCESS -->|Yes| SUCCESS_END\n    RESET_SUCCESS -->|No| ESCALATION_END\n    RESET_RESULT -->|Failed| ESCALATION_END\n    \n    %% Decision Logic Summary\n    subgraph DECISION_LOGIC [\" Decision Logic Summary \"]\n        direction TB\n        LOGIC1[SSH Reachable → Try Windows Reboot]\n        LOGIC2[SSH Failed → Check VM Status]\n        LOGIC3[VM PoweredOn + Ping Reply → Graceful Restart]\n        LOGIC4[VM PoweredOn + No Ping → Force Reset]\n        LOGIC5[VM PoweredOff → Power On]\n        LOGIC6[All Methods Failed → Escalation]\n    end\n    \n    %% Styling\n    classDef startEnd fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#000\n    classDef process fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000\n    classDef decision fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000\n    classDef success fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000\n    classDef escalation fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000\n    classDef vmOperation fill:#e1f5fe,stroke:#0288d1,stroke-width:2px,color:#000\n    \n    class START startEnd\n    class SUCCESS_END success\n    class ESCALATION_END escalation\n    class PING_HOST,CHECK_SSH,SET_SSH_FACT,REBOOT_WINDOWS,WAIT_REBOOT,VERIFY_REBOOT process\n    class RESTART_GRACEFUL,RESET_FORCEFUL,POWER_ON_VM,VERIFY_POWER_ON,VERIFY_RESTART,VERIFY_RESET vmOperation\n    class PING_RESULT,SSH_RESULT,SSH_REACHABLE,REBOOT_RESULT,REBOOT_VERIFICATION,VM_POWER_STATE,GRACEFUL_RESULT,RESET_RESULT,POWER_ON_SUCCESS,RESTART_SUCCESS,RESET_SUCCESS decision\n",
  "content_size": 4656,
  "collected_at": "2026-02-06T01:43:16.669644",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}