{
  "id": "gh_sequence_00750",
  "source": "github",
  "source_url": "https://github.com/yamirghofran/valinor/blob/f87e307eee070462460d03f4cf33e3734db96353/docs/user-flow-diagrams/manager-sequnce-diagrams/sequence-manager-auth.mmd",
  "github_repo": "yamirghofran/valinor",
  "github_file_path": "docs/user-flow-diagrams/manager-sequnce-diagrams/sequence-manager-auth.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    title Restaurant Manager - Authentication Flow\n\n    actor Manager as Restaurant Manager\n    participant UI as JavaFX UI\n    participant AuthSvc as AuthenticationService\n    participant UserRepo as UserRepository\n    participant SessionRepo as UserSessionRepository\n\n    %% ============================================\n    %% MANAGER LOGIN WITH FULL PERMISSIONS\n    %% ============================================\n    rect rgb(230, 245, 255)\n        Note over Manager,SessionRepo: Manager Authentication Flow\n        Manager->>UI: Enter credentials\n        UI->>AuthSvc: login(LoginRequest)\n        AuthSvc->>UserRepo: findByUsername(username)\n        UserRepo-->>AuthSvc: User (role=RESTAURANT_MANAGER)\n        AuthSvc->>AuthSvc: verifyPassword()\n        AuthSvc->>SessionRepo: save(UserSession)\n        AuthSvc-->>UI: LoginResponse(token, user, permissions)\n        Note right of UI: Manager Permissions:<br/>All Staff permissions PLUS:<br/>CREATE/UPDATE/DELETE_SECTION<br/>CREATE/UPDATE/DELETE_TABLE<br/>MANAGE_RESTAURANT_SETTINGS<br/>CREATE/UPDATE/DELETE_USER<br/>ASSIGN_ROLES<br/>VIEW_ALL_RESERVATIONS\n        UI-->>Manager: Dashboard with Manager menu options\n    end\n\n    %% ============================================\n    %% LOGOUT\n    %% ============================================\n    rect rgb(240, 240, 240)\n        Note over Manager,SessionRepo: Logout Flow\n        Manager->>UI: Click Logout\n        UI->>AuthSvc: logout(sessionToken)\n        AuthSvc->>SessionRepo: expireSession(token)\n        SessionRepo-->>AuthSvc: boolean\n        AuthSvc-->>UI: void\n        UI-->>Manager: Navigate to Login screen\n    end\n\n",
  "content_size": 1646,
  "collected_at": "2026-02-06T01:36:30.321544",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 1,
  "repo_forks": 1,
  "repo_owner": "yamirghofran",
  "repo_name": "valinor",
  "repo_description": "Resturant Reservation System built in Java",
  "repo_language": "Java",
  "repo_topics": [
    "java",
    "javafx",
    "junit",
    "maven"
  ],
  "repo_created_at": "2025-09-19T15:07:28Z",
  "repo_updated_at": "2025-12-02T12:39:37Z",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}