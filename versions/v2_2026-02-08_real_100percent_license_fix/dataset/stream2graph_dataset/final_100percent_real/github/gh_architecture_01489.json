{
  "id": "gh_architecture_01489",
  "source": "github",
  "source_url": "https://github.com/jwardwell7077/agent-audiobook-maker/blob/d1b5df9622d8e20abf0a1c28c3d066e228aea46a/docs/diagrams/abm_spans_first_attribution.mmd",
  "github_repo": "jwardwell7077/agent-audiobook-maker",
  "github_file_path": "docs/diagrams/abm_spans_first_attribution.mmd",
  "diagram_type": "architecture",
  "code": "```mermaid\n%% ABM Spans-first Attribution with Deterministic Scoring\nflowchart TD\n  subgraph Ingestion\n    A[Loader: Private Book/Chapter] --> B[Validator]\n    B --> C[Resolver]\n    C --> D[Classifier]\n  end\n\n  subgraph Attribution\n    D --> E{Span Type?}\n    E -->|Dialogue| F[Windowed Speaker Inference]\n    F --> G[DeterministicConfidenceScorer.score]\n    E -->|Narration| H[Base vs Evidence Scoring]\n    H -->|evidence on| I[score_narration]\n    H -->|evidence off| J[Use narration_confidence]\n  end\n\n  subgraph Orchestrator\n    G --> K{Conf% >= min?}\n    I --> K\n    J --> K\n    K -->|Yes| L[Emit attribution + evidence]\n    K -->|No| M[Filter out]\n  end\n\n  L --> N[(spans_attr.jsonl)]\n  L --> O[(spans_attr.meta.json)]\n\n  %% Styling\n  style Ingestion fill:#eef,stroke:#447\n  style Attribution fill:#efe,stroke:#474\n  style Orchestrator fill:#ffe,stroke:#774\n```\n",
  "content_size": 868,
  "collected_at": "2026-02-06T01:46:54.625462",
  "license": "mit",
  "license_name": "MIT License",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0
}