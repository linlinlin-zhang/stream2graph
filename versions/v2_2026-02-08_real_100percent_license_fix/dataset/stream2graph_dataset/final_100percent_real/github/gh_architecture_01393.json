{
  "id": "gh_architecture_01393",
  "source": "github",
  "source_url": "https://github.com/Remy2404/Polymind/blob/6306865a86b54783110f8538425ae3eb1cb08645/project_structure_diagram.mmd",
  "github_repo": "Remy2404/Polymind",
  "github_file_path": "project_structure_diagram.mmd",
  "diagram_type": "architecture",
  "code": "flowchart TD\r\n%% Define styles for different components (light theme)\r\n    classDef ui fill:#007BFF,stroke:#003366,stroke-width:2px,color:#fff;\r\n    classDef api fill:#28A745,stroke:#155724,stroke-width:2px,color:#fff;\r\n    classDef command fill:#FFC107,stroke:#856404,stroke-width:2px,color:#000;\r\n    classDef ai fill:#6F42C1,stroke:#3B0A91,stroke-width:2px,color:#fff;\r\n    classDef media fill:#FD7E14,stroke:#A85600,stroke-width:2px,color:#fff;\r\n    classDef memory fill:#DC3545,stroke:#721C24,stroke-width:2px,color:#fff;\r\n    classDef group fill:#17A2B8,stroke:#0C5460,stroke-width:2px,color:#fff;\r\n    classDef doc fill:#6C757D,stroke:#343A40,stroke-width:2px,color:#fff;\r\n    classDef db fill:#20C997,stroke:#0F5132,stroke-width:2px,color:#fff;\r\n    classDef infra fill:#343A40,stroke:#000,stroke-width:2px,color:#fff;\r\n\r\n\r\n\r\n    subgraph \"User Interfaces\"\r\n        TG[Telegram Bot]\r\n        WA[Web App]\r\n    end\r\n    class TG,WA ui;\r\n\r\n    subgraph \"API Layer\"\r\n        FA[FastAPI Server]\r\n        MW[Middleware]\r\n        RT[API Routes]\r\n    end\r\n    class FA,MW,RT api;\r\n\r\n    subgraph \"Command System\"\r\n        CH[Command Handlers]\r\n        BCH[Basic Commands]\r\n        IMCH[Image Commands]\r\n        MDCH[Model Commands]\r\n        DOCH[Document Commands]\r\n        EXCH[Export Commands]\r\n        CBH[Callback Handlers]\r\n        OWAC[Open Web App Commands]\r\n    end\r\n    class CH,BCH,IMCH,MDCH,DOCH,EXCH,CBH,OWAC command;\r\n\r\n    subgraph \"AI Model System\"\r\n        MC[Model Configurations]\r\n        MH[Model Handlers]\r\n        ORA[OpenRouter API]\r\n        GA[Gemini API]\r\n        DSA[DeepSeek API]\r\n        SSM[SuperSimpleAPIManager]\r\n    end\r\n    class MC,MH,ORA,GA,DSA,SSM ai;\r\n\r\n    subgraph \"Media & Multimodal\"\r\n        IP[Image Processor]\r\n        VP[Voice Processor]\r\n        MCE[Media Context Extractor]\r\n        MM[Multimodal Processor]\r\n        TAI[Together AI Image]\r\n        FLI[Flux Lora Image]\r\n    end\r\n    class IP,VP,MCE,MM,TAI,FLI media;\r\n\r\n    subgraph \"Memory & Context\"\r\n        MMGR[Memory Manager]\r\n        MHMGR[Model History Manager]\r\n        CMGR[Conversation Manager]\r\n        KGR[Knowledge Graph]\r\n    end\r\n    class MMGR,MHMGR,CMGR,KGR memory;\r\n\r\n    subgraph \"Group Collaboration\"\r\n        GCI[Group Chat Integration]\r\n        GCM[Group Context Manager]\r\n        GSA[Group Stats & Analytics]\r\n    end\r\n    class GCI,GCM,GSA group;\r\n\r\n    subgraph \"Document & Export\"\r\n        DP[Document Processor]\r\n        SDE[SpireDoc Exporter]\r\n        AIDG[AI Document Generator]\r\n    end\r\n    class DP,SDE,AIDG doc;\r\n\r\n    subgraph \"Database & Storage\"\r\n        DB[MongoDB]\r\n        CACHES[Caches]\r\n    end\r\n    class DB,CACHES db;\r\n\r\n    subgraph \"Infrastructure\"\r\n        DOCKER[Docker]\r\n        DCOMPOSE[Docker Compose]\r\n        ENV[.env Config]\r\n        PROC[Procfile]\r\n    end\r\n    class DOCKER,DCOMPOSE,ENV,PROC infra;\r\n\r\n    %% Connections\r\n    TG --> FA\r\n    WA --> FA\r\n    FA --> MW\r\n    MW --> RT\r\n    RT --> CH\r\n    CH --> BCH\r\n    CH --> IMCH\r\n    CH --> MDCH\r\n    CH --> DOCH\r\n    CH --> EXCH\r\n    CH --> CBH\r\n    CH --> OWAC\r\n\r\n    CH --> MC\r\n    CH --> MH\r\n    MH --> ORA\r\n    MH --> GA\r\n    MH --> DSA\r\n    MH --> SSM\r\n\r\n    CH --> IP\r\n    CH --> VP\r\n    CH --> MCE\r\n    CH --> MM\r\n    IMCH --> TAI\r\n    IMCH --> FLI\r\n\r\n    CH --> MMGR\r\n    CH --> MHMGR\r\n    CH --> CMGR\r\n    CH --> KGR\r\n\r\n    CH --> GCI\r\n    GCI --> GCM\r\n    GCI --> GSA\r\n\r\n    CH --> DP\r\n    DP --> SDE\r\n    DP --> AIDG\r\n\r\n    CH --> DB\r\n    CH --> CACHES\r\n    MMGR --> DB\r\n    KGR --> DB\r\n\r\n    FA --> DOCKER\r\n    FA --> DCOMPOSE\r\n    FA --> ENV\r\n    FA --> PROC\r\n\r\n    %% Group chat and memory\r\n    TG --> GCI\r\n    GCI --> CMGR\r\n    GCI --> MMGR\r\n    GCI --> KGR\r\n\r\n    %% Export and document\r\n    DOCH --> DP\r\n    DP --> SDE\r\n    DP --> AIDG\r\n\r\n    %% Media\r\n    IMCH --> IP\r\n    IMCH --> TAI\r\n    IMCH --> FLI\r\n\r\n    %% AI Model selection\r\n    MDCH --> MC\r\n    MC --> MH\r\n    MH --> ORA\r\n    MH --> GA\r\n    MH --> DSA\r\n\r\n    %% Caching\r\n    CH --> CACHES\r\n    MMGR --> CACHES\r\n\r\n    %% Database\r\n    DB --> MMGR\r\n    DB --> KGR\r\n\r\n    %% Infrastructure\r\n    DOCKER --> DCOMPOSE\r\n    DOCKER --> ENV\r\n    DOCKER --> PROC",
  "content_size": 4134,
  "collected_at": "2026-02-06T01:45:40.131870",
  "license": "mit",
  "license_name": "MIT License",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 12,
  "repo_forks": 0
}