{
  "id": "gh_flowchart_00564",
  "source": "github",
  "source_url": "https://github.com/rya000667/modern-financial-platform/blob/6ee7c24101c5c62cb357d809188677794cafa434/docs/flowchart-pull-ticker-data.mmd",
  "github_repo": "rya000667/modern-financial-platform",
  "github_file_path": "docs/flowchart-pull-ticker-data.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TD\n    A1[Start – parse CLI args<br/>--ticker, --start, --end, --csv] --> A2[Validate dates<br/>default 2020‑05 → current month<br/>coerce to month‑start]\n    A2 --> B1[Download daily OHLCV & dividends<br/>with yfinance]\n    B1 --> B2[Resample to month‑end<br/>• Close = last trading day close<br/>• Div = Σ dividends per month]\n    B2 --> C1[Create full month index<br/>from start → end]\n    C1 --> C2[Merge price & div data<br/>• Forward‑fill price<br/>• Fill missing div with 0]\n    C2 --> D1[Map month to IBKR margin APR<br/>using hard‑coded schedule]\n    D1 --> E1[Calculate derived columns]\n    E1 -->|monthly_yield, price_change, yield_change, yield_minus_margin| F1[Round to 2 dp]\n    F1 --> G1[Build final DataFrame<br/>ordered as spec]\n    G1 --> H1[If --csv, write file<br/> yield_margin_&lt;TICKER&gt;.csv]\n    G1 --> H2[If --plot, matplotlib<br/>monthly_yield vs IBKR margin]\n    H1 --> Z[End]\n    H2 --> Z\n\n\nflowchart Two\n    A1 [Start - Map month to IBKR margin APR<br/>using hard‑coded schedule]",
  "content_size": 1021,
  "collected_at": "2026-02-06T01:45:13.662860",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "rya000667",
  "repo_name": "modern-financial-platform",
  "repo_description": "A new and improved version of the financial investing platform",
  "repo_language": "Python",
  "repo_topics": [],
  "repo_created_at": "2025-06-21T16:49:25Z",
  "repo_updated_at": "2025-07-19T12:54:18Z"
}