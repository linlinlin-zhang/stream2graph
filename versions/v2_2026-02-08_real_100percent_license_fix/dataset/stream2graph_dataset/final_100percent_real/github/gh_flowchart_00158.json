{
  "id": "gh_flowchart_00158",
  "source": "github",
  "source_url": "https://github.com/wavlake/monorepo/blob/1f05fed26c5a064d7760c72567c2237055ed3e5d/architecture-simple.mmd",
  "github_repo": "wavlake/monorepo",
  "github_file_path": "architecture-simple.mmd",
  "diagram_type": "flowchart",
  "code": "---\nconfig:\n  theme: neo\n  layout: elk\n---\nflowchart TB\n subgraph subGraph0[\"Frontend Layer\"]\n        CLIENT[\"Web/Mobile App<br>and/or Third Party Client\"]\n        WALLET[\"Streaming Credit Wallet<br>Custom NIP (NIP-60)<br>\"]\n  end\n subgraph subGraph1[\"API Gateway Layer\"]\n        API[\"API Server<br>Go + Gin<br>JWT/NIP-98 Auth\"]\n        CDN[\"Content Middleware<br>Bearer Token Validation<br>402 Payment Required\"]\n  end\n subgraph subGraph2[\"Core Services\"]\n        AUTH[\"Authentication<br>Firebase + Nostr\"]\n        CONTENT[\"Content Management<br>Audio Files/Images\"]\n        MINT[\"Streaming Credit Mint<br>Cashu eCash<br>\"]\n  end\n subgraph subGraph3[\"Accounting\"]\n        ACCT[\"Accounting Service<br>Double-Entry Ledger\"]\n        ZBD[\"ZBD Integration<br>Lightning Payments\"]\n  end\n subgraph subGraph4[\"Data Layer\"]\n        DB1[(\"PostgreSQL<br>API DB\")]\n        DB2[(\"PostgreSQL<br>Accounting DB\")]\n        DB3[(\"PostgreSQL<br>Nutshell DB\")]\n        REDIS[(\"Redis<br>Cache/Sessions\")]\n        GCS[(\"Google Cloud<br>Storage<br>Audio/Images\")]\n  end\n subgraph subGraph5[\"Nostr Network\"]\n        NOSTR[\"Wavlake Relay\"]\n        NOSTR_PUBLIC[\"Public Relays\"]\n  end\n    CLIENT --> NOSTR & NOSTR_PUBLIC & CDN\n    WALLET <--> MINT\n    WALLET <-.-> CLIENT\n    CDN --> MINT & ZBD & GCS & REDIS\n    CLIENT -- Artist Users only --> API\n    API --> AUTH & CONTENT\n    AUTH --> DB1\n    CONTENT --> DB1 & GCS\n    ACCT --> DB2 & REDIS\n    MINT --> DB3\n    ZBD --> ACCT\n     CLIENT:::existing\n     WALLET:::existing\n     API:::existing\n     CDN:::middleware\n     AUTH:::existing\n     CONTENT:::existing\n     MINT:::existing\n     ACCT:::existing\n     ZBD:::existing\n     DB1:::data\n     DB2:::data\n     DB3:::data\n     REDIS:::data\n     GCS:::data\n     NOSTR:::external\n     NOSTR_PUBLIC:::external\n    classDef existing fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#000,font-weight:bold\n    classDef external fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000,font-weight:bold\n    classDef data fill:#f3e5f5,stroke:#6a1b9a,stroke-width:2px,color:#000,font-weight:bold\n    classDef middleware fill:#fff9c4,stroke:#f57f17,stroke-width:3px,color:#000,font-weight:bold\n    style MINT fill:#FFF9C4,stroke:#FF6D00\n    style ACCT stroke:#FF6D00,fill:#FFCDD2\n    style ZBD stroke:#FF6D00,fill:#FFCDD2\n    style subGraph3 fill:#FFFFFF\n",
  "content_size": 2320,
  "collected_at": "2026-02-06T01:42:18.670849",
  "compilation_status": "failed",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}