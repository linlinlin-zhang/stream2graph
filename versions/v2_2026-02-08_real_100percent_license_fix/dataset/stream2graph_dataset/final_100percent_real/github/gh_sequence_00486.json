{
  "id": "gh_sequence_00486",
  "source": "github",
  "source_url": "https://github.com/noyqdave/accounting-ledger-service/blob/046cced0c1a13ed177e216d1e028e3baea512856/docs/diagrams/use-case-creation.mmd",
  "github_repo": "noyqdave/accounting-ledger-service",
  "github_file_path": "docs/diagrams/use-case-creation.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    participant Client\n    participant Filter as FeatureFlagFilter\n    participant FFS as FeatureFlagService\n    participant Controller as TransactionController\n    participant MA as MetricsAspect\n    participant Service as CreateTransactionService\n    participant Adapter as TransactionRepositoryAdapter\n    participant DB as H2 Database\n    participant Domain as Transaction Domain\n    \n    Client->>Filter: POST /transactions<br/>{amount: 100.00, description: \"Office supplies\", type: \"EXPENSE\"}\n    \n    Note over Filter: Feature Flag Check\n    Filter->>FFS: Check \"create-transaction\" flag\n    FFS-->>Filter: ✓ Feature enabled\n    Filter->>Controller: Forward request\n    \n    Note over Controller: Metrics Tracking\n    Controller->>MA: Track \"transactions.created\"\n    MA-->>Controller: ✓ Metric recorded\n    \n    Note over Controller: DTO to Domain Mapping\n    Controller->>Domain: new Transaction(amount, description, type)\n    Domain->>Domain: Validate amount > 0\n    Domain->>Domain: Validate description not empty\n    Domain->>Domain: Generate UUID\n    Domain->>Domain: Set current timestamp\n    Domain-->>Controller: ✓ Transaction created\n    \n    Note over Controller: Business Logic\n    Controller->>Service: create(transaction)\n    Service->>Adapter: save(transaction)\n    \n    Note over Adapter: Domain to Entity Mapping\n    Adapter->>Adapter: mapToEntity(transaction)\n    Adapter->>DB: save(TransactionEntity)\n    DB-->>Adapter: ✓ Entity saved\n    \n    Note over Adapter: Entity to Domain Mapping\n    Adapter->>Adapter: mapToDomain(savedEntity)\n    Adapter-->>Service: Transaction domain object\n    Service-->>Controller: Transaction\n    Controller-->>Filter: Transaction\n    Filter-->>Client: HTTP 200<br/>{id: \"uuid\", amount: 100.00, description: \"Office supplies\", type: \"EXPENSE\", date: \"2024-01-15T10:30:00\"}\n",
  "content_size": 1847,
  "collected_at": "2026-02-06T01:32:58.334759",
  "compilation_status": "failed",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "noyqdave",
  "repo_name": "accounting-ledger-service",
  "repo_description": "A Java microservice for managing expense and revenue ledger using Hexagonal Architecture",
  "repo_language": "Java",
  "repo_topics": [],
  "repo_created_at": "2025-03-22T14:40:58Z",
  "repo_updated_at": "2025-12-23T14:28:24Z",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}