{
  "id": "gh_class_01134",
  "source": "github",
  "source_url": "https://github.com/tkin91e55/zmqNotifier/blob/31aa5819f73d974ed9644a0e323588241049fb7a/docs/config_uml.mmd",
  "github_repo": "tkin91e55/zmqNotifier",
  "github_file_path": "docs/config_uml.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    %% Enums\n    class StorageBackend {\n        <<enumeration>>\n        CSV\n        SQLITE\n    }\n\n\n    %% Simple Configuration Classes\n    class BrokerSettings {\n        +int brokertime_tz = 0\n    }\n\n    class ZmqSettings {\n        +str host = \"localhost\"\n        +int push_port = 32768\n        +int pull_port = 32769\n        +int sub_port = 32770\n        +str client_id = \"zmq-notifier\"\n    }\n\n    class StorageSettings {\n        +Path data_path = \"./data\"\n        +StorageBackend backend = CSV\n        +bool compression_enabled = true\n        +int retention_days = 180\n        +int flush_interval_minutes = 5\n    }\n\n    class DataValidationSettings {\n        +tuple~str~ supported_symbols\n        +tuple~str~ supported_timeframes\n        +_normalize_timeframes()\n    }\n\n    class LoggingSettings {\n        +str level = \"INFO\"\n        +str fmt\n        +str datefmt\n        +Path log_dir = \"./logs\"\n        +str file_name = \"runtime.log\"\n        +int max_bytes\n        +int backup_count\n        +bool console_enabled = true\n        +str|None console_level\n        +str|None file_level\n        +bool propagate = true\n        +dict~str,str~ loggers\n    }\n\n    %% ========================================================================\n    %% NOTIFIER CONFIGURATION HIERARCHY (grouped namespace)\n    %% ========================================================================\n    namespace NotifierHierarchy {\n        class TelegramSettings {\n            +str|None telegram_bot_token\n            +str|None telegram_chat_id\n        }\n\n        class SymbolTrackerConfig {\n            +int|None cooldown_unit\n            +int|None min_buckets_calculation\n            +dict~str,int~|None num_bucket_retention\n            +_upper_retention_keys()\n            +_validate_retention()\n        }\n\n        class SymbolNotifierConfig {\n            +dict~str,tuple~int,int~~ thresholds\n            +SymbolTrackerConfig|None tracker\n            +_validate_thresholds()\n        }\n\n        class NotificationDispatchSettings {\n            +int message_interval_seconds = 15\n            +TelegramSettings telegram\n        }\n\n        class NotifierSettings {\n            +dict~str,SymbolNotifierConfig~ symbols\n            +SymbolTrackerConfig tracker_defaults\n            +NotificationDispatchSettings dispatch\n            +_upper_symbol_keys()\n            +symbol_config(str) SymbolNotifierConfig|None\n            +resolve_tracker_config(str) SymbolTrackerConfig\n            +thresholds_for(str) dict~str,tuple~int,int~~|None\n        }\n    }\n    %% ========================================================================\n\n    %% Top-level Application Settings\n    class AppSettings {\n        +BrokerSettings broker\n        +ZmqSettings zmq\n        +StorageSettings storage\n        +DataValidationSettings validation\n        +NotifierSettings notifier\n        +LoggingSettings logging\n        +bool auto_create_dirs = true\n        +_materialise_directories()\n    }\n\n    %% Helper Functions\n    class UtilityFunctions {\n        <<utility>>\n        +_default_tracker_settings() SymbolTrackerConfig\n        +_ensure_directory(Path) Path\n        +_resolve_path(Path) Path\n        +configure_logging(LoggingSettings?) LoggingSettings\n        +get_settings(**overrides) AppSettings\n    }\n\n    class StdoutStreamHandler {\n        <<logging>>\n        +emit(LogRecord)\n    }\n\n    %% Relationships - Simple configs\n    StorageSettings --> StorageBackend : uses\n\n    %% Relationships - Notifier hierarchy (within namespace)\n    SymbolNotifierConfig o-- SymbolTrackerConfig : optional\n\n    NotificationDispatchSettings *-- TelegramSettings : contains\n    NotifierSettings *-- NotificationDispatchSettings : contains\n    NotifierSettings *-- SymbolTrackerConfig : tracker_defaults\n    NotifierSettings o-- SymbolNotifierConfig : symbols dict\n\n    %% Relationships - AppSettings to all configs\n    AppSettings *-- BrokerSettings : contains\n    AppSettings *-- ZmqSettings : contains\n    AppSettings *-- StorageSettings : contains\n    AppSettings *-- DataValidationSettings : contains\n    AppSettings *-- NotifierSettings : contains\n    AppSettings *-- LoggingSettings : contains\n\n    %% Utility relationships\n    UtilityFunctions ..> SymbolTrackerConfig : creates\n    UtilityFunctions ..> AppSettings : creates\n    UtilityFunctions ..> LoggingSettings : configures\n\n    %% Notes\n    note for NotifierSettings \"Contains helper methods to:<br>- Get symbol config<br>- Resolve tracker config with overrides<br>- Get thresholds per symbol\"\n    note for AppSettings \"Root configuration class<br>Loaded from .env with prefix:<br>ZMQ_NOTIFIER_\"\n    note for SymbolTrackerConfig \"NOTE: num_bucket_retention<br>REPLACES entire dict when<br>overriding, not merged\"\n",
  "content_size": 4737,
  "collected_at": "2026-02-06T01:53:26.082545",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0
}