{
  "id": "gh_architecture_01602",
  "source": "github",
  "source_url": "https://github.com/rtyx/project-module-apr2025/blob/dc1d9e46f8d5b5f2e8fe98b37a25825f031df456/docs/diagrams/images/system-architecture-components.mmd",
  "github_repo": "rtyx/project-module-apr2025",
  "github_file_path": "docs/diagrams/images/system-architecture-components.mmd",
  "diagram_type": "architecture",
  "code": "graph TB\n    %% High-level Component Diagram\n    %% Based on actual codebase structure\n\n    subgraph \"Next.js Web Application\"\n        direction TB\n\n        subgraph \"Routing Layer\"\n            APP_ROUTER[App Router<br/>/lang/* routes]\n            API_ROUTER[API Router<br/>/api/lang/* routes]\n        end\n\n        subgraph \"Page Components\"\n            HOMEPAGE[HomePage<br/>Collection overview]\n            ARTWORK_PAGES[Artwork Pages<br/>List, Detail, Favorites]\n            PERSON_PAGES[Person Pages<br/>List, Detail, Search]\n        end\n\n        subgraph \"UI Components\"\n            MANTAIN_UI[Mantine UI Components<br/>@mantine/core, @mantine/hooks]\n            CUSTOM_UI[Custom Components<br/>Search, Filters, Chat]\n            IIIF_VIEWER[IIIF Viewer<br/>OpenSeadragon integration]\n        end\n\n        subgraph \"API Handlers\"\n            ARTWORK_API[\"Artwork API<br/>/api/[lang]/artworks/*\"]\n            PERSON_API[\"Person API<br/>/api/[lang]/persons/*\"]\n            RAG_API[\"RAG API<br/>/api/[lang]/rag/*\"]\n            IMAGE_PROXY[\"Image Proxy<br/>/api/images/*\"]\n            METADATA_API[\"Metadata API<br/>/api/[lang]/{categories,movements,keywords}\"]\n        end\n\n        subgraph \"Services\"\n            RAG_SERVICE[RAGService<br/>Hybrid search + LLM]\n            SEARCH_SERVICE[SearchService<br/>Elasticsearch queries]\n            DATA_SERVICE[DataService<br/>MongoDB queries]\n            ZETCOM_SERVICE[ZetcomService<br/>External API client]\n        end\n\n        subgraph \"Repositories/Adapters\"\n            MONGO_REPO[MongoRepo<br/>MongoDB operations]\n            ES_ADAPTER[ESAdapter<br/>Elasticsearch operations]\n            SOLR_CLIENT[SolrClient<br/>External Solr queries]\n        end\n\n        subgraph \"Utilities\"\n            I18N[I18n Layer<br/>German/English support]\n            CACHE[Cache Layer<br/>In-memory caching]\n            LOGGER[Logger<br/>Pino logging]\n            MAPPERS[Data Mappers<br/>Raw → App models]\n        end\n    end\n\n    subgraph \"External Dependencies\"\n        MONGODB[(MongoDB<br/>Source of truth)]\n        ELASTICSEARCH[(Elasticsearch<br/>Search index)]\n        ZETCOM_API[Zetcom API<br/>Museum data]\n        OPENAI_API[OpenAI API<br/>LLM + Embeddings]\n        SOLR_API[Solr API<br/>collection.kunsthaus.ch]\n    end\n\n    %% Component dependencies\n    APP_ROUTER --> HOMEPAGE\n    APP_ROUTER --> ARTWORK_PAGES\n    APP_ROUTER --> PERSON_PAGES\n\n    API_ROUTER --> ARTWORK_API\n    API_ROUTER --> PERSON_API\n    API_ROUTER --> RAG_API\n    API_ROUTER --> IMAGE_PROXY\n    API_ROUTER --> METADATA_API\n\n    HOMEPAGE --> MANTAIN_UI\n    ARTWORK_PAGES --> MANTAIN_UI\n    ARTWORK_PAGES --> CUSTOM_UI\n    ARTWORK_PAGES --> IIIF_VIEWER\n    PERSON_PAGES --> MANTAIN_UI\n    PERSON_PAGES --> CUSTOM_UI\n\n    ARTWORK_API --> DATA_SERVICE\n    PERSON_API --> DATA_SERVICE\n    PERSON_API --> SEARCH_SERVICE\n    RAG_API --> RAG_SERVICE\n    IMAGE_PROXY --> ZETCOM_SERVICE\n    METADATA_API --> DATA_SERVICE\n\n    RAG_SERVICE --> SEARCH_SERVICE\n    RAG_SERVICE --> OPENAI_API\n    SEARCH_SERVICE --> ES_ADAPTER\n    DATA_SERVICE --> MONGO_REPO\n    ZETCOM_SERVICE --> ZETCOM_API\n\n    MONGO_REPO --> MONGODB\n    ES_ADAPTER --> ELASTICSEARCH\n    SOLR_CLIENT --> SOLR_API\n\n    %% Utility dependencies\n    RAG_SERVICE --> CACHE\n    RAG_SERVICE --> LOGGER\n    DATA_SERVICE --> MAPPERS\n    ARTWORK_PAGES --> I18N\n    PERSON_PAGES --> I18N\n\n    %% Styling\n    classDef routing fill:#e3f2fd,stroke:#1976d2,stroke-width:2px\n    classDef pages fill:#e8f5e8,stroke:#388e3c,stroke-width:2px\n    classDef ui fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px\n    classDef api fill:#fff3e0,stroke:#f57c00,stroke-width:2px\n    classDef service fill:#fce4ec,stroke:#c2185b,stroke-width:2px\n    classDef repo fill:#f1f8e9,stroke:#689f38,stroke-width:2px\n    classDef util fill:#e0f2f1,stroke:#00695c,stroke-width:2px\n    classDef external fill:#ffebee,stroke:#d32f2f,stroke-width:2px\n\n    class APP_ROUTER,API_ROUTER routing\n    class HOMEPAGE,ARTWORK_PAGES,PERSON_PAGES pages\n    class MANTAIN_UI,CUSTOM_UI,IIIF_VIEWER ui\n    class ARTWORK_API,PERSON_API,RAG_API,IMAGE_PROXY,METADATA_API api\n    class RAG_SERVICE,SEARCH_SERVICE,DATA_SERVICE,ZETCOM_SERVICE service\n    class MONGO_REPO,ES_ADAPTER,SOLR_CLIENT repo\n    class I18N,CACHE,LOGGER,MAPPERS util\n    class MONGODB,ELASTICSEARCH,ZETCOM_API,OPENAI_API,SOLR_API external",
  "content_size": 4321,
  "collected_at": "2026-02-06T01:48:26.314101",
  "license": "none",
  "license_name": "No License",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}