{
  "id": "gh_flowchart_00784",
  "source": "github",
  "source_url": "https://github.com/mtb-technology/automail-box3-automation/blob/384a2fedcd6df5dbaeee06b979c75bf342e00dcf/diagrams/workflow-diagram-full.mmd",
  "github_repo": "mtb-technology/automail-box3-automation",
  "github_file_path": "diagrams/workflow-diagram-full.mmd",
  "diagram_type": "flowchart",
  "code": "%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#4A90E2','primaryTextColor':'#fff','primaryBorderColor':'#2E5C8A','lineColor':'#2E5C8A','secondaryColor':'#50C878','tertiaryColor':'#FFB84D'}}}%%\n\nflowchart TD\n    Start([Customer Email<br/>with box3 tag]) --> WelcomeWebhook[ğŸ”— Workflow 1:<br/>AI Generate Welcome]\n\n    WelcomeWebhook --> AIWelcome[ğŸ¤– AI Agent:<br/>Personalized Welcome Email<br/>+ Add DOCS_REQUESTED tag]\n    AIWelcome --> DocsReq[ğŸ·ï¸ Tag:<br/>DOCS_REQUESTED]\n\n    DocsReq --> WaitDocs{Customer<br/>Uploads Docs?}\n\n    WaitDocs -->|No - After 2 days| Reminder1[ğŸ“§ Workflow 5:<br/>Reminder 1: Upload]\n    Reminder1 --> WaitDocs\n\n    WaitDocs -->|No - After 7 days| Reminder2[ğŸ“§ Workflow 6:<br/>Reminder 2: Final]\n    Reminder2 --> WaitDocs\n\n    WaitDocs -->|Yes - Customer replies with attachment| AttachCheck[âœ“ Workflow 2:<br/>Attachment Detection<br/>NO AI NEEDED]\n    AttachCheck --> DocsReceived[ğŸ·ï¸ Add Tag:<br/>DOCS_RECEIVED]\n\n    DocsReceived --> Route1[ğŸ“§ Workflow 4:<br/>Route to Intake]\n    Route1 --> AssignIntake[Assign: Intake Agent<br/>ID: 22]\n    Route1 --> AddTagReview[ğŸ·ï¸ Add Tag:<br/>DOCS_UNDER_REVIEW]\n\n    AssignIntake --> IntakeAnalyze[ğŸ‘¤ Intake Agent:<br/>Analyze Tax Return]\n    IntakeAnalyze --> DetermineQ{Which Questions<br/>Needed?}\n    DetermineQ --> QBlocks[Question Categories:<br/>WONING, BELEGGINGEN,<br/>SPAARGELD, SCHULDEN]\n\n    QBlocks --> ManualTrigger1[ğŸ‘† MANUAL Workflow 7:<br/>Agent executes<br/>Send Questions<br/><em>Quality control checkpoint</em>]\n    ManualTrigger1 --> QSent[ğŸ·ï¸ Add Tag:<br/>QUESTIONS_SENT]\n\n    QSent --> WaitAnswers[â±ï¸ Wait for<br/>Customer Answers]\n    WaitAnswers --> CustomerAnswers[Customer Replies<br/>with Answers]\n    CustomerAnswers --> IntentDetect2[ğŸ¤– Workflow 3:<br/>Intent Detection<br/>Auto-adds QUESTIONS_ANSWERED]\n    IntentDetect2 --> QAnswered[ğŸ·ï¸ Add Tag:<br/>QUESTIONS_ANSWERED]\n\n    QAnswered --> Route2[ğŸ“§ Workflow 8:<br/>Route to Fiscalist]\n    Route2 --> AssignFiscalist[Assign: Quote Agent<br/>Fiscalist ID: 23]\n\n    AssignFiscalist --> FiscalCalc[ğŸ‘¤ Fiscalist:<br/>Calculate Offer]\n    FiscalCalc --> CalcDetails[Determine:<br/>â€¢ Expected refund range<br/>â€¢ Fee amount<br/>â€¢ Success probability]\n\n    CalcDetails --> ManualTrigger2[ğŸ‘† MANUAL Workflow 9:<br/>Fiscalist executes<br/>Send Offer<br/><em>Quality control checkpoint</em>]\n    ManualTrigger2 --> OfferSent[ğŸ·ï¸ Add Tag:<br/>OFFER_SENT]\n    ManualTrigger2 --> AssignPayment[Assign: Payment Agent<br/>ID: 26]\n\n    AssignPayment --> WaitAccept{Customer<br/>Accepts?}\n\n    WaitAccept -->|No - After 3 days| OfferRem1[ğŸ“§ Workflow 10:<br/>Reminder 1: Offer]\n    OfferRem1 --> WaitAccept\n\n    WaitAccept -->|No - After 10 days| OfferRem2[ğŸ“§ Workflow 11:<br/>Reminder 2: Final + Decline Option]\n    OfferRem2 --> WaitAccept\n\n    WaitAccept -->|Customer: ik wil niet verder| IntentDetect3[ğŸ¤– Workflow 3:<br/>Intent Detection]\n    IntentDetect3 --> ClosedLost[ğŸ·ï¸ Add Tag:<br/>CLOSED_LOST]\n    ClosedLost --> CloseEmail[ğŸ“§ Workflow 12:<br/>Closing Email]\n    CloseEmail --> End1([End:<br/>Closed Lost])\n\n    WaitAccept -->|Yes - Customer accepts| IntentDetect4[ğŸ¤– Workflow 3:<br/>Intent Detection]\n    IntentDetect4 --> ProposalAccepted[ğŸ·ï¸ Add Tag:<br/>Proposal_Accepted]\n    ProposalAccepted --> Email4b[ğŸ“§ Workflow 13:<br/>Payment & Sign Email]\n    Email4b --> PaymentStart[ğŸ·ï¸ Add Tag:<br/>PAYMENT_STARTED]\n\n    PaymentStart --> WaitPayment[â±ï¸ Wait for<br/>External Payment System]\n    WaitPayment --> PaymentWebhook[ğŸ”— External Webhook:<br/>Payment Completed]\n    PaymentWebhook --> SignedPaid[ğŸ·ï¸ Add Tag:<br/>SIGNED_AND_PAID]\n\n    SignedPaid --> Email5[ğŸ“§ Workflow 14:<br/>Email 5: Confirmation]\n    Email5 --> StatusActive[Set Status: Active]\n    StatusActive --> Success([Success:<br/>Ready to Start<br/>Fiscalist Assigned])\n\n    %% AI Draft runs throughout\n    AssignIntake -.-> AIDraft[ğŸ¤– Workflow 15:<br/>AI Draft Generator]\n    AssignFiscalist -.-> AIDraft\n    AssignPayment -.-> AIDraft\n    AIDraft -.-> AgentReview[Agent Reviews Draft<br/>Before Sending]\n\n    %% Styling\n    classDef webhookStyle fill:#4A90E2,stroke:#2E5C8A,stroke-width:3px,color:#fff\n    classDef workflowStyle fill:#50C878,stroke:#2E8B57,stroke-width:2px,color:#fff\n    classDef aiStyle fill:#9B59B6,stroke:#7D3C98,stroke-width:3px,color:#fff\n    classDef stateStyle fill:#FFB84D,stroke:#E67E22,stroke-width:2px,color:#000\n    classDef manualStyle fill:#E74C3C,stroke:#C0392B,stroke-width:3px,color:#fff\n    classDef agentStyle fill:#3498DB,stroke:#2874A6,stroke-width:2px,color:#fff\n    classDef endStyle fill:#95A5A6,stroke:#7F8C8D,stroke-width:2px,color:#fff\n\n    class Reminder1,Reminder2,Route1,Route2,OfferRem1,OfferRem2,CloseEmail,Email4b,Email5 workflowStyle\n    class IntentDetect2,IntentDetect3,IntentDetect4,AIWelcome,AIDraft aiStyle\n    class DocsReq,DocsReceived,AddTagReview,QSent,QAnswered,OfferSent,ClosedLost,ProposalAccepted,PaymentStart,SignedPaid stateStyle\n    class ManualTrigger1,ManualTrigger2 manualStyle\n    class AssignIntake,AssignFiscalist,AssignPayment,IntakeAnalyze,FiscalCalc agentStyle\n    class WelcomeWebhook,PaymentWebhook webhookStyle\n    class End1,Success,StatusActive endStyle\n",
  "content_size": 5140,
  "collected_at": "2026-02-06T01:48:02.090502",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚"
}