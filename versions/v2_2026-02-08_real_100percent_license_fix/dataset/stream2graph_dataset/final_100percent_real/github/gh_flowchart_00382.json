{
  "id": "gh_flowchart_00382",
  "source": "github",
  "source_url": "https://github.com/trutkowski22/claude-task-master/blob/80b6b87d8682d53235785872ed02e4e8c2106272/project-overlord-context/Pre-CLI-Removal-MMDs/Shared-Infrastructure-Layer/utils_create-mcp-config.mmd",
  "github_repo": "trutkowski22/claude-task-master",
  "github_file_path": "project-overlord-context/Pre-CLI-Removal-MMDs/Shared-Infrastructure-Layer/utils_create-mcp-config.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TB\n    subgraph createMcpConfig-Imports[\"createMcpConfig-Imports\"]\n        I1[\"IMPORT: fs, FROM: fs\"]\n        I2[\"IMPORT: path, FROM: path\"]\n        I3[\"IMPORT: log, FROM: /claude-task-master/scripts/modules/utils.js\"]\n    end\n    \n    subgraph createMcpConfig-FunctionsDefined[\"createMcpConfig-Functions Defined\"]\n        FU1[\"FUNCTION: formatJSONWithTabs\"]\n        FU2[\"FUNCTION: setupMCPConfiguration\"]\n        FU3[\"FUNCTION: removeTaskMasterMCPConfiguration\"]\n    end\n    \n    subgraph createMcpConfig-Exports[\"createMcpConfig-Exports\"]\n        E1[\"EXP: setupMCPConfiguration\"]\n        E2[\"EXP: removeTaskMasterMCPConfiguration\"]\n    end\n    \n    subgraph createMcpConfig-Parameters[\"createMcpConfig-Parameters\"]\n        P1[\"PARAM: {Object} obj - JSON object to format\"]\n        P2[\"PARAM: {string} projectRoot - Target project directory\"]\n        P3[\"PARAM: {string} mcpConfigPath - Relative path to MCP config file\"]\n    end\n    \n    subgraph createMcpConfig-Constants[\"createMcpConfig-Const Declarations\"]\n        C1[\"CONST: json, VALUE: JSON.stringify(obj, null, '\\\\t')\"]\n        C2[\"CONST: mcpPath, VALUE: path.join(projectRoot, mcpConfigPath)\"]\n        C3[\"CONST: configDir, VALUE: path.dirname(mcpPath)\"]\n        C4[\"CONST: newMCPServer, VALUE: task-master-ai server configuration\"]\n        C5[\"CONST: mcpConfig, VALUE: JSON.parse(fs.readFileSync(mcpPath, 'utf8'))\"]\n        C6[\"CONST: hasMCPString, VALUE: check for existing task-master-ai in args\"]\n        C7[\"CONST: newMCPConfig, VALUE: { mcpServers: newMCPServer }\"]\n        C8[\"CONST: result, VALUE: operation result object\"]\n        C9[\"CONST: hasTaskMaster, VALUE: check for task-master-ai configuration\"]\n        C10[\"CONST: remainingServers, VALUE: Object.keys(mcpConfig.mcpServers)\"]\n    end\n    \n    subgraph createMcpConfig-ExecutionFlow[\"createMcpConfig-Execution Flow\"]\n        FL1[\"Format JSON with tabs and collapse simple arrays to single lines\"]\n        FL2[\"Set up MCP configuration for task-master-ai package\"]\n        FL3[\"Build full path to MCP config file and create directory if needed\"]\n        FL4[\"Define new MCP server configuration with environment variables\"]\n        FL5[\"Check if MCP config file exists and read existing configuration\"]\n        FL6[\"Verify if task-master-ai is already configured in args or server name\"]\n        FL7[\"Add task-master-ai server to existing configuration if not present\"]\n        FL8[\"Create new MCP configuration file if none exists\"]\n        FL9[\"Remove Task Master MCP configuration while preserving other servers\"]\n        FL10[\"Delete specific task-master-ai servers and servers with task-master-ai in args\"]\n        FL11[\"Delete entire MCP file if no other servers remain\"]\n        FL12[\"Return result object with operation status and details\"]\n    end\n    \n    subgraph createMcpConfig[\"create-mcp-config.js\"]\n        createMcpConfig-Imports\n        createMcpConfig-FunctionsDefined\n        createMcpConfig-Exports\n        createMcpConfig-Parameters\n        createMcpConfig-Constants\n        createMcpConfig-ExecutionFlow\n    end\n    \n    FL1 --> FL2\n    FL2 --> FL3\n    FL3 --> FL4\n    FL4 --> FL5\n    FL5 --> FL6\n    FL6 --> FL7\n    FL7 --> FL8\n    FL8 --> FL9\n    FL9 --> FL10\n    FL10 --> FL11\n    FL11 --> FL12",
  "content_size": 3258,
  "collected_at": "2026-02-06T01:43:45.502901",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}