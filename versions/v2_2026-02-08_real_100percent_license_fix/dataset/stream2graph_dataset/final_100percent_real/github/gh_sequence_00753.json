{
  "id": "gh_sequence_00753",
  "source": "github",
  "source_url": "https://github.com/indoria/persona-forge/blob/13f68c7b54b0d2318bff5ef28f40ae9dc34bf666/files/prompt-transformation.mmd",
  "github_repo": "indoria/persona-forge",
  "github_file_path": "files/prompt-transformation.mmd",
  "diagram_type": "sequence",
  "code": "```mermaid\nsequenceDiagram\n    participant U as User\n    participant F as Frontend\n    participant B as Backend Controller\n    participant P as Persona Module\n    participant M as Mode Module\n    participant K as Knowledge Base Module\n    participant N as NLP Module\n    participant C as Conversation Module\n\n    U->>F: Type prompt (e.g., \"Tell me about branding strategies.\")\n    F->>B: Send prompt, persona, mode (raw input)\n    B->>P: Fetch persona settings (style, tone, language)\n    B->>M: Fetch conversation mode settings (e.g., educator)\n    B->>K: Fetch user's knowledge base entries\n    B->>N: Preprocess prompt (tokenize, lemmatize, extract entities)\n    N-->>B: Return preprocessed input (lemmas, entities)\n    B->>K: Match preprocessed input with KB entries\n    alt KB Match Found\n        K-->>B: Return KB answer\n        B->>C: Format response using persona/mode style, KB answer\n    else No KB Match\n        B->>C: Compose response using persona/mode, NLP output\n    end\n    C-->>B: Final AI response (persona/mode flavored)\n    B-->>F: Return response\n    F-->>U: Show persona-styled answer\n```",
  "content_size": 1110,
  "collected_at": "2026-02-06T01:36:32.345762",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 1
}