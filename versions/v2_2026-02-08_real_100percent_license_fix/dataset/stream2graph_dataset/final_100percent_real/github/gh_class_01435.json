{
  "id": "gh_class_01435",
  "source": "github",
  "source_url": "https://github.com/Portgas37/BrainsGraph/blob/46d398af2cd496abff9c811e9007fec83921f9d5/D3JS-UI/Musicstore-program.mmd",
  "github_repo": "Portgas37/BrainsGraph",
  "github_file_path": "D3JS-UI/Musicstore-program.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    %% Main Application Classes\n    class CL {\n        +generateAESKey(String keyPath) Key\n        +readAESKey(String keyPath) Key\n        +calculateMAC(String message, int id, byte[] nonce, Key key) String\n        +calculateMAC(String message, byte[] nonce, Key key) String\n        +protect(byte[] message, byte[] nonce, int ID, Key symKey_c) JsonObject\n        +protect(byte[] message, byte[] nonce, Key symKey_c) JsonObject\n        +protectCTR(byte[] message, byte[] nonce, Key symKey_c) byte[]\n        +protect(byte[] message, byte[] nonce, Key symKey_c, Key symKey_f) JsonObject\n        +unprotect(JsonObject json, Key symKey) JsonObject\n        +unprotect(JsonObject json, Key symKey, byte[] nonce) JsonObject\n        +unprotectCTR(byte[] encryptedM, Key symKey, byte[] nonce) byte[]\n        +check(String message, byte[] nonce, Key key, String macToCheck) boolean\n        +check(String message, int id, byte[] nonce, Key key, String macToCheck) boolean\n        +incrementCounterInNonce(byte[] nonce, int offset) byte[]\n        +incrementByteNonce(byte[] n) byte[]\n    }\n\n    class CLI {\n        +main(String[] args) void\n        -testEncryptionMethods(Scanner scanner, CL cl) void\n    }\n\n    class GUI {\n        +main(String[] args) void\n    }\n\n    class Client {\n        -String userName\n        -int percentageBytes\n        -String choosenSong\n        -InputStream is\n        -int len\n        -byte[] nonce\n        -int id\n        -Key key_c\n        -Key key_f\n        -SSLSocket socket\n        -BufferedOutputStream os\n        -byte[] data\n        -int media_content_length\n        +startClient(String host, int port) void\n        +promptUserName() void\n        +promptSongSelection() void\n        +playMusic() void\n        -getPercentageInput() int\n        +updateMessage(String message) void\n        +updateMusicInfo(JsonObject mediaInfo) void\n        +main(String[] args) void\n    }\n\n    class Server {\n        +int NB_BYTES_PACKET_MUSIC\n        +startServer(int port) void\n        +givePartByte(byte[] originalSong, int nb) byte[]\n        +main(String[] args) void\n    }\n\n    %% Database Package\n    class Queries {\n        +String GET_USER_BY_ID_QUERY\n        +String ADD_USER_QUERY\n        +String GET_MEDIA_BY_TITLE_QUERY\n        +String ADD_MEDIA_QUERY\n        +String GET_MEDIA_CONTENT_BY_TITLE_QUERY\n        +String ADD_MEDIA_CONTENT_QUERY\n        +String GET_FAMILY_KEY_BY_ID_QUERY\n        +String GET_USER_KEY_BY_ID_QUERY\n        +String COUNT_MEDIA_BY_ID\n    }\n\n    class Populate {\n        -Populate()\n        +populate() void\n    }\n\n    class Mp3Converter {\n        +readAudioFile(String filePath) byte[]\n        +main(String[] args) void\n    }\n\n    class DatabaseUtils {\n        -DatabaseUtils()\n        -getUsers(Connection conn, String query, int parameter) List~User~\n        -extractUserFromResultSet(ResultSet resultSet) User\n        +getUserById(Connection conn, int userId) User\n        -getMedia(Connection conn, String query, String parameter) List~Media~\n        -extractMediaFromResultSet(ResultSet resultSet) Media\n        +getMediaByTitle(Connection conn, String title) Media\n        -getMediaContent(Connection conn, String query, String parameter) List~MediaContent~\n        -extractMediaContentFromResultSet(ResultSet resultSet) MediaContent\n        +getMediaContentById(Connection conn, String title) MediaContent\n        +addUser(Connection conn, User user) void\n        +addMedia(Connection conn, Media media) void\n        +addMediaContent(Connection conn, MediaContent mediaContent) void\n        +getSongInfoAsJsonById(Connection conn, String title) JsonObject\n        +checkUserMediaOwnership(Connection conn, int userId, String title) boolean\n        +getUserKeyById(Connection conn, int userId) String\n        +getFamilyKeyById(Connection conn, int userId) String\n        +getSongInfo(Connection conn, String title, int userId) JsonObject\n    }\n\n    class DataBaseConnector {\n        -Connection connection\n        -String url\n        -String username\n        -String password\n        -String DB_SETUP_FILE_NAME\n        -ClassPathResource classPathResource\n        +DataBaseConnector()\n        +createConnection() void\n        +setupTables() void\n        +getConnection() Connection\n        +closeConnection() void\n    }\n\n    class UserAccessException {\n        +UserAccessException(String message)\n    }\n\n    class DataBaseConnectionException {\n        +DataBaseConnectionException()\n        +DataBaseConnectionException(String message, Throwable cause)\n    }\n\n    %% Data Objects Package\n    class User {\n        -int userId\n        -String username\n        -String password\n        -String sharedSymmetricKey\n        -String familySymmetricKey\n        +User()\n        +User(int userId, String username, String password, String sharedSymmetricKey, String familySymmetricKey)\n        +getUserId() int\n        +getUsername() String\n        +getPassword() String\n        +getSharedSymmetricKey() String\n        +getFamilySymmetricKey() String\n        +setUserId(int userId) void\n        +setUsername(String username) void\n        +setPassword(String password) void\n        +setSharedSymmetricKey(String sharedSymmetricKey) void\n        +setFamilySymmetricKey(String familySymmetricKey) void\n    }\n\n    class Media {\n        -int mediaId\n        -String title\n        -int ownerId\n        -String format\n        -String artist\n        -String genre\n        +Media()\n        +Media(int media_id, int ownerId, String format, String artist, String title, String genre)\n        +getMediaId() int\n        +getOwnerId() int\n        +getFormat() String\n        +getArtist() String\n        +getTitle() String\n        +getGenre() String\n        +setMediaId(int mediaId) void\n        +setOwnerId(int ownerId) void\n        +setFormat(String format) void\n        +setArtist(String artist) void\n        +setTitle(String title) void\n        +setGenre(String genre) void\n        +toJson() String\n    }\n\n    class MediaInfo {\n        +toJson(Media media, MediaContent mediaContent)$ JsonObject\n    }\n\n    class MediaContent {\n        -int mediaContentId\n        -String titleContent\n        -int ownerId\n        -String lyrics\n        -String filePath\n        +MediaContent()\n        +MediaContent(int mediaContentId, int ownerId, String titleContent, String lyrics, String filePath)\n        +getMediaContentId() int\n        +getTitleContent() String\n        +getLyrics() String\n        +getFilePath() String\n        +getOwnerId() int\n        +setFilePath(String filePath) void\n        +setTitleContent(String titleContent) void\n        +setLyrics(String lyrics) void\n        +setMediaContentId(int mediaContentId) void\n        +setOwnerId(Integer ownerId) void\n        +toJson() String\n    }\n\n    class SecurityException {\n        +SecurityException(String message)\n    }\n\n    %% Base Lab Package\n    class SecureReader {\n        +main(String[] args) void\n    }\n\n    class SecureWriter {\n        +main(String[] args) void\n    }\n\n    class Base64Example {\n        +main(String[] args) void\n    }\n\n    class CryptoExample {\n        +main(String[] args) void\n        -readFile(String path) byte[]\n        +readSecretKey(String secretKeyPath) Key\n        +readPublicKey(String publicKeyPath) PublicKey\n        +readPrivateKey(String privateKeyPath) PrivateKey\n    }\n\n    class AESKeyGenerator {\n        +main(String[] args) void\n        +write(String keyPath) void\n        +read(String keyPath) Key\n    }\n\n    %% Relationships\n    CLI --> CL : uses\n    Client --> CL : uses\n    Server --> CL : uses\n    Server --> DataBaseConnector : uses\n    Server --> DatabaseUtils : uses\n    Client --> Server : connects to\n    \n    DatabaseUtils --> User : manages\n    DatabaseUtils --> Media : manages\n    DatabaseUtils --> MediaContent : manages\n    DatabaseUtils --> UserAccessException : throws\n    \n    DataBaseConnector --> DataBaseConnectionException : throws\n    \n    MediaInfo --> Media : uses\n    MediaInfo --> MediaContent : uses\n    \n    Populate --> User : creates\n    Populate --> Media : creates\n    Populate --> MediaContent : creates\n    Populate --> DataBaseConnector : uses\n    Populate --> DatabaseUtils : uses\n    Populate --> CL : uses\n    \n    DatabaseUtils --> Queries : uses\n    \n    User ..|> Serializable : implements\n    Media ..|> Serializable : implements\n    MediaContent ..|> Serializable : implements\n    MediaInfo ..|> Serializable : implements\n    \n    UserAccessException --|> Exception : extends\n    DataBaseConnectionException --|> Exception : extends\n    SecurityException --|> Exception : extends\n    \n    SecureReader --> CryptoExample : uses\n    SecureWriter --> CryptoExample : uses",
  "content_size": 8654,
  "collected_at": "2026-02-06T01:57:45.415299",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 1,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}