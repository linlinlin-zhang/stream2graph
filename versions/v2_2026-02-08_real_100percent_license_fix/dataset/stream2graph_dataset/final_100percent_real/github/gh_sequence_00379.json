{
  "id": "gh_sequence_00379",
  "source": "github",
  "source_url": "https://github.com/mht-ashkezari/gh-triage-mvp/blob/7c294fdfb94ef0a5ff7d7c9b5e981efda56f81e7/docs/arch/releases/v1.0.0/sequence_a2e.mmd",
  "github_repo": "mht-ashkezari/gh-triage-mvp",
  "github_file_path": "docs/arch/releases/v1.0.0/sequence_a2e.mmd",
  "diagram_type": "sequence",
  "code": "%%{init: {\n  \"securityLevel\": \"loose\",\n  \"themeVariables\": { \"fontFamily\": \"Inter, Roboto, Arial, sans-serif\" }\n}}%%\nsequenceDiagram\n  %% Sequence View: A→E pipeline, with LEGEND-colored sections\n  autonumber\n\n  participant User as Maintainer / Trigger\n  participant Frontend as Frontend (Next.js)\n  participant BFF as BFF (NestJS)\n  participant Runs as Runs Service\n  participant ML as ML Microservices\n  participant SQL as SQL\n  participant Blob as Blob Storage\n  participant OTel as OTel Collector\n  participant GitHub as GitHub API\n  participant AzureAI as Azure OpenAI\n  participant Vault as Key Vault\n\n  %% ACTOR (blue)\n  rect rgba(207,232,255,0.35)\n    User->>Frontend: Click \"Sync Repo\"\n  end\n\n  %% INTERNAL SERVICES (green)\n  rect rgba(214,245,214,0.35)\n    Frontend->>BFF: POST /runs/start (installation_id)\n    BFF->>Vault: Fetch app credentials (scoped)\n    BFF->>Runs: Enqueue Run A\n  end\n\n%% EXTERNAL (yellow)\nrect rgba(255,242,179,0.35)\n  Runs->>GitHub: Fetch issues/PRs\n\n  opt Future\n    Runs->>AzureAI: model warm-up\n  end\nend\n  %% DATA (gray)\n  rect rgba(238,238,238,0.7)\n    Runs->>SQL: Save raw snapshot\n  end\n\n  %% INTERNAL + ML (green)\n  rect rgba(214,245,214,0.35)\n    Runs->>Runs: Trigger Run B (ML Baseline)\n    Runs->>ML: Predict labels / duplicates\n    ML-->>Runs: Predictions\n    Runs->>SQL: Persist predictions\n    Runs->>Runs: Trigger Run D (Release Pack)\n    Runs->>SQL: Read triage_cards\n    Runs->>ML: Summarize release notes\n    ML-->>Runs: Structured markdown\n    Runs->>SQL: Store summaries\n    Runs->>Blob: Store artifacts\n  end\n\n  %% OBSERVABILITY (teal)\n  rect rgba(213,245,246,0.45)\n    Runs->>OTel: Emit spans & metrics\n    BFF->>OTel: Emit spans & metrics\n    ML->>OTel: Emit spans & metrics\n  end\n\n  %% UI completion\n  Runs-->>BFF: Notify run complete\n  BFF-->>Frontend: SSE update (status: finished)\n  Frontend-->>User: Show summary dashboard\n",
  "content_size": 1887,
  "collected_at": "2026-02-06T01:31:27.358974",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License (Assumed)",
  "license_url": null,
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}