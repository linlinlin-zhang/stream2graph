{
  "id": "gh_architecture_01335",
  "source": "github",
  "source_url": "https://github.com/Isskar/Isschat/blob/72d26f4ee472ccc2a90d935cc65e0fca478b1dc2/data_flow.mmd",
  "github_repo": "Isskar/Isschat",
  "github_file_path": "data_flow.mmd",
  "diagram_type": "architecture",
  "code": "graph TD\n    %% Users and Interface\n    User([User]) -->|Accesses| WebApp[Streamlit Web App]\n    User -->|CLI Commands| CLI[CLI Interface]\n    \n    %% Authentication Flow\n    WebApp -->|Authentication| AzureAuth[Azure AD Authentication]\n    AzureAuth -->|Valid credentials| ChatInterface[Chat Interface]\n    AzureAuth -->|Admin access| AdminInterface[Admin Interface]\n    \n    %% Main Chat Flow\n    User -->|Asks question| ChatInterface\n    ChatInterface -->|Query| SemanticPipeline[Semantic RAG Pipeline]\n    \n    %% Semantic Processing Pipeline\n    SemanticPipeline -->|Reformulate query| ReformulationService[Service]\n    ReformulationService -->|LLM call| LLM\n    LLM -->|Reformulated query| ReformulationService\n    ReformulationService -->|Resolved query| SemanticRetrieval[Vector Retrieval Tool]\n    SemanticRetrieval -->|Vector search| WeaviateDB[(Weaviate Vector DB<br>Collection: isschat_docs)]\n    WeaviateDB -->|Relevant documents| SemanticRetrieval\n    SemanticRetrieval -->|Ranked results| GenerationTool[Generation Tool]\n    GenerationTool -->|Context + prompt| LLM[Gemini 2.5 Flash Lite]\n    LLM -->|Generated response| GenerationTool\n    GenerationTool -->|Final answer + sources| ChatInterface\n    \n    %% Data Storage & Management\n    GenerationTool -->|Save conversation| DataManager[Data Manager]\n    DataManager -->|Store data| StorageSystem{Storage System}\n    StorageSystem -->|Local| LocalStorage[(Local File Storage)]\n    StorageSystem -->|Cloud| AzureStorage[(Azure Blob Storage)]\n    \n    %% Features & History\n    ChatInterface -->|User feedback| FeaturesManager[Features Manager]\n    ChatInterface -->|Conversation history| HistoryManager[History Manager]\n    FeaturesManager -->|Feedback data| DataManager\n    HistoryManager -->|Load/save history| DataManager\n    \n    %% CLI Operations\n    CLI -->|Ingest command| IngestionPipeline[Confluence Ingestion Pipeline]\n    CLI -->|Status command| StatusCheck[System Status Check]\n    CLI -->|Query command| SemanticPipeline\n    CLI -->|Chat command| InteractiveCLI[Interactive CLI Chat]\n    \n    %% Data Ingestion Flow\n    IngestionPipeline -->|Extract| ConfluenceConnector[Confluence Connector]\n    ConfluenceConnector -->|Fetch pages| ConfluenceAPI[Confluence API]\n    ConfluenceConnector -->|Raw documents| DocumentProcessor[Document Processor]\n    DocumentProcessor -->|Clean & structure| DocumentChunker[Document Chunker]\n    DocumentChunker -->|Text chunks| EmbeddingService[Embedding Service<br>multilingual-e5-small]\n    EmbeddingService -->|Vector embeddings| WeaviateDB\n    \n    %% Configuration & Secrets\n    SemanticPipeline -.->|Config| ConfigManager[Configuration Manager]\n    ConfigManager -.->|Secrets| KeyVault[Azure Key Vault]\n    ConfigManager -.->|Settings| EnvFile[Environment Variables]\n    \n    %% Performance & Monitoring\n    AdminInterface -->|View metrics| PerformanceDashboard[Performance Dashboard]\n    PerformanceDashboard -->|Query stats| DataManager\n    \n    %% Subgraphs for organization\n    subgraph \"User Interface Layer\"\n        User\n        WebApp\n        CLI\n        ChatInterface\n        AdminInterface\n        InteractiveCLI\n    end\n    \n    subgraph \"Authentication & Authorization\"\n        AzureAuth\n        KeyVault\n    end\n    \n    subgraph \"RAG Processing Engine\"\n        SemanticPipeline\n        ReformulationService\n        SemanticRetrieval\n        GenerationTool\n        LLM\n    end\n    \n    subgraph \"Data Storage Layer\"\n        WeaviateDB\n        DataManager\n        StorageSystem\n        LocalStorage\n        AzureStorage\n    end\n    \n    subgraph \"Application Components\"\n        FeaturesManager\n        HistoryManager\n        PerformanceDashboard\n        ConfigManager\n    end\n    \n    subgraph \"Data Ingestion Pipeline\"\n        IngestionPipeline\n        ConfluenceConnector\n        ConfluenceAPI\n        DocumentProcessor\n        DocumentChunker\n        EmbeddingService\n    end\n    \n    subgraph \"Configuration & Environment\"\n        ConfigManager\n        KeyVault\n        EnvFile\n    end\n    \n    %% Styling\n    classDef interface fill:#e1f5fe,stroke:#0277bd,stroke-width:2px\n    classDef auth fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px\n    classDef processing fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px\n    classDef storage fill:#fff3e0,stroke:#ef6c00,stroke-width:2px\n    classDef components fill:#fce4ec,stroke:#c2185b,stroke-width:2px\n    classDef ingestion fill:#f1f8e9,stroke:#558b2f,stroke-width:2px\n    classDef config fill:#f5f5f5,stroke:#616161,stroke-width:2px\n    \n    class User,WebApp,CLI,ChatInterface,AdminInterface,InteractiveCLI interface\n    class AzureAuth,KeyVault auth\n    class SemanticPipeline,ReformulationService,SemanticRetrieval,GenerationTool,LLM processing\n    class WeaviateDB,DataManager,StorageSystem,LocalStorage,AzureStorage storage\n    class FeaturesManager,HistoryManager,PerformanceDashboard components\n    class IngestionPipeline,ConfluenceConnector,ConfluenceAPI,DocumentProcessor,DocumentChunker,EmbeddingService ingestion\n    class ConfigManager,EnvFile config",
  "content_size": 5038,
  "collected_at": "2026-02-06T01:44:56.099204",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "Isskar",
  "repo_name": "Isschat",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}