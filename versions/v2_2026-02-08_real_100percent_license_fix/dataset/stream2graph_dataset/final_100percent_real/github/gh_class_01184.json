{
  "id": "gh_class_01184",
  "source": "github",
  "source_url": "https://github.com/dunatron/bullion_showcase/blob/ccf0f54201caa1de690066b0cbe9f9128be6f2c7/bullion_server/docs/access_control/diagrams/class_diagram.mmd",
  "github_repo": "dunatron/bullion_showcase",
  "github_file_path": "bullion_server/docs/access_control/diagrams/class_diagram.mmd",
  "diagram_type": "class",
  "code": "classDiagram\r\n    class AccessControlService {\r\n        -IAttributeStore _attributeStore\r\n        -IPolicyRepository _policyRepository\r\n        -PolicyEngine _policyEngine\r\n        -AccessControlMetrics _metrics\r\n        -Map~String,UserRole~ _userRoleCache\r\n        +evaluateAccess()\r\n        +canAssignTask()\r\n        +getUserRole()\r\n        +clearCache()\r\n    }\r\n    \r\n    class PolicyService {\r\n        -IPolicyRepository _policyRepository\r\n        +createPolicy()\r\n        +updatePolicy()\r\n        +deletePolicy()\r\n        +getActivePoliciesForCompany()\r\n    }\r\n    \r\n    class PolicyEngine {\r\n        -RbacEngine _rbacEngine\r\n        -AbacEngine _abacEngine\r\n        +evaluate()\r\n        +canAssignTask()\r\n    }\r\n    \r\n    class RbacEngine {\r\n        +evaluate()\r\n        +canAssignTask()\r\n    }\r\n    \r\n    class AbacEngine {\r\n        -List~PolicyDto~ policies\r\n        +evaluate()\r\n    }\r\n    \r\n    class IAttributeStore {\r\n        <<interface>>\r\n        +storePolicy()\r\n        +getActivePolicies()\r\n        +storeAccessDecision()\r\n        +getAccessDecisions()\r\n    }\r\n    \r\n    class IPolicyRepository {\r\n        <<interface>>\r\n        +getActivePoliciesForCompany()\r\n        +createPolicy()\r\n        +updatePolicy()\r\n        +deletePolicy()\r\n    }\r\n    \r\n    class DatabaseAttributeStore {\r\n        +storePolicy()\r\n        +getActivePolicies()\r\n        +storeAccessDecision()\r\n    }\r\n    \r\n    class PolicyRepository {\r\n        -IAttributeStore _attributeStore\r\n        +getActivePoliciesForCompany()\r\n        +createPolicy()\r\n        +updatePolicy()\r\n        +deletePolicy()\r\n    }\r\n    \r\n    class PolicyCache {\r\n        -Map~String,List~Policy~~ _cache\r\n        -AccessControlMetrics _metrics\r\n        +getPolicies()\r\n        +invalidate()\r\n    }\r\n    \r\n    class AccessControlServiceCache {\r\n        -Map~String,AccessControlService~ _cache\r\n        -AccessControlMetrics _metrics\r\n        +getOrCreate()\r\n        +invalidate()\r\n    }\r\n    \r\n    class AccessControlMetrics {\r\n        +recordPolicyCacheHit()\r\n        +recordEvaluationTime()\r\n        +getStats()\r\n        +getCacheStats()\r\n    }\r\n    \r\n    AccessControlService --> IAttributeStore\r\n    AccessControlService --> IPolicyRepository\r\n    AccessControlService --> PolicyEngine\r\n    AccessControlService --> AccessControlMetrics\r\n    PolicyService --> IPolicyRepository\r\n    PolicyEngine --> RbacEngine\r\n    PolicyEngine --> AbacEngine\r\n    DatabaseAttributeStore ..|> IAttributeStore\r\n    PolicyRepository ..|> IPolicyRepository\r\n    PolicyRepository --> IAttributeStore\r\n    PolicyCache --> AccessControlMetrics\r\n    AccessControlServiceCache --> AccessControlMetrics\r\n\r\n",
  "content_size": 2648,
  "collected_at": "2026-02-06T01:54:10.043062",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}