{
  "id": "gh_class_01063",
  "source": "github",
  "source_url": "https://github.com/Pondigo/mm-gen/blob/fb4c6ca0c881fdedd7561abf353d521ab8d6b29b/examples/invalid_class.mmd",
  "github_repo": "Pondigo/mm-gen",
  "github_file_path": "examples/invalid_class.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    %% Services\n    class Service {\n        <<interface>>\n        +Create(ctx context.Context, payload models.ExampleRequest) (models.ExampleResponse, error)\n    }\n\n    class DefaultService {\n        -exampleRepo example.Repository\n        +NewDefaultService(es example.Repository) *DefaultService\n        +Create(ctx context.Context, payload models.ExampleRequest) (models.ExampleResponse, error)\n    }\n\n    class MockService {\n        +Create(ctx context.Context, payload models.ExampleRequest) (models.ExampleResponse, error)\n    }\n\n    class SessionService {\n        -log *zap.SugaredLogger\n        -fixAdapter fix.Acceptor\n        -insititutionRepo intitutions.Repository\n        -entitySessions sync.Map\n        -sessionEntities sync.Map\n        +NewSessionService(insititutionRepo intitutions.Repository, fixAdapter fix.Acceptor, log *zap.SugaredLogger) *SessionService\n        +RegisterEntity(entityID string, sessionID fix.SessionID)\n        +UnregisterEntity(entityID string, sessionID fix.SessionID)\n        +GetSessionsForEntity(entityID string) []fix.SessionID\n        +GetEntitiesForSession(sessionID fix.SessionID) []string\n        +SendToEntity(message *fix.Message, entityID string) error\n        +Validate(netConn net.Conn, session fix.SessionID) error\n    }\n\n    class STPService {\n        -broker *broker.Broker\n        -fix fix.Acceptor\n        -SessionService sessions.Service\n        -tscc config.NatsConsumerConfigurations\n        -v *validator.Validator\n        -tscons broker.Consumer[events.TransactionCreated]\n        -instWlSvc whitelist.Service\n        -dlqProducer broker.Producer[events.DummyCreated]\n        -log *zap.SugaredLogger\n        +NewSTPService(bk *broker.Broker, fbk fix.Acceptor, cc config.NatsConsumerConfigurations, instWlSvc whitelist.Service, SessionService sessions.Service) Service\n        +Start() error\n        +Stop()\n    }\n\n    class WhitelistService {\n        -enabled bool\n        -whitelist map[uuid.UUID]bool\n        +NewWhitelistService(config config.WhitelistConfigurations) *WhitelistService\n        +IsWhitelisted(institution uuid.UUID) bool\n        +SetWhitelisted(institution uuid.UUID, whitelisted bool)\n    }\n\n    %% Repositories\n    class Repository {\n        <<interface>>\n        +FindById(ctx context.Context, id string) (*models.ExampleModel, error)\n    }\n\n    class DefaultRepository {\n        -db *bun.DB\n        +NewDefaultRepository(db *bun.DB) *DefaultRepository\n        +FindById(ctx context.Context, id string) (*models.ExampleModel, error)\n    }\n\n    class MockRepository {\n        +FindById(ctx context.Context, id string) (*models.ExampleModel, error)\n    }\n\n    class ConfigRepository {\n        -config []config.InstitutionInMemoryForFIX\n        +NewConfigRepository(config []config.InstitutionInMemoryForFIX) *ConfigRepository\n        +GetAllowedRoles(id uuid.UUID) ([]string, error)\n        +GetIDByFIXPrefix(prefix string) (uuid.UUID, error)\n        +GetAllInstitutionIDs() []uuid.UUID\n    }\n\n    %% Adapters\n    class FixAcceptor {\n        -log *zap.SugaredLogger\n        -serverConfig config.FixConfigurations\n        -sessionConfig []config.FixSessionConfigurations\n        -acceptor *quickfix.Acceptor\n        -sessions *SessionsMap\n        -settings *quickfix.Settings\n        -app *quickFixApp\n        -callbacks *CallbackRegistry\n        -handlers *HandlerRegistry\n        -connectionValidator *ConnectionValidator\n        +NewAcceptor(serverConfig config.FixConfigurations, sessionConfig ...config.FixSessionConfigurations) (*FixAcceptor, error)\n        +Start() error\n        +Stop()\n        +Broadcast(message *Message) error\n        +SendToTarget(message *Message, session SessionID) error\n        +RegisterHandler(handler MessageHandler)\n        +SetConnectionValidator(validator ConnectionValidator)\n        +GetSessionStatus(sessionID SessionID) (*SessionInfo, bool)\n    }\n\n    class FixManager {\n        -initiator *quickfix.Initiator\n        -app quickfix.Application\n        -sessionConfig config.FixSessionConfigurations\n        +NewInitiatior(app quickfix.Application, serverConfig config.FixConfigurations, sessionConfig config.FixSessionConfigurations) (*FixManager, error)\n        +Start() error\n        +Stop()\n    }\n\n    class ExampleController {\n        -validate *validator.Validator\n        -exampleSvc examples.Service\n        -opaSvc *opa.Service\n        +NewExampleController(router *chi.Mux, v *validator.Validator, pwc pistis.IWebClient, s examples.Service, os *opa.Service) *ExampleController\n        +handleGet(w http.ResponseWriter, r *http.Request)\n        +handlePost(w http.ResponseWriter, r *http.Request)\n    }\n\n    %% Models\n    class ExampleModel {\n        +ID string\n        +Name string\n    }\n\n    class ExampleRequest {\n        +Key string\n        +Value string\n    }\n\n    class ExampleResponse {\n        +Key string\n        +Value string\n        +CreatedAt string\n    }\n\n    class STPEvent {\n        +ExecID string\n        +SecurityID string\n        +Symbol string\n        +TransactTime time.Time\n        +SettlDate string\n        +TradeDate string\n        +Product int\n        +SecurityType string\n        +CumQty uint\n        +OrderID string\n        +OrdStatus int\n        +Price decimal.Decimal\n        +PriceType int\n        +Side int\n        +LeavesQty int\n        +Partys []events.Party\n        +OrderQty uint\n        +Currency string\n        +ExecType string\n    }\n\n    class Message {\n        +*quickfix.Message\n        +NewMessage() *Message\n    }\n\n    class SessionID {\n        +BeginString string\n        +SenderCompID string\n        +TargetCompID string\n        +String() string\n        +ToQuickFixSessionID() quickfix.SessionID\n        +ToQuickFixResponseSessionID() quickfix.SessionID\n        +ToResponseSessionID() SessionID\n    }\n\n    class SessionInfo {\n        +Status string\n        +Configuration config.FixSessionConfigurations\n        +CreatedAt time.Time\n        +LastLogonAt time.Time\n        +LastLogoutAt time.Time\n    }\n\n    class SessionsMap {\n        -sessions sync.Map\n        +Range(f func(key, value interface{}) bool)\n    }\n\n    %% Interfaces\n    class ConnectionValidator {\n        <<interface>>\n        +Validate(netConn net.Conn, session SessionID) error\n    }\n\n    class MessageHandler {\n        <<interface>>\n        +HandleMessage(message *Message, session SessionID) error\n    }\n\n    class sessions.Service {\n        <<interface>>\n        +SendToEntity(message *fix.Message, entityID string) error\n        +RegisterEntity(entityID string, sessionID fix.SessionID)\n        +UnregisterEntity(entityID string, sessionID fix.SessionID)\n        +GetSessionsForEntity(entityID string) []fix.SessionID\n        +GetEntitiesForSession(sessionID fix.SessionID) []string\n        +Validate(netConn net.Conn, session fix.SessionID) error\n    }\n\n    class stp.Service {\n        <<interface>>\n        +Start() error\n        +Stop()\n    }\n\n    class whitelist.Service {\n        <<interface>>\n        +IsWhitelisted(institution uuid.UUID) bool\n        +SetWhitelisted(institution uuid.UUID, whitelisted bool)\n    }\n\n    %% Relationships\n    DefaultService ..|> Service : implements\n    MockService ..|> Service : implements\n    DefaultRepository ..|> Repository : implements\n    MockRepository ..|> Repository : implements\n    SessionService ..|> sessions.Service : implements\n    STPService ..|> stp.Service : implements\n    WhitelistService ..|> whitelist.Service : implements\n    \n    DefaultService --> Repository : uses\n    SessionService --> ConnectionValidator : implements\n    STPService --> broker.Broker : uses\n    STPService --> sessions.Service : uses\n    STPService --> whitelist.Service : uses\n    STPService --> fix.Acceptor : uses\n    \n    SessionService --> fix.Acceptor : uses\n    FixAcceptor --> ConnectionValidator : uses\n    FixAcceptor --> MessageHandler : uses\n    FixAcceptor --> SessionsMap : contains\n    \n    ExampleController --> examples.Service : uses\n    ExampleController --> validator.Validator : uses\n    \n    DefaultRepository --> bun.DB : uses\n    ConfigRepository --> config.InstitutionInMemoryForFIX : uses",
  "content_size": 8112,
  "collected_at": "2026-02-06T01:52:26.058995",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}