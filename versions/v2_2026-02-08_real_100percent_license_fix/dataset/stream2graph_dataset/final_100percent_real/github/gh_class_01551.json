{
  "id": "gh_class_01551",
  "source": "github",
  "source_url": "https://github.com/caiogmello/library-system-softeng1/blob/b36b44615d4757723648cf51723530feddb32609/classDiagram.mmd",
  "github_repo": "caiogmello/library-system-softeng1",
  "github_file_path": "classDiagram.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    class Book {\n        +str getId()\n        +str getTitle()\n        +str getPublisher()\n        +list[str] getAuthors()\n        +str getEdition()\n        +str getYear()\n        +list[BookItem] getCopies()\n        +void addCopy(int copyId)\n        +BookItem | None findCopyById(int copyId)\n        +void removeCopyById(int copyId)\n        +BookItem removeAnyCopy()\n        +BookItem getAnyCopy()\n        +BookItem reserveAnyCopy()\n        +BookItem loanAnyCopy()\n        +void returnReservedCopy(BookItem copy)\n        +void returnLoanedCopy(BookItem copy)\n        +str __str__()\n    }\n\n    class BookItem {\n        +str getId()\n        +str getBookId()\n    }\n\n    class Library {\n        +Library getLibrary()\n        +Book | None getBookById(int bookId)\n        +void addBook(Book book, int copyId)\n        +void addBookByDict(dict bookDict)\n        +bool removeBook(Book | None book, int copyId)\n        +BookItem reserveBook(user.User user, int bookId)\n        +bool isReservedByUser(int bookId, user.User user)\n        +BookItem unreserveBook(user.User user, int bookId)\n        +void returnBook(user.User user, int bookId)\n        +BookItem loanBook(user.User user, int bookId)\n        +list[ReservationItem] getReservations(int bookId)\n        +ReservationItem | None findReservation(int bookId, int copyId)\n        +LoanItem | None findLoan(int bookId, int copyId)\n        +str getBookInfo(int bookId, int copyId)\n        +bool addUser(user.User user)\n        +user.User | None getUserById(int userId)\n        +list[LoanItem] allLoansPerUser(user.User user)\n        +list[ReservationItem] allReservationsPerUser(user.User user)\n    }\n\n    class LoanItem {\n        +BookItem getItem()\n        +User getUser()\n        +date getLoanDate()\n        +date getDevolutionDate()\n        +void closeLoan()\n        +bool isClosed()\n        +void openLoan()\n        +str __str__()\n    }\n\n    class ReservationItem {\n        +BookItem getItem()\n        +User getUser()\n        +str __str__()\n    }\n    \n    class Observer {\n        <<interface>>\n        +void update(*args, **kwargs)\n    }\n\n    class Subject {\n        <<abstract>>\n        -list[Observer] observers\n\n        +void registerObserver(Observer observer)\n        +void removeObserver(Observer observer)\n        +void notifyObservers()\n    }\n\n    class Operation {\n        <<interface>>\n        +BookItem exec(User user, int bookId)\n    }\n\n    class Reservation {\n        +BookItem exec(User user, int bookId)\n    }\n\n    class Devolution {\n        +BookItem exec(User user, int bookId)\n    }\n\n    class CancelReservation {\n        +BookItem exec(User user, int bookId)\n    }\n\n    class Loan {\n        <<interface>>\n        +BookItem exec(User user, int bookId)\n    }\n\n    class ProfessorLoan {\n        +BookItem exec(User user, int bookId)\n    }\n\n    class StudentLoan {\n        +BookItem exec(User user, int bookId)\n    }\n\n    class Exception {\n        <<builtin>>\n    }\n\n    class OperationException {\n        +str __str__()\n    }\n    OperationException --|> Exception\n\n    Reservation ..|> Operation\n    Devolution ..|> Operation\n    CancelReservation ..|> Operation\n    Loan ..|> Operation\n    ProfessorLoan ..|> Loan\n    StudentLoan ..|> Loan\n    \n    Book --|> Subject\n    Book *-- BookItem\n\n    Library *-- Book\n    Library *-- Operation\n    Library *-- ReservationItem\n    Library *-- LoanItem\n    Library *-- User\n\n    LoanItem *-- User\n    LoanItem *-- BookItem\n\n    ReservationItem *-- User\n    ReservationItem *-- BookItem\n\n    Subject *-- Observer\n\n    Operation *-- Book\n\n    %% User section\n    class User {\n        -str id\n        -str name\n        -int maxLoanTimeDays\n        -Final[int | None] maxOpenLoanOperations\n        -Final[int] maxReservedBooks\n        -Loan loanOperation\n        -Reservation reserveOperation\n        -Devolution devolutionOperation\n        -list[BookItem] loanedBooks\n        -list[BookItem] reservedBooks\n        -UserState userState\n\n        +void loanBook(int bookId)\n        +void reserveBook(int bookId)\n        +void returnBook(int bookId)\n        +void makeIndebted()\n        +void makeNotIndebted()\n        +void removeLoan(int bookId)\n        +bool hasReservation(int bookId)\n        +bool hasLoan(int bookId)\n    }\n\n    class Professor {\n        +int getNotificationCount()\n    }\n\n    class UndergraduateStudent {\n    }\n\n    class PostgraduateStudent {\n    }\n\n    UndergraduateStudent --|> User\n    UndergraduateStudent *-- StudentLoan\n    PostgraduateStudent --|> User\n    PostgraduateStudent *-- StudentLoan\n\n    Professor --|> User\n    Professor ..|> Observer\n    Professor *-- Book\n\n    User *-- Loan\n    User *-- Reservation\n    User *-- Devolution\n    User *-- BookItem\n\n    %% \"State\" design pattern\n    User *-- UserState\n\n    class UserState {\n        <<interface>>\n        +BookItem loanBook(User user, int bookId)\n    }\n\n    class UserIndebted {\n        +void loanBook(User user, int bookId)\n    }\n\n    class UserNotIndebted {\n        +BookItem loanBook(User user, int bookId)\n    }\n\n    UserIndebted ..|> UserState\n    UserNotIndebted ..|> UserState\n\n    %% Console\n\n    class LibraryCommand {\n        <<interface>>\n        +void exec(*args)\n    }\n\n    class ConsultItemCommand {\n        +void exec(int bookId)\n    }\n\n    class ConsultUserCommand {\n        +void exec(int userId)\n    }\n\n    class CountNotificationsCommand {\n        +void exec(int userId)\n    }\n\n    class ExitCommand {\n        +void exec()\n    }\n\n    class LoanItemCommand {\n        +void exec(int userId, int bookId)\n    }\n    \n    class RegisterObserverCommand {\n        +void exec(int userId, int bookId)\n    }\n\n    class ReserveItemCommand {\n        +void exec(int userId, int bookId)\n    }\n\n    class ReturnItemCommand {\n        +void exec(int userId, int bookId)\n    }\n\n    ConsultItemCommand ..|> LibraryCommand\n    ConsultUserCommand ..|> LibraryCommand\n    CountNotificationsCommand ..|> LibraryCommand\n    ExitCommand ..|> LibraryCommand\n    LoanItemCommand ..|> LibraryCommand\n    RegisterObserverCommand ..|> LibraryCommand\n    ReserveItemCommand ..|> LibraryCommand\n    ReturnItemCommand ..|> LibraryCommand\n\n    class Console {\n        +static Console getConsole()\n        +void initCommands()\n        +void service()\n    }\n    \n    Console --* LoanItemCommand\n    Console --* ReturnItemCommand\n    Console --* ReserveItemCommand\n    Console --* RegisterObserverCommand\n    Console --* ConsultItemCommand\n    Console --* ConsultUserCommand\n    Console --* CountNotificationsCommand\n    Console --* ExitCommand\n\n    class Factory {\n        +static Book createBook(bookId: int, title: str, publisher: str, authors: list[str], edition: str, year: str) : Book\n        +static Book createBookFromDict(bookDict: dict) : Book\n    }\n",
  "content_size": 6745,
  "collected_at": "2026-02-06T01:59:15.310090",
  "compilation_status": "failed",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}