{
  "id": "gh_class_01437",
  "source": "github",
  "source_url": "https://github.com/Dera301/projet_stage/blob/3ff0a1769dda7d9425e28b8bee7835e0dc5879b4/diagramme/UC11_SupprimerPropriete_ClasseConception.mmd",
  "github_repo": "Dera301/projet_stage",
  "github_file_path": "diagramme/UC11_SupprimerPropriete_ClasseConception.mmd",
  "diagram_type": "class",
  "code": "classDiagram\r\n    %% Titre: UC11 - Supprimer une Propriété - Diagramme de Classe de Conception\r\n    \r\n    class User {\r\n        <<entity>>\r\n        -id: Int\r\n        -email: String\r\n        -firstName: String\r\n        -lastName: String\r\n        -userType: UserType\r\n        --\r\n    }\r\n\r\n    class Student {\r\n        <<entity>>\r\n        --\r\n    }\r\n\r\n    class Owner {\r\n        <<entity>>\r\n        --\r\n        +deleteProperty(propertyId): void\r\n        +requestPropertyDeletion(propertyId, reason): void\r\n    }\r\n\r\n    class Admin {\r\n        <<entity>>\r\n        --\r\n        +approvePropertyDeletion(propertyId): void\r\n        +rejectPropertyDeletion(propertyId, reason): void\r\n    }\r\n\r\n    class UserType {\r\n        <<enumeration>>\r\n        STUDENT\r\n        OWNER\r\n        ADMIN\r\n    }\r\n\r\n    class Boundary_DeleteProperty {\r\n        <<boundary>>\r\n        -confirmationDialog: Dialog\r\n        -reasonForm: Form\r\n        -deletionHistoryView: View\r\n        --\r\n        +displayDeleteConfirmation(): void\r\n        +displayDeletionReason(): void\r\n        +displayImpactWarning(): void\r\n        +onConfirmDelete(): void\r\n        +onCancel(): void\r\n    }\r\n\r\n    class PropertyDeletionController {\r\n        <<control>>\r\n        -propertyRepository: PropertyRepository\r\n        -appointmentRepository: AppointmentRepository\r\n        -fileService: FileService\r\n        -auditService: AuditService\r\n        -notificationService: NotificationService\r\n        -messageService: MessageService\r\n        --\r\n        +deleteProperty(propertyId, ownerId): void\r\n        +softDeleteProperty(propertyId, ownerId): void\r\n        +permanentlyDeleteProperty(propertyId): void\r\n        +checkDeletionEligibility(propertyId): DeletionEligibility\r\n        +getDeletionImpactReport(propertyId): ImpactReport\r\n    }\r\n\r\n    class Property {\r\n        <<entity>>\r\n        -id: Int\r\n        -title: String\r\n        -description: String\r\n        -address: String\r\n        -ownerId: Int\r\n        -isAvailable: Boolean\r\n        -isDeleted: Boolean\r\n        -deletedAt: DateTime?\r\n        -deletionReason: String?\r\n        -createdAt: DateTime\r\n        --\r\n        +delete(): void\r\n        +permanentlyDelete(): void\r\n        +restore(): void\r\n    }\r\n\r\n    class PropertyRepository {\r\n        <<service>>\r\n        --\r\n        +findById(id): Property\r\n        +findByIdAndOwner(id, ownerId): Property\r\n        +softDelete(id, reason): void\r\n        +permanentlyDelete(id): void\r\n        +findDeletedProperties(): List\r\n        +restore(id): void\r\n    }\r\n\r\n    class Appointment {\r\n        <<entity>>\r\n        -id: Int\r\n        -propertyId: Int\r\n        -studentId: Int\r\n        -ownerId: Int\r\n        -appointmentDate: DateTime\r\n        -status: AppointmentStatus\r\n        --\r\n    }\r\n\r\n    class AppointmentRepository {\r\n        <<service>>\r\n        --\r\n        +findByProperty(propertyId): List\r\n        +findActiveByProperty(propertyId): List\r\n        +cancelByProperty(propertyId, reason): void\r\n    }\r\n\r\n    class AppointmentStatus {\r\n        <<enumeration>>\r\n        PENDING\r\n        CONFIRMED\r\n        CANCELLED\r\n        COMPLETED\r\n    }\r\n\r\n    class FileService {\r\n        <<service>>\r\n        --\r\n        +deletePropertyImages(propertyId): void\r\n        +deleteImage(path): void\r\n        +backupImages(propertyId): void\r\n    }\r\n\r\n    class DeletionEligibility {\r\n        <<entity>>\r\n        -canDelete: Boolean\r\n        -restrictions: List~String~\r\n        -activeAppointments: Int\r\n        -pendingAppointments: Int\r\n        --\r\n        +isSoftDeleteAllowed(): Boolean\r\n        +isPermanentDeleteAllowed(): Boolean\r\n    }\r\n\r\n    class ImpactReport {\r\n        <<entity>>\r\n        -propertyId: Int\r\n        -appointmentCount: Int\r\n        -studentAffected: List~Int~\r\n        -imageCount: Int\r\n        -dataSize: Float\r\n        --\r\n        +getSummary(): String\r\n        +estimateDeletionTime(): Int\r\n    }\r\n\r\n    class DeletionLog {\r\n        <<entity>>\r\n        -id: Int\r\n        -propertyId: Int\r\n        -ownerId: Int\r\n        -deletionType: String\r\n        -reason: String?\r\n        -deletedAt: DateTime\r\n        -permanentlyDeletedAt: DateTime?\r\n        --\r\n        +logDeletion(): void\r\n    }\r\n\r\n    class AuditService {\r\n        <<service>>\r\n        --\r\n        +recordDeletion(propertyId, ownerId, reason): void\r\n        +recordPermanentDeletion(propertyId): void\r\n        +getDeletionHistory(propertyId): List\r\n    }\r\n\r\n    class NotificationService {\r\n        <<service>>\r\n        --\r\n        +notifyStudentsPropertyDeleted(propertyId): void\r\n        +notifyOwnerDeletionConfirmed(ownerId, property): void\r\n        +notifyStudentsAppointmentCancelled(appointmentId, reason): void\r\n    }\r\n\r\n    class MessageService {\r\n        <<service>>\r\n        --\r\n        +sendAutoCancellationMessage(studentId, propertyId, reason): void\r\n    }\r\n\r\n    %% Relationships\r\n    User \"1\" --> \"1\" UserType : has\r\n    Student --|> User : extends\r\n    Owner --|> User : extends\r\n    Admin --|> User : extends\r\n    \r\n    Boundary_DeleteProperty ..> PropertyDeletionController : uses\r\n    PropertyDeletionController ..> PropertyRepository : queries/deletes\r\n    PropertyDeletionController ..> AppointmentRepository : affects\r\n    PropertyDeletionController ..> FileService : deletes_images\r\n    PropertyDeletionController ..> AuditService : records\r\n    PropertyDeletionController ..> NotificationService : notifies\r\n    PropertyDeletionController ..> MessageService : sends_messages\r\n    \r\n    PropertyDeletionController --> DeletionEligibility : checks\r\n    PropertyDeletionController --> ImpactReport : generates\r\n    PropertyDeletionController --> Property : deletes\r\n    \r\n    Property \"1\" --> \"*\" Appointment : has\r\n    Appointment \"1\" --> \"1\" AppointmentStatus : has\r\n    \r\n    AuditService --> DeletionLog : creates\r\n",
  "content_size": 5781,
  "collected_at": "2026-02-06T01:57:47.900342",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 1,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}