{
  "id": "gh_sequence_00872",
  "source": "github",
  "source_url": "https://github.com/Bollemii/Master-thesis-Files-indexer/blob/b90467004722319abb9a0ac8c6af2355b30c7ed2/doc/Doc%20Sequence.mmd",
  "github_repo": "Bollemii/Master-thesis-Files-indexer",
  "github_file_path": "doc/Doc Sequence.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    autonumber\n\n    actor User as User\n    participant Frontend as React<br/>Frontend\n    participant DocAPI as Documents<br/>API\n    participant Storage as File<br/>Storage\n    participant Preview as Preview<br/>Generator\n    participant TopicModeler as Topic<br/>Modeler\n    participant DB as Database\n\n    Note over User,Frontend: Upload Phase\n    User->>+Frontend: Upload document\n    Frontend->>+DocAPI: POST /documents\n    DocAPI->>+Storage: Save file\n    Storage-->>-DocAPI: Return file path\n    DocAPI->>+DB: Store document metadata (processed=false)\n    DB-->>-DocAPI: Return document ID\n    DocAPI-->>-Frontend: Document created response\n    Frontend-->>User: Upload confirmation\n\n    Note over DocAPI,Preview: Preview Generation Phase (Async)\n    DocAPI->>+Preview: Generate preview request\n    Preview->>+Storage: Read document content (e.g., first page)\n    Storage-->>-Preview: Return document content\n    Preview->>Preview: Generate preview image\n    Preview->>+Storage: Save preview image\n    Storage-->>-Preview: Return preview path\n    Preview->>+DocAPI: Notify preview ready (optional)\n    DocAPI->>+DB: Update document with preview path (optional)\n    DB-->>-DocAPI: Confirm update (optional)\n\n    Note over DocAPI,TopicModeler: Topic Modeling Phase (Async/Background)\n    User->>+DocAPI: Trigger topic modeling\n    DocAPI->>+TopicModeler: Trigger document processing\n    TopicModeler->>+DB: Get unprocessed documents\n    DB-->>-TopicModeler: Return document list (paths)\n    TopicModeler->>+Storage: Read document content\n    Storage-->>-TopicModeler: Return content\n    TopicModeler->>TopicModeler: Perform Read, Mine, LDA Analysis\n    TopicModeler->>+DB: Update/Create Topics & DocumentTopicLinks\n    DB-->>-TopicModeler: Confirm updates\n    TopicModeler->>+DB: Mark documents as processed\n    DB-->>-TopicModeler: Confirm updates\n\n    Note over User,Frontend: Viewing Phase\n    User->>+Frontend: Request document details\n    Frontend->>+DocAPI: GET /documents/{id}\n    DocAPI->>+DB: Query document metadata & topics\n    DB-->>-DocAPI: Return document details + topic info\n    DocAPI->>+Storage: Get preview URL (if needed)\n    Storage-->>-DocAPI: Return preview URL\n    DocAPI-->>-Frontend: Document details response (incl. topics, preview)\n    Frontend-->>-User: Display document details & topics",
  "content_size": 2337,
  "collected_at": "2026-02-06T01:50:10.753932",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 1,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}