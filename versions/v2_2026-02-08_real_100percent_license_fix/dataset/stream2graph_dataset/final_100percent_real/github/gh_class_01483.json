{
  "id": "gh_class_01483",
  "source": "github",
  "source_url": "https://github.com/Teknowm3/Spring-Boot-Mikroservis-Projesi/blob/384cce6b923cb09715b2c253c0c32d1b798304c1/docs/object-diagrams/object-diagram-6-admin-create-user.mmd",
  "github_repo": "Teknowm3/Spring-Boot-Mikroservis-Projesi",
  "github_file_path": "docs/object-diagrams/object-diagram-6-admin-create-user.mmd",
  "diagram_type": "class",
  "code": "---\n%% 7. ADMIN UPDATE ROLE - OBJECT DIAGRAM\n%% Shows object states when admin updates a user's role\n---\n\nclassDiagram\n    class httpRequest[\"httpRequest: HttpServletRequest\"] {\n        method: \"PATCH\"\n        path: \"/api/auth/users/john/role\"\n        Authorization: \"Bearer eyJhbGc...\"\n        Content-Type: \"application/json\"\n    }\n    \n    class authentication[\"authentication: Authentication\"] {\n        name: \"admin\"\n        authenticated: true\n        authorities: \"ROLE_ADMIN\"\n    }\n    \n    class roleUpdateRequest[\"roleUpdateRequest: Map\"] {\n        role: \"ADMIN\"\n    }\n    \n    class targetUsername[\"targetUsername: String\"] {\n        value: \"john (from path variable)\"\n    }\n    \n    class existingUserAuth[\"existingUserAuth: User\"] {\n        id: 2\n        username: \"john\"\n        password: \"$2a$10$...\"\n        email: \"john@example.com\"\n        role: \"Role.USER (OLD)\"\n    }\n    \n    class updatedUserAuth[\"updatedUserAuth: User\"] {\n        id: 2\n        username: \"john\"\n        password: \"$2a$10$...\"\n        email: \"john@example.com\"\n        role: \"Role.ADMIN (NEW)\"\n    }\n    \n    class sqlUpdateAuth[\"sqlUpdateAuth: SQL\"] {\n        query: \"UPDATE users SET role='ADMIN' WHERE username='john'\"\n        rowsAffected: 1\n        database: \"auth_db\"\n    }\n    \n    class syncRequest[\"syncRequest: HTTP Request\"] {\n        method: \"PATCH\"\n        url: \"http://user-service:8082/api/users/username/john/role\"\n        X-User-Id: \"auth-service\"\n        X-Internal-Timestamp: \"1735509800000\"\n        X-Internal-Signature: \"Abc789XyZ...\"\n        body: \"{ role: ADMIN }\"\n    }\n    \n    class existingUserProfile[\"existingUserProfile: UserProfile\"] {\n        id: 2\n        username: \"john\"\n        email: \"john@example.com\"\n        role: \"USER (OLD)\"\n        firstName: \"John\"\n        lastName: \"Doe\"\n    }\n    \n    class updatedUserProfile[\"updatedUserProfile: UserProfile\"] {\n        id: 2\n        username: \"john\"\n        email: \"john@example.com\"\n        role: \"ADMIN (NEW)\"\n        firstName: \"John\"\n        lastName: \"Doe\"\n        updatedAt: \"2025-12-29T23:25:00 (NEW)\"\n    }\n    \n    class sqlUpdateProfile[\"sqlUpdateProfile: SQL\"] {\n        query: \"UPDATE user_profiles SET role='ADMIN', updated_at='2025-12-29T23:25:00' WHERE username='john'\"\n        rowsAffected: 1\n        database: \"user_db\"\n    }\n    \n    class responseEntity[\"responseEntity: ResponseEntity\"] {\n        status: \"200 OK\"\n        body: \"{ message: Role updated }\"\n    }\n    \n    %% Relationships\n    httpRequest --> authentication : \"validates admin\"\n    httpRequest --> roleUpdateRequest : \"body parsed to\"\n    httpRequest --> targetUsername : \"extracts from path\"\n    targetUsername --> existingUserAuth : \"finds in Auth DB\"\n    existingUserAuth --> updatedUserAuth : \"role changed\"\n    updatedUserAuth --> sqlUpdateAuth : \"persisted via\"\n    updatedUserAuth --> syncRequest : \"triggers sync call\"\n    syncRequest --> existingUserProfile : \"finds in User DB\"\n    existingUserProfile --> updatedUserProfile : \"role updated\"\n    updatedUserProfile --> sqlUpdateProfile : \"persisted via\"\n    updatedUserAuth --> responseEntity : \"generates\"\n    \n    note for sqlUpdateAuth \"Updates role in Auth Service\"\n    note for syncRequest \"Syncs role to User Service\"\n    note for sqlUpdateProfile \"Updates role in User Service\"\n    note for responseEntity \"Role updated in both databases\"\n",
  "content_size": 3363,
  "collected_at": "2026-02-06T01:58:20.675037",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0
}