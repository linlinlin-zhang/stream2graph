{
  "id": "gh_architecture_01852",
  "source": "github",
  "source_url": "https://github.com/atoxfy/kikwiflow/blob/50f543c2bc2f5bbf3a389f97aba094843e707314/docs/cqrs-spring-boot-app.mmd",
  "github_repo": "atoxfy/kikwiflow",
  "github_file_path": "docs/cqrs-spring-boot-app.mmd",
  "diagram_type": "architecture",
  "code": "graph TD\n    subgraph \"Aplicação Final do Utilizador\"\n        App[\"Your Spring Boot App<br>(Contém o seu código de negócio)\"]\n    end\n\n    subgraph \"Ecossistema kikwi-flow (Módulos)\"\n        Starter[kikwi-spring-boot-starter]\n        Autoconfigure[kikwi-spring-boot-autoconfigure]\n        QuerySpringBootAutoconfigure[\"kikwi-query-spring-boot-autoconfigure<br><i>(Contém a implementação e a auto-configuração da API de Consulta)</i>\"]\n\n        subgraph \"Camada de Consulta (API)\"\n            QueryApi[\"kikwi-query-api<br><i>(Contrato de alto nível para a Aplicação)</i>\"]\n        end\n\n        subgraph \"Engine\"\n            EngineCore[kikwi-core]\n        end\n\n        subgraph \"Camada de Persistência (Implementações)\"\n            PersistenceMongo[kikwi-persistence-mongodb]\n            PersistencePostgres[\"kikwi-persistence-postgres<br>(Futuro)\"]\n        end\n\n        subgraph \"Camada de Persistência (Contrato)\"\n            PersistenceApi[\"kikwi-runtime-persistence-api<br><i>(Contém as interfaces de persistência)</i>\"]\n            CommandRepo[\"CommandRepository (Interface)\"]\n            QueryRepo[\"QueryRepository (Interface)\"]\n            PersistenceApi -- \"Contém\" --> CommandRepo\n            PersistenceApi -- \"Contém\" --> QueryRepo\n        end\n\n        subgraph \"Fundação\"\n            Model[kikwi-model]\n            EventsApi[kikwi-lightweight-events-api]\n        end\n    end\n\n%% Dependências do Maven (o que é \"puxado\")\n    App -- \"1. Adiciona dependência para\" --> Starter\n    App -- \"2. ESCOLHE E adiciona dependências para\" --> PersistenceMongo\n    App -- \"3. (Opcional) Adiciona dependência para\" --> QuerySpringBootAutoconfigure\n\n    Starter -- \"Depende de (agrega)\" --> Autoconfigure\n\n    Autoconfigure -- \"Depende de\" --> EngineCore\n    QuerySpringBootAutoconfigure -- \"Depende de (para implementar)\" --> QueryApi\n    QuerySpringBootAutoconfigure -- \"Depende de (para consultar)\" --> PersistenceApi\n\n%% A linha tracejada indica uma dependência opcional/condicional.\n    Autoconfigure -. \"Configura se presente\" .-> PersistenceMongo\n\n    EngineCore -- \"Depende de\" --> PersistenceApi\n    EngineCore -- \"Depende de\" --> Model\n    EngineCore -- \"Depende de\" --> EventsApi\n\n    PersistenceMongo -- \"Implementa\" --> PersistenceApi\n    PersistenceApi -- \"Depende de\" --> Model\n\n    QueryApi -- \"Depende de\" --> Model\n\n%% Fluxo de Configuração do Spring (o que é \"embarcado\")\n    subgraph \"Contexto da Aplicação Spring (Runtime)\"\n        SpringBoot[\"Spring Boot<br>Application Context\"]\n\n        EngineBean[\"KikwiFlowEngine (Bean)\"]\n        QueryBean[\"ExternalTaskQueryService (Bean)<br><i>from query-spring-boot-autoconfigure</i>\"]\n        RepoBean[\"KikwiEngineRepository (Bean)<br><i>from persistence impl</i>\"]\n        AppServiceBean[\"HumanTaskApplicationService (Bean)<br><i>from Your App</i>\"]\n    end\n\n    Autoconfigure -- \"Fornece 'receitas' para a Engine\" --> SpringBoot\n    QuerySpringBootAutoconfigure -- \"Fornece 'receitas' de consulta (se presente)\" --> SpringBoot\n\n    SpringBoot -- \"Cria e injeta\" --> EngineBean\n    SpringBoot -- \"Cria e injeta\" --> QueryBean\n    SpringBoot -- \"Cria e injeta\" --> RepoBean\n    SpringBoot -- \"Cria e injeta\" --> AppServiceBean\n\n    AppServiceBean -- \"Usa (injeta)\" --> EngineBean\n    AppServiceBean -- \"Usa (injeta)\" --> QueryBean\n    QueryBean -- \"Usa (injeta)\" --> RepoBean\n\n    EngineBean -- \"Usa (injeta)\" --> RepoBean\n",
  "content_size": 3381,
  "collected_at": "2026-02-06T02:04:07.851457",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "apache-2.0",
  "license_name": "Apache License 2.0",
  "license_url": "https://api.github.com/licenses/apache-2.0",
  "repo_stars": 14,
  "repo_forks": 0
}