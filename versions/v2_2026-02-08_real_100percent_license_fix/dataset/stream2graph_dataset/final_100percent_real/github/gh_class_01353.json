{
  "id": "gh_class_01353",
  "source": "github",
  "source_url": "https://github.com/asarangaram/keep_it_package/blob/553f84d4b890aef2474372dca7db8ae950e83392/docs/store.mmd",
  "github_repo": "asarangaram/keep_it_package",
  "github_file_path": "docs/store.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n\n    class CLEntity {\n        +int? id\n        +bool isCollection\n        +DateTime addedDate\n        +DateTime updatedDate\n        +bool isDeleted\n        +String? label\n        +String? description\n        +int? parentId\n        +String? md5\n        +int? fileSize\n        +String? mimeType\n        +String? type\n        +String? extension\n        +DateTime? createDate\n        +int? height\n        +int? width\n        +double? duration\n        +bool isHidden\n        +String? pin\n        +DateTime get sortDate()\n        +CLMediaType get mediaType()\n        +CLEntity copyWith(...)\n        +CLEntity clone(...)\n        +Map<String, dynamic> toMap()\n        +String toJson()\n        +Map<String, dynamic> toMapForDisplay()\n        +bool isSame(CLEntity other)\n        +bool isContentSame(CLEntity other)\n        +String? get path()\n        +String? get previewPath()\n    }\n\n    class StoreQuery~T~ {\n\n        +String? storeIdentity\n        +Map<String, dynamic> map\n        +StoreQuery~T~ copyWith(...)\n    }\n\n    class EntityQuery {\n        <<extends>> StoreQuery~CLEntity~\n    }\n\n    class EntityStore {\n        <<abstract>>\n        +String identity\n        +Future~CLEntity?~ get([StoreQuery~CLEntity~? query])\n        +Future~List~CLEntity~ getAll([StoreQuery~CLEntity~? query])\n        +Future~CLEntity?~ upsert(CLEntity curr, String? path)\n        +Future~bool~ delete(CLEntity item)\n    }\n\n    class CLStore {\n        +EntityStore store\n        +String tempCollectionName\n        +String tempFilePath\n        +Future~StoreEntity?~ dbSave(StoreEntity entity, String? path)\n        +Future~bool~ delete(int entityId)\n        +Future~StoreEntity?~ get([EntityQuery? query])\n        +Future~List~StoreEntity~ getAll([EntityQuery? query])\n        +Future~StoreEntity?~ createCollection(...)\n        +Future~StoreEntity?~ createMedia(...)\n        +Future~StoreEntity?~ updateCollection(...)\n        +Future~StoreEntity?~ updateMedia(...)\n        +String createTempFile( String ext)\n    }\n\n    class StoreEntity {\n        +CLEntity data\n        +CLStore store\n        +String? path\n        +Future~StoreEntity?~ updateWith(...)\n        +Future~StoreEntity?~ cloneWith(...)\n        +Future~StoreEntity?~ dbSave([String? path])\n        +Future~void~ delete()\n        +Future~StoreEntity?~ onPin()\n        +Future~StoreEntity?~ onUnpin()\n        +Future~StoreEntity?~ getParent()\n        +Future~List~StoreEntity~ getChildren()\n    }\n    class LocalSQLiteEntityStore {\n        +SQLiteTableAgent~CLEntity~ agent\n        +String mediaPath\n        +String previewPath\n        +Future~bool~ delete(CLEntity item)\n        +Future~CLEntity?~ get([StoreQuery~CLEntity~? query])\n        +Future~List~CLEntity~~ getAll([StoreQuery~CLEntity~? query])\n        +String? absoluteMediaPath(CLEntity media)\n        +String? absolutePreviewPath(CLEntity media)\n        +Future~bool~ createMediaFiles(CLEntity media, String path)\n        +Future~bool~ deleteMediaFiles(CLEntity media)\n        +Future~CLEntity?~ upsert(CLEntity curr, String? path)\n        +static Future~EntityStore~ createStore(...)\n    }\n\n    class SQLiteTableAgent~T~ {\n        +SqliteDatabase db\n        +String table\n        +T Function(Map<String, dynamic>)? fromMap\n        +Map<String, dynamic>? Function(T obj) toMap\n        +Future~DBQuery~T~~ Function(T obj) dbQueryForItem\n        +List~String~ Function(T obj) getUniqueColumns\n        +Set~String~ validColumns\n        +bool autoIncrementId\n        +Future~bool~ updateFromMap(...)\n        +Future~T?~ readBack(...)\n        +Future~T?~ upsert(...)\n        +Future~void~ delete(...)\n        +Future~List~T~~ upsertAll(...)\n        +Future~List~T~~ getAll(...)\n        +Future~T?~ get(...)\n    }\n\n    class SQLiteDBTableMixin~T~ {\n        +Future~T?~ dbGet(...)\n        +Future~List~T~~ dbGetAll(...)\n        +Future~T?~ dbUpsert(...)\n        +Future~void~ dbDelete(...)\n    }\n\n    class SQLiteDB {\n        +SqliteDatabase db\n        +static Future~SQLiteDB~ create(required String dbpath)\n        +Future~void~ dispose()\n    }\n\n    class DBQuery~T~ {\n        +String sql\n        +List~dynamic~? parameters\n        +static DBQuery~T~ fromStoreQuery(...)\n    }\n\n    class CLEntity {\n        +int? id\n        +bool isCollection\n        +String? path\n        +String? previewPath\n        +CLEntity copyWith(...)\n        +bool isSame(CLEntity other)\n        +bool isContentSame(CLEntity other)\n    }\n\n    class StoreQuery~T~ {\n        +String? storeIdentity\n        +Map~String, dynamic~ map\n    }\n\n    class EntityStore {\n        <<abstract>>\n        +String identity\n        +Future~CLEntity?~ get([StoreQuery~CLEntity~? query])\n        +Future~List~CLEntity~~ getAll([StoreQuery~CLEntity~? query])\n        +Future~CLEntity?~ upsert(CLEntity curr, String? path)\n        +Future~bool~ delete(CLEntity item)\n    }\n\n\n    CLEntity --> CLMediaType : mediaType\n    StoreQuery~T~ --> CLEntity : used to query\n    EntityQuery ..|> StoreQuery~CLEntity~ : for type casting\n    EntityStore --> CLEntity: CRUD Operations\n    CLStore --> EntityStore : Uses\n    CLStore --> StoreEntity: Updates\n    StoreEntity --> CLEntity: includes as `data`\n    StoreEntity --> CLStore : Queries\n    StoreEntity --> EntityQuery : uses\n   \n\n    LocalSQLiteEntityStore ..|> EntityStore: Implements\n    LocalSQLiteEntityStore ..|> SQLiteDBTableMixin~CLEntity~\n    LocalSQLiteEntityStore --> SQLiteTableAgent~CLEntity~\n    SQLiteTableAgent~T~ --> DBQuery~T~: Uses\n    SQLiteDBTableMixin~T~ --> SQLiteTableAgent~T~\n    SQLiteDB --> SqliteDatabase\n    CLEntity --> StoreQuery~CLEntity~\n    EntityStore --> CLEntity\n    EntityQuery --> DBQuery~T~: gets converted into\n   SQLiteTableAgent~T~ --> SqliteDatabase : Reads\n\n   Exposed --> SQLiteDB: create and dispose\n   Exposed --> CLStore: To create and Query for items \n   Exposed --> StoreEntity: data, update and delete \n\n   ",
  "content_size": 5861,
  "collected_at": "2026-02-06T01:56:38.734050",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License (Assumed)",
  "license_url": null,
  "repo_stars": 2,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}