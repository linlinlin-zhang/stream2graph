{
  "id": "gh_class_01098",
  "source": "github",
  "source_url": "https://github.com/aldipascaa/Batch16/blob/fec31aefde18fb87f369666f159e009cf868358c/mmd/Ludo17.mmd",
  "github_repo": "aldipascaa/Batch16",
  "github_file_path": "mmd/Ludo17.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    %% Core Game Relationships\n    Game\"1\" *-- \"1\" IGameStateManager : manages state\n    Game\"1\" *-- \"1\" IRuleEngine : enforces rules\n    Game\"1\" *-- \"1\" IBoard : uses\n    Game\"1\" *-- \"1\" ITurnManager : manages turns\n    Game\"1\" *-- \"1\" IMovementManager : manages movement\n    Game\"1\" o-- \"2..4\" IPlayer : manages\n    Game\"1\" o-- \"n\" Pawn : controls\n    Game\"1\" *-- \"1\" IDice : uses\n\n    %% Player-Pawn Relationship\n    IPlayer\"1\" *-- \"4\" Pawn : has\n\n    %% Board Composition\n    IBoard\"1\" o-- \"*\" ITile : contains\n    IBoard\"1\" o-- \"*\" Coordinates : positions\n    ITile\"1\" *-- \"1\" Coordinates : position\n    Pawn\"1\" *-- \"1\" Coordinates : position\n\n    %% Rule Engine Dependencies\n    IRuleEngine --> IMovementRule : uses\n    IRuleEngine --> ICaptureRule : uses\n    IRuleEngine --> IWinConditionRule : uses\n\n    %% Event System\n    Game --> IGameEventPublisher : publishes\n    IGameEventSubscriber <|.. GameEventAggregator : implements\n\n    %% Enumeration Dependencies\n    Game ..> GameState\n    IPlayer ..> PlayerState\n    IPlayer ..> Color\n    Pawn ..> PawnState\n    Pawn ..> Color\n    ITile ..> Color\n    ITile ..> TileType\n\n    %% INTERFACES (Dependency Inversion)\n    class IGameStateManager {\n        <<Interface>>\n        +GameState CurrentState\n        +void TransitionTo(GameState newState)\n        +bool CanTransitionTo(GameState newState)\n    }\n\n    class ITurnManager {\n        <<Interface>>\n        +IPlayer CurrentPlayer\n        +void NextTurn()\n        +bool IsExtraTurn(int roll, Pawn movedPawn)\n    }\n\n    class IMovementManager {\n        <<Interface>>\n        +MoveResult MovePawn(Pawn pawn, int steps)\n        +bool CanMovePawn(Pawn pawn, int steps)\n        +Tile CalculateDestination(Pawn pawn, int steps)\n    }\n\n    class IDice {\n        <<Interface>>\n        +int Sides\n        +int Roll()\n    }\n\n    class IBoard {\n        <<Interface>>\n        +ITile GetTile(Coordinates position)\n        +ITile GetStartTile(Color color)\n        +ITile GetHomeTile(Color color)\n        +IPlayerPath GetPlayerPath(Color color)\n        +bool IsValidPosition(Coordinates position)\n    }\n\n    class IPlayer {\n        <<Interface>>\n        +Color Color\n        +PlayerState State\n        +IReadOnlyList~Pawn~ Pawns\n        +bool HasWon()\n        +IEnumerable~Pawn~ GetMovablePawns(int roll)\n    }\n\n    class IRuleEngine {\n        <<Interface>>\n        +bool ValidateMove(Pawn pawn, int roll)\n        +bool ValidateCapture(Pawn movingPawn, Tile destination)\n        +bool CheckWinCondition(IPlayer player)\n        +bool CanStartPawn(Pawn pawn, int roll)\n    }\n\n    class IPlayerPath {\n        <<Interface>>\n        +Color Color\n        +ITile StartTile\n        +ITile HomeTile\n        +ITile[] MainTrack\n        +ITile[] HomePath\n        +int GetDistanceFromStart(Pawn pawn)\n    }\n\n    class ITile {\n        <<Interface>>\n        +Coordinates Position\n        +TileType Type\n        +Color? Color\n        +IReadOnlyList~Pawn~ Occupants\n        +bool IsSafe\n        +bool CanOccupy(Pawn pawn)\n        +void AddPawn(Pawn pawn)\n        +void RemovePawn(Pawn pawn)\n    }\n\n    class IGameEventPublisher {\n        <<Interface>>\n        +event Action~IPlayer~ PlayerWon\n        +event Action~Pawn, ITile, ITile~ PawnMoved\n        +event Action~Pawn, Pawn~ PawnCaptured\n        +event Action~GameState, GameState~ StateChanged\n    }\n\n    %% RULE INTERFACES (Open/Closed Principle)\n    class IMovementRule {\n        <<Interface>>\n        +bool IsValidMove(Pawn pawn, int roll, IBoard board)\n    }\n\n    class ICaptureRule {\n        <<Interface>>\n        +bool CanCapture(Pawn attacker, Pawn defender, ITile tile)\n    }\n\n    class IWinConditionRule {\n        <<Interface>>\n        +bool HasPlayerWon(IPlayer player)\n    }\n\n    %% CONCRETE CLASSES\n    class Game {\n        -IGameStateManager _stateManager\n        -ITurnManager _turnManager\n        -IMovementManager _movementManager\n        -IRuleEngine _ruleEngine\n        -IBoard _board\n        -IDice _dice\n        -IList~IPlayer~ _players\n        -IGameEventPublisher _eventPublisher\n\n        +void Start()\n        +void Reset()\n        +MoveResult ProcessTurn(IPlayer player, Pawn pawn, int roll)\n        +IEnumerable~Pawn~ GetValidMoves(IPlayer player, int roll)\n    }\n\n    class StandardDice {\n        -Random _random\n        +int Sides\n        +int Roll()\n    }\n\n    class Pawn {\n        -int _id\n        -Color _color\n        -Coordinates _position\n        -PawnState _state\n        -ITile _currentTile\n\n        +int Id\n        +Color Color\n        +Coordinates Position\n        +PawnState State\n        +ITile CurrentTile\n\n        +void MoveTo(ITile tile)\n        +void ReturnToStart()\n        +void Finish()\n    }\n\n    class Tile {\n        -Coordinates _position\n        -TileType _type\n        -Color? _color\n        -IList~Pawn~ _occupants\n\n        +Coordinates Position\n        +TileType Type\n        +Color? Color\n        +IReadOnlyList~Pawn~ Occupants\n        +bool IsSafe\n        +bool CanOccupy(Pawn pawn)\n        +void AddPawn(Pawn pawn)\n        +void RemovePawn(Pawn pawn)\n    }\n\n    class Player {\n        -Color _color\n        -PlayerState _state\n        -IList~Pawn~ _pawns\n        -IRuleEngine _ruleEngine\n\n        +Color Color\n        +PlayerState State\n        +IReadOnlyList~Pawn~ Pawns\n        +bool HasWon()\n        +IEnumerable~Pawn~ GetMovablePawns(int roll)\n        +int GetFinishedPawnCount()\n    }\n\n    class CompositeRuleEngine {\n        -IEnumerable~IMovementRule~ _movementRules\n        -IEnumerable~ICaptureRule~ _captureRules\n        -IEnumerable~IWinConditionRule~ _winConditionRules\n\n        +bool ValidateMove(Pawn pawn, int roll)\n        +bool ValidateCapture(Pawn movingPawn, Tile destination)\n        +bool CheckWinCondition(IPlayer player)\n        +void AddMovementRule(IMovementRule rule)\n        +void AddCaptureRule(ICaptureRule rule)\n    }\n\n    %% ENUMS\n    class GameState {\n        <<Enumeration>>\n        NotStarted\n        Running\n        Paused\n        Finished\n    }\n\n    class Color {\n        <<enumeration>>\n        Red\n        Blue\n        Green\n        Yellow\n    }\n\n    class PlayerState {\n        <<Enumeration>>\n        Active\n        Won\n        Eliminated\n    }\n\n    class PawnState {\n        <<Enumeration>>\n        InStart\n        OnBoard\n        InHome\n        Finished\n    }\n\n    class TileType {\n        <<enumeration>>\n        Start\n        Normal\n        Safe\n        HomeEntry\n        Home\n    }\n\n    class Coordinates {\n        <<struct>>\n        -int _x\n        -int _y\n        +int X\n        +int Y\n        +Coordinates(int x, int y)\n        +bool Equals(Coordinates other)\n        +int GetHashCode()\n    }\n\n    class MoveResult {\n        <<record>>\n        +bool Success\n        +string Message\n        +Pawn MovedPawn\n        +ITile FromTile\n        +ITile ToTile\n        +Pawn CapturedPawn\n        +bool ExtraTurn\n    }",
  "content_size": 6852,
  "collected_at": "2026-02-06T01:52:54.066858",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}