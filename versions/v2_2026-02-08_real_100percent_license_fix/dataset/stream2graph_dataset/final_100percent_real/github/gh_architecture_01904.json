{
  "id": "gh_architecture_01904",
  "source": "github",
  "source_url": "https://github.com/WaelOGC/OGC-NewFinity-Palstform/blob/73265edb567f3ef9cac6b118db27d5a350bfd49d/docs/mermaid/09-amy-agent/phase-9.1--amy--routing-architecture.mmd",
  "github_repo": "WaelOGC/OGC-NewFinity-Palstform",
  "github_file_path": "docs/mermaid/09-amy-agent/phase-9.1--amy--routing-architecture.mmd",
  "diagram_type": "architecture",
  "code": "flowchart TB\n\n%% Phase 9.1 - Amy AI Agent Dynamic Backend Routing Architecture\n%% How Amy routes user requests dynamically\n\nUSER([User])\n\nsubgraph MAIN_COMPONENTS[\"Main Components\"]\n  FRONTEND_UI[Frontend UI<br/>Tool Interface]\n  AMY_HANDLER[Amy Request Handler]\n  TOOL_ROUTER[Tool Router]\n  MODEL_SELECTOR[Model Selector<br/>GPT, Image Engine,<br/>Code Engine, Business Engine]\n  CREDITS_MGR[Credits/Usage Manager]\n  SAFETY_LAYER[Safety & Validation Layer]\n  RESPONSE_FORMATTER[Response Formatter]\nend\n\nsubgraph MODELS[\"AI Models\"]\n  GPT_MODEL[GPT Model]\n  IMAGE_ENGINE[Image Engine]\n  CODE_ENGINE[Code Engine]\n  BUSINESS_ENGINE[Business Engine]\nend\n\nsubgraph FLOWS[\"Request Flows\"]\n  USER_REQUEST[User Request]\n  HANDLER_PROCESS[Handler Processing]\n  ROUTER_SELECT[Router Selection]\n  MODEL_EXECUTE[Model Execution]\n  OUTPUT_GENERATE[Output Generation]\n  FORMAT_RESPONSE[Format Response]\nend\n\nsubgraph ERROR_FLOWS[\"Error Flows\"]\n  INVALID_TOOL[Invalid Tool]\n  SAFETY_BLOCK[Safety Block]\n  MODEL_TIMEOUT[Model Timeout]\n  ERROR_RESPONSE[Error Response]\nend\n\nUSER --> USER_REQUEST\nUSER_REQUEST --> FRONTEND_UI\nFRONTEND_UI --> AMY_HANDLER\n\nAMY_HANDLER --> HANDLER_PROCESS\nHANDLER_PROCESS --> SAFETY_LAYER\nSAFETY_LAYER -->|Valid| TOOL_ROUTER\nSAFETY_LAYER -->|Invalid| SAFETY_BLOCK\n\nTOOL_ROUTER --> ROUTER_SELECT\nROUTER_SELECT --> MODEL_SELECTOR\nMODEL_SELECTOR --> CREDITS_MGR\nCREDITS_MGR -->|Credits Available| MODEL_EXECUTE\nCREDITS_MGR -->|Insufficient Credits| ERROR_RESPONSE\n\nMODEL_SELECTOR --> MODELS\nMODELS --> GPT_MODEL\nMODELS --> IMAGE_ENGINE\nMODELS --> CODE_ENGINE\nMODELS --> BUSINESS_ENGINE\n\nGPT_MODEL --> MODEL_EXECUTE\nIMAGE_ENGINE --> MODEL_EXECUTE\nCODE_ENGINE --> MODEL_EXECUTE\nBUSINESS_ENGINE --> MODEL_EXECUTE\n\nMODEL_EXECUTE --> OUTPUT_GENERATE\nOUTPUT_GENERATE --> RESPONSE_FORMATTER\nRESPONSE_FORMATTER --> FORMAT_RESPONSE\nFORMAT_RESPONSE --> USER\n\nROUTER_SELECT -->|Invalid Tool| INVALID_TOOL\nMODEL_EXECUTE -->|Timeout| MODEL_TIMEOUT\nINVALID_TOOL --> ERROR_RESPONSE\nSAFETY_BLOCK --> ERROR_RESPONSE\nMODEL_TIMEOUT --> ERROR_RESPONSE\nERROR_RESPONSE --> USER\n\n",
  "content_size": 2068,
  "collected_at": "2026-02-06T02:04:47.304114",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}