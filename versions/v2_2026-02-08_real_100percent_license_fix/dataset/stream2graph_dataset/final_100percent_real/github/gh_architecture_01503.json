{
  "id": "gh_architecture_01503",
  "source": "github",
  "source_url": "https://github.com/lioncubs/agent-cli-orchestrator/blob/2cad9aaa2cfcc79e5375324fcd93067a93e2bd31/docs/diagrams/mermaid/query-research-flow.mmd",
  "github_repo": "lioncubs/agent-cli-orchestrator",
  "github_file_path": "docs/diagrams/mermaid/query-research-flow.mmd",
  "diagram_type": "architecture",
  "code": "%% Query and Research Flow\n%% Shows the differences between Query (direct) and Research (temp worktree) modes\n\nflowchart TB\n    User[User Request]:::primaryBlue\n    \n    User -->|Quick question| QueryPath\n    User -->|Deep analysis| ResearchPath\n    \n    subgraph QueryPath[Query Mode - Direct Access]\n        direction TB\n        Q1[Receive Query]:::lightBlue\n        Q2[Load Session<br/>Context Optional]:::lightBlue\n        Q3[Execute in<br/>Main Repository]:::lightBlue\n        Q4[Copilot CLI<br/>Read-Only Tools]:::mediumGray\n        Q5[Return Response]:::lightGreen\n        Q6[Save to Session<br/>if multi-turn]:::lightBlue\n        Q7[Immediate Cleanup]:::success\n        \n        Q1 --> Q2\n        Q2 --> Q3\n        Q3 --> Q4\n        Q4 --> Q5\n        Q5 --> Q6\n        Q6 --> Q7\n    end\n    \n    subgraph ResearchPath[Research Mode - Temporary Worktree]\n        direction TB\n        R1[Receive Research<br/>Request]:::lightPurple\n        R2[Create Temp Worktree<br/>Detached HEAD]:::lightOrange\n        R3[Set Read-Only<br/>Tool Policy]:::lightPurple\n        R4[Execute Copilot CLI<br/>in Worktree]:::mediumGray\n        R5[Multi-Turn Analysis<br/>Allowed]:::lightPurple\n        R6[Generate Research<br/>Artifact]:::lightGreen\n        R7[Save Findings &<br/>Recommendations]:::lightGreen\n        R8[Cleanup Worktree]:::success\n        R9[Return Artifact]:::primaryGreen\n        \n        R1 --> R2\n        R2 --> R3\n        R3 --> R4\n        R4 --> R5\n        R5 -->|Continue| R4\n        R5 -->|Complete| R6\n        R6 --> R7\n        R7 --> R8\n        R8 --> R9\n    end\n    \n    subgraph comparison[Mode Comparison]\n        direction TB\n        \n        subgraph queryChar[Query Characteristics]\n            QC1[✓ No worktree]:::info\n            QC2[✓ Fast execution]:::info\n            QC3[✓ Simple questions]:::info\n            QC4[✗ Limited context]:::warning\n            QC5[✗ No persistence]:::warning\n        end\n        \n        subgraph researchChar[Research Characteristics]\n            RC1[✓ Isolated worktree]:::success\n            RC2[✓ Deep analysis]:::success\n            RC3[✓ Multi-turn context]:::success\n            RC4[✓ Saved artifacts]:::success\n            RC5[✗ Slower setup]:::warning\n        end\n    end\n    \n    Q7 -.->|Use Case| queryChar\n    R9 -.->|Use Case| researchChar\n    \n    subgraph outcomes[Possible Outcomes]\n        direction LR\n        O1[Direct Answer]:::primaryGreen\n        O2[Research Report]:::primaryGreen\n        O3[Suggested Delegation<br/>Prompt]:::primaryOrange\n    end\n    \n    Q7 --> O1\n    R9 --> O2\n    R9 -.->|May suggest| O3\n    \n    %% Style definitions\n    classDef primaryBlue fill:#2563eb,stroke:#1e40af,color:#ffffff,stroke-width:2px\n    classDef primaryGreen fill:#16a34a,stroke:#15803d,color:#ffffff,stroke-width:2px\n    classDef primaryOrange fill:#ea580c,stroke:#c2410c,color:#ffffff,stroke-width:2px\n    classDef lightBlue fill:#dbeafe,stroke:#2563eb,color:#1e40af,stroke-width:2px\n    classDef lightGreen fill:#dcfce7,stroke:#16a34a,color:#15803d,stroke-width:2px\n    classDef lightOrange fill:#ffedd5,stroke:#ea580c,color:#c2410c,stroke-width:2px\n    classDef lightPurple fill:#f3e8ff,stroke:#9333ea,color:#7e22ce,stroke-width:2px\n    classDef mediumGray fill:#6b7280,stroke:#374151,color:#ffffff,stroke-width:2px\n    classDef success fill:#22c55e,stroke:#15803d,color:#ffffff,stroke-width:2px\n    classDef warning fill:#eab308,stroke:#ca8a04,color:#1f2937,stroke-width:2px\n    classDef info fill:#3b82f6,stroke:#2563eb,color:#ffffff,stroke-width:2px\n    \n    %% Subgraph styles\n    style QueryPath fill:#eff6ff,stroke:#2563eb,stroke-width:3px\n    style ResearchPath fill:#faf5ff,stroke:#9333ea,stroke-width:3px\n    style comparison fill:#fafafa,stroke:#6b7280,stroke-width:2px\n    style queryChar fill:#dbeafe,stroke:#2563eb,stroke-width:2px\n    style researchChar fill:#f3e8ff,stroke:#9333ea,stroke-width:2px\n    style outcomes fill:#f0fdf4,stroke:#16a34a,stroke-width:2px\n",
  "content_size": 3949,
  "collected_at": "2026-02-06T01:47:06.055069",
  "license": "none",
  "license_name": "No License",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}