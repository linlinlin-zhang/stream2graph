{
  "id": "gh_architecture_01440",
  "source": "github",
  "source_url": "https://github.com/zone17/sovren/blob/d3da3358e52da6ae6b2365e89401eca50f337a0c/docs/architecture/diagrams/us-311-data-flow.mmd",
  "github_repo": "zone17/sovren",
  "github_file_path": "docs/architecture/diagrams/us-311-data-flow.mmd",
  "diagram_type": "architecture",
  "code": "graph LR\n    subgraph \"1. Session Creation\"\n        A1[NOSTR Pubkey] --> A2[Device Fingerprint]\n        A2 --> A3[Metadata Collection]\n        A3 --> A4[Token Generation]\n        A4 --> A5[Session Object]\n    end\n    \n    subgraph \"2. Token Security\"\n        B1[64-char Random Token] --> B2[SHA-256 Hash]\n        B2 --> B3[Store Hash Only]\n        B3 --> B4[Return Token Once]\n    end\n    \n    subgraph \"3. Expiration Logic\"\n        C1[Absolute Timeout<br/>7 days] --> C3[Session Expires]\n        C2[Idle Timeout<br/>24 hours] --> C3\n        C3 --> C4[Auto-Revoke]\n    end\n    \n    subgraph \"4. Activity Tracking\"\n        D1[Session Action] --> D2[Log Activity]\n        D2 --> D3[Activity Log<br/>last 100 entries]\n        D3 --> D4[Audit Trail]\n    end\n    \n    subgraph \"5. Multi-Device\"\n        E1[Device 1] --> E3[Session Limit Check]\n        E2[Device 2] --> E3\n        E3 --> E4{Count > 5?}\n        E4 -->|Yes| E5[Revoke Oldest]\n        E4 -->|No| E6[Allow New Session]\n    end\n    \n    A5 --> B1\n    B4 --> C1\n    C4 --> D1\n    D4 --> E3\n    \n    style A5 fill:#3B82F6,stroke:#2563EB,color:#fff\n    style B3 fill:#EF4444,stroke:#DC2626,color:#fff\n    style C3 fill:#F59E0B,stroke:#D97706,color:#fff\n    style D3 fill:#10B981,stroke:#059669,color:#fff\n    style E5 fill:#8B5CF6,stroke:#7C3AED,color:#fff\n",
  "content_size": 1310,
  "collected_at": "2026-02-06T01:46:15.090549",
  "license": "none",
  "license_name": "No License",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}