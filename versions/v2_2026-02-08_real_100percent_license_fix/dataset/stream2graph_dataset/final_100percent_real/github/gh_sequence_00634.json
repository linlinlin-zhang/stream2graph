{
  "id": "gh_sequence_00634",
  "source": "github",
  "source_url": "https://github.com/DipakKumarChauhan/foodie-eyes/blob/6f5e583b668f86618ad6b64750669343c1679c0e/docs/diagrams-rendered/diagram-4-sequenceDiagram.mmd",
  "github_repo": "DipakKumarChauhan/foodie-eyes",
  "github_file_path": "docs/diagrams-rendered/diagram-4-sequenceDiagram.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    participant User\n    participant Home as Home Page\n    participant TopBar as TopBar Component\n    participant LocationDisplay as LocationDisplay\n    participant MoodCards as MoodCards\n    participant SearchHero as SearchHero Component\n    participant DetailModal as DetailModal\n    participant AuthModal as AuthModal\n    participant API as /api/agent\n    participant Groq as Groq AI\n    participant Serper as Serper API\n    participant Firebase as Firebase\n    \n    User->>Home: Opens Application\n    Home->>Firebase: Check Auth Status\n    Firebase-->>Home: Auth Status\n    Home->>Home: Load Saved Location\n    Home->>TopBar: Render with Location\n    Home->>LocationDisplay: Render Location\n    Home->>MoodCards: Render Mood Options\n    Home->>SearchHero: Render Search Interface\n    \n    User->>SearchHero: Enters Query\n    alt Voice Input\n        User->>SearchHero: Clicks Mic Button\n        SearchHero->>SearchHero: Start Speech Recognition\n        SearchHero->>SearchHero: Convert Speech to Text\n    end\n    \n    alt Apply Filters\n        User->>SearchHero: Opens Filter Panel\n        User->>SearchHero: Sets Dietary/Budget/Allergens\n    end\n    \n    User->>SearchHero: Submits Search\n    SearchHero->>API: POST /api/agent<br/>{query, location, filters}\n    \n    API->>Groq: Validate & Optimize Query\n    Groq-->>API: {is_food, searchQuery, cuisineCategory}\n    \n    alt Not Food\n        API-->>SearchHero: 400 Error\n        SearchHero->>User: Show Error Message\n    else Food Query\n        API->>Serper: Search Places\n        Serper-->>API: Places Array\n        \n        alt Cuisine Detected\n            API->>Serper: Search Cuisine Restaurants\n            Serper-->>API: Additional Places\n            API->>API: Merge & Deduplicate\n        end\n        \n        API->>Serper: Enrich Place Details\n        Serper-->>API: Detailed Place Info\n        \n        API->>API: Smart Scoring & Ranking\n        API->>Groq: Analyze Places\n        Groq-->>API: Tips & Match Reasons\n        \n        API-->>SearchHero: Results Array\n        SearchHero->>User: Display Results Cards\n    end\n    \n    User->>SearchHero: Clicks Place Card\n    SearchHero->>Home: onPlaceSelect(place)\n    Home->>Firebase: Add to History\n    Home->>DetailModal: Open with Place Data\n    DetailModal->>User: Show Full Details\n    \n    alt Bookmark Action\n        User->>DetailModal: Clicks Bookmark\n        DetailModal->>Home: onBookmark(place)\n        Home->>Home: Check Auth Status\n        \n        alt Not Authenticated\n            Home->>AuthModal: Show Auth Modal\n            User->>AuthModal: Signs In\n            AuthModal->>Firebase: Authenticate\n            Firebase-->>AuthModal: User Object\n            AuthModal->>Home: Close Modal\n        end\n        \n        Home->>Firebase: Save Bookmark\n        Firebase-->>Home: Success\n        Home->>DetailModal: Update Bookmark State\n    end\n    \n    alt Share Action\n        User->>DetailModal: Clicks Share\n        DetailModal->>DetailModal: Generate Share URL\n        DetailModal->>User: Show Share Options\n    end",
  "content_size": 3059,
  "collected_at": "2026-02-06T01:35:01.872388",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 1,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}