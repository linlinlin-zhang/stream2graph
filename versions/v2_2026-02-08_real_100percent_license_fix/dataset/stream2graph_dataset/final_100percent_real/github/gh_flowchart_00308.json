{
  "id": "gh_flowchart_00308",
  "source": "github",
  "source_url": "https://github.com/AlzateAndicaSebastian/AWS_deploy_SaludVital/blob/941f11a0a9862635bd74ef52ce7a5e769be2ed84/documentation/casos_uso_detallado.mmd",
  "github_repo": "AlzateAndicaSebastian/AWS_deploy_SaludVital",
  "github_file_path": "documentation/casos_uso_detallado.mmd",
  "diagram_type": "flowchart",
  "code": "%% Diagrama Mermaid detallado de casos de uso (Paciente, Médico, Administrador)\n%% Enfocado en: creación/validación de usuarios, gestión de citas, flujo de solicitudes y resultados de exámenes,\n%% y acceso a información por roles.\n\nflowchart LR\n    %% ROLES PRINCIPALES\n    subgraph Roles[Roles]\n        P[Paciente]\n        M[Médico]\n        A[Administrador]\n    end\n\n    %% REGISTROS / AUTENTICACIÓN\n    subgraph Auth[Registro / Login]\n        RP[POST /pacientes/registro]\n        LP[POST /pacientes/login]\n        RM[POST /medicos/registro]\n        LM[POST /medicos/login]\n        LA[POST /admin/login]\n    end\n\n    P --> RP\n    RP --> PacienteFile[archivo pacientes/documento.json]\n    P --> LP\n    M --> RM\n    RM --> MedicoFile[archivo medicos/doc_medico.json]\n    M --> LM\n    A --> LA\n    LA --> EnvVars[(ADMIN_USERNAME / ADMIN_SECRET_KEY)]\n\n    %% CITAS\n    subgraph Citas[Gestión de Citas]\n        CC[POST /citas Paciente agenda cita]\n        LC[GET /citas/documento_paciente]\n        EC[DELETE /citas]\n        AG[GET /medicos/agenda]\n        Cerrar[POST /medicos/cerrar-cita]\n    end\n\n    LP --> CC\n    CC --> CitaPacienteFile[archivo citas/documento_paciente.json]\n    CC --> AgendaMedicoFile[archivo agendas/doc_medico.json]\n    LC --> CitaPacienteFile\n    EC --> CitaPacienteFile\n    EC --> AgendaMedicoFile\n    AG --> AgendaMedicoFile\n    Cerrar --> AgendaMedicoFile\n    Cerrar --> DiagnosticoFile[archivo diagnosticos/codigo_cita.json]\n\n    %% EXÁMENES WORKFLOW\n    subgraph ExamenWorkflow[Workflow Exámenes]\n        Solicitud[Crear solicitud examen]\n        Autorizar[POST /examenes/solicitudes/autorizar]\n        Resultado[POST /examenes/resultados]\n    end\n\n    Cerrar --> Solicitud\n    Solicitud --> ExSolicitudes[examenes_solicitudes.json]\n    Autorizar --> ExSolicitudes\n    Autorizar --> EstadoAutorizado[Estado = autorizado]\n    Resultado --> ExResultados[examenes_resultados.json]\n    Resultado --> ExSolicitudes\n\n    %% EXÁMENES LEGACY (aún soportado)\n    subgraph ExamenLegacy[Exámenes Legacy]\n        CrearLegacy[admin_manager.crear_resultado_examen]\n    end\n    CrearLegacy --> LegacyExFile[examenes/codigo_examen.json]\n\n    %% CONSULTA EXÁMENES PACIENTE\n    subgraph ConsultaPaciente[Consulta Exámenes Paciente]\n        LEX[GET /pacientes/examenes]\n        LEXID[GET /pacientes/examenes/codigo]\n    end\n\n    LEX --> Fusion[PacienteService.fusionar legacy + workflow]\n    Fusion --> LegacyExFile\n    Fusion --> ExResultados\n    LEXID --> Fusion\n\n    %% SEGURIDAD / ROLES\n    subgraph Seguridad[Seguridad / JWT]\n        RolesModulo[roles.py]\n        TokenPaciente[(JWT paciente)]\n        TokenMedico[(JWT médico)]\n        TokenAdmin[(JWT admin)]\n    end\n\n    LP --> TokenPaciente\n    LM --> TokenMedico\n    LA --> TokenAdmin\n    RolesModulo --> CC\n    RolesModulo --> Cerrar\n    RolesModulo --> Autorizar\n    RolesModulo --> Resultado\n    RolesModulo --> LEX\n    RolesModulo --> LEXID\n\n    %% DETALLES DE TRANSFORMACIÓN\n    subgraph Normalizaciones[Normalizaciones]\n        FechaCita[Normalización fecha cita naive/aware]\n        FechaAgenda[Normalización agenda médica]\n        SerialDT[Serialización datetime -> ISO]\n    end\n\n    CC --> FechaCita\n    AG --> FechaAgenda\n    Cerrar --> SerialDT\n    Resultado --> SerialDT\n    CrearLegacy --> SerialDT\n\n    %% LEYENDAS\n    classDef role fill:#ffe0b2,stroke:#ef6c00,color:#000\n    classDef file fill:#f5f5f5,stroke:#616161,color:#000\n    classDef api fill:#e0f7fa,stroke:#006064,color:#000\n    classDef proc fill:#e8f5e9,stroke:#2e7d32,color:#000\n    classDef sec fill:#fce4ec,stroke:#ad1457,color:#000\n    classDef norm fill:#ede7f6,stroke:#5e35b1,color:#000\n\n    class P,M,A role\n    class PacienteFile,MedicoFile,CitaPacienteFile,AgendaMedicoFile,DiagnosticoFile,ExSolicitudes,ExResultados,LegacyExFile,EnvVars,TokenPaciente,TokenMedico,TokenAdmin file\n    class RP,LP,RM,LM,LA,CC,LC,EC,AG,Cerrar,Autorizar,Resultado,LEX,LEXID api\n    class Solicitud,CrearLegacy,Fusion proc\n    class RolesModulo sec\n    class FechaCita,FechaAgenda,SerialDT norm\n",
  "content_size": 4026,
  "collected_at": "2026-02-06T01:43:17.950234",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}