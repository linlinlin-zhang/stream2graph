{
  "id": "gh_class_01139",
  "source": "github",
  "source_url": "https://github.com/SawatKia/WealthTracking/blob/3237ea7fcdf6f42df90fc1654faaddbd113d6f73/design/newClassesDesign/system/Classes.mmd",
  "github_repo": "SawatKia/WealthTracking",
  "github_file_path": "design/newClassesDesign/system/Classes.mmd",
  "diagram_type": "class",
  "code": "%%{init: {\"theme\":\"\", 'themeVariables': {'lineColor': '#ff0000', 'dashedLineColor': '#00ff00'}}}%%\nclassDiagram\n    direction RL\n    \n    class MyAppErrors {\n        +statusCode: number\n        +data: Object\n        +constructor(message: string, statusCode: number, data: Object) void\n        +BadRequestError(message: string, statusCode: number, data: Object) MyAppErrors$\n        +UnauthorizedError(message: string, statusCode: number, data: Object) MyAppErrors$\n        +ForbiddenError(message: string, statusCode: number, data: Object) MyAppErrors$\n        +NotFoundError(message: string, statusCode: number, data: Object) MyAppErrors$\n        +ConflictError(message: string, statusCode: number, data: Object) MyAppErrors$\n        +PasswordError() MyAppErrors$\n        +UserDuplicateError() MyAppErrors$\n    }\n\n    class Error {\n        <<JS built-in>>\n    }\n\n    Error <|-- MyAppErrors\n\n    class Middleware {\n        +methodValidator(req: Request, res: Response, next: NextFunction) void\n        +checkAdmin(req: Request, res: Response, next: NextFunction) boolean\n        +errorHandler(err: Error, req: Request, res: Response, next: NextFunction) void\n        +responseHandler(req: Request, res: Response, next: NextFunction) void\n    }\n\n    class ExpressRouter {\n        <<module>>\n        +use(middleware: function)\n        +get(path: string, handler: function)\n        +post(path: string, handler: function)\n        +put(path: string, handler: function)\n        +delete(path: string, handler: function)\n    }\n\n    class UserController {\n        +register(req: Request, res: Response, next: NextFunction) Promise~void~\n        +getUser(req: Request, res: Response, next: NextFunction) Promise~void~\n        +updateUser(req: Request, res: Response, next: NextFunction) Promise~void~\n        +deleteUser(req: Request, res: Response, next: NextFunction) Promise~void~\n    }\n\n    class AuthController{\n        +login(req: Request, res: Response, next: NextFunction) Promise~void~\n        +refreshToken(req: Request, res: Response, next: NextFunction) Promise~void~\n    }\n\n    class BaseController {\n        +verifyFields(data: Object, requiredFields[]: string) boolean\n        +getCurrentUser(req: Request) User\n        +verifyOwnership(user: User, data[]: Object) boolean\n    }\n\n    class BaseModel {\n        -tableName: string\n        +constructor(tableName: string)\n        +validateSchema(data: Object) boolean\n        +create(userEmail: string, data: Object) Promise~string~\n        +findAll(userEmail: string) Promise~Object[]~\n        +findOne(key[]: string) Promise~Object~\n        +update(key[]: string, Data: Object) Promise~Object~\n        +delete(key[]: string) Promise~boolean~\n    }\n\n    class PgClient{\n        -pool\n        -client \n        -transactionStarted \n        +constructor()\n        +connect() Promise~void~\n        +isConnect() boolean\n        +beginTransaction() Promise~void~\n        +commitTransaction() Promise~void~\n        +rollbackTransaction() Promise~void~\n        +query(sql: string, params[]) Promise~QueryResult~\n        +release() void\n    }\n\n    class Redis{\n        +constructor()\n        +set(key: string, value: string) Promise~void~\n        +get(key: string) Promise~string~\n    }\n\n    class AuthMiddleware {\n        +verifyCredentials(req: Request, res: Response, next: NextFunction) void\n        +checkIsAdmin(req: Request, res: Response, next: NextFunction) boolean\n    }\n\n    class UserModel {\n        +constructor()\n        -hashPassword(plainPassword: string) Promise~string~\n        +checkPassword(userEmail: string, EnteredPassword: string) Promise~boolean~\n        +createUser(userData: Object) Promise~string~\n        +findUser(userEmail: string) Promise~Object~\n        +updateUser(userEmail: string, userData: Object) Promise~Object~\n    }\n\n    class BankAccountController {\n        +createBankAccount(req: Request, res: Response, next: NextFunction) Promise~void~\n        +getAllBankAccounts(req: Request, res: Response, next: NextFunction) Promise~void~\n        +getOneBankAccount(req: Request, res: Response, next: NextFunction) Promise~void~\n        +updateBankAccount(req: Request, res: Response, next: NextFunction) Promise~void~\n        +deleteBankAccount(req: Request, res: Response, next: NextFunction) Promise~void~\n    }\n\n    class BankAccountModel {\n        +constructor()\n    }\n\n    class TransactionController {\n        +createTransaction(req: Request, res: Response, next: NextFunction) Promise~void~\n        +getAllTransactions(req: Request, res: Response, next: NextFunction) Promise~void~\n        +getOneTransaction(req: Request, res: Response, next: NextFunction) Promise~void~\n        +updateTransaction(req: Request, res: Response, next: NextFunction) Promise~void~\n        +deleteTransaction(req: Request, res: Response, next: NextFunction) Promise~void~\n    }\n\n    class TransactionModel {\n        +constructor()\n        -cacheTransactionDetail(transactionUuid: string) Promise~void~\n        +createTransaction(userEmail: string, data: Object) Promise~string~\n        +findTransactionDetail(transactionUuid: string) Promise~Object~\n        +updateTransaction(transactionUuid: string,  data: Object) Promise~Object~\n        +deleteTransaction(transactionUuid: string) Promise~boolean~\n    }\n\n    class DebtController {\n        +createDebt(req: Request, res: Response, next: NextFunction) Promise~void~\n        +getAllDebts(req: Request, res: Response, next: NextFunction) Promise~void~\n        +getOneDebt(req: Request, res: Response, next: NextFunction) Promise~void~\n        +updateDebt(req: Request, res: Response, next: NextFunction) Promise~void~\n        +deleteDebt(req: Request, res: Response, next: NextFunction) Promise~void~\n    }\n\n    class DebtModel {\n        +constructor()\n    }\n\n    class JWTUtils {\n        +createAccessToken(user: Object) string\n        +createRefreshToken(user: Object) string\n        +createTokenResponse(user: Object) Object\n        +decodeToken(token: string) Object\n    }\n\n    class ThirdPartyAPIController {\n        +getQuotaInformation(req: Request, res: Response, next: NextFunction) Promise~void~\n        +extractSlipData(req: Request, res: Response, next: NextFunction) Promise~void~\n    }\n\n    class EasySlipService {\n        -EASYSLIP_API_URL: string\n        -EASYSLIP_API_KEY: string\n        +constructor()\n        +fetchQuotaInformation() Promise~Object~\n        +checkSlipApiAvailability() Promise~boolean~\n        +verifySlip(base64Image: string) Promise~Object~\n    }\n\n    class Utils{\n        +formatResponse(status_code: number, message: string, data: Object) Object\n        +logger(moduleName: string) Logger~instant~\n    }\n    \n    class Logger{\n        +constructor(moduleName: string)\n        +log(message: string)\n        +info(message: string)\n        +warn(message: string)\n        +error(message: string)\n        +debug(message: string)\n        +silly(message: string)\n        +verbose(message: string)\n    }\n\n    BaseController <|-- UserController\n    BaseController <|-- BankAccountController\n    BaseController <|-- TransactionController\n    BaseController <|-- DebtController\n    BaseController <|-- ThirdPartyAPIController\n\n    BaseModel <|-- UserModel\n    BaseModel <|-- BankAccountModel\n    BaseModel <|-- TransactionModel\n    BaseModel <|-- DebtModel\n\n    UserController *-- UserModel\n    BankAccountController *-- BankAccountModel\n    TransactionController *-- TransactionModel\n    DebtController *-- DebtModel\n    ThirdPartyAPIController *-- EasySlipService\n\n    PgClient <|-- BaseModel\n    TransactionController *-- PgClient\n\n    ExpressRouter o-- Middleware\n    ExpressRouter o-- AuthMiddleware\n    ExpressRouter ..> UserController : routes to\n    ExpressRouter ..> BankAccountController : routes to\n    ExpressRouter ..> TransactionController : routes to\n    ExpressRouter ..> DebtController : routes to\n    ExpressRouter ..> AuthController : routes to\n    ExpressRouter ..> ThirdPartyAPIController : routes to\n\n    UserController *-- MyAppErrors\n    BankAccountController *-- MyAppErrors\n    TransactionController *-- MyAppErrors\n    DebtController *-- MyAppErrors\n    ThirdPartyAPIController *-- MyAppErrors\n    AuthController *-- MyAppErrors\n\n    UserController *-- Utils\n    BankAccountController *-- Utils\n    TransactionController *-- Utils\n    DebtController *-- Utils\n    ThirdPartyAPIController *-- Utils\n\n    TransactionModel *-- Redis\n    TransactionModel *-- BankAccountModel\n\n    AuthController o-- JWTUtils\n    AuthMiddleware o-- JWTUtils\n\n    AuthController *-- UserModel\n    AuthMiddleware *-- MyAppErrors\n\n    Utils *-- Logger\n\n    UserModel \"1\" -- \"many\" BankAccountModel : manages\n    UserModel \"1\" -- \"many\" DebtModel : owns\n    UserModel \"1\" -- \"many\" TransactionModel : performs\n    DebtModel \"0.1\" -- \"many\" TransactionModel : associated with\n    TransactionModel \"many\" -- \"1..2\" BankAccountModel : involves\n",
  "content_size": 8890,
  "collected_at": "2026-02-06T01:53:32.003890",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 1,
  "repo_forks": 1
}