{
  "id": "gh_architecture_01748",
  "source": "github",
  "source_url": "https://github.com/stoutpanda/molly_house_references/blob/580208d4480086b7ed64b37450a5ea0ac523b490/festivity_card_flow_diagram.mmd",
  "github_repo": "stoutpanda/molly_house_references",
  "github_file_path": "festivity_card_flow_diagram.mmd",
  "diagram_type": "architecture",
  "code": "flowchart TD\n    %% Header\n    subgraph header[\"Turn Structure\"]\n        direction LR\n        Runner[\"Runner<br/>MUST play each round\"]\n        P1[\"Player 1<br/>Play or Pass\"]\n        P2[\"Player 2<br/>Play or Pass\"]\n        P3[\"Player 3<br/>Play or Pass\"]\n        Community[\"Community<br/>1 per round from deck\"]\n    end\n    \n    %% Card Distribution\n    subgraph pool[\"Card Pool\"]\n        AllCards[\"All cards played during<br/>festivity\"]\n    end\n    \n    header --> pool\n    \n    %% Selection\n    pool --> SelectBest{{\"Select Best<br/>4 Cards\"}}\n    \n    %% Two Paths\n    SelectBest -->|Contains Threat?| ThreatPath\n    SelectBest -->|No Threat| WinningSet[\"Winning Set<br/>4 cards\"]\n    \n    %% Threat Path\n    subgraph ThreatPath[\"Threat Resolution\"]\n        RemCards[\"Remaining Cards<br/>Not selected\"]\n        \n        RemCards --> RunnerGossip[\"Runner adds to Gossip<br/>One by one\"]\n        \n        RunnerGossip --> CheckThreat{{\"Contains<br/>Threat?\"}}\n        \n        CheckThreat -->|Yes| EXPOSURE[\"EXPOSURE\"]\n        CheckThreat -->|No| Continue\n        \n        EXPOSURE --> WhoseThreat{{\"Whose Threat?\"}}\n        \n        WhoseThreat -->|Player's| PlayerExposed[\"Player's<br/>That Player Exposed<br/>Loses matching rep\"]\n        WhoseThreat -->|Community's| AllExposed[\"Community's<br/>ALL Players Exposed<br/>Lose matching rep\"]\n        \n        PlayerExposed --> DrawCards[\"Players Draw Cards\"]\n        AllExposed --> DrawCards\n        \n        Continue --> DrawCards\n        \n        DrawCards --> EliteMasq[\"Elite Masquerade Cards:<br/>1 per card not won\"]\n        \n        EliteMasq --> ScoreBonuses[\"Score Bonuses\"]\n    end\n    \n    %% Winning Set Path\n    WinningSet --> CardType{{\"Card Type?\"}}\n    \n    CardType -->|Player's Desire| PlayerDesire[\"Player's Desire<br/>To Player's<br/>Reputation\"]\n    CardType -->|Player's Molly| PlayerMolly[\"Player's Molly<br/>To Player's<br/>Reputation\"]\n    CardType -->|Community Desire| CommDesire[\"Community Desire<br/>To Safe Pile\"]\n    CardType -->|Community Molly| CommMolly[\"Community Molly<br/>To Safe Pile\"]\n    CardType -->|Community Threat| CommThreat[\"Community Threat<br/>To Safe Pile\"]\n    CardType -->|Player's Threat| PlayerThreat[\"Player's Threat<br/>FOILED<br/>To Safe Pile\"]\n    \n    PlayerDesire --> ScoreJoy[\"Player Scores Joy<br/>Stars on card\"]\n    PlayerMolly --> MollyBonus[\"Player Scores 0<br/>but Molly Bonus possible\"]\n    CommDesire --> CommScore[\"Community Scores<br/>Stars on card\"]\n    CommMolly --> CommScore2[\"Community Scores<br/>4 Joy\"]\n    CommThreat --> CommScore3[\"Community Scores<br/>0 Joy\"]\n    PlayerThreat --> PrideRule{{\"Pride Rule?\"}}\n    \n    PrideRule -->|Yes| TakeCubes[\"Take cubes and<br/>Rep cards to Safe\"]\n    PrideRule -->|No| JustThreat[\"Just threat to Safe\"]\n    \n    %% Bottom Bonuses\n    ScoreJoy --> BonusPhase\n    MollyBonus --> BonusPhase\n    CommScore --> BonusPhase\n    CommScore2 --> BonusPhase\n    CommScore3 --> BonusPhase\n    TakeCubes --> BonusPhase\n    JustThreat --> BonusPhase\n    \n    subgraph BonusPhase[\"Score Bonuses\"]\n        direction LR\n        RunnerBonus[\"Runner Bonus\"]\n        CommunityBonus[\"Community Bonus\"]\n        \n        RunnerBonus --> GoodFestivity[\"Good Festivity\"]\n        RunnerBonus --> QuietGathering[\"Quiet Gathering\"]\n        RunnerBonus --> SurpriseBall[\"Surprise Ball\"]\n        RunnerBonus --> Christening[\"Christening\"]\n        RunnerBonus --> Dance[\"Dance\"]\n        RunnerBonus --> QuietGathering2[\"Quiet Gathering\"]\n        \n        GoodFestivity --> Plus3Joy[\"Plus 3 Joy + Rep at site\"]\n        QuietGathering --> JoyBen[\"Joy = Rep at site\"]\n        SurpriseBall --> Plus4Joy[\"Plus 4 Joy\"]\n        Christening --> Plus3Joy2[\"Plus 3 Joy\"]\n        Dance --> Plus1Joy[\"Plus 1 Joy\"]\n        QuietGathering2 --> Plus0Joy[\"Plus 0 Joy\"]\n    end\n",
  "content_size": 3802,
  "collected_at": "2026-02-06T02:02:49.868289",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License (Assumed)",
  "license_url": null,
  "repo_stars": 3,
  "repo_forks": 0
}