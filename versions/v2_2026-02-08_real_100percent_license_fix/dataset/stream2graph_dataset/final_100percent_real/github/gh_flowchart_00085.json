{
  "id": "gh_flowchart_00085",
  "source": "github",
  "source_url": "https://github.com/Ribesh19/redis-azure-vecsim-app/blob/cb01576497f24c7feb2d897c6b9ccf8a3b8e2934/flowchart_system_deisgn.mmd",
  "github_repo": "Ribesh19/redis-azure-vecsim-app",
  "github_file_path": "flowchart_system_deisgn.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TB\n    %% Main Components\n    subgraph \"Frontend\"\n        UI[\"User Interface\"]\n        SemanticSearch[\"Semantic Search Button\"]\n        ImageSearch[\"Image Search Button\"]\n        ProductCard[\"Product Card Component\"]\n        ProductGrid[\"Product Grid\"]\n    end\n    \n    subgraph \"Backend\"\n        API[\"FastAPI Server\"]\n        Routes[\"API Routes\"]\n        Models[\"Data Models\"]\n        QueryBuilder[\"Query Builder\"]\n        ResultProcessor[\"Result Processor\"]\n    end\n    \n    subgraph \"Azure Cloud\"\n        subgraph \"Azure SQL Database\"\n            SQLdb[(Product Database)]\n            ChangeTracking[\"Change Tracking\"]\n        end\n        \n        subgraph \"Azure Function\"\n            SQLTrigger[\"SQL Trigger Function\"]\n            EmbeddingGenerator[\"Embedding Generator\"]\n            TextVectorCreator[\"Text Vector Creator\"]\n            ImageVectorCreator[\"Image Vector Creator\"]\n            RedisUpdater[\"Redis Updater\"]\n        end\n        \n        subgraph \"Azure Cache for Redis\"\n            RedisCache[(Redis Cache)]\n            VectorIndex[\"HNSW Vector Index\"]\n            ProductMetadata[\"Product Metadata\"]\n        end\n    end\n    \n    subgraph \"Initial Load\"\n        JupyterNb[\"Jupyter Notebook\"]\n        SentenceTransformer[\"Sentence Transformer\"]\n        Img2Vec[\"Img2Vec ResNet-18\"]\n        VectorFiles[\"Vector JSON Files\"]\n    end\n    \n    %% Connections\n    UI --> ProductGrid\n    ProductGrid --> ProductCard\n    ProductCard --> SemanticSearch\n    ProductCard --> ImageSearch\n    \n    SemanticSearch -- \"API Call\" --> Routes\n    ImageSearch -- \"API Call\" --> Routes\n    \n    Routes --> QueryBuilder\n    QueryBuilder --> VectorIndex\n    VectorIndex -- \"Search Results\" --> ResultProcessor\n    ResultProcessor --> ProductMetadata\n    ResultProcessor -- \"Similar Products\" --> UI\n    \n    %% Initial Data Loading Flow\n    JupyterNb -- \"Extract Data\" --> SQLdb\n    JupyterNb -- \"Process Text\" --> SentenceTransformer\n    JupyterNb -- \"Process Images\" --> Img2Vec\n    SentenceTransformer -- \"768-dim vectors\" --> VectorFiles\n    Img2Vec -- \"512-dim vectors\" --> VectorFiles\n    VectorFiles -- \"Load\" --> RedisCache\n    \n    %% Prefetch Caching Flow\n    SQLdb -- \"Product Update\" --> ChangeTracking\n    ChangeTracking -- \"Trigger\" --> SQLTrigger\n    SQLTrigger -- \"Get Changed Products\" --> EmbeddingGenerator\n    EmbeddingGenerator -- \"Process Text\" --> TextVectorCreator\n    EmbeddingGenerator -- \"Process Images\" --> ImageVectorCreator\n    TextVectorCreator -- \"New Text Vectors\" --> RedisUpdater\n    ImageVectorCreator -- \"New Image Vectors\" --> RedisUpdater\n    RedisUpdater -- \"Update Vectors\" --> RedisCache\n    RedisUpdater -- \"Update Metadata\" --> ProductMetadata\n    \n    %% Search Flow Process\n    subgraph \"Semantic Search Flow\"\n        S1[\"User clicks 'By Text' button\"]\n        S2[\"Frontend calls API with product_id\"]\n        S3[\"Backend retrieves product's text vector\"]\n        S4[\"Query Builder creates HNSW search with filters\"]\n        S5[\"Redis executes vector similarity search\"]\n        S6[\"Backend processes results\"]\n        S7[\"Frontend displays similar products\"]\n        \n        S1 --> S2 --> S3 --> S4 --> S5 --> S6 --> S7\n    end\n    \n    subgraph \"Image Search Flow\"\n        I1[\"User clicks 'By Image' button\"]\n        I2[\"Frontend calls API with product_id\"]\n        I3[\"Backend retrieves product's image vector\"]\n        I4[\"Query Builder creates HNSW search with filters\"]\n        I5[\"Redis executes vector similarity search\"]\n        I6[\"Backend processes results\"]\n        I7[\"Frontend displays similar products\"]\n        \n        I1 --> I2 --> I3 --> I4 --> I5 --> I6 --> I7\n    end\n    \n    subgraph \"Prefetch Caching Process\"\n        P1[\"Admin updates product in SQL Database\"]\n        P2[\"SQL Change Tracking detects update\"]\n        P3[\"Azure Function triggered with changed data\"]\n        P4[\"Function extracts product information\"]\n        P5[\"Function generates new text embedding\"]\n        P6[\"Function generates new image embedding\"]\n        P7[\"Function combines embeddings\"]\n        P8[\"Function updates Redis vector data\"]\n        P9[\"Function updates Redis product metadata\"]\n        P10[\"Vector index automatically updated\"]\n        \n        P1 --> P2 --> P3 --> P4 --> P5 & P6\n        P5 & P6 --> P7 --> P8 --> P9 --> P10\n    end\n    \n    subgraph \"HNSW Indexing Process\"\n        H1[\"Define image vector field (512-dim)\"]\n        H2[\"Define text vector field (768-dim)\"]\n        H3[\"Add tag fields (gender, category)\"]\n        H4[\"Create index with COSINE distance metric\"]\n        H5[\"Apply index to product_vector: keys\"]\n        \n        H1 & H2 --> H3 --> H4 --> H5\n    end\n    \n    %% Styling\n    classDef azure fill:#0072C6,color:white,stroke:#0072C6,stroke-width:2px\n    classDef redis fill:#DC382D,color:white,stroke:#DC382D,stroke-width:2px\n    classDef react fill:#61DAFB,color:black,stroke:#61DAFB,stroke-width:2px\n    classDef python fill:#3776AB,color:white,stroke:#3776AB,stroke-width:2px\n    classDef process fill:#FFF,color:black,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5\n    \n    class SQLdb,ChangeTracking,SQLTrigger,EmbeddingGenerator,TextVectorCreator,ImageVectorCreator,RedisUpdater azure\n    class RedisCache,VectorIndex,ProductMetadata redis\n    class UI,SemanticSearch,ImageSearch,ProductCard,ProductGrid react\n    class API,Routes,Models,QueryBuilder,ResultProcessor,JupyterNb,SentenceTransformer,Img2Vec python\n    class S1,S2,S3,S4,S5,S6,S7,I1,I2,I3,I4,I5,I6,I7,P1,P2,P3,P4,P5,P6,P7,P8,P9,P10,H1,H2,H3,H4,H5 process",
  "content_size": 5528,
  "collected_at": "2026-02-06T01:41:51.711053",
  "compilation_status": "failed",
  "license": "bsd-3-clause",
  "license_name": "BSD 3-Clause \"New\" or \"Revised\" License",
  "license_url": "https://api.github.com/licenses/bsd-3-clause",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}