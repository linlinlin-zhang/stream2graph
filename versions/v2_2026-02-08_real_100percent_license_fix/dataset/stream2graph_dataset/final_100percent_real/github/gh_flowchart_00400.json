{
  "id": "gh_flowchart_00400",
  "source": "github",
  "source_url": "https://github.com/ondemandenv/ondemandenv.github.io/blob/e4fe2a041ab4552d84db6636069c7c10f83f4a76/diagrams/multi-account-network-architecture.mmd",
  "github_repo": "ondemandenv/ondemandenv.github.io",
  "github_file_path": "diagrams/multi-account-network-architecture.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TB\n    %% ========================================\n    %% NETWORKING ACCOUNT - Contains Both Networks\n    %% ========================================\n    subgraph NetworkingAccount[\"ğŸŒ NETWORKING ACCOUNT (590183907424)\"]\n        direction TB\n\n        %% Production Network Infrastructure\n        subgraph ProdNetInfra[\"ğŸ”’ Production Network Infrastructure\"]\n            direction LR\n            TGWProd[\"ğŸ”— Transit Gateway<br/>10.0.0.1\"]\n            NATProd[\"ğŸŒ NAT Gateway\"]\n            IPAMProd[\"ğŸ“Š IPAM<br/>10.0.0.0/8\"]\n        end\n\n        %% LE Network Infrastructure\n        subgraph LENetInfra[\"ğŸ› ï¸ LE Network Infrastructure\"]\n            direction LR\n            TGWLE[\"ğŸ”— Transit Gateway<br/>172.16.0.1\"]\n            NATLE[\"ğŸŒ NAT Gateway\"]\n            IPAMLE[\"ğŸ“Š IPAM<br/>172.16.0.0/12\"]\n        end\n    end\n\n    %% ========================================\n    %% CENTRAL ORCHESTRATION ACCOUNT - Contains VPCs for Both Networks\n    %% ========================================\n    subgraph CentralAccount[\"ğŸ¯ CENTRAL ORCHESTRATION ACCOUNT (590184031795)\"]\n        direction LR\n\n        %% Production Network Central VPC with its deployment hub\n        subgraph ProdCentralVPC[\"ğŸ”’ Production Central VPC<br/>10.1.0.0/16\"]\n            direction TB\n            CentralControlProd[\"ğŸ¯ Production Deployment Hub<br/>ğŸ”§ Lambda Functions<br/>â€¢ K8s manifest deployment<br/>â€¢ DB schema deployment<br/>â€¢ VPC management<br/>ğŸ” Cross-account IAM roles\"]\n        end\n\n        %% LE Network Central VPC with its deployment hub\n        subgraph LECentralVPC[\"ğŸ› ï¸ LE Central VPC<br/>172.16.1.0/16\"]\n            direction TB\n            CentralControlLE[\"ğŸ¯ LE Deployment Hub<br/>ğŸ”§ Lambda Functions<br/>â€¢ K8s manifest deployment<br/>â€¢ DB schema deployment<br/>â€¢ VPC management<br/>ğŸ” Cross-account IAM roles\"]\n        end\n    end\n\n    %% ========================================\n    %% PRODUCTION NETWORK - 10.0.0.0/8\n    %% Envers surrounding the network infrastructure\n    %% ========================================\n    subgraph ProdNetwork[\"ğŸ”’ PRODUCTION NETWORK - 10.0.0.0/8\"]\n        direction TB\n\n\n        %% Left: Application Envers\n        subgraph ProdApp1[\"ğŸ“± APP ENVER 1 (Account: 590184130740)\"]\n            direction TB\n            subgraph ProdEnver1[\"ğŸš€ Application Enver 1\"]\n                App1ManifestProd[\"ğŸ“‹ K8s Manifests\"]\n                App1SchemaProd[\"ğŸ—ƒï¸ DB Schema/Roles\"]\n                App1ResProd[\"ğŸ’¾ IAM Roles & Resources\"]\n                App1VPCProd[\"ğŸ“¦ VPC: 10.4.0.0/16\"]\n            end\n        end\n\n        subgraph ProdApp2[\"ğŸ“± APP ENVER 2 (Account: 590184130741)\"]\n            direction TB\n            subgraph ProdEnver2[\"ğŸš€ Application Enver 2\"]\n                App2ManifestProd[\"ğŸ“‹ K8s Manifests\"]\n                App2ResProd[\"ğŸ’¾ IAM Roles & Resources\"]\n                App2VPCProd[\"ğŸ“¦ VPC: 10.5.0.0/16\"]\n            end\n        end\n\n        %% Right: Platform Services\n        subgraph ProdEKSAccount[\"âš™ï¸ EKS PLATFORM ACCOUNT (975050243618)\"]\n            direction TB\n            subgraph ProdEKS[\"âš™ï¸ EKS Platform Service\"]\n                EKSVPCProd[\"ğŸ“¦ VPC: 10.2.0.0/16\"]\n                EKSProd[\"â˜¸ï¸ EKS Cluster\"]\n                EKSDeployProd[\"ğŸš€ K8s Functions\"]\n            end\n        end\n\n        subgraph ProdRDSAccount[\"ğŸ—„ï¸ RDS PLATFORM ACCOUNT (975050243619)\"]\n            direction TB\n            subgraph ProdRDS[\"ğŸ—„ï¸ RDS Platform Service\"]\n                RDSVPCProd[\"ğŸ“¦ VPC: 10.3.0.0/16\"]\n                RDSProd[\"ğŸ—„ï¸ RDS Cluster\"]\n                RDSDeployProd[\"ğŸš€ DB Functions\"]\n            end\n        end\n\n        %% Position around network infrastructure\n        ProdNetInfra\n    end\n\n    %% ========================================\n    %% LOWER ENVIRONMENT NETWORK - 172.16.0.0/12\n    %% Envers surrounding the network infrastructure\n    %% ========================================\n    subgraph LENetwork[\"ğŸ› ï¸ LOWER ENVIRONMENT NETWORK - 172.16.0.0/12\"]\n        direction TB\n\n\n        %% Left: Application Envers\n        subgraph LEApp1[\"ğŸ“± APP ENVER 1 (Account: 590184130740)\"]\n            direction TB\n            subgraph LEEnver1[\"ğŸš€ Application Enver\"]\n                App1ManifestLE[\"ğŸ“‹ K8s Manifests\"]\n                App1SchemaLE[\"ğŸ—ƒï¸ DB Schema/Roles\"]\n                App1ResLENet[\"ğŸ’¾ IAM Roles & Resources\"]\n                App1VPCLENet[\"ğŸ“¦ VPC: 172.16.4.0/16\"]\n            end\n        end\n\n        %% Right: Platform Services\n        subgraph LEEKSAccount[\"âš™ï¸ EKS PLATFORM ACCOUNT (975050243618)\"]\n            direction TB\n            subgraph LEEKS[\"âš™ï¸ EKS Platform Service\"]\n                EKSVPCLENet[\"ğŸ“¦ VPC: 172.16.2.0/16\"]\n                EKSLENet[\"â˜¸ï¸ EKS Cluster\"]\n                EKSDeployLE[\"ğŸš€ K8s Functions\"]\n            end\n        end\n\n        subgraph LERDSAccount[\"ğŸ—„ï¸ RDS PLATFORM ACCOUNT (975050243619)\"]\n            direction TB\n            subgraph LERDS[\"ğŸ—„ï¸ RDS Platform Service\"]\n                RDSVPCLENet[\"ğŸ“¦ VPC: 172.16.3.0/16\"]\n                RDSLENet[\"ğŸ—„ï¸ RDS Cluster\"]\n                RDSDeployLE[\"ğŸš€ DB Functions\"]\n            end\n        end\n\n        %% Position around network infrastructure\n        LENetInfra\n    end\n\n    %% ========================================\n    %% INTERNET ACCESS\n    %% ========================================\n    subgraph Internet[\"ğŸŒ Internet\"]\n        ExtServices[\"External Services\"]\n    end\n\n    %% ========================================\n    %% NETWORK BACKBONE CONNECTIONS\n    %% ========================================\n\n    %% Central VPCs connect to their respective TGWs\n    ProdCentralVPC === TGWProd\n    LECentralVPC === TGWLE\n\n    %% Production TGW Hub - connecting all VPCs in production network\n    TGWProd === EKSVPCProd\n    TGWProd === RDSVPCProd\n    TGWProd === App1VPCProd\n    TGWProd === App2VPCProd\n\n    %% LE TGW Hub - connecting all VPCs in LE network\n    TGWLE === EKSVPCLENet\n    TGWLE === RDSVPCLENet\n    TGWLE === App1VPCLENet\n\n    %% Internet Access\n    TGWProd --> NATProd --> ExtServices\n    TGWLE --> NATLE --> ExtServices\n\n    %% ========================================\n    %% APPLICATION-CENTRIC DEPLOYMENT FLOWS\n    %% ========================================\n\n    %% PRODUCTION: Apps â†’ Production Hub â†’ Platforms\n    App1ManifestProd ==>|\"ğŸ“¤ Manifests\"| CentralControlProd\n    App1SchemaProd ==>|\"ğŸ“¤ Schema\"| CentralControlProd\n    App2ManifestProd ==>|\"ğŸ“¤ Manifests\"| CentralControlProd\n\n    CentralControlProd ==>|\"ğŸ”§ Deploy Prod\"| EKSDeployProd\n    CentralControlProd ==>|\"ğŸ”§ Deploy Prod\"| RDSDeployProd\n\n    EKSDeployProd ==> EKSProd\n    RDSDeployProd ==> RDSProd\n\n    %% LOWER ENVIRONMENT: Apps â†’ LE Hub â†’ Platforms\n    App1ManifestLE ==>|\"ğŸ“¤ Manifests\"| CentralControlLE\n    App1SchemaLE ==>|\"ğŸ“¤ Schema\"| CentralControlLE\n\n    CentralControlLE ==>|\"ğŸ”§ Deploy LE\"| EKSDeployLE\n    CentralControlLE ==>|\"ğŸ”§ Deploy LE\"| RDSDeployLE\n\n    EKSDeployLE ==> EKSLENet\n    RDSDeployLE ==> RDSLENet\n\n    %% ========================================\n    %% RUNTIME COMMUNICATION (IRSA)\n    %% ========================================\n\n    %% Enver 1 & 2 Runtime Access\n    EKSProd -.->|\"ğŸ” Role 1 â†’ DynamoDB\"| App1ResProd\n    EKSProd -.->|\"ğŸ” Role 2 â†’ RDS\"| RDSProd\n    EKSProd -.->|\"ğŸ” Role A â†’ DB\"| RDSProd\n    EKSProd -.->|\"ğŸ” Role B â†’ S3\"| App2ResProd\n\n    %% ========================================\n    %% STYLING\n    %% ========================================\n\n    %% Main network styling\n    style ProdNetwork fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px\n    style LENetwork fill:#e8f4fd,stroke:#039be5,stroke-width:3px\n\n    %% Networking account styling\n    style NetworkingAccount fill:#e8f5e8,stroke:#4caf50,stroke-width:3px\n\n    %% Central account styling\n    style CentralAccount fill:#fff3e0, stroke:#222,stroke-width:8px\n\n    %% Platform account styling\n    style ProdEKSAccount fill:#bbdefb,stroke:#0288d1,stroke-width:2px\n    style ProdRDSAccount fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px\n    style LEEKSAccount fill:#bbdefb,stroke:#0288d1,stroke-width:2px\n    style LERDSAccount fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px\n\n    %% Application account styling\n    style ProdApp1 fill:#e8f4fd,stroke:#039be5,stroke-width:2px\n    style ProdApp2 fill:#e8f4fd,stroke:#039be5,stroke-width:2px\n    style LEApp1 fill:#e8f4fd,stroke:#039be5,stroke-width:2px\n\n    %% Enver styling\n    style ProdEnver1 fill:#c8e6c9,stroke:#66bb6a,stroke-width:2px\n    style ProdEnver2 fill:#c8e6c9,stroke:#66bb6a,stroke-width:2px\n    style LEEnver1 fill:#c8e6c9,stroke:#66bb6a,stroke-width:2px\n\n    %% Central VPC styling\n    style ProdCentralVPC fill:#ffe0b2,stroke:red,stroke-width:2px\n    style LECentralVPC fill:#ffe0b2,stroke:red,stroke-width:2px\n\n    %% TGW and VPC node styling\n    style TGWProd stroke:red,stroke-width:2px\n    style TGWLE stroke:red,stroke-width:2px\n    style EKSVPCProd stroke:red,stroke-width:2px\n    style RDSVPCProd stroke:red,stroke-width:2px\n    style App1VPCProd stroke:red,stroke-width:2px\n    style App2VPCProd stroke:red,stroke-width:2px\n    style EKSVPCLENet stroke:red,stroke-width:2px\n    style RDSVPCLENet stroke:red,stroke-width:2px\n    style App1VPCLENet stroke:red,stroke-width:2px\n\n    %% Network infrastructure styling\n    style ProdNetInfra fill:#ffecb3,stroke:#ffa000,stroke-width:2px\n    style LENetInfra fill:#ffecb3,stroke:#ffa000,stroke-width:2px\n\n    %% TGW to VPC link styling\n    %% This style makes the TGW-VPC connections red, as requested.\n    linkStyle 0,1,2,3,4,5,6,7,8 stroke:red,stroke-width:2px",
  "content_size": 9355,
  "collected_at": "2026-02-06T01:43:51.351015",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License (Assumed)",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚"
}