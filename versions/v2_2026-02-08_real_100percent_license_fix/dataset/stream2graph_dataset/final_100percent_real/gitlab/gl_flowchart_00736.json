{
  "id": "gl_flowchart_00736",
  "source": "gitlab",
  "source_url": "https://github.com/aitrailblazer/Knowledge-Library-MCP/blob/09f566149a147de66418e092b2dbc4bb53520376/mcp-azure-server/architecture.mmd",
  "source_note": "collected_from_github_final",
  "github_repo": "aitrailblazer/Knowledge-Library-MCP",
  "diagram_type": "flowchart",
  "code": "flowchart TD\n    %% Main Title\n    Title[\"MCP Azure Server\"]:::mainTitle\n    Subtitle[\"(Model Context Protocol)\"]:::subtitle\n    Title --> Subtitle\n    \n    %% Client Layer\n    User((User)):::userNode --> FastAPI[FastAPI Web Framework]:::largeText\n    \n    %% Labels for subgraphs - placed outside and above\n    WebAPILabel[\"Web API Layer\"]:::subgraphLabel\n    MCPLayerLabel[\"MCP Implementation Layer\"]:::subgraphLabel\n    IntegrationLayerLabel[\"Integration Layer\"]:::subgraphLabel\n    AzureServicesLabel[\"Azure AI Services\"]:::subgraphLabel\n    ExternalComponentsLabel[\"External Components\"]:::subgraphLabel\n    \n    %% Add spacing between subgraphs\n    WebAPISpacer[ ]:::spacer\n    MCPLayerSpacer[ ]:::spacer\n    IntegrationLayerSpacer[ ]:::spacer\n    \n    %% Web API Layer - with explicit label above\n    WebAPILabel --- WebAPISpacer\n    subgraph WebAPI[\" \"]\n        direction LR\n        FastAPI --> AuthEndpoints[\"Authentication Endpoints\"]:::largeText\n        FastAPI --> ToolsEndpoint[\"Tools Endpoint\"]:::largeText\n        FastAPI --> ProcessEndpoint[\"Process Endpoint\"]:::largeText\n        FastAPI --> HealthEndpoint[\"Health Check\"]:::largeText\n    end\n    \n    %% MCP Layer - with explicit label above\n    WebAPI --- MCPLayerSpacer\n    MCPLayerLabel --- MCPLayerSpacer\n    subgraph MCPLayer[\" \"]\n        direction LR\n        FastMCP[\"FastMCP Library\"]:::largeText\n        ToolRegistry[\"Tool Registry\"]:::largeText\n        \n        AuthEndpoints --> FastMCP\n        ToolsEndpoint --> ToolRegistry\n        ProcessEndpoint --> FastMCP\n        FastMCP <--> ToolRegistry\n    end\n    \n    %% Integration Layer - with explicit label above\n    MCPLayer --- IntegrationLayerSpacer\n    IntegrationLayerLabel --- IntegrationLayerSpacer\n    subgraph IntegrationLayer[\" \"]\n        direction LR\n        AzureIntegration[\"Azure AI Integration\"]:::largeText\n        MSGraphIntegration[\"Microsoft Graph Integration\"]:::largeText\n        YahooFinanceIntegration[\"Yahoo Finance Integration\"]:::largeText\n        \n        FastMCP --> AzureIntegration\n        ToolRegistry --> MSGraphIntegration\n        ToolRegistry --> YahooFinanceIntegration\n    end\n    \n    %% Azure Services - with explicit label above\n    AzureServicesLabel -.- AzureServices\n    subgraph AzureServices[\" \"]\n        direction LR\n        AzureIdentity[\"Azure Identity\"]:::largeText\n        AzureAIProjects[\"Azure AI Projects\"]:::largeText\n        AzureOpenAI[\"Azure OpenAI\"]:::largeText\n        \n        AzureIntegration --> AzureIdentity\n        AzureIntegration --> AzureAIProjects\n        AzureAIProjects --> AzureOpenAI\n    end\n    \n    %% External Components - with explicit label\n    ExternalComponentsLabel -.- ExternalComponents\n    subgraph ExternalComponents[\" \"]\n        direction LR\n        MSGraph[\"Microsoft Graph API\"]:::largeText\n        YFinance[\"Yahoo Finance API\"]:::largeText\n        \n        MSGraphIntegration --> MSGraph\n        YahooFinanceIntegration --> YFinance\n    end\n    \n    %% Tools\n    ToolsSubgraphLabel[\"Available Tools\"]:::subgraphLabel\n    subgraph ToolsSubgraph[\" \"]\n        direction LR\n        AddNumbers[\"add_numbers Tool\"]:::toolNode\n        StockPrices[\"get_stock_prices Tool\"]:::toolNode\n        OneDriveList[\"list_onedrive_root Tool\"]:::toolNode\n        \n        ToolRegistry --> AddNumbers\n        ToolRegistry --> StockPrices\n        ToolRegistry --> OneDriveList\n        \n        StockPrices --> YFinance\n        OneDriveList --> MSGraph\n    end\n    \n    %% Footer\n    Footer[\"Copyright© 2025 Knowledge Library MCP\"]:::footer\n    \n    %% Enhanced styling with much larger text and better spacing\n    classDef default font-size:22px;\n    classDef mainTitle fill:none,stroke:none,color:#000000,font-weight:bold,font-size:48px;\n    classDef subtitle fill:none,stroke:none,color:#555555,font-weight:normal,font-size:24px;\n    classDef footer fill:none,stroke:none,color:#555555,font-weight:normal,font-size:20px;\n    classDef userNode fill:#E8F4FD,stroke:#2980B9,stroke-width:3px,color:#2C3E50,font-weight:bold,font-size:32px;\n    classDef applicationLayer fill:#5C9FDA,stroke:#2471A3,stroke-width:3px,color:white,font-weight:bold,font-size:22px;\n    classDef azureServices fill:#68B88E,stroke:#1E8449,stroke-width:3px,color:white,font-weight:bold,font-size:22px;\n    classDef dataStores fill:#F1C232,stroke:#B7950B,stroke-width:4px,color:#34495E,font-weight:bold,font-size:32px;\n    classDef integrationLayer fill:#D7BDE2,stroke:#8E44AD,stroke-width:3px,color:#34495E,font-weight:bold,font-size:22px;\n    classDef webAPILayer fill:#F5CBA7,stroke:#E67E22,stroke-width:3px,color:#34495E,font-weight:bold,font-size:22px;\n    classDef mcpLayer fill:#AAD0F4,stroke:#2471A3,stroke-width:3px,color:#34495E,font-weight:bold,font-size:22px;\n    classDef externalComponents fill:#A2D9CE,stroke:#16A085,stroke-width:3px,color:#34495E,font-weight:bold,font-size:22px;\n    classDef toolNode fill:#FFD6A5,stroke:#FF8C00,stroke-width:3px,color:#34495E,font-weight:bold,font-size:32px;\n    classDef spacer fill:none,stroke:none,color:none;\n    classDef subgraphLabel fill:none,stroke:none,color:#333333,font-weight:bold,font-size:36px;\n    classDef largeText fill:#F5CBA7,stroke:#E67E22,stroke-width:3px,color:#34495E,font-weight:bold,font-size:32px;\n    \n    %% Apply styles to nodes - make nodes larger with padding\n    class Title mainTitle\n    class Subtitle subtitle\n    class Footer footer\n    class FastAPI applicationLayer\n    class FastMCP,ToolRegistry mcpLayer\n    class AzureIntegration,MSGraphIntegration,YahooFinanceIntegration integrationLayer\n    class AzureIdentity,AzureAIProjects,AzureOpenAI azureServices\n    class MSGraph,YFinance externalComponents\n    class AddNumbers,StockPrices,OneDriveList toolNode\n    class AuthEndpoints,ToolsEndpoint,ProcessEndpoint,HealthEndpoint largeText\n    class AuthEndpoints,ToolsEndpoint,ProcessEndpoint,HealthEndpoint webAPILayer\n    class WebAPISpacer,MCPLayerSpacer,IntegrationLayerSpacer spacer\n    class WebAPILabel,MCPLayerLabel,IntegrationLayerLabel,AzureServicesLabel,ExternalComponentsLabel,ToolsSubgraphLabel subgraphLabel\n    \n    %% Style subgraphs - much larger text, stronger borders and more padding\n    style WebAPI fill:#FCE7D1,stroke:#E67E22,stroke-width:4px,padding:40px\n    style MCPLayer fill:#AAD0F4,stroke:#2471A3,stroke-width:4px,padding:40px\n    style IntegrationLayer fill:#E8DAEF,stroke:#8E44AD,stroke-width:4px,padding:40px\n    style AzureServices fill:#D1F2DD,stroke:#1E8449,stroke-width:4px,padding:40px\n    style ExternalComponents fill:#D1F2EB,stroke:#16A085,stroke-width:4px,padding:40px\n    style ToolsSubgraph fill:#FFE7CC,stroke:#FF8C00,stroke-width:4px,padding:40px\n    \n    %% Color coordinating labels with their subgraphs\n    style WebAPILabel color:#7D3C03\n    style MCPLayerLabel color:#174E74\n    style IntegrationLayerLabel color:#5B2C76\n    style AzureServicesLabel color:#104726\n    style ExternalComponentsLabel color:#0B4B3A\n    style ToolsSubgraphLabel color:#FF8C00\n    \n    %% Make all nodes larger with padding\n    style User padding:20px,margin:30px\n    style FastAPI padding:20px,margin:30px\n    style AuthEndpoints padding:20px,margin:25px\n    style ToolsEndpoint padding:20px,margin:25px\n    style ProcessEndpoint padding:20px,margin:25px\n    style HealthEndpoint padding:20px,margin:25px\n    style FastMCP padding:20px,margin:30px\n    style ToolRegistry padding:20px,margin:30px\n    style AzureIntegration padding:20px,margin:25px\n    style MSGraphIntegration padding:20px,margin:25px\n    style YahooFinanceIntegration padding:20px,margin:25px\n    style AzureIdentity padding:20px,margin:25px\n    style AzureAIProjects padding:20px,margin:25px\n    style AzureOpenAI padding:20px,margin:25px\n    style MSGraph padding:20px,margin:25px\n    style YFinance padding:20px,margin:25px\n    style AddNumbers padding:20px,margin:25px\n    style StockPrices padding:20px,margin:25px\n    style OneDriveList padding:20px,margin:25px",
  "content_size": 7917,
  "collected_at": "2026-02-06T14:19:37.990246",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}