{
  "id": "gl_packet-beta_00352",
  "source": "gitlab",
  "source_url": "https://github.com/vijaybkhot/permit-workflow-service/blob/25e59c03a6cd4eae2c0254feda3ad43fc10059c3/docs/architecture.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "vijaybkhot/permit-workflow-service",
  "diagram_type": "packet-beta",
  "code": "%% Mermaid Flowchart for Permit Workflow Service\nflowchart LR\n  classDef api fill:#E3F2FD,stroke:#2196F3,color:#0D47A1,stroke-width:2px\n  classDef domain fill:#E8F5E9,stroke:#4CAF50,color:#1B5E20,stroke-width:2px\n  classDef db fill:#FFF3E0,stroke:#FF9800,color:#E65100,stroke-width:2px\n  classDef queue fill:#F3E5F5,stroke:#9C27B0,color:#4A148C,stroke-width:2px\n  classDef worker fill:#FCE4EC,stroke:#E91E63,color:#880E4F,stroke-width:2px\n\n  C[Client]:::api -->|1. POST /submissions| A[API Server (Fastify)\\nAuth + Validation]:::api\n  A -->|2. Evaluate rules| D[Domain Logic\\nRule Engine + State Machine]:::domain\n  A -->|3. Save submission + results| DB[(Database\\nPostgres via Prisma)]:::db\n  A -->|4. Enqueue generate-pdf| Q[(Queue\\nRedis)]:::queue\n  Q -->|5. Deliver job| W[Worker\\nBullMQ + Puppeteer]:::worker\n  W -->|6. Read/Write packet artifacts| DB\n  A -->|7. 201 Created { id }| C\n\n  %% Legend\n  subgraph Legend\n    L1[API Layer]:::api\n    L2[Domain Layer]:::domain\n    L3[Data Layer]:::db\n    L4[Queue]:::queue\n    L5[Worker]:::worker\n  end\n",
  "content_size": 1052,
  "collected_at": "2026-02-06T14:08:06.969207",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com"
}