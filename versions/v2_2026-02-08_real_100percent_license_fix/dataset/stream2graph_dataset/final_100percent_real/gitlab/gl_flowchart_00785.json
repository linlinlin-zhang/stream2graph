{
  "id": "gl_flowchart_00785",
  "source": "gitlab",
  "source_url": "https://github.com/AlexBTeixeira/demand-tracker-devops/blob/056b5a29dee53b90d0fa544f12d98161b4489aaf/charts/fase2-containers.mmd",
  "source_note": "collected_from_github_final",
  "github_repo": "AlexBTeixeira/demand-tracker-devops",
  "diagram_type": "flowchart",
  "code": "---\ntitle: Demand Tracker - Fase 2 - EvoluÃ§Ã£o para Containers & ECS Fargate\n---\nflowchart TD\n    %% Estilo das seÃ§Ãµes\n    classDef devSection fill:#e1f5fe,stroke:#0277bd,stroke-width:2px\n    classDef ciSection fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px\n    classDef cdSection fill:#fff8e1,stroke:#ff8f00,stroke-width:2px\n    classDef awsSection fill:#fff3e0,stroke:#f57c00,stroke-width:2px\n    classDef containerSection fill:#e8eaf6,stroke:#3f51b5,stroke-width:2px\n    classDef storageSection fill:#e8f5e8,stroke:#388e3c,stroke-width:2px\n    classDef networkSection fill:#fff9c4,stroke:#f9a825,stroke-width:2px\n    classDef securitySection fill:#fce4ec,stroke:#e91e63,stroke-width:2px\n    \n    %% SEÃ‡ÃƒO DESENVOLVIMENTO\n    subgraph DEV [\" ğŸ’» Development Environment\"]\n        direction TB\n        PUSH[(\"ğŸ”„ Code Push<br/>main/develop\")]\n        PR[(\"ğŸ”€ Pull Request<br/>to main/develop\")]\n    end\n    \n    %% SEÃ‡ÃƒO CI PIPELINE AVANÃ‡ADO\n    subgraph CI [\" ğŸš€ CI Pipeline V2 (GitHub Actions)\"]\n        direction TB\n        \n        %% Trigger\n        TRIGGER{{\"âš¡ Trigger<br/>Push or PR\"}}\n        \n        %% Setup Job\n        subgraph SETUP_JOB [\" ğŸ“‹ Setup & Cache\"]\n            SETUP[(\"ğŸ”§ Setup Dependencies<br/>Python 3.9 + Cache\")]\n            VENV[(\"ğŸ Virtual Environment<br/>+ Pip Cache\")]\n        end\n        \n        %% Parallel Jobs\n        subgraph PARALLEL [\" âš¡ Parallel Quality Gates\"]\n            direction LR\n            \n            subgraph SEC_JOB [\" ğŸ›¡ï¸ Security Analysis\"]\n                SAFETY[(\"ğŸ” Safety Check<br/>Vulnerability Scan\")]\n                BANDIT[(\"ğŸš¨ Bandit SAST<br/>Security Issues\")]\n            end\n            \n            subgraph QUAL_JOB [\" ğŸ“ Code Quality\"]\n                BLACK[(\"âš« Black<br/>Code Formatting\")]\n                ISORT[(\"ğŸ“¦ Isort<br/>Import Organization\")]\n                FLAKE8[(\"ğŸ” Flake8<br/>Linting + Complexity\")]\n            end\n            \n            subgraph TEST_JOB [\" ğŸ§ª Multi-Version Testing\"]\n                PY38[(\"ğŸ Python 3.8<br/>Tests + Coverage\")]\n                PY39[(\"ğŸ Python 3.9<br/>Tests + Coverage\")]\n                PY310[(\"ğŸ Python 3.10<br/>Tests + Coverage\")]\n            end\n        end\n        \n        %% Build & Summary\n        BUILD[(\"ğŸ—ï¸ Build Application<br/>+ Docker Image\")]\n        SUMMARY[(\"ğŸ“Š CI Summary<br/>Quality Report\")]\n        \n        %% Flow\n        TRIGGER --> SETUP_JOB\n        SETUP_JOB --> PARALLEL\n        PARALLEL --> BUILD\n        BUILD --> SUMMARY\n    end\n    \n    %% SEÃ‡ÃƒO CD PIPELINE\n    subgraph CD [\" ğŸšš CD Pipeline (Manual Trigger)\"]\n        direction TB\n        CD_TRIGGER{{\"âœ‹ Manual Deploy<br/>from Management Instance\"}}\n        \n        subgraph DEPLOY_STEPS [\" ğŸ”„ Deploy Automation\"]\n            DOCKER_BUILD[(\"ğŸ³ Docker Build<br/>Multi-stage Build\")]\n            ECR_PUSH[(\"ğŸ“¤ ECR Push<br/>Container Registry\")]\n            ECS_DEPLOY[(\"ğŸš€ ECS Deploy<br/>Fargate Service\")]\n            HEALTH_CHECK[(\"â¤ï¸ Health Check<br/>Application Ready\")]\n        end\n        \n        CD_TRIGGER --> DEPLOY_STEPS\n    end\n    \n    %% SEÃ‡ÃƒO AWS INFRASTRUCTURE FASE 2\n    subgraph AWS [\" â˜ï¸ AWS Infrastructure - Fase 2 (CloudFormation)\"]\n        direction TB\n        \n        %% Networking (mesmo da fase 1)\n        subgraph NET [\" ğŸŒ VPC Network\"]\n            VPC[(\"ğŸ¢ VPC<br/>10.0.0.0/16\")]\n            IGW[(\"ğŸŒ Internet<br/>Gateway\")]\n            PUB_SUB[(\"ğŸ“¡ Public Subnet<br/>10.0.1.0/24<br/>us-east-1a\")]\n            PRIV_A[(\"ğŸ”’ Private Subnet A<br/>10.0.2.0/24<br/>us-east-1a\")]\n            PRIV_B[(\"ğŸ”’ Private Subnet B<br/>10.0.3.0/24<br/>us-east-1b\")]\n        end\n        \n        %% Security Groups Evolution\n        subgraph SEC [\" ğŸ›¡ï¸ Security Groups\"]\n            MGMT_SG[(\"ğŸ–¥ï¸ Management SG<br/>SSH:22\")]\n            ECS_SG[(\"ğŸ“¦ ECS Service SG<br/>App:5050\")]\n            RDS_SG[(\"ğŸ—„ï¸ RDS Security<br/>MySQL:3306\")]\n        end\n        \n        %% Container Infrastructure\n        subgraph CONTAINER [\" ğŸ³ Container Platform\"]\n            ECR[(\"ğŸ“¦ ECR Repository<br/>Container Registry<br/>Scan on Push\")]\n            ECS_CLUSTER[(\"âš™ï¸ ECS Cluster<br/>Fargate Mode\")]\n            ECS_SERVICE[(\"ğŸš€ ECS Service<br/>Auto Scaling<br/>Load Balanced\")]\n            ALB[(\"âš–ï¸ Application<br/>Load Balancer\")]\n        end\n        \n        %% Management Layer\n        subgraph MGMT [\" ğŸ›ï¸ Management Layer\"]\n            MGMT_INSTANCE[(\"ğŸ–¥ï¸ Management Instance<br/>t2.micro<br/>Docker + AWS CLI\")]\n            LOGS[(\"ğŸ“ CloudWatch Logs<br/>ECS Log Groups\")]\n        end\n        \n        %% Storage & Database (evolution)\n        subgraph STOR [\" ğŸ’¾ Storage & Database\"]\n            S3[(\"ğŸ“ S3 Bucket<br/>demand-tracker<br/>-attachments\")]\n            RDS[(\"ğŸ—„ï¸ RDS MySQL<br/>db.t3.micro<br/>Multi-AZ Ready\")]\n        end\n    end\n    \n    %% SEÃ‡ÃƒO APPLICATION ARCHITECTURE\n    subgraph APP [\" ğŸ—ï¸ Containerized Application\"]\n        direction TB\n        \n        subgraph CONTAINER_STACK [\" ğŸ“¦ Container Stack\"]\n            DOCKERFILE[(\"ğŸ³ Multi-stage<br/>Dockerfile\")]\n            FLASK_CONTAINER[(\"ğŸ Flask App<br/>in Container\")]\n            GUNICORN_CONTAINER[(\"âš™ï¸ Gunicorn<br/>WSGI Server\")]\n        end\n        \n        subgraph ORCHESTRATION [\" ğŸµ Orchestration\"]\n            TASK_DEF[(\"ğŸ“‹ ECS Task<br/>Definition\")]\n            FARGATE[(\"â˜ï¸ AWS Fargate<br/>Serverless Containers\")]\n        end\n    end\n    \n    %% CONEXÃ•ES PRINCIPAIS\n    DEV --> CI\n    PUSH --> TRIGGER\n    PR --> TRIGGER\n    \n    %% CI Flow\n    SETUP --> SAFETY\n    SETUP --> BLACK\n    SETUP --> PY38\n    VENV --> BANDIT\n    VENV --> ISORT\n    VENV --> PY39\n    VENV --> FLAKE8\n    VENV --> PY310\n    \n    %% CI to CD\n    SUMMARY --> |\"âœ… CI Success<br/>Manual Trigger\"| CD\n    \n    %% CD Flow\n    DOCKER_BUILD --> ECR_PUSH\n    ECR_PUSH --> ECS_DEPLOY\n    ECS_DEPLOY --> HEALTH_CHECK\n    \n    %% AWS Internal Connections\n    VPC -.-> PUB_SUB\n    VPC -.-> PRIV_A\n    VPC -.-> PRIV_B\n    IGW --> PUB_SUB\n    \n    %% Security Groups\n    MGMT_SG --> MGMT_INSTANCE\n    ECS_SG --> ECS_SERVICE\n    RDS_SG --> RDS\n    ECS_SG --> RDS_SG\n    MGMT_SG --> RDS_SG\n    \n    %% Container Platform\n    ECR --> ECS_CLUSTER\n    ECS_CLUSTER --> ECS_SERVICE\n    ALB --> ECS_SERVICE\n    ECS_SERVICE --> LOGS\n    \n    %% Management to Infrastructure\n    MGMT_INSTANCE --> |\"Docker Build & Push\"| ECR\n    MGMT_INSTANCE --> |\"ECS Deployment\"| ECS_SERVICE\n    \n    %% Application Architecture\n    DOCKERFILE --> FLASK_CONTAINER\n    FLASK_CONTAINER --> GUNICORN_CONTAINER\n    TASK_DEF --> FARGATE\n    FARGATE --> ECS_SERVICE\n    \n    %% Data Connections\n    ECS_SERVICE --> |\"MySQL Connection\"| RDS\n    ECS_SERVICE --> |\"File Upload\"| S3\n    \n    %% External Access\n    INTERNET[(\"ğŸŒ Internet<br/>Users\")]\n    INTERNET --> |\"HTTP/HTTPS\"| ALB\n    ALB --> |\"Health Checks\"| ECS_SERVICE\n    \n    %% Deployment Connection\n    CD --> |\"Execute via SSH\"| MGMT_INSTANCE\n    \n    %% Aplicar estilos\n    class DEV,PUSH,PR devSection\n    class CI,TRIGGER,SETUP_JOB,SETUP,VENV ciSection\n    class PARALLEL,SEC_JOB,QUAL_JOB,TEST_JOB,BUILD,SUMMARY ciSection\n    class SAFETY,BANDIT securitySection\n    class BLACK,ISORT,FLAKE8,PY38,PY39,PY310 ciSection\n    class CD,CD_TRIGGER,DEPLOY_STEPS,DOCKER_BUILD,ECR_PUSH,ECS_DEPLOY,HEALTH_CHECK cdSection\n    class AWS,NET,MGMT awsSection\n    class CONTAINER,ECR,ECS_CLUSTER,ECS_SERVICE,ALB containerSection\n    class STOR,S3,RDS storageSection\n    class VPC,IGW,PUB_SUB,PRIV_A,PRIV_B networkSection\n    class SEC,MGMT_SG,ECS_SG,RDS_SG securitySection\n    class MGMT_INSTANCE,LOGS awsSection\n    class APP,CONTAINER_STACK,ORCHESTRATION,DOCKERFILE,FLASK_CONTAINER,GUNICORN_CONTAINER,TASK_DEF,FARGATE containerSection\n    \n    %% Notas importantes da Fase 2\n    NOTE1[(\"ğŸ’¡ Fase 2 Features:<br/>- Docker Multi-stage<br/>- ECS Fargate<br/>- Auto Scaling\")]\n    NOTE2[(\"ğŸ”§ CI/CD V2:<br/>- SAST Security<br/>- Multi Python versions<br/>- Code Quality Gates\")]\n    NOTE3[(\"âš ï¸ AWS Academy Workaround:<br/>- Management Instance<br/>- Manual CD Trigger<br/>- No IAM Role Creation\")]\n    NOTE4[(\"ğŸ“Š Quality Gates:<br/>- Security: Safety + Bandit<br/>- Code: Black + isort + Flake8<br/>- Tests: Multi-version + Coverage\")]\n    \n    AWS -.-> NOTE1\n    CI -.-> NOTE2\n    CD -.-> NOTE3\n    PARALLEL -.-> NOTE4\n",
  "content_size": 8138,
  "collected_at": "2026-02-06T14:20:19.774484",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚"
}