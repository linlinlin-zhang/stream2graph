{
  "id": "gl_requirementDiagram_00557",
  "source": "gitlab",
  "source_url": "https://github.com/hdnguyendev/dev-prep/blob/66c0e1ce652c1f2627fc81a5110628eb0c815627/database-diagram.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "hdnguyendev/dev-prep",
  "diagram_type": "requirementDiagram",
  "code": "erDiagram\n    %% User Management\n    User ||--o| CandidateProfile : \"has\"\n    User ||--o| RecruiterProfile : \"has\"\n    User ||--o{ Message : \"sends\"\n    User ||--o{ Message : \"receives\"\n    User ||--o{ Notification : \"has\"\n    User ||--o{ UserMembership : \"has\"\n    User ||--o{ PaymentTransaction : \"has\"\n    \n    CandidateProfile ||--o{ Experience : \"has\"\n    CandidateProfile ||--o{ Education : \"has\"\n    CandidateProfile ||--o{ Project : \"has\"\n    CandidateProfile ||--o{ CandidateSkill : \"has\"\n    CandidateProfile ||--o{ Application : \"makes\"\n    CandidateProfile ||--o{ SavedJob : \"saves\"\n    CandidateProfile ||--o{ CompanyReview : \"writes\"\n    CandidateProfile }o--o{ Interview : \"takes\"\n    CandidateProfile ||--o{ CompanyFollow : \"follows\"\n    \n    RecruiterProfile }o--|| Company : \"belongs to\"\n    RecruiterProfile ||--o{ Job : \"posts\"\n    \n    %% Skills\n    Skill ||--o{ CandidateSkill : \"has\"\n    Skill ||--o{ JobSkill : \"required for\"\n    \n    %% Company & Jobs\n    Company ||--o{ RecruiterProfile : \"has\"\n    Company ||--o{ Job : \"posts\"\n    Company ||--o{ CompanyReview : \"has\"\n    Company ||--o{ CompanyFollow : \"followed by\"\n    \n    Job }o--|| Company : \"belongs to\"\n    Job }o--|| RecruiterProfile : \"posted by\"\n    Job ||--o{ JobSkill : \"requires\"\n    Job ||--o{ JobCategory : \"has\"\n    Job ||--o{ Application : \"receives\"\n    Job ||--o{ SavedJob : \"saved in\"\n    Job }o--o{ Interview : \"has\"\n    \n    Category ||--o{ JobCategory : \"has\"\n    \n    %% Application\n    Application }o--|| Job : \"for\"\n    Application }o--|| CandidateProfile : \"by\"\n    Application ||--o{ ApplicationHistory : \"has\"\n    Application ||--o{ ApplicationNote : \"has\"\n    Application ||--o{ Offer : \"receives\"\n    Application }o--o{ Interview : \"has\"\n    \n    %% Interview\n    Interview ||--o{ InterviewExchange : \"has\"\n    \n    %% Membership\n    MembershipPlan ||--o{ UserMembership : \"used in\"\n    MembershipPlan ||--o{ PaymentTransaction : \"purchased as\"\n    UserMembership }o--|| MembershipPlan : \"plan\"\n    UserMembership ||--o{ PaymentTransaction : \"activated by\"\n    \n    %% Entity Definitions\n    User {\n        uuid id PK\n        string email UK\n        string passwordHash\n        string firstName\n        string lastName\n        string phone\n        string avatarUrl\n        string notificationEmail\n        enum role\n        boolean isVerified\n        boolean isActive\n        timestamp lastLoginAt\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    CandidateProfile {\n        uuid id PK\n        uuid userId FK\n        string headline\n        text bio\n        string website\n        string linkedin\n        string github\n        string address\n        string cvUrl\n        boolean isPublic\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    RecruiterProfile {\n        uuid id PK\n        uuid userId FK\n        uuid companyId FK\n        string position\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    Experience {\n        uuid id PK\n        uuid candidateId FK\n        string companyName\n        string position\n        string location\n        timestamp startDate\n        timestamp endDate\n        boolean isCurrent\n        text description\n        timestamp createdAt\n    }\n    \n    Education {\n        uuid id PK\n        uuid candidateId FK\n        string institution\n        string degree\n        string fieldOfStudy\n        timestamp startDate\n        timestamp endDate\n        string grade\n        timestamp createdAt\n    }\n    \n    Project {\n        uuid id PK\n        uuid candidateId FK\n        string name\n        text description\n        string url\n        timestamp startDate\n        timestamp endDate\n        boolean isCurrent\n        array technologies\n        timestamp createdAt\n    }\n    \n    Skill {\n        uuid id PK\n        string name UK\n        string iconUrl\n    }\n    \n    CandidateSkill {\n        uuid id PK\n        uuid candidateId FK\n        uuid skillId FK\n        string level\n    }\n    \n    Company {\n        uuid id PK\n        string name\n        string slug UK\n        string logoUrl\n        string coverUrl\n        string website\n        text description\n        string industry\n        string companySize\n        int foundedYear\n        string address\n        string city\n        string country\n        boolean isVerified\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    Job {\n        uuid id PK\n        string slug UK\n        string title\n        uuid companyId FK\n        uuid recruiterId FK\n        text description\n        text requirements\n        text benefits\n        array interviewQuestions\n        enum type\n        enum status\n        string location\n        boolean isRemote\n        float salaryMin\n        float salaryMax\n        enum currency\n        boolean isSalaryNegotiable\n        string experienceLevel\n        int quantity\n        int viewsCount\n        int clicksCount\n        timestamp publishedAt\n        timestamp deadline\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    Category {\n        uuid id PK\n        string name UK\n        string iconUrl\n    }\n    \n    JobCategory {\n        uuid jobId PK_FK\n        uuid categoryId PK_FK\n    }\n    \n    JobSkill {\n        uuid jobId PK_FK\n        uuid skillId PK_FK\n        boolean isRequired\n    }\n    \n    SavedJob {\n        uuid id PK\n        uuid candidateId FK\n        uuid jobId FK\n        timestamp savedAt\n    }\n    \n    CompanyReview {\n        uuid id PK\n        uuid companyId FK\n        uuid candidateId FK\n        int rating\n        string title\n        text review\n        text pros\n        text cons\n        boolean isCurrentEmployee\n        boolean wouldRecommend\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    CompanyFollow {\n        uuid id PK\n        uuid candidateId FK\n        uuid companyId FK\n        boolean notifyOnNewJob\n        boolean notifyOnJobUpdate\n        timestamp createdAt\n    }\n    \n    Application {\n        uuid id PK\n        uuid jobId FK\n        uuid candidateId FK\n        string resumeUrl\n        text coverLetter\n        enum status\n        text rejectionReason\n        timestamp appliedAt\n        timestamp updatedAt\n    }\n    \n    ApplicationHistory {\n        uuid id PK\n        uuid applicationId FK\n        enum status\n        string changedBy\n        string note\n        timestamp createdAt\n    }\n    \n    ApplicationNote {\n        uuid id PK\n        uuid applicationId FK\n        string authorId\n        text content\n        timestamp createdAt\n    }\n    \n    Offer {\n        uuid id PK\n        uuid applicationId FK\n        string title\n        float salaryMin\n        float salaryMax\n        enum salaryCurrency\n        string employmentType\n        timestamp startDate\n        timestamp expirationDate\n        string location\n        boolean isRemote\n        text description\n        text benefits\n        text terms\n        enum status\n        text responseNote\n        timestamp respondedAt\n        string sentBy\n        timestamp sentAt\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    Interview {\n        uuid id PK\n        uuid applicationId FK\n        uuid candidateId FK\n        uuid jobId FK\n        string title\n        enum type\n        enum status\n        string accessCode UK\n        string sessionUrl\n        timestamp expiresAt\n        timestamp startedAt\n        timestamp endedAt\n        int durationSeconds\n        float overallScore\n        text summary\n        string recommendation\n        string recordingUrl\n        text fullTranscript\n        json aiAnalysisData\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    InterviewExchange {\n        uuid id PK\n        uuid interviewId FK\n        int orderIndex\n        text questionText\n        string questionCategory\n        text answerText\n        string answerAudioUrl\n        float score\n        text feedback\n        int durationSeconds\n        timestamp createdAt\n    }\n    \n    QuestionBank {\n        uuid id PK\n        text content\n        string category\n        string difficulty\n        array expectedKeywords\n        timestamp createdAt\n    }\n    \n    Message {\n        uuid id PK\n        uuid senderId FK\n        uuid receiverId FK\n        text content\n        boolean isRead\n        string jobId\n        string applicationId\n        timestamp createdAt\n    }\n    \n    Notification {\n        uuid id PK\n        uuid userId FK\n        string title\n        string message\n        string type\n        boolean isRead\n        string link\n        timestamp createdAt\n    }\n    \n    MembershipPlan {\n        uuid id PK\n        string name UK\n        enum planType\n        enum role\n        float price\n        enum currency\n        int duration\n        int maxInterviews\n        int maxMatchingViews\n        int maxJobPostings\n        boolean unlimitedInterviews\n        boolean fullMatchingInsights\n        boolean rankedCandidateList\n        boolean directCandidateContact\n        text description\n        array features\n        boolean isActive\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    UserMembership {\n        uuid id PK\n        uuid userId FK\n        uuid planId FK\n        timestamp startDate\n        timestamp endDate\n        enum status\n        boolean autoRenew\n        text notes\n        timestamp createdAt\n        timestamp updatedAt\n    }\n    \n    PaymentTransaction {\n        uuid id PK\n        uuid userId FK\n        uuid planId FK\n        uuid membershipId FK\n        string orderCode UK\n        float amount\n        enum currency\n        string paymentLinkId\n        string paymentLinkUrl\n        enum status\n        json rawRequest\n        json rawResponse\n        timestamp paidAt\n        timestamp expiredAt\n        text errorMessage\n        timestamp createdAt\n        timestamp updatedAt\n    }\n",
  "content_size": 9853,
  "collected_at": "2026-02-06T14:12:17.113591",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}