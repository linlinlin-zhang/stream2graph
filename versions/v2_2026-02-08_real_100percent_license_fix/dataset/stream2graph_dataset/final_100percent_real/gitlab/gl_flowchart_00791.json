{
  "id": "gl_flowchart_00791",
  "source": "gitlab",
  "source_url": "https://github.com/weeback/bko-bankpkg/blob/43e96f30ac9b9d9fc1bb0b4295d1b84ffa40b479/architecture-diagram.mmd",
  "source_note": "collected_from_github_final",
  "github_repo": "weeback/bko-bankpkg",
  "diagram_type": "flowchart",
  "code": "---\ntitle: \"gRPC Project Template - Architecture & Dependencies\"\nconfig:\n  flowchart:\n    htmlLabels: false\n    nodeSpacing: 30\n    rankSpacing: 50\n---\nflowchart TB\n    %% Build & Deploy Layer\n    subgraph build [\"ğŸ”¨ Build & Deploy\"]\n        direction LR\n        MakefileCloudRun[\"Makefile.CloudRun-HelloService<br/>ğŸ“‹ Cloud Run Deploy\"]\n        Dockerfile[\"HelloService.Dockerfile<br/>ğŸ³ Multi-stage Build\"]\n        Makefile[\"Makefile<br/>âš™ï¸ Build Tools\"]\n        \n        MakefileCloudRun -->|\"build-docker\"| Dockerfile\n        Dockerfile -->|\"make build\"| Makefile\n    end\n\n    %% Entry Point\n    subgraph entry [\"ğŸš€ Entry Point\"]\n        MainGo[\"cmd/HelloService/main.go<br/>ğŸ¯ Application Entry\"]\n    end\n\n    %% Configuration Layer  \n    subgraph config [\"âš™ï¸ Configuration\"]\n        ConfigEnv[\"config/deploy_env.go<br/>ğŸŒ Environment Config\"]\n        ConfigGrpc[\"config/grpc.go<br/>ğŸ“¡ gRPC Config\"]\n        ConfigFirebase[\"config/firebase_admin.go<br/>ğŸ”¥ Firebase Config\"]\n    end\n\n    %% Application Layer (Business Logic)\n    subgraph app [\"ğŸ’¼ Application Layer\"]\n        HelloController[\"application/hello/controller.go<br/>ğŸ® Business Logic\"]\n        HelloLogging[\"application/hello/logging.go<br/>ğŸ“ Logging Decorator\"]\n        HelloValidation[\"application/hello/validation.go<br/>âœ… Input Validation\"]\n        HelloUtils[\"application/hello/utils.go<br/>ğŸ› ï¸ Helper Functions\"]\n    end\n\n    %% Domain Layer (Entities & Interfaces)\n    subgraph domain [\"ğŸ›ï¸ Domain Layer\"]\n        HelloRepo[\"entity/hello/repository.go<br/>ğŸ“‹ Repository Interface\"]\n        HelloEntity[\"entity/hello/<br/>ğŸ¯ Domain Entity\"]\n        DbEntity[\"entity/db/example_table.go<br/>ğŸ—ƒï¸ Database Entity\"]\n        \n        HelloRepo -.->|\"implements\"| HelloEntity\n    end\n\n    %% Infrastructure Layer\n    subgraph infra [\"ğŸ—ï¸ Infrastructure Layer\"]\n        direction TB\n        \n        subgraph transport [\"ğŸš¦ Transport Layer\"]\n            GrpcHandler[\"transport/grpc/hello_service.go<br/>ğŸ“¡ gRPC Handler\"]\n            HttpHandler[\"transport/http/hello_service.go<br/>ğŸŒ HTTP Handler\"]\n            HttpModel[\"transport/http/model.go<br/>ğŸ“„ HTTP Models\"]\n        end\n        \n        subgraph database [\"ğŸ—„ï¸ Database Layer\"]\n            MongoDb[\"mongodb/mongodb.go<br/>ğŸƒ MongoDB Connection\"]\n            MongoUtils[\"mongodb/utils.go<br/>ğŸ”§ MongoDB Utils\"]\n        end\n        \n        subgraph external [\"ğŸŒ External Services\"]\n            CloudflareService[\"cloudflare/captcha.go<br/>â˜ï¸ Cloudflare Service\"]\n            FirebaseService[\"firebase/firebase-admin.go<br/>ğŸ”¥ Firebase Service\"]\n        end\n    end\n\n    %% Generated Code Layer\n    subgraph generated [\"ğŸ¤– Generated Code\"]\n        ProtobufHello[\"pb/hello/hello.pb.go<br/>ğŸ“ Proto Messages\"]\n        GrpcHello[\"pb/hello/hello_grpc.pb.go<br/>ğŸ“¡ gRPC Service\"]\n        ProtobufCommon[\"pb/common/standard.pb.go<br/>ğŸ“‹ Common Messages\"]\n    end\n\n    %% Proto Definitions\n    subgraph proto [\"ğŸ“œ Proto Definitions\"]\n        ProtoHello[\"proto/hello/hello.proto<br/>ğŸ“ Service Definition\"]\n        ProtoCommon[\"proto/common/standard.proto<br/>ğŸ“‹ Common Types\"]\n    end\n\n    %% Shared Packages\n    subgraph pkg [\"ğŸ“¦ Shared Packages\"]\n        PkgNet[\"pkg/net/<br/>ğŸŒ Network Utils\"]\n        PkgJwt[\"pkg/jwt/<br/>ğŸ” JWT Utils\"] \n        PkgMongo[\"pkg/mongodb/<br/>ğŸƒ MongoDB Utils\"]\n        PkgLogger[\"pkg/logger/<br/>ğŸ“ Logger Utils\"]\n        PkgMain[\"pkg/grpc-project-template.go<br/>ğŸ“‹ Main Package\"]\n    end\n\n    %% Mock Layer\n    subgraph mock [\"ğŸ­ Mock Layer\"]\n        MockCaptcha[\"mock/cloudflare_captcha_service.go<br/>ğŸ­ Mock Captcha\"]\n    end\n\n    %% Dependencies Flow\n    Makefile -->|\"builds\"| MainGo\n    MainGo --> ConfigEnv\n    MainGo --> ConfigGrpc  \n    MainGo --> ConfigFirebase\n    MainGo --> HelloController\n    MainGo --> GrpcHandler\n    MainGo --> HttpHandler\n    MainGo --> MongoDb\n    MainGo --> PkgNet\n    MainGo --> PkgMain\n\n    %% Application Layer Dependencies\n    HelloController -->|\"implements\"| HelloRepo\n        HelloController --> HelloLogging\n        HelloLogging --> HelloRepo\n        HelloController --> HelloValidation\n        HelloController --> HelloUtils\n    HelloController --> DbEntity\n    HelloController --> ProtobufHello\n    HelloController --> ProtobufCommon\n\n    %% Transport Layer Dependencies\n    GrpcHandler -->|\"uses\"| HelloRepo\n        GrpcHandler --> PkgLogger\n    GrpcHandler --> ProtobufHello\n    HttpHandler -->|\"uses\"| HelloRepo\n        HttpHandler --> PkgLogger\n    HttpHandler --> ProtobufHello\n    HttpHandler --> HttpModel\n    HttpHandler --> PkgNet\n\n    %% Infrastructure Dependencies\n    MongoDb --> PkgMongo\n    MongoDb --> DbEntity\n    CloudflareService --> MockCaptcha\n    FirebaseService --> ConfigFirebase\n\n    %% Proto Generation\n    ProtoHello -->|\"protoc generates\"| ProtobufHello\n    ProtoHello -->|\"protoc generates\"| GrpcHello\n    ProtoCommon -->|\"protoc generates\"| ProtobufCommon\n\n    %% Styling\n    classDef buildLayer fill:#FFE4E1,stroke:#FF6B6B,stroke-width:2px\n    classDef appLayer fill:#E8F5E8,stroke:#4CAF50,stroke-width:2px\n    classDef domainLayer fill:#E3F2FD,stroke:#2196F3,stroke-width:2px\n    classDef infraLayer fill:#FFF3E0,stroke:#FF9800,stroke-width:2px\n    classDef protoLayer fill:#F3E5F5,stroke:#9C27B0,stroke-width:2px\n    classDef pkgLayer fill:#E0F2F1,stroke:#009688,stroke-width:2px\n    classDef mockLayer fill:#FFFDE7,stroke:#FFC107,stroke-width:2px\n\n    class build buildLayer\n    class entry,config appLayer\n    class domain domainLayer\n    class infra infraLayer\n    class generated,proto protoLayer\n    class pkg pkgLayer\n    class mock mockLayer",
  "content_size": 5542,
  "collected_at": "2026-02-06T14:20:24.312597",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚"
}