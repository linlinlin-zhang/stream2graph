{
  "id": "gl_flowchart_00726",
  "source": "gitlab",
  "source_url": "https://github.com/latamteks-cmyk/SmartEdify_V0/blob/34fdfc99a3484fc1ed44636443cac359163616ae/docs/design/diagrams/auth-metrics-flow.mmd",
  "source_note": "collected_from_github_final",
  "github_repo": "latamteks-cmyk/SmartEdify_V0",
  "diagram_type": "flowchart",
  "code": "---\nid: auth-metrics-flow\ntitle: \"SmartEdify – Auth Metrics Flow\"\ndescription: \"Instrumentation path for login, refresh, and password recovery metrics across the auth lifecycle.\"\nupdated: 2025-02-14\ntags: [\"auth\", \"metrics\", \"flowchart\"]\n---\nflowchart TD\n    subgraph Request[Auth Request Lifecycle]\n        L[Login Request]\n        V[Validate Credentials]\n        H[Hash Verify Argon2id]\n        T[Issue Access + Refresh]\n        R[Record Metrics]\n    end\n\n    L --> V --> H -->|ok| T --> R\n    H -->|fail| F[Increment login_fail_total]\n\n    subgraph Metrics[Métricas]\n        MS[auth_login_success_total]\n        MF[auth_login_fail_total]\n        MR[auth_refresh_reuse_detected_total]\n        MP[auth_password_reset_total]\n    end\n\n    R --> MS\n    F --> MF\n\n    subgraph Refresh[Refresh Flow]\n        C[Check Reuse] -->|reuse| RU[Increment reuse_detected + revoke]\n        C -->|clean| NI[Rotate + Increment login_success_total]\n    end\n\n    T --> C\n    RU --> MR\n    PS[Password Reset Flow] --> MP\n\n    classDef metric fill:#eef,stroke:#336\n    class MS,MF,MR,MP metric\n",
  "content_size": 1074,
  "collected_at": "2026-02-06T14:19:30.152206",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}