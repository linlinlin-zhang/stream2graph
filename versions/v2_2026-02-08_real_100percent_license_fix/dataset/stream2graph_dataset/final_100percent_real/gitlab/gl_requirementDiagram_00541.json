{
  "id": "gl_requirementDiagram_00541",
  "source": "gitlab",
  "source_url": "https://github.com/jsaldaza/IA_FinalProject_lidr/blob/f37ea93ff69e92163d81114c466c2dfd184c6295/docs/architecture/backend-diagram.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "jsaldaza/IA_FinalProject_lidr",
  "diagram_type": "requirementDiagram",
  "code": "%% Backend component + sequence diagrams for TestForge (Mermaid)\n%% Open this file with a Mermaid renderer (VS Code extension, mermaid.live, mermaid-cli)\n\n%% Component diagram\nflowchart LR\n  FE[Frontend (Browser)] -->|POST /api/projects/create-and-start| ProjectsController[ProjectsController]\n  FE -->|POST /api/projects/:id/chat| ProjectsController\n  FE -->|GET /api/conversational-workflow/:id/summit| ConvController[ConversationalWorkflowController]\n\n  ProjectsController --> WorkflowService[WorkflowService]\n  ConvController --> WorkflowService\n  WorkflowService --> OpenAI[OpenAIService]\n  WorkflowService --> DBService[DatabaseService (Prisma)]\n  DBService --> DB[(Database)]\n  OpenAI -->|AI response| WorkflowService\n  DBService -->|stores messages & summit| DB\n\n%% Sequence: create-and-start\n\nsequenceDiagram\n  participant FE as Frontend\n  participant PC as ProjectsController\n  participant WS as WorkflowService\n  participant OA as OpenAI\n  participant DBS as DatabaseService\n\n  FE->>PC: POST /api/projects/create-and-start\n  PC->>WS: startConversation(projectData)\n  WS->>DBS: create ConversationalAnalysis (init)\n  WS->>OA: send system+user prompt\n  OA-->>WS: assistant content (IA summary)\n  WS->>DBS: persist assistant message\n  WS->>DBS: create AnalysisSummit(refinedRequirements)\n  WS-->>PC: created resources\n  PC-->>FE: 200 OK + ids\n\n%% Sequence: chat flow (user message -> AI reply)\n\nsequenceDiagram\n  participant FE2 as Frontend\n  participant PC2 as ProjectsController\n  participant WS2 as WorkflowService\n  participant OA2 as OpenAI\n  participant DBS2 as DatabaseService\n\n  FE2->>PC2: POST /api/projects/:id/chat { instruction, requirement }\n  PC2->>WS2: processUserMessage(id, normalizedContent)\n  WS2->>DBS2: persist user message\n  WS2->>OA2: forward messages + new content\n  OA2-->>WS2: assistant reply\n  WS2->>DBS2: persist assistant reply\n  WS2-->>PC2: assistant reply\n  PC2-->>FE2: reply (update chat)\n\n%% End of file\n",
  "content_size": 1945,
  "collected_at": "2026-02-06T14:11:59.255791",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "jsaldaza",
  "repo_name": "IA_FinalProject_lidr",
  "repo_description": "Final Project",
  "repo_language": "TypeScript",
  "repo_topics": [],
  "repo_created_at": "2025-10-20T00:08:32Z",
  "repo_updated_at": "2025-10-20T02:13:31Z"
}