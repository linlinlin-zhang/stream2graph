{
  "id": "gl_requirementDiagram_00601",
  "source": "gitlab",
  "source_url": "https://github.com/Vantoan252003/PianoLearnerBackend/blob/610a5a4d8a753efc82b5f526e00a10eb71dc2d43/diagrams/class-diagram.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "Vantoan252003/PianoLearnerBackend",
  "diagram_type": "requirementDiagram",
  "code": "---\ntitle: PianoLearn Class Diagram\n---\nclassDiagram\n    %% Core Entities\n    class User {\n        +Integer userId PK\n        +String fullName\n        +String email (unique)\n        +String passwordHash\n        +Role role\n        +String avatarUrl\n        +String levelName\n        +Integer totalExp\n        +Integer streakDays\n        +LocalDateTime createdAt\n        +LocalDateTime lastPracticeDate\n        +LocalDateTime lastLogin\n    }\n\n    class Courses {\n        +Integer courseId PK\n        +String courseName\n        +String description\n        +String thumbnailUrl\n        +String difficultyLevel\n        +Integer durationWeeks\n        +Integer totalLessons\n        +LocalDateTime createAt\n    }\n\n    class Lesson {\n        +Integer lessonId PK\n        +Integer courseId FK\n        +String lessonTitle\n        +Integer lessonOrder\n        +String description\n        +String videoUrl\n        +String sheetMusicUrl\n        +Integer durationMinutes\n        +Integer expReward\n        +LocalDateTime createdAt\n    }\n\n    class Exercise {\n        +Integer exerciseId PK\n        +Integer lessonId FK\n        +String exerciseTitle\n        +String exerciseType\n        +String difficulty\n        +String description\n        +String instructions\n        +LocalDateTime createdAt\n    }\n\n    class Song {\n        +Integer songId PK\n        +String songTitle\n        +String artist\n        +String difficultyLevel\n        +Integer durationSeconds\n        +String thumbnailUrl\n        +String midiFileUrl\n        +String sheetMusicUrl\n        +LocalDateTime createdAt\n    }\n\n    class SheetMusic {\n        +Integer sheetId PK\n        +Integer uploadedBy FK\n        +String title\n        +String composer\n        +String description\n        +String difficultyLevel\n        +Integer downloadCount\n        +String pdfUrl\n        +String thumbnailUrl\n        +Boolean isPublic\n        +LocalDateTime createdAt\n    }\n\n    class Achievement {\n        +Integer achievementId PK\n        +String achievementName\n        +String description\n        +String iconUrl\n        +String requirementType\n        +Integer requirementValue\n        +Integer expReward\n    }\n\n    class PianoQuestion {\n        +Long questionId PK\n        +Integer lessonId FK\n        +String questionText\n        +String difficulty\n        +LocalDateTime createdAt\n    }\n\n    %% Junction/Relationship Tables\n    class UserProgress {\n        +Integer progressId PK\n        +Integer userId FK\n        +Integer lessonId FK\n        +Boolean isCompleted\n        +Integer completionPercentage\n        +LocalDateTime lastAccessed\n        ---\n        unique(userId, lessonId)\n    }\n\n    class UserAchievement {\n        +Integer userAchievementId PK\n        +Integer userId FK\n        +Integer achievementId FK\n        +LocalDateTime unlockedAt\n        ---\n        unique(userId, achievementId)\n    }\n\n    class ExerciseResult {\n        +Integer resultId PK\n        +Integer userId FK\n        +Integer exerciseId FK\n        +Integer score\n        +BigDecimal accuracyPercent\n        +LocalDateTime attemptedAt\n    }\n\n    class PracticeSession {\n        +Integer sessionId PK\n        +Integer userId FK\n        +Integer songId FK (nullable)\n        +Integer exerciseId FK (nullable)\n        +Integer practiceDurationMinutes\n        +Integer notesPlayed\n        +BigDecimal accuracy\n        +LocalDate sessionDate\n    }\n\n    class DailyGoal {\n        +Integer goalId PK\n        +Integer userId FK\n        +LocalDate goalDate\n        +LocalDateTime checkedInAt\n        ---\n        unique(userId, goalDate)\n    }\n\n    class Favorite {\n        +Integer favoriteId PK\n        +Integer userId FK\n        +Integer songId FK (nullable)\n        +Integer sheetId FK (nullable)\n        +LocalDateTime createdAt\n    }\n\n    class SongRating {\n        +Integer songRatingId PK\n        +Integer userId FK\n        +Integer songId FK\n        +Double rating (0.0-5.0)\n        +String comment\n        +LocalDateTime createdAt\n    }\n\n    class SheetRating {\n        +Integer sheetRatingId PK\n        +Integer userId FK\n        +Integer sheetId FK\n        +Double rating (0.0-5.0)\n        +String comment\n        +LocalDateTime createdAt\n    }\n\n    %% Relationships - One to Many\n    Courses \"1\" --> \"0..*\" Lesson : contains\n    Lesson \"1\" --> \"0..*\" Exercise : has\n    Lesson \"1\" --> \"0..*\" PianoQuestion : includes\n    \n    User \"1\" --> \"0..*\" SheetMusic : uploads\n    User \"1\" --> \"0..*\" UserProgress : tracks\n    User \"1\" --> \"0..*\" UserAchievement : earns\n    User \"1\" --> \"0..*\" ExerciseResult : submits\n    User \"1\" --> \"0..*\" PracticeSession : performs\n    User \"1\" --> \"0..*\" DailyGoal : sets\n    User \"1\" --> \"0..*\" Favorite : creates\n    User \"1\" --> \"0..*\" SongRating : rates\n    User \"1\" --> \"0..*\" SheetRating : rates\n    \n    Lesson \"1\" --> \"0..*\" UserProgress : tracked by\n    Achievement \"1\" --> \"0..*\" UserAchievement : unlocked as\n    Exercise \"1\" --> \"0..*\" ExerciseResult : produces\n    \n    Song \"1\" --> \"0..*\" PracticeSession : practiced in\n    Exercise \"1\" --> \"0..*\" PracticeSession : practiced in\n    Song \"1\" --> \"0..*\" Favorite : favorited as\n    SheetMusic \"1\" --> \"0..*\" Favorite : favorited as\n    Song \"1\" --> \"0..*\" SongRating : rated in\n    SheetMusic \"1\" --> \"0..*\" SheetRating : rated in\n\n    %% Many-to-Many through junction tables\n    User \"0..*\" --> \"0..*\" Lesson : via UserProgress\n    User \"0..*\" --> \"0..*\" Achievement : via UserAchievement\n\n    note for Favorite \"Either songId OR sheetId must be set (not both)\"\n    note for PracticeSession \"Either songId OR exerciseId can be set\"\n    note for UserProgress \"Many-to-Many: User ↔ Lesson\"\n    note for UserAchievement \"Many-to-Many: User ↔ Achievement\"\n",
  "content_size": 5674,
  "collected_at": "2026-02-06T14:13:14.583271",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "Vantoan252003",
  "repo_name": "PianoLearnerBackend",
  "repo_description": "JAVA",
  "repo_language": "HTML",
  "repo_topics": [],
  "repo_created_at": "2025-10-28T10:33:33Z",
  "repo_updated_at": "2025-12-18T04:23:35Z",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}