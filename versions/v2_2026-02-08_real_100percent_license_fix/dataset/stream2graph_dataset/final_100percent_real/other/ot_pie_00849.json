{
  "id": "ot_pie_00849",
  "source": "other",
  "source_url": "https://github.com/kotek-7/minpuzz/blob/654b51056933c621c2671ca993745a92ad3af09d/docs/in-game/sequence-in-game.mmd",
  "source_type": "github_search_special",
  "github_repo": "kotek-7/minpuzz",
  "diagram_type": "pie",
  "code": "%%{init: {'theme':'default', 'themeVariables': {'primaryColor': '#4f46e5', 'primaryTextColor': '#fff', 'primaryBorderColor': '#3730a3', 'lineColor': '#374151', 'secondaryColor': '#e5e7eb', 'tertiaryColor': '#f3f4f6'}}}%%\n\n%% ゲーム中（通常操作：選択→セルクリック→設置→進捗更新）\nsequenceDiagram\n    participant U1 as ユーザー1\n    participant F1 as フロントエンド1\n    participant B as バックエンド\n    participant R as Redis\n    participant F2 as フロントエンド2\n    participant U2 as ユーザー2\n\n    Note over U1,U2: game-start 受信直後からのゲーム操作（自チーム詳細・相手は進捗のみ）\n\n    %% 再接続/同期ずれ時のスナップショット再取得\n    alt 再接続 or 同期ずれ検知\n        U1->>F1: 再同期ボタン/自動検知\n        F1->>B: Socket emit: request-game-init {matchId,teamId,userId}\n        Note over B: 軽量レート制限（~500ms/ソケット）\n        B-->>F1: state-sync {board,pieces,score,timer?,matchStatus}\n        F1->>F1: ローカル状態を上書き（安全に復元）\n    end\n\n    U1->>F1: ピースを選択(pieceId)\n    U1->>F1: 盤面セルをクリック(row,col)\n    F1->>B: Socket emit: piece-place {matchId,teamId,userId,pieceId,row,col}\n    B->>R: 検証（未配置/盤内/セル未占有/（任意）正解セル）\n    alt 設置成功\n        B->>R: 盤面確定・スコア+1\n        B->>F1: Socket to team room: piece-placed {pieceId,row,col,byUserId}\n        Note over B: 進捗は public に最小限を通知\n        B->>F1: Socket to public: progress-update {placedByTeam}\n    else 不正/範囲外/占有\n        B-->>F1: piece-place-denied {pieceId, reason}\n    end\n\n    Note over U1,U2: 次: docs/sequence-game-end.mmd（ゲーム終了フロー）\n",
  "content_size": 1350,
  "collected_at": "2026-02-06T10:47:53.136705",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 2,
  "repo_owner": "kotek-7",
  "repo_name": "minpuzz",
  "repo_description": "関西ビギナーズハッカソン Vol.6",
  "repo_language": "TypeScript",
  "repo_topics": [],
  "repo_created_at": "2025-08-20T04:16:04Z",
  "repo_updated_at": "2025-11-09T01:00:10Z",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}