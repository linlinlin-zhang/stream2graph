{
  "id": "ot_stateDiagram_00347",
  "source": "other",
  "source_url": "https://github.com/thugdacake/edg/blob/7fde6f771531532f493eaff89818b7f647ffc5dd/FLUXO_BOT_DINAMICO.mmd",
  "source_type": "github_search_special",
  "github_repo": "thugdacake/edg",
  "diagram_type": "stateDiagram",
  "code": "```mermaid\ngraph TD\n    A[UsuÃ¡rio inicia /start] --> B[Bot carrega mensagem welcome_message]\n    B --> C{UsuÃ¡rio escolhe opÃ§Ã£o}\n    \n    C -->|Ver Produtos| D[Bot busca produtos reais do DB]\n    C -->|FAQ| E[Exibe FAQ estÃ¡tico]\n    \n    D --> F{Tem produtos ativos?}\n    F -->|Sim| G[Gera categorias dinÃ¢micas]\n    F -->|NÃ£o| H[Mensagem: Sem produtos]\n    \n    G --> I[Exibe categorias baseadas nos produtos]\n    I --> J{UsuÃ¡rio seleciona categoria}\n    \n    J --> K[Lista produtos da categoria]\n    K --> L{UsuÃ¡rio seleciona produto}\n    \n    L --> M[Exibe detalhes do produto real]\n    M --> N{UsuÃ¡rio decide comprar?}\n    \n    N -->|Sim| O[Gera dados PIX dinÃ¢micos]\n    N -->|NÃ£o| P[Volta para lista]\n    \n    O --> Q[Exibe tela pagamento]\n    Q --> R[UsuÃ¡rio confirma pagamento]\n    R --> S[Sistema processa pedido]\n    S --> T[Entrega produto digital]\n    \n    style D fill:#e1f5fe\n    style G fill:#e8f5e8\n    style M fill:#fff3e0\n    style O fill:#fce4ec\n    \n    classDef dynamic fill:#e3f2fd,stroke:#1976d2,stroke-width:2px\n    class D,G,K,M,O dynamic\n```\n\n## Fluxo Atual vs Novo Sistema\n\n### ğŸ”´ PROBLEMA ATUAL\n```mermaid\ngraph LR\n    A[Bot] --> B[Mensagens Hardcoded]\n    B --> C[Netflix/Spotify Fixos]\n    C --> D[NÃ£o sincroniza com Dashboard]\n    \n    style B fill:#ffebee\n    style C fill:#ffebee\n    style D fill:#ffebee\n```\n\n### ğŸŸ¢ SOLUÃ‡ÃƒO PROPOSTA\n```mermaid\ngraph LR\n    A[Bot] --> B[API Produtos]\n    B --> C[Produtos DinÃ¢micos do DB]\n    C --> D[Sincronizado com Dashboard]\n    \n    style B fill:#e8f5e8\n    style C fill:#e8f5e8\n    style D fill:#e8f5e8\n```\n\n## Arquitetura dos Componentes\n\n```mermaid\ngraph TB\n    subgraph \"Frontend Dashboard\"\n        F1[GestÃ£o de Produtos]\n        F2[Bot Config]\n    end\n    \n    subgraph \"Backend API\"\n        B1[/api/products]\n        B2[/api/bot/messages]\n        B3[telegram.ts handlers]\n    end\n    \n    subgraph \"Database\"\n        D1[(products)]\n        D2[(bot_messages)]\n        D3[(bot_flows)]\n    end\n    \n    subgraph \"Telegram Bot\"\n        T1[Message Handlers]\n        T2[Callback Handlers]\n        T3[Product Display]\n    end\n    \n    F1 --> B1\n    F2 --> B2\n    B1 --> D1\n    B2 --> D2\n    B3 --> D1\n    B3 --> D2\n    T1 --> B3\n    T2 --> B3\n    T3 --> B1\n    \n    style T3 fill:#e1f5fe\n    style B1 fill:#e8f5e8\n```\n\n## Estados do Fluxo de Conversa\n\n```mermaid\nstateDiagram-v2\n    [*] --> Welcome\n    Welcome --> ChooseOption\n    \n    ChooseOption --> ViewProducts\n    ChooseOption --> FAQ\n    ChooseOption --> Help\n    \n    ViewProducts --> LoadCategories\n    LoadCategories --> DisplayCategories\n    DisplayCategories --> SelectCategory\n    \n    SelectCategory --> LoadProducts\n    LoadProducts --> DisplayProducts\n    DisplayProducts --> SelectProduct\n    \n    SelectProduct --> ShowProductDetails\n    ShowProductDetails --> ConfirmPurchase\n    ShowProductDetails --> BackToProducts\n    \n    ConfirmPurchase --> GeneratePayment\n    GeneratePayment --> AwaitingPayment\n    AwaitingPayment --> ProcessPayment\n    ProcessPayment --> DeliverProduct\n    \n    DeliverProduct --> [*]\n    FAQ --> ChooseOption\n    Help --> ChooseOption\n    BackToProducts --> DisplayProducts\n```",
  "content_size": 3141,
  "collected_at": "2026-02-06T10:41:01.204369",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "thugdacake",
  "repo_name": "edg",
  "repo_description": "edg",
  "repo_language": "TypeScript",
  "repo_topics": [],
  "repo_created_at": "2025-05-30T21:07:59Z",
  "repo_updated_at": "2025-05-30T21:08:52Z"
}