{
  "id": "ot_stateDiagram_00335",
  "source": "other",
  "source_url": "https://github.com/dvera14/lab3car/blob/2cde68eecd23f31ff0b0cb2ac5c3fc8fc6c72e61/Lab4/lab4statediagram.mmd",
  "source_type": "github_search_special",
  "github_repo": "dvera14/lab3car",
  "diagram_type": "stateDiagram",
  "code": "stateDiagram-v2\n    [*] --> MainLoop\n\n    state MainLoop {\n        direction TB\n        \n        %% Default State\n        DrivingStraight: <b>Driving Straight</b>\\n(Motors 800)\n        \n        %% Check Sensors Loop\n        [*] --> DrivingStraight\n        DrivingStraight --> CheckIR\n        \n        state CheckIR {\n            direction TB\n            [*] --> ReadSensors\n            ReadSensors --> LineBlocked: IR == 7 (All Black)\n            ReadSensors --> CheckAvoidanceFlag: IR != 7\n        }\n        \n        state LineBlocked {\n            [*] --> StopMotors\n            StopMotors --> WaitForClearance: Check Distance > 20cm\n            WaitForClearance --> [*]: Path Cleared\n        }\n        \n        %% Decision Node\n        state CheckAvoidanceFlag <<choice>>\n\n        %% STATE: Recovery (Driving but ignoring new obstacles)\n        state RecoveryMode {\n            [*] --> CheckClearance\n            %% FIXED: Note is now attached to the specific state\n            note right of CheckClearance: Car drives straight<br/>ignoring obstacles<br/>until path clears.\n            CheckClearance --> ResetFlag: Distance > 20cm\n            ResetFlag --> [*]: Set in_avoidance = False\n            CheckClearance --> [*]: Still Blocked\n        }\n\n        %% STATE: Normal Obstacle Check\n        state NormalObstacleCheck {\n            [*] --> MeasureDist\n            MeasureDist --> IncrementHits: Dist <= 26cm\n            MeasureDist --> ResetHits: Dist > 26cm\n            \n            IncrementHits --> TriggerAvoidance: Hits >= 3\n            IncrementHits --> [*]: Hits < 3\n            ResetHits --> [*]\n        }\n        \n        %% Wiring the choices\n        CheckAvoidanceFlag --> RecoveryMode: in_avoidance is True\n        CheckAvoidanceFlag --> NormalObstacleCheck: in_avoidance is False\n        \n        %% Loop backs\n        LineBlocked --> DrivingStraight\n        RecoveryMode --> DrivingStraight\n        NormalObstacleCheck --> DrivingStraight\n    }\n\n    %% STATE: Avoidance Maneuver (Blocking)\n    state TriggerAvoidance {\n        direction TB\n        [*] --> StopAndBeep\n        StopAndBeep --> SteerLeft: Turn Out\n        SteerLeft --> DrivePast: Go Straight\n        DrivePast --> SteerRight: Merge Back\n        SteerRight --> FinalCorrection: Align\n        FinalCorrection --> SetFlagTrue\n        SetFlagTrue --> MainLoop: Return (in_avoidance = True)\n    }\n\n    NormalObstacleCheck --> TriggerAvoidance\n",
  "content_size": 2425,
  "collected_at": "2026-02-06T10:40:52.439627",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "dvera14",
  "repo_name": "lab3car",
  "repo_description": "A collaborative project to build and program a robot car using Arduino/Raspberry Pi.",
  "repo_language": "Python",
  "repo_topics": [],
  "repo_created_at": "2025-11-11T15:33:36Z",
  "repo_updated_at": "2025-12-07T22:55:47Z"
}