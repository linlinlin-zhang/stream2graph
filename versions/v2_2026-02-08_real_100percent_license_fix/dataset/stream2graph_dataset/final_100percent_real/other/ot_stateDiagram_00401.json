{
  "id": "ot_stateDiagram_00401",
  "source": "other",
  "source_url": "https://github.com/sdodlapati3/BioPipelines/blob/7bb603ade88cc7f3f8800fb72a7201db77b3b939/docs/diagrams/tool_execution.mmd",
  "source_type": "github_search_special",
  "github_repo": "sdodlapati3/BioPipelines",
  "diagram_type": "stateDiagram",
  "code": "%%{init: {'theme': 'base'}}%%\n\nstateDiagram-v2\n    [*] --> ToolCall: execute_tool(name, params)\n\n    state \"Permission Check\" as PermCheck {\n        [*] --> GetCategory: TOOL_PERMISSION_MAPPING[tool]\n        GetCategory --> CheckLevel: category (read/write/execute/delete)\n        \n        state CheckLevel <<choice>>\n        CheckLevel --> Allowed: category in LEVEL_PERMISSIONS[level]\n        CheckLevel --> NeedsApproval: execute at ASSISTED level\n        CheckLevel --> Denied: category not allowed\n    }\n\n    ToolCall --> PermCheck\n\n    state \"Denied Path\" as DeniedPath {\n        Denied --> CreateError: ToolResult(success=False)\n        CreateError --> ReturnError: error = reason\n    }\n\n    state \"Approval Path\" as ApprovalPath {\n        NeedsApproval --> LogApproval: logger.info(\"requires approval\")\n        LogApproval --> ContinueExec: Mark for approval\n    }\n\n    state \"Execution Path\" as ExecPath {\n        Allowed --> AuditCall: audit.log_tool_call()\n        ContinueExec --> AuditCall\n        \n        AuditCall --> TryExec: try:\n        \n        state TryExec <<choice>>\n        TryExec --> ToolHandler: tools.execute_tool()\n        TryExec --> CatchError: Exception raised\n        \n        ToolHandler --> ToolResult: ToolResult object\n        CatchError --> ErrorResult: ToolResult(success=False)\n        \n        ToolResult --> CalcDuration: Calculate duration_ms\n        ErrorResult --> CalcDuration\n        \n        CalcDuration --> AuditResult: audit.log_tool_result()\n    }\n\n    AuditResult --> CreateExecution: ToolExecution(...)\n\n    state \"Tool Execution Record\" as ExecRecord {\n        CreateExecution --> RecordTool: tool_name\n        RecordTool --> RecordParams: parameters\n        RecordParams --> RecordResult: result\n        RecordResult --> RecordDuration: duration_ms\n        RecordDuration --> RecordTime: timestamp\n    }\n\n    ReturnError --> [*]: Return ToolExecution\n    RecordTime --> [*]: Return ToolExecution\n\n    note right of PermCheck\n        Permission Categories:\n        ━━━━━━━━━━━━━━━━━━━━\n        read: Always allowed\n        write: ASSISTED+\n        execute: SUPERVISED+\n        delete: Always needs approval\n    end note\n\n    note right of ExecPath\n        Audit Trail:\n        ━━━━━━━━━━━━━━━━━━━━\n        1. Log tool call with params\n        2. Execute tool handler\n        3. Log result (success/fail)\n        4. Record duration\n    end note\n",
  "content_size": 2399,
  "collected_at": "2026-02-06T10:41:44.283293",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "sdodlapati3",
  "repo_name": "BioPipelines",
  "repo_description": "Comprehensive bioinformatics pipelines for NGS analysis",
  "repo_language": "Python",
  "repo_topics": [],
  "repo_created_at": "2025-11-20T01:02:16Z",
  "repo_updated_at": "2025-12-05T15:59:14Z"
}