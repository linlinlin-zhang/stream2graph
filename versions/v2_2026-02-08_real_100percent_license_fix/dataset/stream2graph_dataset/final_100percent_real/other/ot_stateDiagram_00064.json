{
  "id": "ot_stateDiagram_00064",
  "source": "other",
  "source_url": "https://github.com/punkouter26/PoTicTac/blob/96d9dd073ec367f1d30e9a898203bc83b0a78874/docs/StateTransition.mmd",
  "source_type": "github_search_special",
  "github_repo": "punkouter26/PoTicTac",
  "diagram_type": "stateDiagram",
  "code": "%%{ init: { 'theme': 'dark', 'themeVariables': { 'primaryColor': '#00d9ff' } } }%%\n\n%% PoTicTac State Transition Diagram\n%% Tracks the lifecycle of a game from start to end\n\nstateDiagram-v2\n    [*] --> Menu: App Loaded\n    \n    state Menu {\n        [*] --> NameEntry\n        NameEntry --> ModeSelection: Name entered\n        ModeSelection --> DifficultySelection: \"Single Player\" selected\n        DifficultySelection --> ReadyToStart: Difficulty chosen\n        ReadyToStart --> [*]: Click \"Start Game\"\n    }\n    \n    Menu --> Playing: startSinglePlayerGame()\n    \n    state Playing {\n        [*] --> PlayerTurn\n        \n        PlayerTurn --> ValidatingMove: Click cell\n        ValidatingMove --> PlayerTurn: Invalid move (cell occupied)\n        ValidatingMove --> CheckingWin: Valid move made\n        \n        CheckingWin --> PlayerWon: 4-in-a-row detected\n        CheckingWin --> CheckingDraw: No winner\n        \n        CheckingDraw --> Draw: Board full\n        CheckingDraw --> AIThinking: Board not full\n        \n        AIThinking --> AIMove: AI calculates move\n        AIMove --> CheckingAIWin: AI places mark\n        \n        CheckingAIWin --> AIWon: 4-in-a-row detected\n        CheckingAIWin --> CheckingAIDraw: No winner\n        \n        CheckingAIDraw --> Draw: Board full\n        CheckingAIDraw --> PlayerTurn: Board not full\n    }\n    \n    Playing --> GameOver: Game ends\n    \n    state GameOver {\n        [*] --> DisplayResult\n        DisplayResult --> SavingStats: Stats not saved yet\n        SavingStats --> LocalSave: Save to LocalStorage\n        LocalSave --> CloudSave: Attempt API save\n        CloudSave --> StatsComplete: Success or offline fallback\n        StatsComplete --> [*]\n    }\n    \n    state GameResult <<choice>>\n    GameOver --> GameResult\n    GameResult --> PlayerWonState: Player won\n    GameResult --> AIWonState: AI won\n    GameResult --> DrawState: Draw\n    \n    state PlayerWonState {\n        WinAnimation: Show winning cells\n        WinMessage: \"You Win! ğŸ‰\"\n        UpdateStreak: Increment win streak\n    }\n    \n    state AIWonState {\n        LoseAnimation: Show AI winning cells\n        LoseMessage: \"AI Wins!\"\n        ResetStreak: Reset win streak to 0\n    }\n    \n    state DrawState {\n        DrawAnimation: Flash all cells\n        DrawMessage: \"It's a Draw!\"\n        KeepStreak: Maintain current streak\n    }\n    \n    GameOver --> Menu: \"Play Again\" or \"Back to Menu\"\n    \n    note right of Playing\n        Race Condition Prevention:\n        - moveLockRef prevents double moves\n        - isAiThinking blocks user input\n        - statsSaved prevents double save\n    end note\n    \n    note right of Menu\n        State Persistence:\n        - playerName â†’ LocalStorage\n        - difficulty â†’ LocalStorage\n        - Stats synced on game end\n    end note\n",
  "content_size": 2792,
  "collected_at": "2026-02-06T10:37:24.869496",
  "compilation_status": "failed",
  "license": "other_source",
  "license_name": "Other Source (GitHub-based)",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚"
}