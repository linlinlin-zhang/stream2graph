{
  "id": "ot_stateDiagram_00208",
  "source": "other",
  "source_url": "https://github.com/Saoussen-CH/ai-creative-studio-adk-a2a-mcp-vertexai-cloudrun/blob/f8ec6220e4ae967bd552933c203913c2f77eb1df/diagrams/11-planning-first-pattern.mmd",
  "source_type": "github_search_special",
  "github_repo": "Saoussen-CH/ai-creative-studio-adk-a2a-mcp-vertexai-cloudrun",
  "diagram_type": "stateDiagram",
  "code": "%% Planning-First Orchestration Pattern\n%% Shows how orchestrator analyzes, plans, then executes\n\nstateDiagram-v2\n    [*] --> ReceiveBrief: User submits<br/>campaign brief\n\n    state \"ü§î ANALYSIS PHASE\" as analysis {\n        ReceiveBrief --> AnalyzeComplexity: Analyze request\n\n        state AnalyzeComplexity {\n            [*] --> CheckKeywords: Look for keywords\n            CheckKeywords --> DetermineScope: \"complete campaign\"<br/>vs \"just research\"\n            DetermineScope --> CountAgents: How many agents needed?\n        }\n\n        CountAgents --> SimpleTask: 1 agent needed\n        CountAgents --> ComplexTask: 5 agents needed\n\n        state SimpleTask {\n            note right of SimpleTask\n                Examples:\n                ‚Ä¢ \"Research the market\"\n                ‚Ä¢ \"Write 3 posts\"\n                ‚Ä¢ \"Review this copy\"\n            end note\n        }\n\n        state ComplexTask {\n            note right of ComplexTask\n                Examples:\n                ‚Ä¢ \"Create complete campaign\"\n                ‚Ä¢ \"Full social media package\"\n                ‚Ä¢ \"Campaign with timeline\"\n            end note\n        }\n    }\n\n    state \"üìã PLANNING PHASE\" as planning {\n        SimpleTask --> CreateSimplePlan: Create 1-step plan\n        ComplexTask --> CreateComplexPlan: Create 5-step plan\n\n        state CreateComplexPlan {\n            [*] --> Step1: 1. Brand Strategist\n            Step1 --> Step2: 2. Copywriter\n            Step2 --> Step3: 3. Designer\n            Step3 --> Step4: 4. Critic\n            Step4 --> Step5: 5. Project Manager\n            Step5 --> [*]\n        }\n\n        CreateSimplePlan --> AnnouncePlan\n        CreateComplexPlan --> AnnouncePlan\n        AnnouncePlan --> [*]: Present plan to user\n    }\n\n    state \"üöÄ EXECUTION PHASE\" as execution {\n        planning --> ExecuteSequentially\n\n        state \"Sequential Execution with Verification\" as ExecuteSequentially {\n            [*] --> CallAgent: Call next agent in plan\n\n            CallAgent --> WaitForResponse: Wait for tool_output\n\n            WaitForResponse --> VerifySuccess: Check response\n\n            state VerifySuccess <<choice>>\n            VerifySuccess --> ConfirmSuccess: ‚úÖ Success detected\n            VerifySuccess --> ReportError: ‚ùå Error detected\n\n            ConfirmSuccess --> UpdateUser: Inform user of progress\n\n            UpdateUser --> CheckMoreAgents: More agents in plan?\n\n            state CheckMoreAgents <<choice>>\n            CheckMoreAgents --> CallAgent: Yes, continue\n            CheckMoreAgents --> CompileResults: No, all done\n\n            ReportError --> StopWorkflow: STOP sequence\n            StopWorkflow --> AskUser: Ask for user decision\n            AskUser --> [*]: Wait for guidance\n\n            CompileResults --> [*]: Present complete campaign\n        }\n    }\n\n    state \"‚úÖ VERIFICATION RULES\" as verification {\n        state \"Must Do\" as must {\n            must1: ‚úÖ WAIT for tool_output\n            must2: ‚úÖ VERIFY success\n            must3: ‚úÖ CONFIRM to user\n            must4: ‚úÖ PASS context to next agent\n        }\n\n        state \"Must NOT Do\" as mustnot {\n            mustnot1: ‚ùå Assume success\n            mustnot2: ‚ùå Invent results\n            mustnot3: ‚ùå Skip verification\n            mustnot4: ‚ùå Continue after error\n        }\n    }\n\n    execution --> verification: Follow rules\n\n    state \"üéØ OUTCOMES\" as outcomes {\n        state Success {\n            s1: All agents called\n            s2: Full results presented\n            s3: User receives complete campaign\n        }\n\n        state Failure {\n            f1: Agent failed\n            f2: Workflow stopped\n            f3: Error reported to user\n            f4: Awaiting user decision\n        }\n    }\n\n    verification --> outcomes\n\n    note right of analysis\n        Key Innovation: Analyze BEFORE executing\n        Prevents premature delegation\n    end note\n\n    note right of planning\n        Key Innovation: Announce plan FIRST\n        Provides transparency to user\n    end note\n\n    note right of execution\n        Key Innovation: Verify EACH step\n        Prevents cascading failures\n    end note\n",
  "content_size": 4095,
  "collected_at": "2026-02-06T10:39:11.584472",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] Á≥ªÁªüÊâæ‰∏çÂà∞ÊåáÂÆöÁöÑÊñá‰ª∂„ÄÇ",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 4,
  "repo_forks": 2,
  "repo_owner": "Saoussen-CH",
  "repo_name": "ai-creative-studio-adk-a2a-mcp-vertexai-cloudrun",
  "repo_description": "Distributed multi-agent orchestration using the A2A protocol, Vertex AI Agent Engine, Cloud Run, and Model Context Protocol (MCP) demonstrating agent-to-agent communication with remote specialist agen",
  "repo_language": "Python",
  "repo_topics": [],
  "repo_created_at": "2025-12-19T15:47:09Z",
  "repo_updated_at": "2026-01-12T06:24:18Z"
}