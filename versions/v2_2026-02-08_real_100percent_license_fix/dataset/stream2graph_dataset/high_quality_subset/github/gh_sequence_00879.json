{
  "id": "gh_sequence_00879",
  "source": "github",
  "source_url": "https://github.com/yG2y/LAB-DEV-DISTRIBUIDO/blob/32fc3e0324e2fbdb0827467375e072cb50390684/arq.mmd",
  "github_repo": "yG2y/LAB-DEV-DISTRIBUIDO",
  "github_file_path": "arq.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    participant AM as App Móvel<br/>(Etapa 1)\n    participant MS as Microserviços<br/>(Etapa 2)\n    participant EQ as Event Queue\n    participant LF as Lambda Functions<br/>(Serverless)\n    participant NS as Notification Service\n    participant ES as Email Service\n    participant PST as Pub/Sub Topics\n    participant DB as Database\n\n    Note over AM, DB: Funcionalidade 1: Finalização de Pedido\n\n    AM->>MS: Contratado finaliza pedido\n    MS->>MS: Atualiza status do pedido\n    MS->>EQ: Publica evento \"pedido_finalizado\"\n\n    Note over EQ: Event: {<br/>type: \"pedido_finalizado\",<br/>cliente_id: \"456\",<br/>contratado_id: \"789\",<br/>timestamp: \"2025-06-16T10:30:00Z\"<br/>}\n\n    EQ->>LF: Trigger evento pedido_finalizado\n    LF->>MS: GET /pedidos/{id} (dados completos)\n    MS-->>LF: Dados do pedido\n    LF->>NS: Envia push notification\n    NS-->>AM: \"Pedido concluído!<br/>Avalie o serviço prestado\"\n    LF->>DB: Registra log da notificação\n    LF->>MS: GET /pedidos/{id}/resumo\n    MS-->>LF: Dados para e-mail\n    LF->>ES: Processa template de e-mail\n\n    alt E-mail para Cliente\n        ES->>AM: Envia e-mail resumo\n        Note right of AM: Assunto: \"Entrega Concluída\"<br/>Conteúdo: Resumo completo\n    end\n\n    alt E-mail para Contratado\n        ES->>MS: Envia e-mail resumo\n        Note right of MS: Assunto: \"Serviço Finalizado\"<br/>Conteúdo: Dados da entrega\n    end\n\n    Note over AM, DB: Funcionalidade 2: Campanhas Promocionais\n\n    MS->>LF: Trigger campanha promocional\n    LF->>MS: GET /clientes (dados para segmentação)\n    MS-->>LF: Lista de clientes\n    LF->>LF: Processa segmentação\n\n    Note over LF: Segmentação por:<br/>- Localização<br/>- Frequência de uso<br/>- Histórico de pedidos<br/>- Comportamento no app\n\n    alt Grupo: Clientes Premium\n        LF->>PST: Publica em tópico \"premium_clients\"\n        PST-->>NS: Mensagem personalizada<br/>com descontos especiais\n        NS->>AM: Push notifications (grupo premium)\n        LF->>LF: Processa lista premium\n    end\n\n    alt Grupo: Clientes Região Sul\n        LF->>PST: Publica em tópico \"regiao_sul\"\n        PST-->>NS: Promoção regional<br/>com frete grátis\n        NS->>AM: Push notifications (região sul)\n        LF->>LF: Processa lista região sul\n    end\n\n    alt Grupo: Todos os Clientes\n        LF->>PST: Publica em tópico \"all_clients\"\n        PST-->>NS: Campanha geral<br/>com desconto padrão\n        NS->>AM: Push notifications (broadcast)\n        LF->>LF: Processa todos os clientes\n    end\n\n    LF->>DB: Registra métricas da campanha\n\n    Note over DB: Logs:<br/>- Grupos atingidos<br/>- Quantidade de envios<br/>- Taxa de entrega\n\n    AM->>LF: Usuário utiliza promoção\n    LF->>DB: Registra conversão da campanha",
  "content_size": 2717,
  "collected_at": "2026-02-06T01:50:15.048540",
  "compilation_status": "success",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "yG2y",
  "repo_name": "LAB-DEV-DISTRIBUIDO",
  "repo_description": "final do lab",
  "repo_language": "Java",
  "repo_topics": [],
  "repo_created_at": "2025-06-25T22:31:41Z",
  "repo_updated_at": "2025-06-27T03:36:31Z"
}