{
  "id": "gh_flowchart_00529",
  "source": "github",
  "source_url": "https://github.com/seanchatmangpt/erlmcp/blob/1356e12d778f4f4908360bdb3af445db8caff50d/docs/diagrams/configuration/validation-pipeline.mmd",
  "github_repo": "seanchatmangpt/erlmcp",
  "github_file_path": "docs/diagrams/configuration/validation-pipeline.mmd",
  "diagram_type": "flowchart",
  "code": "%%{init: {'theme':'base', 'themeVariables': {'primaryColor':'#ff9900', 'primaryTextColor':'#fff', 'primaryBorderColor':'#8B4500', 'lineColor':'#ff9900', 'sectionBkgColor':'#ffcc00', 'altSectionBkgColor':'#ffe6a6'}}}%%\nflowchart TB\n    subgraph \"Configuration Validation Pipeline\"\n        direction TB\n\n        subgraph Input[\"Configuration Input Sources\"]\n            direction TB\n            SysConfigInput[\"sys.config<br/>(compile-time)\"]\n            EnvVarsInput[\"Environment Variables<br/>(runtime)\"]\n            CLIInput[\"Command-line Args<br/>(runtime)\"]\n            RPCInput[\"RPC Updates<br/>(dynamic)\"]\n        end\n\n        subgraph Stage1[\"Stage 1: Schema Validation\"]\n            direction TB\n            SchemaLoad[\"Load JSON Schema<br/>(jesse)\"]\n            StructCheck[\"Structural Validation<br/>(required fields)\"]\n            TypeCheck[\"Type Validation<br/>(integer, string, etc)\"]\n            EnumCheck[\"Enum Validation<br/>(allowed values)\"]\n        end\n\n        subgraph Stage2[\"Stage 2: Business Logic Validation\"]\n            direction TB\n            RangeCheck[\"Range Validation<br/>(min/max)\"]\n            PathCheck[\"Path Validation<br/>(exists, readable)\"]\n            DepCheck[\"Dependency Check<br/>(conflicts, requires)\"]\n            SecCheck[\"Security Validation<br/>(no secrets in config)\"]\n        end\n\n        subgraph Stage3[\"Stage 3: Runtime Validation\"]\n            direction TB\n            ConnCheck[\"Connectivity Check<br/>(database, network)\"]\n            ResCheck[\"Resource Check<br/>(memory, file handles)\"]\n            PermCheck[\"Permission Check<br/>(file access)\"]\n            HealthCheck[\"Health Check<br/>(external services)\"]\n        end\n\n        subgraph Gates[\"Validation Gates\"]\n            direction TB\n            Gate1[\"Gate 1: Schema<br/>(blocking)\"]\n            Gate2[\"Gate 2: Logic<br/>(blocking)\"]\n            Gate3[\"Gate 3: Runtime<br/>(warning only)\"]\n        end\n\n        subgraph Output[\"Validation Outcomes\"]\n            direction TB\n            Success[\"✓ Valid Configuration<br/>(proceed to startup)\"]\n            Warnings[\"⚠ Valid with Warnings<br/>(log, proceed)\"]\n            Errors[\"✗ Invalid Configuration<br/>(halt startup)\"]\n        end\n\n        subgraph ErrorHandling[\"Error Handling\"]\n            direction TB\n            SchemaError[\"Schema Validation Error<br/>+ field location\"]\n            LogicError[\"Business Logic Error<br/>+ constraint details\"]\n            RuntimeError[\"Runtime Validation Error<br/>+ remediation hint\"]\n        end\n\n        subgraph Observability[\"Validation Observability\"]\n            direction TB\n            Metrics[\"Metrics: config_validation_total<br/>(label: stage, result)\"]\n            Logging[\"Logging: validation_events<br/>(structured logs)\"]\n            Tracing[\"Tracing: validation_spans<br/>(OpenTelemetry)\"]\n        end\n\n        %% Flow: Input → Stage 1 → Stage 2 → Stage 3 → Output\n        SysConfigInput --> SchemaLoad\n        EnvVarsInput --> SchemaLoad\n        CLIInput --> SchemaLoad\n        RPCInput --> SchemaLoad\n\n        SchemaLoad --> StructCheck\n        StructCheck --> TypeCheck\n        TypeCheck --> EnumCheck\n\n        EnumCheck --> Gate1\n        Gate1 -->|\"PASS\"| RangeCheck\n        Gate1 -->|\"FAIL\"| SchemaError\n\n        RangeCheck --> PathCheck\n        PathCheck --> DepCheck\n        DepCheck --> SecCheck\n\n        SecCheck --> Gate2\n        Gate2 -->|\"PASS\"| ConnCheck\n        Gate2 -->|\"FAIL\"| LogicError\n\n        ConnCheck --> ResCheck\n        ResCheck --> PermCheck\n        PermCheck --> HealthCheck\n\n        HealthCheck --> Gate3\n        Gate3 -->|\"PASS\"| Success\n        Gate3 -->|\"WARN\"| Warnings\n        Gate3 -->|\"FAIL\"| RuntimeError\n\n        SchemaError --> Errors\n        LogicError --> Errors\n        RuntimeError --> Errors\n\n        %% Observability integration\n        SchemaLoad --> Metrics\n        RangeCheck --> Metrics\n        ConnCheck --> Metrics\n        Success --> Logging\n        Errors --> Logging\n        SchemaLoad --> Tracing\n\n        %% Error aggregation\n        SchemaError -.->|\"aggregate\"| Logging\n        LogicError -.->|\"aggregate\"| Logging\n        RuntimeError -.->|\"aggregate\"| Metrics\n\n        %% Validation modes\n        subgraph Modes[\"Validation Modes\"]\n            StrictMode[\"Strict Mode<br/>(all gates blocking)\"]\n            LenientMode[\"Lenient Mode<br/>(runtime gates = warnings)\"]\n            TestMode[\"Test Mode<br/>(skip runtime checks)\"]\n        end\n\n        StrictMode --> Gate1\n        LenientMode --> Gate3\n        TestMode --> HealthCheck\n    end\n\n    style SysConfigInput fill:#ffcc00,stroke:#8B4500,stroke-width:2px\n    style SchemaLoad fill:#ffffff,stroke:#ff9900,stroke-width:3px\n    style Gate1 fill:#ff0000,stroke:#8B0000,stroke-width:3px\n    style Success fill:#00ff00,stroke:#006600,stroke-width:3px\n    style Errors fill:#ff0000,stroke:#8B0000,stroke-width:3px\n\n    classDef input fill:#ffcc00,stroke:#8B4500,stroke-width:2px\n    classDef stage fill:#ffffff,stroke:#ff9900,stroke-width:3px\n    classDef gate fill:#ff0000,stroke:#8B0000,stroke-width:3px,color:#fff\n    classDef output fill:#00ff00,stroke:#006600,stroke-width:3px\n    classDef error fill:#ff6666,stroke:#8B0000,stroke-width:2px\n    classDef obs fill:#ff69b4,stroke:#c71585,stroke-width:2px\n\n    class SysConfigInput,EnvVarsInput,CLIInput,RPCInput input\n    class SchemaLoad,StructCheck,TypeCheck,EnumCheck,RangeCheck,PathCheck,DepCheck,SecCheck,ConnCheck,ResCheck,PermCheck,HealthCheck stage\n    class Gate1,Gate2,Gate3 gate\n    class Success,Warnings output\n    class SchemaError,LogicError,RuntimeError,Errors error\n    class Metrics,Logging,Tracing obs\n",
  "content_size": 5611,
  "collected_at": "2026-02-06T01:44:44.940698",
  "compilation_status": "success",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "apache-2.0",
  "license_name": "Apache License 2.0",
  "license_url": "https://api.github.com/licenses/apache-2.0",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "seanchatmangpt",
  "repo_name": "erlmcp",
  "repo_description": "Model Context Protocol (MCP) SDK for Erlang",
  "repo_language": "Erlang",
  "repo_topics": [],
  "repo_created_at": "2025-08-26T03:19:12Z",
  "repo_updated_at": "2026-02-05T01:44:49Z"
}