{
  "id": "gh_flowchart_00008",
  "source": "github",
  "source_url": "https://github.com/WKosikowski/wojo-nes-emulator/blob/12a769acf1b44135a883681e60987768c2a8c1aa/UML/CPU_Cycle.mmd",
  "github_repo": "WKosikowski/wojo-nes-emulator",
  "github_file_path": "UML/CPU_Cycle.mmd",
  "diagram_type": "flowchart",
  "code": "---\nconfig:\n  theme: redux\n---\nflowchart TD\n    A1[\"Start: Entry point to exuecution loop\"] --> A[\"Beginning of the CPU Execution Cycle\"]\n    A --> B[\"Fetch opcode from memory - PC address\"]\n    B -- Memory read successful --> C[\"Increment PC by 1\"]\n    B -- Memory access error --> D[\"Handle error - e.g., invalid address\"]\n    D --> E[\"Log error - debug output\"]\n    E --> F[\"End: Cycle aborted\"]\n    C --> G{\"Valid opcode?\"}\n    G -- Yes --> H[\"Decode opcode\"]\n    G -- No --> I[\"Handle illegal opcode - e.g., NOP or halt\"]\n    I --> J[\"Log illegal opcode - debug output\"]\n    J --> K[\"Advance CPU cycles - typically 2\"]\n    K --> A\n    H --> L{\"Addressing mode?\"}\n    L -- Immediate, Implied, Accumulator --> M[\"Fetch no additional bytes\"]\n    L -- Zero Page, Indexed, Absolute --> N[\"Fetch 1-2 bytes from memory - PC\"]\n    L -- Indirect, Relative --> O[\"Fetch 2 bytes - resolve indirect address\"]\n    M --> P[\"Increment PC by 0\"]\n    N --> Q[\"Increment PC by 1 or 2\"]\n    O --> R[\"Increment PC by 2\"]\n    P --> S[\"Execute instruction\"]\n    Q --> S\n    R --> S\n    S --> T{\"Instruction type?\"}\n    T -- \"Arithmetic/Logical - e.g., ADC, AND\" --> U[\"Perform operation - update registers, flags\"]\n    T -- \"Load/Store - e.g., LDA, STA\" --> V[\"Read/write memory - update registers\"]\n    T -- \"Branch - e.g., BEQ, JMP\" --> W[\"Update PC if condition met\"]\n    T -- \"Stack - e.g., PHA, RTS\" --> X[\"Push/pull stack - update SP, PC\"]\n    T -- \"System - e.g., BRK, RTI\" --> Y[\"Handle system operation - e.g., trigger interrupt\"]\n    U --> Z[\"Update status flags - e.g., Zero, Carry\"]\n    V --> Z\n    W --> AA[\"Check branch condition\"]\n    X --> Z\n    Y --> AB[\"Process interrupt or return\"]\n    AA -- Met --> AC[\"Set PC to branch target\"]\n    AA --  Not mett --> AD[\"No PC change\"]\n    AC --> Z\n    AD --> Z\n    AB -- Interrupt triggered --> AE[\"Push PC, status to stack - set interrupt vector\"]\n    AB -- Return from interrupt --> AF[\"Pull PC, status from stack\"]\n    AE --> AG[\"Set PC to interrupt vector - e.g., NMI at 0xFFFA\"]\n    AF --> Z\n    Z --> AH[\"Advance CPU cycles - based on instruction\"]\n    AG --> AH\n    AH --> AI{\"Check interruption\"}\n    AI -- \"NMI pending - e.g., PPU VBlank\" --> AJ[\"Set NMI flag - prepare interrupt\"]\n    AI -- \"IRQ pending - e.g., mapper, APU\" --> AK[\"Set IRQ flag - if not disabled\"]\n    AI -- No interrupts --> AL[\"No action\"]\n    AJ --> AM[\"Handle NMI - save state, jump to 0xFFFA\"]\n    AK --> AN[\"Handle IRQ - save state, jump to 0xFFFE\"]\n    AL --> AO[\"Prepare next cycle\"]\n    AM --> AO\n    AN --> AO\n    AO --> AP{\"Sync with PPU, APU?\"}\n    AP -- Yes --> AQ[\"Update PPU - 3 PPU cycles per CPU cycle\"]\n    AQ --> AR[\"Update APU - generate audio\"]\n    AR --> AS[\"Read controller input - 0x4016/0x4017\"]\n    AS --> AT[\"Check DMA - e.g., OAM transfer\"]\n    AT --> AU[\"End: Cycle complete - return to Start\"]\n    AP -- No --> AU\n    AU --> A\n    style AI stroke:#000000\n",
  "content_size": 2904,
  "collected_at": "2026-02-06T01:41:19.629099",
  "compilation_status": "success",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "WKosikowski",
  "repo_name": "wojo-nes-emulator",
  "repo_description": "A Nintendo Entertainment System Emulator written in Swift",
  "repo_language": "Swift",
  "repo_topics": [],
  "repo_created_at": "2025-05-11T14:35:51Z",
  "repo_updated_at": "2026-01-11T20:44:05Z"
}