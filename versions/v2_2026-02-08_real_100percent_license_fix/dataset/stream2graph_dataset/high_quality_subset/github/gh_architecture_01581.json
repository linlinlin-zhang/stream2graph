{
  "id": "gh_architecture_01581",
  "source": "github",
  "source_url": "https://github.com/waseem-akram-senarios/aris-rnd/blob/c7aaf98c2b1914f632b6ddaf60a3847fe29a6baf/diagrams/04_token_counting_architecture.mmd",
  "github_repo": "waseem-akram-senarios/aris-rnd",
  "github_file_path": "diagrams/04_token_counting_architecture.mmd",
  "diagram_type": "architecture",
  "code": "graph LR\n    subgraph Sources[\"Token Counting Sources\"]\n        DocText[\"Document Text\"]\n        QueryText[\"Query Text\"]\n        ContextText[\"Context Chunks\"]\n        ResponseText[\"LLM Response\"]\n    end\n    \n    subgraph Counter[\"Token Counter Component\"]\n        Tokenizer[\"TokenTextSplitter<br/>utils/tokenizer.py\"]\n        TikToken[\"TikToken Encoding<br/>Model-specific\"]\n    end\n    \n    subgraph UseCases[\"Token Counting Use Cases\"]\n        Chunking[\"Chunking<br/>Split by tokens\"]\n        UIWidget[\"UI Token Counter<br/>Real-time counting\"]\n        QueryTracking[\"Query Token Tracking<br/>Context + Response\"]\n        MetricsAnalysis[\"Token Analysis<br/>Distribution & Stats\"]\n    end\n    \n    subgraph Storage[\"Token Storage & Display\"]\n        ChunkMetadata[\"Chunk Metadata<br/>token_count field\"]\n        MetricsDB[\"Metrics Collector<br/>Token statistics\"]\n        UIDisplay[\"UI Display<br/>Token counts<br/>Charts<br/>Statistics\"]\n    end\n    \n    DocText --> Tokenizer\n    QueryText --> Tokenizer\n    ContextText --> Tokenizer\n    ResponseText --> Tokenizer\n    \n    Tokenizer --> TikToken\n    TikToken --> Chunking\n    TikToken --> UIWidget\n    TikToken --> QueryTracking\n    TikToken --> MetricsAnalysis\n    \n    Chunking --> ChunkMetadata\n    QueryTracking --> MetricsDB\n    MetricsAnalysis --> MetricsDB\n    MetricsDB --> UIDisplay\n    ChunkMetadata --> UIDisplay\n    \n    style Tokenizer fill:#fff9c4\n    style TikToken fill:#fff9c4\n    style MetricsDB fill:#f3e5f5\n    style UIDisplay fill:#e1f5ff\n\n\n\n\n\n",
  "content_size": 1521,
  "collected_at": "2026-02-06T01:48:09.643806",
  "license": "none",
  "license_name": "No License",
  "compilation_status": "success",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}