{
  "id": "gh_architecture_01692",
  "source": "github",
  "source_url": "https://github.com/IEEE-PES-TF-Cloud4PowerGrid/cloud_adoption_tutorials/blob/4429392329ed15932fac4d184a8b8a70009718a1/smart_meter_analytics/architecture/diagram.mmd",
  "github_repo": "IEEE-PES-TF-Cloud4PowerGrid/cloud_adoption_tutorials",
  "github_file_path": "smart_meter_analytics/architecture/diagram.mmd",
  "diagram_type": "architecture",
  "code": "%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#4285F4', 'secondaryColor': '#34A853', 'tertiaryColor': '#FBBC05'}}}%%\nflowchart TB\n    subgraph Edge[\"Edge Layer (Power Poles)\"]\n        direction TB\n        M1[(\"AMI 2.0 Meter 1<br/>1Hz Sampling\")]\n        M2[(\"AMI 2.0 Meter 2<br/>1Hz Sampling\")]\n        M3[(\"AMI 2.0 Meter N<br/>1Hz Sampling\")]\n        SIM[\"simulator.py<br/>Synthetic Data Generator\"]\n        GW[\"gateway_relay.py<br/>Pole Gateway\"]\n        \n        M1 --> SIM\n        M2 --> SIM\n        M3 --> SIM\n        SIM --> GW\n    end\n    \n    subgraph Backhaul[\"Network Backhaul\"]\n        direction LR\n        NET[\"5G / Satellite / Wired<br/>(Simulated Jitter & Latency)\"]\n    end\n    \n    subgraph Ingestion[\"Cloud Ingestion Layer\"]\n        direction TB\n        TOPIC[\"Pub/Sub Topic<br/>ami-meter-data\"]\n        SUB[\"Pub/Sub Subscription<br/>ami-meter-data-sub\"]\n        DLQ[\"Dead Letter Queue<br/>(Optional)\"]\n        \n        TOPIC --> SUB\n        TOPIC --> DLQ\n    end\n    \n    subgraph Processing[\"Stream Processing Layer\"]\n        direction TB\n        DF[\"Dataflow Pipeline<br/>(Apache Beam)\"]\n        PARSE[\"Parse & Validate<br/>JSON\"]\n        ENRICH[\"Enrich with<br/>Ingest Timestamp\"]\n        \n        DF --> PARSE\n        PARSE --> ENRICH\n    end\n    \n    subgraph Storage[\"Storage Layer\"]\n        direction TB\n        GCS[\"Cloud Storage<br/>Raw Archive (JSONL/CSV)\"]\n        BQ[\"BigQuery<br/>smart_grid_analytics\"]\n        RAW[\"raw_meter_readings<br/>(Partitioned by Day)\"]\n        AGG[\"Aggregated Views<br/>(5-min, Hourly)\"]\n        \n        BQ --> RAW\n        BQ --> AGG\n    end\n    \n    subgraph Analytics[\"Analytics Layer\"]\n        direction TB\n        VOLT[\"Voltage Anomaly<br/>Detection\"]\n        DR[\"DR Baseline<br/>Computation\"]\n        HEALTH[\"Feeder Health<br/>Summary\"]\n        SCHED[\"Cloud Scheduler<br/>(Periodic Jobs)\"]\n        \n        SCHED --> VOLT\n        SCHED --> DR\n        SCHED --> HEALTH\n    end\n    \n    subgraph API[\"Serving Layer\"]\n        direction TB\n        RUN[\"Cloud Run API<br/>(FastAPI)\"]\n        ENDPOINTS[\"Endpoints:<br/>/health<br/>/pole/{id}/summary<br/>/anomalies<br/>/dr/compute\"]\n        \n        RUN --> ENDPOINTS\n    end\n    \n    %% Connections\n    GW --> NET\n    NET --> TOPIC\n    SUB --> DF\n    ENRICH --> GCS\n    ENRICH --> BQ\n    RAW --> VOLT\n    RAW --> DR\n    RAW --> HEALTH\n    AGG --> RUN\n    RAW --> RUN\n    \n    %% Styling\n    classDef meter fill:#E8F5E9,stroke:#2E7D32\n    classDef gateway fill:#E3F2FD,stroke:#1565C0\n    classDef network fill:#FFF3E0,stroke:#E65100\n    classDef pubsub fill:#FCE4EC,stroke:#AD1457\n    classDef dataflow fill:#F3E5F5,stroke:#7B1FA2\n    classDef storage fill:#E1F5FE,stroke:#0277BD\n    classDef analytics fill:#FFF8E1,stroke:#FF8F00\n    classDef api fill:#E8EAF6,stroke:#3F51B5\n    \n    class M1,M2,M3 meter\n    class SIM,GW gateway\n    class NET network\n    class TOPIC,SUB,DLQ pubsub\n    class DF,PARSE,ENRICH dataflow\n    class GCS,BQ,RAW,AGG storage\n    class VOLT,DR,HEALTH,SCHED analytics\n    class RUN,ENDPOINTS api\n",
  "content_size": 3046,
  "collected_at": "2026-02-06T02:02:12.525427",
  "compilation_status": "success",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 16,
  "repo_forks": 5
}