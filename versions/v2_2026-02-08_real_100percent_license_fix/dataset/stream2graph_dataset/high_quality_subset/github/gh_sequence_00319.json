{
  "id": "gh_sequence_00319",
  "source": "github",
  "source_url": "https://github.com/TheManchineel/titilda-music/blob/7e11cab6fbc889e32c5d9301d255a547c7feaa16/docs/sequence-diagrams/ssr/login.mmd",
  "github_repo": "TheManchineel/titilda-music",
  "github_file_path": "docs/sequence-diagrams/ssr/login.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    actor User\n    participant RootRedirectServlet\n    participant LoginServlet\n    participant AuthLoginServlet\n    participant HomeServlet\n    participant Authentication\n    participant DAO\n    User->>RootRedirectServlet: GET /\n    RootRedirectServlet->>User: 302 Redirect to /login\n    User->>LoginServlet: GET /login\n    LoginServlet->>User: 200 OK, login.html\n    User->>AuthLoginServlet: POST /auth/login {username, password}\n    AuthLoginServlet->>Authentication: validateCredentials(username, password)\n    Authentication->>DAO: getUserByUsername(username)\n    DAO->>Authentication: Optional<User>\n    Authentication->>AuthLoginServlet: .filter(Authentication::validatePassword)\n    alt User is present\n        AuthLoginServlet->>Authentication: generateToken(user)\n        Authentication->>AuthLoginServlet: token\n        AuthLoginServlet->>User: 302 Redirect to /home, Set-Cookie\n    else User is not present\n        AuthLoginServlet->>User: 302 Redirect to /login?error=invalid_credentials\n    end\n    User->>HomeServlet: GET /home\n    HomeServlet->>HomeServlet: getToken(request)\n    HomeServlet->>Authentication: validateToken(token)\n    alt Token signature is valid\n        Authentication->>DAO: getUserByUsername(token.username)\n        DAO->>Authentication: User\n        alt Token is not expired\n            Authentication->>HomeServlet: User\n            HomeServlet->>DAO: getPlaylistsOfOwner(User)\n            HomeServlet->>User: 200 OK, home.html\n        else Token is expired\n            HomeServlet->>User: 302 Redirect to /login\n        end\n    else Token signature is invalid\n        HomeServlet->>User: 302 Redirect to /login\n    end",
  "content_size": 1673,
  "collected_at": "2026-02-06T01:30:38.059840",
  "compilation_status": "success",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "TheManchineel",
  "repo_name": "titilda-music",
  "repo_description": "A simple web application to manage music tracks and playlists",
  "repo_language": "Java",
  "repo_topics": [],
  "repo_created_at": "2025-04-11T15:48:45Z",
  "repo_updated_at": "2025-10-05T10:40:48Z"
}