{
  "id": "gh_architecture_01548",
  "source": "github",
  "source_url": "https://github.com/kilian-lm/vpc_setup/blob/5f304da5f96580edfe9f197a6715db9a19ac4ae2/vpc_setup.mmd",
  "github_repo": "kilian-lm/vpc_setup",
  "github_file_path": "vpc_setup.mmd",
  "diagram_type": "architecture",
  "code": "flowchart TB\n    %% Legend\n    subgraph legend [Legend]\n        direction LR\n        classDef cloud fill:#E3F2FD,stroke:#1E88E5,stroke-width:2px,color:#000000;\n        classDef publicSubnet fill:#FFFFFF,stroke:#000000,stroke-dasharray: 5 5,color:#000000;\n        classDef privateSubnet fill:#F0F0F0,stroke:#000000,color:#000000;\n        classDef resource fill:#FFFFFF,stroke:#000000,shape:rect,color:#000000;\n        classDef idp fill:#F3E5F5,stroke:#8E24AA,stroke-width:2px,color:#000000;\n        classDef user fill:#FFF3E0,stroke:#FB8C00,stroke-width:2px,color:#000000;\n\n        L1[Cloud Environment]:::cloud\n        L2[Public Subnet]:::publicSubnet\n        L3[Private Subnet]:::privateSubnet\n        L4[Resource]:::resource\n        L5[Identity Provider]:::idp\n    end\n\n    %% AWS Cloud\n    subgraph aws_cloud [AWS Cloud]\n        direction TB\n        %% Public Subnet\n        subgraph public_subnet_aws [Public Subnet AWS]\n            direction TB\n            InternetGW_AWS[Internet Gateway]:::resource\n            ELB_AWS[Elastic Load Balancer]:::resource\n            EC2_AWS[EC2 Instances]:::resource\n            InternetGW_AWS --> ELB_AWS --> EC2_AWS\n        end\n        %% Private Subnet\n        subgraph private_subnet_aws [Private Subnet AWS]\n            direction TB\n            Sagemaker_AWS[Amazon SageMaker Notebooks]:::resource\n            RDS_AWS[RDS Database]:::resource\n            EC2_AWS --> Sagemaker_AWS\n            Sagemaker_AWS --> RDS_AWS\n        end\n    end\n\n    %% GCP Cloud\n    subgraph gcp_cloud [GCP Cloud]\n        direction TB\n        %% Public Subnet\n        subgraph public_subnet_gcp [Public Subnet GCP]\n            direction TB\n            InternetGW_GCP[Internet Gateway]:::resource\n            LB_GCP[Cloud Load Balancer]:::resource\n            ComputeEngine_GCP[Compute Engine VMs]:::resource\n            InternetGW_GCP --> LB_GCP --> ComputeEngine_GCP\n        end\n        %% Private Subnet\n        subgraph private_subnet_gcp [Private Subnet GCP]\n            direction TB\n            Dataproc_GCP[Dataproc Clusters]:::resource\n            CloudSQL_GCP[Cloud SQL Database]:::resource\n            ComputeEngine_GCP --> Dataproc_GCP\n            Dataproc_GCP --> CloudSQL_GCP\n        end\n    end\n\n    %% Centralized Identity Management\n    subgraph identity_management [Identity Management]\n        direction TB\n        IdP[Centralized Identity Provider / SSO]:::idp\n        New_User[New Data Scientist / Programmer]:::user -->|Onboard| IdP\n        IdP -->|Federated Access| IAM_AWS[IAM AWS]:::resource\n        IdP -->|Federated Access| IAM_GCP[IAM GCP]:::resource\n        IAM_AWS --> EC2_AWS\n        IAM_AWS --> Sagemaker_AWS\n        IAM_GCP --> ComputeEngine_GCP\n        IAM_GCP --> Dataproc_GCP\n    end\n\n    %% Optional VPC Peering\n    VPC_AWS[VPC AWS]:::resource\n    VPC_GCP[VPC GCP]:::resource\n    VPC_AWS ---|Optional VPC Peering| VPC_GCP\n\n    %% Apply styles to subgraphs using 'style' directives\n    style aws_cloud fill:#E3F2FD,stroke:#1E88E5,stroke-width:2px,color:#000000\n    style gcp_cloud fill:#E8F5E9,stroke:#43A047,stroke-width:2px,color:#000000\n    style identity_management fill:#F3E5F5,stroke:#8E24AA,stroke-width:2px,font-weight:bold,color:#000000\n    style public_subnet_aws stroke:#000000,stroke-dasharray: 5 5,color:#000000\n    style private_subnet_aws fill:#F0F0F0,stroke:#000000,color:#000000\n    style public_subnet_gcp stroke:#000000,stroke-dasharray: 5 5,color:#000000\n    style private_subnet_gcp fill:#F0F0F0,stroke:#000000,color:#000000\n\n    %% Styles Applied from Legend\n    class InternetGW_AWS resource\n    class ELB_AWS resource\n    class EC2_AWS resource\n    class Sagemaker_AWS resource\n    class RDS_AWS resource\n    class InternetGW_GCP resource\n    class LB_GCP resource\n    class ComputeEngine_GCP resource\n    class Dataproc_GCP resource\n    class CloudSQL_GCP resource\n    class IAM_AWS resource\n    class IAM_GCP resource\n    class VPC_AWS resource\n    class VPC_GCP resource\n    class IdP idp\n    class New_User user\n",
  "content_size": 3996,
  "collected_at": "2026-02-06T01:47:45.127047",
  "license": "none",
  "license_name": "No License",
  "compilation_status": "success",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}