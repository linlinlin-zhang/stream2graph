{
  "id": "gl_flowchart_00638",
  "source": "gitlab",
  "source_url": "https://github.com/WKosikowski/wojo-nes-emulator/blob/12a769acf1b44135a883681e60987768c2a8c1aa/UML/APUCycle.mmd",
  "source_note": "collected_from_github_final",
  "github_repo": "WKosikowski/wojo-nes-emulator",
  "diagram_type": "flowchart",
  "code": "---\nconfig:\n  layout: elk\n  theme: redux\n---\nflowchart TD\n    %% Node Definitions\n    start_apu_cycle[\"Start APU Cycle\"]\n    check_apu_status_register[\"Check APU Status Register (0x4015)\"]\n    apu_enabled{\"Is APU Enabled?\"}\n    advance_apu_timers[\"Advance Timers for All Channels\"]\n    mute_channels[\"Mute All Channels\"]\n    output_silence[\"Output Silent Audio\"]\n    process_pulse1[\"Process Pulse 1 Channel\"]\n    process_pulse2[\"Process Pulse 2 Channel\"]\n    process_triangle_noise_dmc[\"Process Triangle, Noise, DMC Channels\"]\n    pulse1_enabled{\"Is Pulse 1 Enabled?\"}\n    pulse2_enabled{\"Is Pulse 2 Enabled?\"}\n    check_pulse1_timer[\"Check Timer for Pulse 1 (Registers 0x4002-0x4003)\"]\n    silence_pulse1[\"Output Silence for Pulse 1\"]\n    pulse1_timer_expired{\"Has Pulse 1 Timer Expired?\"}\n    generate_pulse1_waveform[\"Generate Pulse 1 Waveform (Duty Cycle: 0x4000)\"]\n    maintain_pulse1_waveform[\"Maintain Current Waveform for Pulse 1\"]\n    apply_pulse1_volume_envelope[\"Apply Volume/Envelope (0x4000)\"]\n    apply_pulse1_sweep[\"Apply Frequency Sweep (0x4001)\"]\n    output_pulse1_sample[\"Output Pulse 1 Sample\"]\n    check_pulse2_timer[\"Check Timer for Pulse 2 (Registers 0x4006-0x4007)\"]\n    silence_pulse2[\"Output Silence for Pulse 2\"]\n    pulse2_timer_expired{\"Has Pulse 2 Timer Expired?\"}\n    generate_pulse2_waveform[\"Generate Pulse 2 Waveform (Duty Cycle: 0x4004)\"]\n    maintain_pulse2_waveform[\"Maintain Current Waveform for Pulse 2\"]\n    apply_pulse2_volume_envelope[\"Apply Volume/Envelope (0x4004)\"]\n    apply_pulse2_sweep[\"Apply Frequency Sweep (0x4005)\"]\n    output_pulse2_sample[\"Output Pulse 2 Sample\"]\n    mix_samples[\"Mix Channel Samples, Add to Buffer\"]\n    buffer_full{\"Is Audio Buffer Full?\"}\n    send_to_audio_device[\"Send to Audio Device (e.g., Core Audio)\"]\n    queue_samples[\"Queue Samples for Next Cycle\"]\n    end_audio_generation[\"End: Audio Sample Generation\"]\n\n    %% Node Connections\n    start_apu_cycle --> check_apu_status_register\n    check_apu_status_register --> apu_enabled\n    apu_enabled -- Yes --> advance_apu_timers\n    apu_enabled -- No --> mute_channels\n    mute_channels --> output_silence\n    advance_apu_timers --> process_pulse1\n    process_pulse1 --> process_pulse2\n    process_pulse1 --> pulse1_enabled\n    process_pulse2 --> process_triangle_noise_dmc\n    process_pulse2 --> pulse2_enabled\n    pulse1_enabled -- Yes --> check_pulse1_timer\n    pulse1_enabled -- No --> silence_pulse1\n    check_pulse1_timer --> pulse1_timer_expired\n    pulse1_timer_expired -- Yes --> generate_pulse1_waveform\n    pulse1_timer_expired -- No --> maintain_pulse1_waveform\n    generate_pulse1_waveform --> apply_pulse1_volume_envelope\n    maintain_pulse1_waveform --> apply_pulse1_volume_envelope\n    apply_pulse1_volume_envelope --> apply_pulse1_sweep\n    apply_pulse1_sweep --> output_pulse1_sample\n    silence_pulse1 --> output_pulse1_sample\n    pulse2_enabled -- Yes --> check_pulse2_timer\n    pulse2_enabled -- No --> silence_pulse2\n    check_pulse2_timer --> pulse2_timer_expired\n    pulse2_timer_expired -- Yes --> generate_pulse2_waveform\n    pulse2_timer_expired -- No --> maintain_pulse2_waveform\n    generate_pulse2_waveform --> apply_pulse2_volume_envelope\n    maintain_pulse2_waveform --> apply_pulse2_volume_envelope\n    apply_pulse2_volume_envelope --> apply_pulse2_sweep\n    apply_pulse2_sweep --> output_pulse2_sample\n    silence_pulse2 --> output_pulse2_sample\n    output_pulse1_sample --> mix_samples\n    output_silence --> mix_samples\n    process_triangle_noise_dmc --> mix_samples\n    output_pulse2_sample --> mix_samples\n    mix_samples --> buffer_full\n    buffer_full -- Yes --> send_to_audio_device\n    buffer_full -- No --> queue_samples\n    send_to_audio_device --> end_audio_generation\n    queue_samples --> end_audio_generation\n\n    %% Styling\n    style process_triangle_noise_dmc fill:#FFCDD2\n    style mix_samples fill:#E1BEE7\n",
  "content_size": 3883,
  "collected_at": "2026-02-06T14:18:18.374535",
  "compilation_status": "success",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "WKosikowski",
  "repo_name": "wojo-nes-emulator",
  "repo_description": "A Nintendo Entertainment System Emulator written in Swift",
  "repo_language": "Swift",
  "repo_topics": [],
  "repo_created_at": "2025-05-11T14:35:51Z",
  "repo_updated_at": "2026-01-11T20:44:05Z"
}