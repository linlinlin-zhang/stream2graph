{
  "id": "gl_block-beta_00333",
  "source": "gitlab",
  "source_url": "https://github.com/pulumi-demos/examples/blob/5ee70f4155dc93719da00a9f616c0bfce257178d/diagrams/claude-and-mermaid-generation/diagrams/aws-infrastructure.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "pulumi-demos/examples",
  "diagram_type": "block-beta",
  "code": "graph TB\n    subgraph AWS[\"AWS Account\"]\n        subgraph Region[\"US East 1 (N. Virginia)\"]\n            subgraph VPC[\"myVpc - CIDR: 10.0.0.0/16\"]\n                subgraph AZ1[\"us-east-1a\"]\n                    subgraph PublicSubnet[\"myPublicSubnet - CIDR: 10.0.1.0/24<br/>mapPublicIpOnLaunch: true\"]\n                        EC2[\"myInstance<br/>Type: t2.micro<br/>AMI: Latest Amazon Linux 2<br/>Public IP: Auto-assigned<br/>User Data: Creates index.html + starts Python server\"]\n                        \n                        subgraph Storage[\"Block Storage\"]\n                            EBS[\"Root EBS Volume<br/>Type: gp2 (default)<br/>Size: 8GB<br/>Mount: / (root filesystem)<br/>Contains: OS + index.html\"]\n                        end\n                    end\n                end\n                \n                IGW[\"myInternetGateway<br/>Provides internet connectivity<br/>Attached to VPC\"]\n                \n                RT[\"myRouteTable<br/>Default route: 0.0.0.0/0 → IGW<br/>Associated with myPublicSubnet<br/>Enables internet access\"]\n                \n                SG[\"mySecurityGroup<br/>Attached to myInstance<br/>Ingress Rules:<br/>• HTTP (80/tcp) from allowed IP range<br/>• SSH (22/tcp) from allowed IP range<br/>Egress: All traffic allowed<br/>IP-based access control\"]\n                \n                RTA[\"myRouteTableAssociation<br/>Links route table to subnet<br/>Enables routing rules\"]\n            end\n        end\n    end\n    \n    WEB_USER[\"Web Users<br/>HTTP Access (allowed IP range)<br/>Web Browsers\"]\n    ADMIN_USER[\"Admin Users<br/>SSH Access (allowed IP range)<br/>Terminal/SSH Clients\"]\n    BLOCKED[\"Blocked Traffic<br/>All Other IP Addresses<br/>Access Denied by Security Group\"]\n    \n    %% Web Traffic Flow\n    WEB_USER -->|HTTP GET Requests<br/>Port 80/TCP from allowed IP range| IGW\n    \n    %% Admin Traffic Flow  \n    ADMIN_USER -->|SSH Connections<br/>Port 22/TCP from allowed IP range| IGW\n    IGW -->|Ingress Traffic<br/>NAT & Routing| RT\n    RT -->|Subnet Routing<br/>10.0.1.0/24| PublicSubnet\n    PublicSubnet -->|Instance Access<br/>Security Group Filter| EC2\n    EC2 -->|HTTP Responses<br/>Serves index.html| WEB_USER\n    EC2 -->|SSH Shell Access<br/>Remote Administration| ADMIN_USER\n    \n    %% Blocked Traffic Flow\n    BLOCKED -.->|Access Denied<br/>All other IPs blocked| SG\n    SG -.->|Firewall Rules<br/>All other IPs blocked| BLOCKED\n    \n    %% Infrastructure Relationships  \n    RT -.->|Association| RTA\n    RTA -.->|Links to| PublicSubnet\n    SG -->|Network Security<br/>Firewall Rules| EC2\n    EC2 -->|Block Storage<br/>Root Volume| EBS\n    \n    %% User Data Process Flow\n    EC2 -.->|Boot Script Execution| UserData[\"User Data Script<br/>1. echo 'Hello, World!' > index.html<br/>2. nohup python -m SimpleHTTPServer 80 &\"]\n    UserData -.->|Creates Content| EBS\n    UserData -.->|Starts Web Server| PythonProcess[\"Python HTTP Server<br/>Process on port 80<br/>Serves files from /\"]\n    \n    %% Styling\n    classDef vpc fill:#e1f5fe,stroke:#0277bd,stroke-width:2px\n    classDef subnet fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px\n    classDef ec2 fill:#fff3e0,stroke:#f57c00,stroke-width:2px\n    classDef network fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px\n    classDef storage fill:#fce4ec,stroke:#c2185b,stroke-width:2px\n    classDef internet fill:#e3f2fd,stroke:#1976d2,stroke-width:2px\n    classDef process fill:#f1f8e9,stroke:#689f38,stroke-width:2px\n    classDef blocked fill:#ffebee,stroke:#d32f2f,stroke-width:2px\n    \n    class VPC vpc\n    class PublicSubnet subnet\n    class EC2 ec2\n    class EBS storage\n    class IGW,RT,SG,RTA network\n    class WEB_USER,ADMIN_USER internet\n    class BLOCKED blocked\n    class UserData,PythonProcess process",
  "content_size": 3709,
  "collected_at": "2026-02-06T14:07:26.733321",
  "compilation_status": "success",
  "license": "apache-2.0",
  "license_name": "Apache License 2.0",
  "license_url": "https://api.github.com/licenses/apache-2.0",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "pulumi-demos",
  "repo_name": "examples",
  "repo_description": "Examples used in Pulumi demos.",
  "repo_language": "Python",
  "repo_topics": [],
  "repo_created_at": "2022-11-04T14:44:56Z",
  "repo_updated_at": "2025-09-15T19:47:02Z"
}