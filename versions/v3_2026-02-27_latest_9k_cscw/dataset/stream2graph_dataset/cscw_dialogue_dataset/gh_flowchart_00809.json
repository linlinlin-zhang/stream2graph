{
  "id": "gh_flowchart_00809",
  "source": "github",
  "source_url": "https://github.com/cloudera/CAI_AMP_Synthetic_Data_Studio/blob/67759989cc37259378d4709822ba5a39232a7659/docs/architecture.mmd",
  "github_repo": "cloudera/CAI_AMP_Synthetic_Data_Studio",
  "github_file_path": "docs/architecture.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TD\n    subgraph Client[\"USER INTERFACE LAYER\"]\n        UI[\"React Frontend\"]\n        TelDash[\"Telemetry Dashboard\"]\n    end\n\n    subgraph ServiceLayer[\"SERVICE LAYER\"]\n        API[\"FastAPI\"] --> SynthSvc[\"Synthesis Service\"]\n        API --> EvalSvc[\"Evaluator Service\"]\n        API --> ExportSvc[\"Export Service\"]\n        API --> TelAPI[\"Telemetry API\"]\n        \n        SynthSvc -- \"generates\" --> DataSet[(Generated Datasets)]\n        EvalSvc -- \"evaluates\" --> EvalResult[(Evaluation Results)]\n        ExportSvc -- \"exports to\" --> Export[(Export Destinations)]\n    end\n\n    subgraph DataLayer[\"DATA LAYER\"]\n        MetaDB[(\"metadata.db\\nApplication Data\")]\n        TelDB[(\"telemetry.db\\nMetrics Data\")]\n    end\n\n    subgraph Middleware[\"MIDDLEWARE LAYER\"]\n        TelMid[\"Telemetry Middleware\"]\n        ErrHandler[\"Error Handler\"]\n        Timeout[\"Request Timeout\"]\n    end\n\n    subgraph External[\"EXTERNAL SYSTEMS\"]\n        subgraph LLMProviders[\"LLM PROVIDERS\"]\n            AWSBedrock[\"AWS Bedrock\"]\n            CAII[\"Cloudera AI Inference\"]\n        end\n        \n        subgraph Export[\"EXPORT DESTINATIONS\"]\n            Local[\"Local Storage\"]\n            HF[\"HuggingFace Hub\"]\n            S3[\"AWS S3\"]\n        end\n\n        subgraph JobSystem[\"CML JOB SYSTEM\"]\n            SynthJob[\"Synthesis Jobs\"]\n            EvalJob[\"Evaluation Jobs\"]\n            ExportJob[\"Export Jobs\"]\n        end\n    end\n\n    %% UI connections\n    UI -- \"API calls\" --> API\n    UI -- \"displays\" --> TelDash\n    TelDash -- \"queries\" --> TelAPI\n\n    %% Middleware connections\n    API -- \"passes through\" --> TelMid\n    API -- \"passes through\" --> ErrHandler\n    API -- \"passes through\" --> Timeout\n\n    %% Service to DB connections\n    SynthSvc -- \"records metadata\" --> MetaDB\n    EvalSvc -- \"records metadata\" --> MetaDB\n    ExportSvc -- \"records metadata\" --> MetaDB\n    \n    %% Telemetry connections\n    TelMid -- \"logs metrics\" --> TelDB\n    TelAPI -- \"reads metrics\" --> TelDB\n    \n    %% External service connections\n    SynthSvc -- \"invokes\" --> AWSBedrock\n    SynthSvc -- \"invokes\" --> CAII\n    EvalSvc -- \"invokes\" --> AWSBedrock\n    EvalSvc -- \"invokes\" --> CAII\n    \n    %% Job connections\n    SynthSvc -- \"delegates\" --> SynthJob\n    EvalSvc -- \"delegates\" --> EvalJob\n    ExportSvc -- \"delegates\" --> ExportJob\n    \n    %% Export connections\n    ExportSvc -- \"exports to\" --> Local\n    ExportSvc -- \"exports to\" --> HF\n    ExportSvc -- \"exports to\" --> S3\n\n    %% Styling\n    classDef primary fill:#f9f9f9,stroke:#333,stroke-width:3px\n    classDef db fill:#f5f5f5,stroke:#333,stroke-width:2px\n    classDef ext fill:#e6f7ff,stroke:#333,stroke-width:2px\n    classDef label fill:none,stroke:none,color:#333,font-weight:bold\n    classDef heading fill:none,stroke:none,color:#333,font-size:16px,font-weight:bold\n    \n    class Client,ServiceLayer,DataLayer,Middleware primary\n    class MetaDB,TelDB db\n    class External,LLMProviders,Export,JobSystem ext",
  "content_size": 2952,
  "collected_at": "2026-02-06T01:48:20.800182",
  "compilation_status": "failed",
  "license": "gpl-3.0",
  "license_name": "GNU General Public License v3.0",
  "license_url": "https://api.github.com/licenses/gpl-3.0",
  "repo_stars": 1,
  "repo_forks": 4,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 \"USER INTERFACE LAYER\" 和 \"React Frontend\" 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '\"USER INTERFACE LAYER\" 和 \"React Frontend\"'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Client",
        "UI"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 \"Telemetry Dashboard\" 和 \"SERVICE LAYER\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"Telemetry Dashboard\" 和 \"SERVICE LAYER\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "TelDash",
        "ServiceLayer"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 \"FastAPI\" 和 \"Synthesis Service\" 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"FastAPI\" 和 \"Synthesis Service\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "API",
        "SynthSvc"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"Evaluator Service\" 和 \"Export Service\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '\"Evaluator Service\" 和 \"Export Service\"'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "EvalSvc",
        "ExportSvc"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 \"Telemetry API\" 和 (Generated Datasets 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"Telemetry API\" 和 (Generated Datasets'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "TelAPI",
        "DataSet"
      ],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 (Evaluation Results 和 (Export Destinations。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 (Evaluation Results处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 23,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '(Evaluation Results处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "EvalResult",
        "Export"
      ],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 \"DATA LAYER\" 和 (\"metadata.db\\nApplication Data\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 27,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 \"DATA LAYER\"处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 28,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '\"DATA LAYER\"处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 29,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 30,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "DataLayer",
        "MetaDB"
      ],
      "is_repair": false
    },
    {
      "turn_id": 31,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 (\"telemetry.db\\nMetrics Data\" 和 \"MIDDLEWARE LAYER\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 32,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '(\"telemetry.db\\nMetrics Data\" 和 \"MIDDLEWARE LAYER\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 33,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 34,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "TelDB",
        "Middleware"
      ],
      "is_repair": false
    },
    {
      "turn_id": 35,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 \"Telemetry Middleware\" 和 \"Error Handler\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 36,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 \"Telemetry Middleware\"处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 37,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"Telemetry Middleware\"处理'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 38,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 39,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "TelMid",
        "ErrHandler"
      ],
      "is_repair": false
    },
    {
      "turn_id": 40,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 \"Request Timeout\" 和 \"EXTERNAL SYSTEMS\"。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 41,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"Request Timeout\" 和 \"EXTERNAL SYSTEMS\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 42,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 43,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Timeout",
        "External"
      ],
      "is_repair": false
    },
    {
      "turn_id": 44,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"LLM PROVIDERS\" 和 \"AWS Bedrock\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 45,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '\"LLM PROVIDERS\" 和 \"AWS Bedrock\"'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 46,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 47,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "LLMProviders",
        "AWSBedrock"
      ],
      "is_repair": false
    },
    {
      "turn_id": 48,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 \"Cloudera AI Inference\" 和 \"EXPORT DESTINATIONS\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 49,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '\"Cloudera AI Inference\" 和 \"EXPORT DESTINATIONS\"'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 50,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 51,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "CAII",
        "Export"
      ],
      "is_repair": false
    },
    {
      "turn_id": 52,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 \"Local Storage\" 和 \"HuggingFace Hub\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 53,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"Local Storage\" 和 \"HuggingFace Hub\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 54,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 55,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Local",
        "HF"
      ],
      "is_repair": false
    },
    {
      "turn_id": 56,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 \"AWS S3\" 和 \"CML JOB SYSTEM\"。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 57,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '\"AWS S3\" 和 \"CML JOB SYSTEM\"'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 58,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 59,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "S3",
        "JobSystem"
      ],
      "is_repair": false
    },
    {
      "turn_id": 60,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 \"Synthesis Jobs\" 和 \"Evaluation Jobs\"。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 61,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"Synthesis Jobs\" 和 \"Evaluation Jobs\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 62,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 63,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "SynthJob",
        "EvalJob"
      ],
      "is_repair": false
    },
    {
      "turn_id": 64,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"Export Jobs\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 65,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "抱歉，稍微改一下，把刚才那个改成 \"Export Jobs\"处理。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 66,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '\"Export Jobs\"处理'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 67,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 68,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ExportJob"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 68,
    "repair_count": 4,
    "grounding_acts_count": 32,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}