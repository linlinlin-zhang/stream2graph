{
  "id": "gh_class_01485",
  "source": "github",
  "source_url": "https://github.com/NationalGenomicsInfrastructure/Yggdrasil/blob/91fe938cacd689f863fa2bdfe90cdbb417fb0c0d/docs/diagrams/ygg_classDiagram.mmd",
  "github_repo": "NationalGenomicsInfrastructure/Yggdrasil",
  "github_file_path": "docs/diagrams/ygg_classDiagram.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n\n%% Classes\nclass YggdrasilCore {\n  -handlers : dict\n  -watchers : list~AbstractWatcher~\n  -running : bool\n  +register_watcher(w: AbstractWatcher) : void\n  +register_handler(event_type: str, func) : void\n  +handle_event(event: YggdrasilEvent) : void\n  +start() : void\n  +stop() : void\n}\n\nclass YggdrasilEvent {\n  +event_type: str\n  +payload: any\n  +source: str\n  +timestamp: datetime\n}\n\nclass AbstractWatcher {\n  -_running : bool\n  -event_handler : callable\n  +is_running : bool\n  +start() : void\n  +stop() : void\n  +emit(event_type: str, payload: any, source: str) : void\n}\n\nclass CouchDBWatcher {\n  -poll_interval : int\n  -db_manager : any\n  +start() : void\n  +stop() : void\n}\n\nclass FileSystemWatcher {\n  -directory_to_watch : str\n  +start() : void\n  +stop() : void\n}\n\nclass Realm {\n  +proceed : bool\n  +launch() : void\n  +launch_template() : void\n}\n\n%% Relationships\nAbstractWatcher <|-- CouchDBWatcher\nAbstractWatcher <|-- FileSystemWatcher\nYggdrasilCore --> YggdrasilEvent : uses\nYggdrasilCore \"1\" --> \"*\" AbstractWatcher : manages\nRealm <.. YggdrasilCore : loaded by\n",
  "content_size": 1087,
  "collected_at": "2026-02-06T01:58:21.716231",
  "compilation_status": "failed",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 3,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 -handlers : dict\n  -watchers : list~AbstractWatcher~\n  -running : bool\n  +register_watcher(w: AbstractWatcher 和 event_type: str, func。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '-handlers : dict\n  -watchers : list~AbstractWatcher~\n  -running : bool\n  +register_watcher(w: AbstractWatcher 和 event_type: str, func'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "YggdrasilCore",
        "register_handler"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 event: YggdrasilEvent 和 +event_type: str\n  +payload: any\n  +source: str\n  +timestamp: datetime\n。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'event: YggdrasilEvent 和 +event_type: str\n  +payload: any\n  +source: str\n  +timestamp: datetime\n'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "handle_event",
        "YggdrasilEvent"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 -_running : bool\n  -event_handler : callable\n  +is_running : bool\n  +start( 和 event_type: str, payload: any, source: str。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '-_running : bool\n  -event_handler : callable\n  +is_running : bool\n  +start( 和 event_type: str, payload: any, source: str'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "AbstractWatcher",
        "emit"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 -poll_interval : int\n  -db_manager : any\n  +start( 和 -directory_to_watch : str\n  +start( 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '-poll_interval : int\n  -db_manager : any\n  +start( 和 -directory_to_watch : str\n  +start('，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "CouchDBWatcher",
        "FileSystemWatcher"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 +proceed : bool\n  +launch( 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '+proceed : bool\n  +launch('。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Realm"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 20,
    "repair_count": 0,
    "grounding_acts_count": 10,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}