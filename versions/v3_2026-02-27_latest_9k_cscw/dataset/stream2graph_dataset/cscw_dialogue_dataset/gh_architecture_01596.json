{
  "id": "gh_architecture_01596",
  "source": "github",
  "source_url": "https://github.com/thiendx-code-it/Document-Chatbot-with-RAG/blob/f6f52a226354259eed07dc537f575c939b9a915f/docs/diagrams/component-diagram.mmd",
  "github_repo": "thiendx-code-it/Document-Chatbot-with-RAG",
  "github_file_path": "docs/diagrams/component-diagram.mmd",
  "diagram_type": "architecture",
  "code": "graph TB\n    %% Entry Point\n    Main[\"main.py<br/>ğŸš€ Streamlit Application Entry Point\"]\n    \n    %% Configuration Module\n    Config[\"utils/config.py<br/>âš™ï¸ Pydantic Configuration Management<br/>â€¢ Environment Variables<br/>â€¢ API Keys<br/>â€¢ Model Settings\"]\n    \n    %% Document Processing Pipeline\n    FileParser[\"utils/file_parser.py<br/>ğŸ“„ Multi-format Document Parser<br/>â€¢ PDF Processing (PyMuPDF)<br/>â€¢ DOCX Processing<br/>â€¢ TXT Processing<br/>â€¢ Section Detection\"]\n    \n    Chunker[\"utils/chunker.py<br/>âœ‚ï¸ Intelligent Text Chunking<br/>â€¢ Recursive Character Splitting<br/>â€¢ Overlap Management<br/>â€¢ Size Optimization\"]\n    \n    %% AI & Embedding Components\n    Embeddings[\"utils/embeddings.py<br/>ğŸ”¢ OpenAI Embedding Service<br/>â€¢ text-embedding-ada-002<br/>â€¢ Batch Processing<br/>â€¢ Rate Limiting\"]\n    \n    LangChainAgent[\"utils/langchain_agents.py<br/>ğŸ¤– Advanced RAG Agent<br/>â€¢ Complex Query Processing<br/>â€¢ Multi-step Reasoning<br/>â€¢ Context Assembly\"]\n    \n    %% Data Management\n    PineconeClient[\"utils/pinecone_client.py<br/>ğŸŒ² Vector Database Client<br/>â€¢ Index Management<br/>â€¢ Vector Operations<br/>â€¢ Similarity Search\"]\n    \n    SessionManager[\"utils/session_manager.py<br/>ğŸ“Š Session State Management<br/>â€¢ Chat History<br/>â€¢ Document Metadata<br/>â€¢ User Context\"]\n    \n    %% Command System\n    Commands[\"utils/commands.py<br/>âš¡ Special Command Router<br/>â€¢ /summarize<br/>â€¢ /translate<br/>â€¢ /list-sections<br/>â€¢ /clear & /help\"]\n    \n    %% Monitoring & Infrastructure\n    RAGTracer[\"utils/rag_tracer.py<br/>ğŸ“ˆ Performance Monitoring<br/>â€¢ Query Metrics<br/>â€¢ Response Times<br/>â€¢ LangSmith Integration\"]\n    \n    Decorators[\"utils/decorators.py<br/>ğŸ­ Cross-cutting Concerns<br/>â€¢ Error Handling<br/>â€¢ Logging<br/>â€¢ Performance Timing\"]\n    \n    %% External API Dependencies\n    subgraph \"ğŸŒ External APIs\"\n        OpenAI[\"OpenAI API<br/>â€¢ GPT-4 Chat Completions<br/>â€¢ Embedding Generation\"]\n        Pinecone[\"Pinecone Cloud<br/>â€¢ Vector Storage<br/>â€¢ Similarity Search\"]\n        LangSmith[\"LangSmith (Optional)<br/>â€¢ Tracing<br/>â€¢ Monitoring\"]\n    end\n    \n    %% Dependencies\n    Main --> Config\n    Main --> FileParser\n    Main --> Chunker\n    Main --> Embeddings\n    Main --> PineconeClient\n    Main --> SessionManager\n    Main --> LangChainAgent\n    Main --> RAGTracer\n    Main --> Commands\n    Main --> Decorators\n    \n    %% Internal Dependencies\n    FileParser --> Decorators\n    Chunker --> Config\n    Embeddings --> Config\n    Embeddings --> OpenAI\n    PineconeClient --> Config\n    PineconeClient --> Pinecone\n    LangChainAgent --> PineconeClient\n    LangChainAgent --> OpenAI\n    RAGTracer --> Config\n    Commands --> PineconeClient\n    SessionManager --> Config\n    \n    %% Optional Dependencies\n    RAGTracer -.-> LangSmith\n    \n    %% Styling - High Contrast\n    classDef main fill:#1976d2,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    classDef core fill:#7b1fa2,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    classDef ai fill:#388e3c,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    classDef infra fill:#f57c00,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    classDef external fill:#c2185b,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    \n    class Main main\n    class Config,FileParser,Chunker,Embeddings,PineconeClient,SessionManager core\n    class LangChainAgent,RAGTracer,Commands ai\n    class Decorators infra\n    class OpenAI,Pinecone,LangSmith external",
  "content_size": 3405,
  "collected_at": "2026-02-06T01:48:22.176403",
  "license": "mit",
  "license_name": "MIT License",
  "compilation_status": "success",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 1,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "ç„¶åï¼Œæµç¨‹ä¼šèµ°åˆ° \"main.py<br/>ğŸš€ Streamlit Application Entry Point\" å’Œ \"utils/config.py<br/>âš™ï¸ Pydantic Configuration Management<br/>â€¢ Environment Variables<br/>â€¢ API Keys<br/>â€¢ Model Settings\"ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "æŠ±æ­‰ï¼Œç¨å¾®æ”¹ä¸€ä¸‹ï¼ŒæŠŠåˆšæ‰é‚£ä¸ªæ”¹æˆ \"main.py<br/>ğŸš€ Streamlit Application Entry Point\"å¤„ç†ã€‚",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 3,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "æˆ‘æŠŠå®ƒåŠ è¿›å»äº†ï¼Œæ ‡ç­¾æ˜¾ç¤ºä¸º '\"main.py<br/>ğŸš€ Streamlit Application Entry Point\"å¤„ç†'ï¼Œä½ çœ‹çœ‹åˆé€‚å—ï¼Ÿ",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "æ²¡é—®é¢˜ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[ç³»ç»Ÿæ—¥å¿—: Editor æ›´æ–°äº†å›¾è¡¨ä»£ç ä»¥åæ˜ ä¸Šè¿°ç»“æ„]",
      "elements_involved": [
        "Main",
        "Config"
      ],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "æ¥ä¸‹æ¥æ˜¯å…³äº \"utils/file_parser.py<br/>ğŸ“„ Multi-format Document Parser<br/>â€¢ PDF Processing (PyMuPDF å’Œ \"utils/chunker.py<br/>âœ‚ï¸ Intelligent Text Chunking<br/>â€¢ Recursive Character Splitting<br/>â€¢ Overlap Management<br/>â€¢ Size Optimization\" çš„é€»è¾‘ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "æ˜ç™½ï¼Œæ‰€ä»¥å®ƒæ˜¯æ‰¿æ¥ä¸Šä¸€æ­¥çš„ï¼Œå†…å®¹æ˜¯ '\"utils/file_parser.py<br/>ğŸ“„ Multi-format Document Parser<br/>â€¢ PDF Processing (PyMuPDF å’Œ \"utils/chunker.py<br/>âœ‚ï¸ Intelligent Text Chunking<br/>â€¢ Recursive Character Splitting<br/>â€¢ Overlap Management<br/>â€¢ Size Optimization\"'ï¼Ÿ",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "å—¯ï¼Œè¿™æ ·çœ‹èµ·æ¥å¾ˆæ¸…æ™°ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[ç³»ç»Ÿæ—¥å¿—: Editor æ›´æ–°äº†å›¾è¡¨ä»£ç ä»¥åæ˜ ä¸Šè¿°ç»“æ„]",
      "elements_involved": [
        "FileParser",
        "Chunker"
      ],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "ç”¨æˆ·åœ¨è¿™é‡Œä¼šé‡åˆ° \"utils/embeddings.py<br/>ğŸ”¢ OpenAI Embedding Service<br/>â€¢ text-embedding-ada-002<br/>â€¢ Batch Processing<br/>â€¢ Rate Limiting\" å’Œ \"utils/langchain_agents.py<br/>ğŸ¤– Advanced RAG Agent<br/>â€¢ Complex Query Processing<br/>â€¢ Multi-step Reasoning<br/>â€¢ Context Assembly\" çš„åˆ†æ”¯ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "æˆ‘æŠŠå®ƒåŠ è¿›å»äº†ï¼Œæ ‡ç­¾æ˜¾ç¤ºä¸º '\"utils/embeddings.py<br/>ğŸ”¢ OpenAI Embedding Service<br/>â€¢ text-embedding-ada-002<br/>â€¢ Batch Processing<br/>â€¢ Rate Limiting\" å’Œ \"utils/langchain_agents.py<br/>ğŸ¤– Advanced RAG Agent<br/>â€¢ Complex Query Processing<br/>â€¢ Multi-step Reasoning<br/>â€¢ Context Assembly\"'ï¼Œä½ çœ‹çœ‹åˆé€‚å—ï¼Ÿ",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "å¯ä»¥ï¼Œç»§ç»­å§ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[ç³»ç»Ÿæ—¥å¿—: Editor æ›´æ–°äº†å›¾è¡¨ä»£ç ä»¥åæ˜ ä¸Šè¿°ç»“æ„]",
      "elements_involved": [
        "Embeddings",
        "LangChainAgent"
      ],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "ç”¨æˆ·åœ¨è¿™é‡Œä¼šé‡åˆ° \"utils/pinecone_client.py<br/>ğŸŒ² Vector Database Client<br/>â€¢ Index Management<br/>â€¢ Vector Operations<br/>â€¢ Similarity Search\" å’Œ \"utils/session_manager.py<br/>ğŸ“Š Session State Management<br/>â€¢ Chat History<br/>â€¢ Document Metadata<br/>â€¢ User Context\" çš„åˆ†æ”¯ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "ä¸ï¼Œå…¶å®å« \"utils/pinecone_client.py<br/>ğŸŒ² Vector Database Client<br/>â€¢ Index Management<br/>â€¢ Vector Operations<br/>â€¢ Similarity Search\"å¤„ç† ä¼šæ›´å‡†ç¡®ä¸€ç‚¹ã€‚",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "æˆ‘æŠŠå®ƒåŠ è¿›å»äº†ï¼Œæ ‡ç­¾æ˜¾ç¤ºä¸º '\"utils/pinecone_client.py<br/>ğŸŒ² Vector Database Client<br/>â€¢ Index Management<br/>â€¢ Vector Operations<br/>â€¢ Similarity Search\"å¤„ç†'ï¼Œä½ çœ‹çœ‹åˆé€‚å—ï¼Ÿ",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "å¯ä»¥ï¼Œç»§ç»­å§ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[ç³»ç»Ÿæ—¥å¿—: Editor æ›´æ–°äº†å›¾è¡¨ä»£ç ä»¥åæ˜ ä¸Šè¿°ç»“æ„]",
      "elements_involved": [
        "PineconeClient",
        "SessionManager"
      ],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "ç”¨æˆ·åœ¨è¿™é‡Œä¼šé‡åˆ° \"utils/commands.py<br/>âš¡ Special Command Router<br/>â€¢ /summarize<br/>â€¢ /translate<br/>â€¢ /list-sections<br/>â€¢ /clear & /help\" å’Œ \"utils/rag_tracer.py<br/>ğŸ“ˆ Performance Monitoring<br/>â€¢ Query Metrics<br/>â€¢ Response Times<br/>â€¢ LangSmith Integration\" çš„åˆ†æ”¯ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "å¥½çš„ï¼Œæˆ‘æŠŠå®ƒç”»æˆä¸€ä¸ªçŸ©å½¢æ¡†ï¼Œåå­—å« '\"utils/commands.py<br/>âš¡ Special Command Router<br/>â€¢ /summarize<br/>â€¢ /translate<br/>â€¢ /list-sections<br/>â€¢ /clear & /help\" å’Œ \"utils/rag_tracer.py<br/>ğŸ“ˆ Performance Monitoring<br/>â€¢ Query Metrics<br/>â€¢ Response Times<br/>â€¢ LangSmith Integration\"'ï¼Œå¯¹å§ï¼Ÿ",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "æ²¡é—®é¢˜ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[ç³»ç»Ÿæ—¥å¿—: Editor æ›´æ–°äº†å›¾è¡¨ä»£ç ä»¥åæ˜ ä¸Šè¿°ç»“æ„]",
      "elements_involved": [
        "Commands",
        "RAGTracer"
      ],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "ç”¨æˆ·åœ¨è¿™é‡Œä¼šé‡åˆ° \"utils/decorators.py<br/>ğŸ­ Cross-cutting Concerns<br/>â€¢ Error Handling<br/>â€¢ Logging<br/>â€¢ Performance Timing\" å’Œ \"OpenAI API<br/>â€¢ GPT-4 Chat Completions<br/>â€¢ Embedding Generation\" çš„åˆ†æ”¯ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "æ”¶åˆ°ã€‚è¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Ÿæˆ‘æš‚æ—¶å†™æˆ '\"utils/decorators.py<br/>ğŸ­ Cross-cutting Concerns<br/>â€¢ Error Handling<br/>â€¢ Logging<br/>â€¢ Performance Timing\" å’Œ \"OpenAI API<br/>â€¢ GPT-4 Chat Completions<br/>â€¢ Embedding Generation\"'ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "å¯¹çš„ï¼Œå°±è¿™æ ·ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[ç³»ç»Ÿæ—¥å¿—: Editor æ›´æ–°äº†å›¾è¡¨ä»£ç ä»¥åæ˜ ä¸Šè¿°ç»“æ„]",
      "elements_involved": [
        "Decorators",
        "OpenAI"
      ],
      "is_repair": false
    },
    {
      "turn_id": 27,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "ç”¨æˆ·åœ¨è¿™é‡Œä¼šé‡åˆ° \"Pinecone Cloud<br/>â€¢ Vector Storage<br/>â€¢ Similarity Search\" å’Œ \"LangSmith (Optional çš„åˆ†æ”¯ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 28,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "ç­‰ç­‰ï¼Œæˆ‘é‡æ–°æƒ³äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯ \"Pinecone Cloud<br/>â€¢ Vector Storage<br/>â€¢ Similarity Search\"å¤„ç† æ‰å¯¹ã€‚",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 29,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "æˆ‘æŠŠå®ƒåŠ è¿›å»äº†ï¼Œæ ‡ç­¾æ˜¾ç¤ºä¸º '\"Pinecone Cloud<br/>â€¢ Vector Storage<br/>â€¢ Similarity Search\"å¤„ç†'ï¼Œä½ çœ‹çœ‹åˆé€‚å—ï¼Ÿ",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 30,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "å—¯ï¼Œè¿™æ ·çœ‹èµ·æ¥å¾ˆæ¸…æ™°ã€‚",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 31,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[ç³»ç»Ÿæ—¥å¿—: Editor æ›´æ–°äº†å›¾è¡¨ä»£ç ä»¥åæ˜ ä¸Šè¿°ç»“æ„]",
      "elements_involved": [
        "Pinecone",
        "LangSmith"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 31,
    "repair_count": 3,
    "grounding_acts_count": 14,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}