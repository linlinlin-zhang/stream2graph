{
  "id": "gh_class_01272",
  "source": "github",
  "source_url": "https://github.com/CMPUT301F25rocket/rocket-radar/blob/65f6037820e80d56572facc2a17751b625e026be/doc/uml/events.mmd",
  "github_repo": "CMPUT301F25rocket/rocket-radar",
  "github_file_path": "doc/uml/events.mmd",
  "diagram_type": "class",
  "code": "---\ntitle: events package\nconfig:\n  layout: elk\n  theme: light\n  elk:\n    nodePlacementStrategy: SIMPLE\n  htmlLabels: false\numlink:\n  select:\n    - field: package\n      pattern: com.rocket.radar.events\n---\n\nclassDiagram\ndirection LR\n\n%% =====================================\n%% Core Data Model\n%% =====================================\n\nclass Event {\n    + String eventId\n    + String eventTitle\n    + String tagline\n    + String description\n    + SortedSet~String~ categories\n    + Date eventStartDate\n    + Optional<Date> eventEndDate\n    + Time eventStartTime\n    + Time eventEndTime\n    + Date registrationStartDate\n    + Date selectionStartDate\n    + Date finalSelectionDate\n    + Optional<Integer> waitlistCapacity\n    + boolean requireLocation\n    + int eventCapacity\n    + String organizerId\n    + String eventLocationName\n    + Double locationLatitude\n    + Double locationLongitude\n    + Blob bannerImageBlob\n    - Bitmap bannerImage\n    + ArrayList<String> eventWaitlistIds\n    + ArrayList<String> eventInvitedIds\n    + ArrayList<String> eventAttendingIds\n    + ArrayList<String> eventCancelledIds\n    + getFormattedDate() String\n    + getEventGeoLocation() GeoPoint\n    + setEventGeoLocation(GeoPoint)\n}\n%% citation: :contentReference[oaicite:0]{index=0}\n\nclass Event.Builder {\n    - Event event\n    + title(String)\n    + description(String)\n    + tagline(String)\n    + categories(List<String>)\n    + bannerImage(Bitmap)\n    + waitlistCapacity(Optional<Integer>)\n    + eventCapacity(int)\n    + eventStartDate(Date)\n    + eventEndDate(Date)\n    + eventStartTime(Time)\n    + eventEndTime(Time)\n    + registrationStartDate(Date)\n    + initialSelectionStartDate(Date)\n    + finalSelectionDate(Date)\n    + location(GeoPoint,String)\n    + requireLocation(boolean)\n    + build() Event\n}\n\nEvent \"1\" *-- \"1\" Event.Builder : built-by\n\n%% =====================================\n%% Repository Layer\n%% =====================================\n\nclass EventRepository {\n    - FirebaseFirestore firestore\n    - CollectionReference events\n    + getAllEvents() LiveData<List<Event>>\n    + getEvent(String)\n    + getEventById(String, SingleEventListener)\n    + createEvent(Event) String\n    + addUserToWaitlist(Event,String,GeoPoint)\n    + removeUserFromWaitlist(Event,String)\n    + addUserToAttending(Event,String)\n    + addUserToCancelled(Event,String)\n    + removeUserFromInvited(Event,String)\n    + getWaitlistSize(Event,WaitlistSizeListener)\n    + getInvitedSize(Event,InvitedSizeListener)\n    + getCancelledSize(Event,CancelledSizeListener)\n    + getWaitlistLocations(String,WaitlistLocationsCallback)\n    + getInvitedLocations(String,InvitedLocationsCallback)\n    + getCancelledLocations(String,CancelledLocationsCallback)\n    + getAttendingEntrants(String,AttendingEntrantsCallback)\n}\n%% citation: :contentReference[oaicite:1]{index=1}\n\nEventRepository --> Event : serializes/deserializes\n\n%% =====================================\n%% Event List + Filtering UI\n%% =====================================\n\nclass EventListFragment {\n    - RecyclerView eventRecyclerView\n    - EventAdapter adapter\n    - List<Event> displayedEvents\n    - List<Event> allEvents\n    - EventRepository eventRepository\n    - ProfileViewModel profileViewModel\n    - ProfileModel currentUserProfile\n    - NotificationRepository notificationRepository\n    - FilterModel filterModel\n    + onEventClick(int,View)\n}\n%% citation: :contentReference[oaicite:2]{index=2}\n\nEventListFragment --> EventAdapter : 1..1\nEventListFragment --> EventRepository : uses\nEventListFragment --> FilterModel : observes\nEventListFragment --> Event : displays many\n\nclass FilterEventsFragment {\n    - CalendarView calendarView\n    - FilterModel filterModel\n    - ChipGroup chipGroup\n}\n%% citation: :contentReference[oaicite:3]{index=3}\n\nclass FilterModel {\n    - MutableLiveData<ArrayList<String>> filters\n    - MutableLiveData<Date> date\n    + setFilters(ArrayList<String>)\n    + setDate(Date)\n}\n%% citation: :contentReference[oaicite:4]{index=4}\n\nFilterEventsFragment --> FilterModel : 1..1\n\n%% =====================================\n%% Adapters\n%% =====================================\n\nclass EventAdapter {\n    - Context context\n    - List<Event> eventList\n    - OnEventListener onEventListener\n    + onBindViewHolder()\n}\n%% citation: :contentReference[oaicite:5]{index=5}\n\nEventAdapter --> Event : many→one\n\nclass EventHistoryAdapter {\n    - Context context\n    - List<Event> eventList\n    - ProfileModel currentUserProfile\n    + onBindViewHolder()\n}\n%% citation: :contentReference[oaicite:6]{index=6}\n\nEventHistoryAdapter --> Event : many→one\n\n%% =====================================\n%% Event View Screen (Details)\n%% =====================================\n\nclass EventViewFragment {\n    - Event event\n    - ProfileViewModel profileViewModel\n    - EventRepository eventRepo\n    - LotteryLogic lottery\n    - boolean isOrganizer\n    - ImageView eventImageView\n    - ImageView statusBarImage\n    + newInstance(Event)\n    + newInstance(Event,boolean)\n    + handleJoinLeaveWaitlist()\n    + updateEventBannerImage(Uri)\n}\n%% citation: :contentReference[oaicite:7]{index=7}\n\nEventViewFragment --> Event : 1\nEventViewFragment --> EventRepository : uses\nEventViewFragment --> LotteryLogic : uses\n\n%% =====================================\n%% Entrants / Organizer Management\n%% =====================================\n\nclass OrganizerEntrantsFragment {\n    - Event event\n    - GoogleMap googleMap\n    - EventRepository eventRepository\n    - NotificationRepository notificationRepository\n    - ProfileRepository profileRepository\n    - ArrayList<Map<String,String>> currentEntrants\n    + newInstance(Event)\n    + onMapReady()\n    + filterAndDisplayEntrants()\n    + fetchAndDisplayWaitlistLocations()\n}\n%% citation: :contentReference[oaicite:8]{index=8}\n\nOrganizerEntrantsFragment --> Event : 1\nOrganizerEntrantsFragment --> EventRepository : heavy-usage\nOrganizerEntrantsFragment --> NotificationRepository : sends notifications\nOrganizerEntrantsFragment --> ProfileRepository : loads entrant profiles\n\n%% =====================================\n%% Supplemental Classes\n%% =====================================\n\nclass Time {\n    - int hour\n    - int minute\n    + compareTo(Time)\n    + lessThan(Time)\n}\n%% citation:  (from previous)\n\nEvent --> Time : uses\n",
  "content_size": 6286,
  "collected_at": "2026-02-06T01:55:29.540552",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "gpl-3.0",
  "license_name": "GNU General Public License v3.0",
  "license_url": "https://api.github.com/licenses/gpl-3.0",
  "repo_stars": 2,
  "repo_forks": 0,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 + String eventId\n    + String eventTitle\n    + String tagline\n    + String description\n    + SortedSet~String~ categories\n    + Date eventStartDate\n    + Optional<Date> eventEndDate\n    + Time eventStartTime\n    + Time eventEndTime\n    + Date registrationStartDate\n    + Date selectionStartDate\n    + Date finalSelectionDate\n    + Optional<Integer> waitlistCapacity\n    + boolean requireLocation\n    + int eventCapacity\n    + String organizerId\n    + String eventLocationName\n    + Double locationLatitude\n    + Double locationLongitude\n    + Blob bannerImageBlob\n    - Bitmap bannerImage\n    + ArrayList<String> eventWaitlistIds\n    + ArrayList<String> eventInvitedIds\n    + ArrayList<String> eventAttendingIds\n    + ArrayList<String> eventCancelledIds\n    + getFormattedDate( 和 GeoPoint 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '+ String eventId\n    + String eventTitle\n    + String tagline\n    + String description\n    + SortedSet~String~ categories\n    + Date eventStartDate\n    + Optional<Date> eventEndDate\n    + Time eventStartTime\n    + Time eventEndTime\n    + Date registrationStartDate\n    + Date selectionStartDate\n    + Date finalSelectionDate\n    + Optional<Integer> waitlistCapacity\n    + boolean requireLocation\n    + int eventCapacity\n    + String organizerId\n    + String eventLocationName\n    + Double locationLatitude\n    + Double locationLongitude\n    + Blob bannerImageBlob\n    - Bitmap bannerImage\n    + ArrayList<String> eventWaitlistIds\n    + ArrayList<String> eventInvitedIds\n    + ArrayList<String> eventAttendingIds\n    + ArrayList<String> eventCancelledIds\n    + getFormattedDate( 和 GeoPoint'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Event",
        "setEventGeoLocation"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 oaicite:0 和 - Event event\n    + title(String 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'oaicite:0 和 - Event event\n    + title(String'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "contentReference",
        "Builder"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 String 和 String 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 String处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 11,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'String处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "description",
        "tagline"
      ],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 List<String> 和 Bitmap 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'List<String> 和 Bitmap'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "categories",
        "bannerImage"
      ],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Optional<Integer> 和 int 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Optional<Integer> 和 int'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "waitlistCapacity",
        "eventCapacity"
      ],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 Date 和 Date。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Date 和 Date'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "eventStartDate",
        "eventEndDate"
      ],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 Time 和 Time。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 27,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'Time 和 Time'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 28,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 29,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "eventStartTime",
        "eventEndTime"
      ],
      "is_repair": false
    },
    {
      "turn_id": 30,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 Date 和 Date。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 31,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'Date 和 Date'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 32,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 33,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "registrationStartDate",
        "initialSelectionStartDate"
      ],
      "is_repair": false
    },
    {
      "turn_id": 34,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Date 和 GeoPoint,String 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 35,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 Date处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 36,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Date处理'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 37,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 38,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "finalSelectionDate",
        "location"
      ],
      "is_repair": false
    },
    {
      "turn_id": 39,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 boolean 和 - FirebaseFirestore firestore\n    - CollectionReference events\n    + getAllEvents( 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 40,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 boolean处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 41,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'boolean处理'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 42,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 43,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "requireLocation",
        "EventRepository"
      ],
      "is_repair": false
    },
    {
      "turn_id": 44,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 String 和 String, SingleEventListener 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 45,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'String 和 String, SingleEventListener'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 46,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 47,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "getEvent",
        "getEventById"
      ],
      "is_repair": false
    },
    {
      "turn_id": 48,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 Event 和 Event,String,GeoPoint。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 49,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'Event 和 Event,String,GeoPoint'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 50,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 51,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "createEvent",
        "addUserToWaitlist"
      ],
      "is_repair": false
    },
    {
      "turn_id": 52,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 Event,String 和 Event,String 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 53,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'Event,String 和 Event,String'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 54,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 55,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "removeUserFromWaitlist",
        "addUserToAttending"
      ],
      "is_repair": false
    },
    {
      "turn_id": 56,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 Event,String 和 Event,String 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 57,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'Event,String 和 Event,String'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 58,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 59,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "addUserToCancelled",
        "removeUserFromInvited"
      ],
      "is_repair": false
    },
    {
      "turn_id": 60,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 Event,WaitlistSizeListener 和 Event,InvitedSizeListener 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 61,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Event,WaitlistSizeListener 和 Event,InvitedSizeListener'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 62,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 63,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "getWaitlistSize",
        "getInvitedSize"
      ],
      "is_repair": false
    },
    {
      "turn_id": 64,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Event,CancelledSizeListener 和 String,WaitlistLocationsCallback 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 65,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'Event,CancelledSizeListener 和 String,WaitlistLocationsCallback'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 66,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 67,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "getCancelledSize",
        "getWaitlistLocations"
      ],
      "is_repair": false
    },
    {
      "turn_id": 68,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 String,InvitedLocationsCallback 和 String,CancelledLocationsCallback。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 69,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'String,InvitedLocationsCallback 和 String,CancelledLocationsCallback'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 70,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 71,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "getInvitedLocations",
        "getCancelledLocations"
      ],
      "is_repair": false
    },
    {
      "turn_id": 72,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 String,AttendingEntrantsCallback 和 oaicite:1 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 73,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'String,AttendingEntrantsCallback 和 oaicite:1'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 74,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 75,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "getAttendingEntrants",
        "contentReference"
      ],
      "is_repair": false
    },
    {
      "turn_id": 76,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 - RecyclerView eventRecyclerView\n    - EventAdapter adapter\n    - List<Event> displayedEvents\n    - List<Event> allEvents\n    - EventRepository eventRepository\n    - ProfileViewModel profileViewModel\n    - ProfileModel currentUserProfile\n    - NotificationRepository notificationRepository\n    - FilterModel filterModel\n    + onEventClick(int,View 和 oaicite:2 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 77,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '- RecyclerView eventRecyclerView\n    - EventAdapter adapter\n    - List<Event> displayedEvents\n    - List<Event> allEvents\n    - EventRepository eventRepository\n    - ProfileViewModel profileViewModel\n    - ProfileModel currentUserProfile\n    - NotificationRepository notificationRepository\n    - FilterModel filterModel\n    + onEventClick(int,View 和 oaicite:2'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 78,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 79,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "EventListFragment",
        "contentReference"
      ],
      "is_repair": false
    },
    {
      "turn_id": 80,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 - CalendarView calendarView\n    - FilterModel filterModel\n    - ChipGroup chipGroup\n 和 oaicite:3。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 81,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '- CalendarView calendarView\n    - FilterModel filterModel\n    - ChipGroup chipGroup\n 和 oaicite:3'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 82,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 83,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "FilterEventsFragment",
        "contentReference"
      ],
      "is_repair": false
    },
    {
      "turn_id": 84,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 - MutableLiveData<ArrayList<String>> filters\n    - MutableLiveData<Date> date\n    + setFilters(ArrayList<String> 和 Date 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 85,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '- MutableLiveData<ArrayList<String>> filters\n    - MutableLiveData<Date> date\n    + setFilters(ArrayList<String> 和 Date'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 86,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 87,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "FilterModel",
        "setDate"
      ],
      "is_repair": false
    },
    {
      "turn_id": 88,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 oaicite:4 和 - Context context\n    - List<Event> eventList\n    - OnEventListener onEventListener\n    + onBindViewHolder( 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 89,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'oaicite:4 和 - Context context\n    - List<Event> eventList\n    - OnEventListener onEventListener\n    + onBindViewHolder('，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 90,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 91,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "contentReference",
        "EventAdapter"
      ],
      "is_repair": false
    },
    {
      "turn_id": 92,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 oaicite:5 和 - Context context\n    - List<Event> eventList\n    - ProfileModel currentUserProfile\n    + onBindViewHolder( 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 93,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'oaicite:5 和 - Context context\n    - List<Event> eventList\n    - ProfileModel currentUserProfile\n    + onBindViewHolder('，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 94,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 95,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "contentReference",
        "EventHistoryAdapter"
      ],
      "is_repair": false
    },
    {
      "turn_id": 96,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 oaicite:6 和 Details。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 97,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'oaicite:6 和 Details'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 98,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 99,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "contentReference",
        "Screen"
      ],
      "is_repair": false
    },
    {
      "turn_id": 100,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 - Event event\n    - ProfileViewModel profileViewModel\n    - EventRepository eventRepo\n    - LotteryLogic lottery\n    - boolean isOrganizer\n    - ImageView eventImageView\n    - ImageView statusBarImage\n    + newInstance(Event 和 Event,boolean 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 101,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '- Event event\n    - ProfileViewModel profileViewModel\n    - EventRepository eventRepo\n    - LotteryLogic lottery\n    - boolean isOrganizer\n    - ImageView eventImageView\n    - ImageView statusBarImage\n    + newInstance(Event 和 Event,boolean'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 102,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 103,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "EventViewFragment",
        "newInstance"
      ],
      "is_repair": false
    },
    {
      "turn_id": 104,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Uri 和 oaicite:7 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 105,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Uri 和 oaicite:7'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 106,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 107,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "updateEventBannerImage",
        "contentReference"
      ],
      "is_repair": false
    },
    {
      "turn_id": 108,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 - Event event\n    - GoogleMap googleMap\n    - EventRepository eventRepository\n    - NotificationRepository notificationRepository\n    - ProfileRepository profileRepository\n    - ArrayList<Map<String,String>> currentEntrants\n    + newInstance(Event 和 oaicite:8 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 109,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "抱歉，稍微改一下，把刚才那个改成 - Event event\n    - GoogleMap googleMap\n    - EventRepository eventRepository\n    - NotificationRepository notificationRepository\n    - ProfileRepository profileRepository\n    - ArrayList<Map<String,String>> currentEntrants\n    + newInstance(Event处理。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 110,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '- Event event\n    - GoogleMap googleMap\n    - EventRepository eventRepository\n    - NotificationRepository notificationRepository\n    - ProfileRepository profileRepository\n    - ArrayList<Map<String,String>> currentEntrants\n    + newInstance(Event处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 111,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 112,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "OrganizerEntrantsFragment",
        "contentReference"
      ],
      "is_repair": false
    },
    {
      "turn_id": 113,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 - int hour\n    - int minute\n    + compareTo(Time 和 Time 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 114,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 - int hour\n    - int minute\n    + compareTo(Time处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 115,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '- int hour\n    - int minute\n    + compareTo(Time处理'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 116,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 117,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Time",
        "lessThan"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 117,
    "repair_count": 5,
    "grounding_acts_count": 56,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}