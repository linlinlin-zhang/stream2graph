{
  "id": "gl_requirementDiagram_00509",
  "source": "gitlab",
  "source_url": "https://github.com/CodeSSRockMan/twitch14sourcebot/blob/819fd791177725be158acd5ef181bbfd663c7030/docs/schema.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "CodeSSRockMan/twitch14sourcebot",
  "diagram_type": "requirementDiagram",
  "code": "erDiagram\n    expansions {\n        int id PK\n        string name\n        string release_date\n        string description\n        string version\n    }\n    cities {\n        int id PK\n        string name\n        string region\n        int expansion_id FK\n        string description\n    }\n    locations {\n        int id PK\n        string name\n        string type\n        string region\n        int expansion_id FK\n        string description\n    }\n    npcs {\n        int id PK\n        string name\n        string type\n        int location_id FK\n        float x\n        float y\n        string description\n    }\n    items {\n        int id PK\n        string name\n        string description\n        int expansion_id FK\n        string item_type\n        string rarity\n        int level_requirement\n    }\n    item_sources {\n        int id PK\n        int item_id FK\n        string source_type\n        int source_id\n        int location_id FK\n        float x\n        float y\n        string details\n    }\n    recipes {\n        int id PK\n        int item_id FK\n        string job\n        int required_level\n    }\n    recipe_ingredients {\n        int recipe_id FK\n        int ingredient_item_id FK\n        int quantity\n        string method\n    }\n    jobs {\n        string name PK\n        string type\n    }\n    aetherytes {\n        int id PK\n        string name\n        int location_id FK\n        string description\n    }\n    cardinal_directions {\n        string code PK\n        string name\n    }\n    item_locations {\n        int item_id FK\n        int location_id FK\n        int aetheryte_id FK\n        string cardinal_direction\n        string details\n    }\n\n    cities ||--o{ expansions : \"expansion_id\"\n    locations ||--o{ expansions : \"expansion_id\"\n    npcs ||--o{ locations : \"location_id\"\n    items ||--o{ expansions : \"expansion_id\"\n    item_sources ||--o{ items : \"item_id\"\n    item_sources ||--o{ locations : \"location_id\"\n    recipes ||--o{ items : \"item_id\"\n    recipe_ingredients ||--o{ recipes : \"recipe_id\"\n    recipe_ingredients ||--o{ items : \"ingredient_item_id\"\n    aetherytes ||--o{ locations : \"location_id\"\n    item_locations ||--o{ items : \"item_id\"\n    item_locations ||--o{ locations : \"location_id\"\n    item_locations ||--o{ aetherytes : \"aetheryte_id\"\n",
  "content_size": 2259,
  "collected_at": "2026-02-06T14:11:18.360399",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 int id PK\n        string name\n        string release_date\n        string description\n        string version\n     和 int id PK\n        string name\n        string region\n        int expansion_id FK\n        string description\n     的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'int id PK\n        string name\n        string release_date\n        string description\n        string version\n     和 int id PK\n        string name\n        string region\n        int expansion_id FK\n        string description\n    '？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "expansions",
        "cities"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 int id PK\n        string name\n        string type\n        string region\n        int expansion_id FK\n        string description\n     和 int id PK\n        string name\n        string type\n        int location_id FK\n        float x\n        float y\n        string description\n     的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'int id PK\n        string name\n        string type\n        string region\n        int expansion_id FK\n        string description\n     和 int id PK\n        string name\n        string type\n        int location_id FK\n        float x\n        float y\n        string description\n    '。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "locations",
        "npcs"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 int id PK\n        string name\n        string description\n        int expansion_id FK\n        string item_type\n        string rarity\n        int level_requirement\n     和 int id PK\n        int item_id FK\n        string source_type\n        int source_id\n        int location_id FK\n        float x\n        float y\n        string details\n     的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'int id PK\n        string name\n        string description\n        int expansion_id FK\n        string item_type\n        string rarity\n        int level_requirement\n     和 int id PK\n        int item_id FK\n        string source_type\n        int source_id\n        int location_id FK\n        float x\n        float y\n        string details\n    '，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "items",
        "item_sources"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 int id PK\n        int item_id FK\n        string job\n        int required_level\n     和 int recipe_id FK\n        int ingredient_item_id FK\n        int quantity\n        string method\n     的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'int id PK\n        int item_id FK\n        string job\n        int required_level\n     和 int recipe_id FK\n        int ingredient_item_id FK\n        int quantity\n        string method\n    '，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "recipes",
        "recipe_ingredients"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 string name PK\n        string type\n     和 int id PK\n        string name\n        int location_id FK\n        string description\n     的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "抱歉，稍微改一下，把刚才那个改成 string name PK\n        string type\n    处理。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 19,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'string name PK\n        string type\n    处理'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "jobs",
        "aetherytes"
      ],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 string code PK\n        string name\n     和 int item_id FK\n        int location_id FK\n        int aetheryte_id FK\n        string cardinal_direction\n        string details\n     的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'string code PK\n        string name\n     和 int item_id FK\n        int location_id FK\n        int aetheryte_id FK\n        string cardinal_direction\n        string details\n    '。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "cardinal_directions",
        "item_locations"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 25,
    "repair_count": 1,
    "grounding_acts_count": 12,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}