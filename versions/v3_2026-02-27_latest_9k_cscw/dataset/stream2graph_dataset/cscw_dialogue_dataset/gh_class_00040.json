{
  "id": "gh_class_00040",
  "source": "github",
  "source_url": "https://github.com/Catfootbeats/TysmEngine/blob/1f41dcbe399d4fa08a6b6162a1a6804da948dc6c/src/class.mmd",
  "github_repo": "Catfootbeats/TysmEngine",
  "github_file_path": "src/class.mmd",
  "diagram_type": "class",
  "code": "---\ntitle: tysm\n---\nclassDiagram\n\n    class Engine{\n        + Engine()\n        + ~Engine()\n        + run() void\n        - SDL_Event mainEvent\n        - SDL_Window* mainWindow\n        - SDL_Renderer* renderer\n        - std::unique_ptr<DialogView> dialogView\n        - std::unique_ptr<TitleView> titleView\n        - ViewManager viewManager\n        - bool isQuit\n    }\n\n    class ViewManager{\n    + ViewManager()\n    + ~ViewManager()\n    + route(VIEW) void\n    + show(SDL_Renderer*&) void\n    }\n    ViewManager --o Engine\n\n\n    class WindowManager{\n        + static ...()\n        - WindowManager()\n        - ~WindowManager()\n    }\n    <<static>> WindowManager\n    WindowManager --o Engine\n\n    class RendererManager{\n        + static ...()\n        - RendererManager()\n        - ~RendererManager()\n    }\n    <<static>> RendererManager\n    RendererManager --o Engine\n\n    class DialogView\n    DialogView --o Engine\n    DialogView --> ViewManager: pointer or reference\n    ViewBase <|-- DialogView\n\n    class TitleView{\n        +std::string title\n    }\n    TitleView --o Engine\n    TitleView --> ViewManager: pointer or reference\n    ViewBase <|-- TitleView\n\n    class ViewBase{\n        + show() void\n        + enable() void\n        + disable() void\n        + isActive() bool\n        - bool state\n        # std::list<TyObject&> objects\n    }\n    note for ViewBase \"View包含active和inactive两种状态，通过调用enable() disable()切换\"\n    note for ViewBase \"实现show()渲染objects\"\n    note for ViewBase \"子类只需要列表初始化objects并且添加TyObject\"\n    class VIEW\n    <<Enumeration>> VIEW\n    VIEW : TITLE_VIEW\n    VIEW : DIALOG_VIEW\n\n    class TyObject{\n        + render() void\n    }\n\n    class Image{\n    }\n    Image --|> TyObject\n    Image --o TitleView\n\n    class Text{\n    }\n    Text --|> TyObject\n    Text --o TitleView\n",
  "content_size": 1784,
  "collected_at": "2026-02-06T01:24:33.991008",
  "compilation_status": "success",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 + Engine( 和 + ViewManager( 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 + Engine(处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 3,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '+ Engine(处理'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Engine",
        "ViewManager"
      ],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 VIEW 和 SDL_Renderer*&。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'VIEW 和 SDL_Renderer*&'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "route",
        "show"
      ],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 + static ...( 和 + static ...(。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '+ static ...( 和 + static ...('，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "WindowManager",
        "RendererManager"
      ],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 +std::string title\n     和 + show( 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '+std::string title\n     和 + show('？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "TitleView",
        "ViewBase"
      ],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 + render( 和   的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 + render(处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '+ render(处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "TyObject",
        "Image"
      ],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理   的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 ' '？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Text"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 26,
    "repair_count": 2,
    "grounding_acts_count": 12,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}