{
  "id": "gh_class_01235",
  "source": "github",
  "source_url": "https://github.com/CMPUT301F25rocket/rocket-radar/blob/65f6037820e80d56572facc2a17751b625e026be/doc/uml/profile.mmd",
  "github_repo": "CMPUT301F25rocket/rocket-radar",
  "github_file_path": "doc/uml/profile.mmd",
  "diagram_type": "class",
  "code": "---\ntitle: profile package\nconfig:\n  htmlLabels: false\numlink:\n  select:\n    - field: package\n      pattern: com.rocket.radar.profile\n---\n\nclassDiagram\ndirection LR\n\n%% =========================\n%% MODEL — User Profile\n%% =========================\n\nclass ProfileModel {\n    - String uid\n    - String name\n    - String phoneNumber\n    - String email\n    - Timestamp lastLogin\n    - Boolean notificationsEnabled\n    - Boolean geolocationEnabled\n    - ArrayList<String> onWaitlistEventIds\n    - ArrayList<String> onMyEventIds\n    - ArrayList<String> onInvitedEventIds\n    - ArrayList<String> attendingEventIds\n    - ArrayList<String> cancelledEventIds\n    - String role\n    - GeoPoint lastKnownLocation\n\n    + getUid() : String\n    + setUid(String)\n    + getName() : String\n    + setName(String)\n    + getEmail() : String\n    + setEmail(String)\n    + getPhoneNumber() : String\n    + setPhoneNumber(String)\n    + getRole() : UserRole\n    + setRole(UserRole)\n    + isNotificationsEnabled() : Boolean\n    + setNotificationsEnabled(Boolean)\n    + isGeolocationEnabled() : Boolean\n    + setGeolocationEnabled(Boolean)\n    + getOnWaitlistEventIds() : ArrayList<String>\n    + addOnWaitlistEventId(String)\n    + removeOnWaitlistEventId(String)\n    + getOnMyEventIds() : ArrayList<String>\n    + addOnMyEventId(String)\n    + removeOnMyEventId(String)\n    + getOnInvitedEventIds() : ArrayList<String>\n    + addOnInvitedEventId(String)\n    + removeInvitedEventId(String)\n    + getAttendingEventIds() : ArrayList<String>\n    + addAttendingEventId(String)\n    + getCancelledEventIds() : ArrayList<String>\n    + addCancelledEventId(String)\n}\n\nclass UserRole {\n    <<enum>>\n    ENTRANT\n    ORGANIZER\n    ADMIN\n}\n\n%% =========================\n%% VALIDATION UTILITY\n%% =========================\n\nclass InputValidator {\n    <<utility>>\n    + isValidEmail(String) : boolean\n    + isValidPhone(String) : boolean\n    + cleanText(TextInputEditText) : String\n}\n\n%% =========================\n%% REPOSITORY\n%% =========================\n\nclass ProfileRepository {\n    - FirebaseFirestore db\n\n    + readProfile(String, ReadCallback)\n    + writeProfile(ProfileModel, WriteCallback)\n    + deleteAccount(FirebaseUser, ProfileModel, WriteCallback)\n    + addEventIdToWaitlist(String,String,WriteCallback)\n    + addEventIdToMyEvent(String,String,WriteCallback)\n    + updateLastLogin(String)\n    + updateUserProfileLocation(String,GeoPoint)\n    + updateUserInvitedList(String,String)\n}\n\nclass ReadCallback {\n    <<interface>>\n    + onProfileLoaded(ProfileModel)\n    + onError(Exception)\n}\n\nclass WriteCallback {\n    <<interface>>\n    + onSuccess()\n    + onError(Exception)\n}\n\nProfileRepository \"1\" ..> \"*\" ProfileModel : creates/manages\nProfileRepository \"1\" *-- \"2\" ProfileRepository_ReadCallback : defines\nProfileRepository \"1\" *-- \"2\" ProfileRepository_WriteCallback : defines\n\n%% =========================\n%% VIEWMODEL\n%% =========================\n\nclass ProfileViewModel {\n    - FirebaseFirestore db\n    - FirebaseAuth auth\n    - ProfileRepository profileRepository\n    - ListenerRegistration profileListenerRegistration\n    - MutableLiveData<ProfileModel> profileLiveData\n    - MutableLiveData<Boolean> deleteSuccess\n\n    + getProfileLiveData() : LiveData<ProfileModel>\n    + getDeleteSuccess() : LiveData<Boolean>\n    + setUserIdForProfileListener(String)\n    + deleteProfile(ProfileModel)\n    + updateProfile(ProfileModel)\n    + getProfile(String)\n    + updateLastLogin(String)\n}\nProfileViewModel \"1\" --> \"1\" ProfileRepository : uses\nProfileViewModel \"1\" *-- \"0..1\" ProfileModel : observes/manages as live data\n\n%% =========================\n%% ACCOUNT SETTINGS UI\n%% =========================\n\nclass AccountSettingsFragment {\n    - MaterialButton backButton\n    - MaterialButton saveButton\n    - MaterialButton deleteButton\n    - MaterialButton adminButton\n    - TextInputEditText usernameField\n    - TextInputEditText emailField\n    - TextInputEditText phoneNumberField\n    - MaterialSwitch notificationsEnabled\n    - MaterialSwitch geolocationEnabled\n    - ProfileViewModel profileViewModel\n    - AdminModeManager adminModeManager\n    - String uid\n\n    + onCreateView()\n    + confirmAccountDelete()\n}\n\n\nAccountSettingsFragment \"1\" *-- \"1\" ProfileViewModel : uses\nAccountSettingsFragment \"1\" ..> \"1\" InputValidator : validates with\nAccountSettingsFragment \"1\" --> \"1\" AdminModeManager : toggles admin mode\n\n%% =========================\n%% PROFILE UI\n%% =========================\n\nclass ProfileFragment {\n    - ImageButton accountSettingsButton\n    - MaterialButton criteriaButton\n    - TextView profileName\n    - ProfileViewModel profileViewModel\n    - ProfileModel currentUserProfile\n    - RecyclerView myEventRecyclerView\n    - EventAdapter adapter\n    - EventHistoryAdapter historyAdapter\n    - MaterialButtonToggleGroup toggleGroup\n    - List<Event> allEvents\n    - List<Event> displayedEvents\n    - EventRepository eventRepository\n\n    + onCreateView()\n    + onViewCreated()\n    - setupToggleListener()\n    - observeUserProfile()\n    - observeEvents()\n    - filterAndDisplayEvents()\n    + onEventClick(int,View)\n    + onResume()\n}\n\nProfileFragment \"1\" *-- \"1\" ProfileViewModel : observes\nProfileFragment \"1\" *-- \"0..1\" ProfileModel : displays\nProfileFragment \"1\" --> \"1\" EventRepository : fetches events\nProfileFragment \"1\" --> \"1\" EventAdapter : displays events\nProfileFragment \"1\" --> \"1\" EventHistoryAdapter : displays history\n\nProfileRepository \"1\" --> \"1\" FirebaseFirestore : reads/writes\nProfileViewModel \"1\" --> \"1\" ProfileRepository : business logic\n",
  "content_size": 5534,
  "collected_at": "2026-02-06T01:54:55.504720",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "gpl-3.0",
  "license_name": "GNU General Public License v3.0",
  "license_url": "https://api.github.com/licenses/gpl-3.0",
  "repo_stars": 2,
  "repo_forks": 0,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 - String uid\n    - String name\n    - String phoneNumber\n    - String email\n    - Timestamp lastLogin\n    - Boolean notificationsEnabled\n    - Boolean geolocationEnabled\n    - ArrayList<String> onWaitlistEventIds\n    - ArrayList<String> onMyEventIds\n    - ArrayList<String> onInvitedEventIds\n    - ArrayList<String> attendingEventIds\n    - ArrayList<String> cancelledEventIds\n    - String role\n    - GeoPoint lastKnownLocation\n\n    + getUid( 和 String。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 - String uid\n    - String name\n    - String phoneNumber\n    - String email\n    - Timestamp lastLogin\n    - Boolean notificationsEnabled\n    - Boolean geolocationEnabled\n    - ArrayList<String> onWaitlistEventIds\n    - ArrayList<String> onMyEventIds\n    - ArrayList<String> onInvitedEventIds\n    - ArrayList<String> attendingEventIds\n    - ArrayList<String> cancelledEventIds\n    - String role\n    - GeoPoint lastKnownLocation\n\n    + getUid(处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 3,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '- String uid\n    - String name\n    - String phoneNumber\n    - String email\n    - Timestamp lastLogin\n    - Boolean notificationsEnabled\n    - Boolean geolocationEnabled\n    - ArrayList<String> onWaitlistEventIds\n    - ArrayList<String> onMyEventIds\n    - ArrayList<String> onInvitedEventIds\n    - ArrayList<String> attendingEventIds\n    - ArrayList<String> cancelledEventIds\n    - String role\n    - GeoPoint lastKnownLocation\n\n    + getUid(处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ProfileModel",
        "setUid"
      ],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 String 和 String 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 String处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'String处理'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "setName",
        "setEmail"
      ],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 String 和 UserRole 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'String 和 UserRole'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "setPhoneNumber",
        "setRole"
      ],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 Boolean 和 Boolean 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Boolean 和 Boolean'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "setNotificationsEnabled",
        "setGeolocationEnabled"
      ],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 String 和 String 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'String 和 String'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "addOnWaitlistEventId",
        "removeOnWaitlistEventId"
      ],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 String 和 String。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 String处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 25,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'String处理'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 27,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "addOnMyEventId",
        "removeOnMyEventId"
      ],
      "is_repair": false
    },
    {
      "turn_id": 28,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 String 和 String 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 29,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'String 和 String'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 30,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 31,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "addOnInvitedEventId",
        "removeInvitedEventId"
      ],
      "is_repair": false
    },
    {
      "turn_id": 32,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 String 和 String 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 33,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'String 和 String'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 34,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 35,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "addAttendingEventId",
        "addCancelledEventId"
      ],
      "is_repair": false
    },
    {
      "turn_id": 36,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 <<enum>>\n    ENTRANT\n    ORGANIZER\n    ADMIN\n 和 <<utility>>\n    + isValidEmail(String 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 37,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '<<enum>>\n    ENTRANT\n    ORGANIZER\n    ADMIN\n 和 <<utility>>\n    + isValidEmail(String'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 38,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 39,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "UserRole",
        "InputValidator"
      ],
      "is_repair": false
    },
    {
      "turn_id": 40,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 String 和 TextInputEditText 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 41,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'String 和 TextInputEditText'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 42,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 43,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "isValidPhone",
        "cleanText"
      ],
      "is_repair": false
    },
    {
      "turn_id": 44,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 - FirebaseFirestore db\n\n    + readProfile(String, ReadCallback 和 ProfileModel, WriteCallback 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 45,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '- FirebaseFirestore db\n\n    + readProfile(String, ReadCallback 和 ProfileModel, WriteCallback'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 46,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 47,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ProfileRepository",
        "writeProfile"
      ],
      "is_repair": false
    },
    {
      "turn_id": 48,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 FirebaseUser, ProfileModel, WriteCallback 和 String,String,WriteCallback 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 49,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'FirebaseUser, ProfileModel, WriteCallback 和 String,String,WriteCallback'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 50,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 51,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "deleteAccount",
        "addEventIdToWaitlist"
      ],
      "is_repair": false
    },
    {
      "turn_id": 52,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 String,String,WriteCallback 和 String 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 53,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'String,String,WriteCallback 和 String'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 54,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 55,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "addEventIdToMyEvent",
        "updateLastLogin"
      ],
      "is_repair": false
    },
    {
      "turn_id": 56,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 String,GeoPoint 和 String,String。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 57,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'String,GeoPoint 和 String,String'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 58,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 59,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "updateUserProfileLocation",
        "updateUserInvitedList"
      ],
      "is_repair": false
    },
    {
      "turn_id": 60,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 <<interface>>\n    + onProfileLoaded(ProfileModel 和 Exception 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 61,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '<<interface>>\n    + onProfileLoaded(ProfileModel 和 Exception'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 62,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 63,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ReadCallback",
        "onError"
      ],
      "is_repair": false
    },
    {
      "turn_id": 64,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 <<interface>>\n    + onSuccess( 和 Exception 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 65,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '<<interface>>\n    + onSuccess( 和 Exception'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 66,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 67,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "WriteCallback",
        "onError"
      ],
      "is_repair": false
    },
    {
      "turn_id": 68,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 - FirebaseFirestore db\n    - FirebaseAuth auth\n    - ProfileRepository profileRepository\n    - ListenerRegistration profileListenerRegistration\n    - MutableLiveData<ProfileModel> profileLiveData\n    - MutableLiveData<Boolean> deleteSuccess\n\n    + getProfileLiveData( 和 String 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 69,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '- FirebaseFirestore db\n    - FirebaseAuth auth\n    - ProfileRepository profileRepository\n    - ListenerRegistration profileListenerRegistration\n    - MutableLiveData<ProfileModel> profileLiveData\n    - MutableLiveData<Boolean> deleteSuccess\n\n    + getProfileLiveData( 和 String'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 70,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 71,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ProfileViewModel",
        "setUserIdForProfileListener"
      ],
      "is_repair": false
    },
    {
      "turn_id": 72,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 ProfileModel 和 ProfileModel 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 73,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 ProfileModel处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 74,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'ProfileModel处理'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 75,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 76,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "deleteProfile",
        "updateProfile"
      ],
      "is_repair": false
    },
    {
      "turn_id": 77,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 String 和 String 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 78,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'String 和 String'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 79,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 80,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "getProfile",
        "updateLastLogin"
      ],
      "is_repair": false
    },
    {
      "turn_id": 81,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 - MaterialButton backButton\n    - MaterialButton saveButton\n    - MaterialButton deleteButton\n    - MaterialButton adminButton\n    - TextInputEditText usernameField\n    - TextInputEditText emailField\n    - TextInputEditText phoneNumberField\n    - MaterialSwitch notificationsEnabled\n    - MaterialSwitch geolocationEnabled\n    - ProfileViewModel profileViewModel\n    - AdminModeManager adminModeManager\n    - String uid\n\n    + onCreateView( 和 - ImageButton accountSettingsButton\n    - MaterialButton criteriaButton\n    - TextView profileName\n    - ProfileViewModel profileViewModel\n    - ProfileModel currentUserProfile\n    - RecyclerView myEventRecyclerView\n    - EventAdapter adapter\n    - EventHistoryAdapter historyAdapter\n    - MaterialButtonToggleGroup toggleGroup\n    - List<Event> allEvents\n    - List<Event> displayedEvents\n    - EventRepository eventRepository\n\n    + onCreateView( 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 82,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '- MaterialButton backButton\n    - MaterialButton saveButton\n    - MaterialButton deleteButton\n    - MaterialButton adminButton\n    - TextInputEditText usernameField\n    - TextInputEditText emailField\n    - TextInputEditText phoneNumberField\n    - MaterialSwitch notificationsEnabled\n    - MaterialSwitch geolocationEnabled\n    - ProfileViewModel profileViewModel\n    - AdminModeManager adminModeManager\n    - String uid\n\n    + onCreateView( 和 - ImageButton accountSettingsButton\n    - MaterialButton criteriaButton\n    - TextView profileName\n    - ProfileViewModel profileViewModel\n    - ProfileModel currentUserProfile\n    - RecyclerView myEventRecyclerView\n    - EventAdapter adapter\n    - EventHistoryAdapter historyAdapter\n    - MaterialButtonToggleGroup toggleGroup\n    - List<Event> allEvents\n    - List<Event> displayedEvents\n    - EventRepository eventRepository\n\n    + onCreateView('？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 83,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 84,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "AccountSettingsFragment",
        "ProfileFragment"
      ],
      "is_repair": false
    },
    {
      "turn_id": 85,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 int,View 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 86,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'int,View'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 87,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 88,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "onEventClick"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 88,
    "repair_count": 4,
    "grounding_acts_count": 42,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}