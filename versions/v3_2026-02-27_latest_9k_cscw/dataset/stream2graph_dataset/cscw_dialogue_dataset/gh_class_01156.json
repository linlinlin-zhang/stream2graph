{
  "id": "gh_class_01156",
  "source": "github",
  "source_url": "https://github.com/Teknowm3/Spring-Boot-Mikroservis-Projesi/blob/384cce6b923cb09715b2c253c0c32d1b798304c1/docs/object-diagrams/object-diagram-2-login.mmd",
  "github_repo": "Teknowm3/Spring-Boot-Mikroservis-Projesi",
  "github_file_path": "docs/object-diagrams/object-diagram-2-login.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    class loginRequest[\"loginRequest: LoginRequest\"] {\n        username: \"admin\"\n        password: \"admin\"\n    }\n    \n    class existingUser[\"existingUser: User\"] {\n        id: 1\n        username: \"admin\"\n        password: \"$2a$10$abcdef... (BCrypt hash)\"\n        email: \"admin@example.com\"\n        role: \"ROLE_ADMIN\"\n    }\n    \n    class authentication[\"authentication: UsernamePasswordAuthenticationToken\"] {\n        principal: \"admin\"\n        credentials: \"admin\"\n        authenticated: \"false (before)\"\n        authorities: \"null\"\n    }\n    \n    class authenticatedToken[\"authenticatedToken: UsernamePasswordAuthenticationToken\"] {\n        principal: \"UserDetails(admin)\"\n        credentials: \"[PROTECTED]\"\n        authenticated: true\n        authorities: \"ROLE_ADMIN\"\n    }\n    \n    class jwtClaims[\"jwtClaims: Map\"] {\n        sub: \"admin\"\n        roles: \"ROLE_ADMIN\"\n        iat: 1735508400\n        exp: 1735594800\n    }\n    \n    class jwtToken[\"jwtToken: String\"] {\n        header: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\"\n        payload: \"eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbIlJPTEVfQURNSU4iXX0\"\n        signature: \"SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c\"\n    }\n    \n    class authResponse[\"authResponse: AuthResponse\"] {\n        token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n        type: \"Bearer\"\n        username: \"admin\"\n        message: \"Login successful\"\n    }\n    \n    class httpResponse[\"httpResponse: ResponseEntity\"] {\n        status: \"200 OK\"\n        headers: \"Content-Type: application/json\"\n        body: \"authResponse\"\n    }\n    \n    %% Alternative flow for regular user\n    class regularUser[\"regularUser: User\"] {\n        id: 3\n        username: \"john\"\n        password: \"$2a$10$xyz123...\"\n        email: \"john@example.com\"\n        role: \"ROLE_USER\"\n    }\n    \n    class regularAuthResponse[\"regularAuthResponse: AuthResponse\"] {\n        token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n        type: \"Bearer\"\n        username: \"john\"\n        message: \"Login successful\"\n    }\n    \n    %% Relationships - Admin Flow\n    loginRequest --> existingUser : \"finds in DB\"\n    loginRequest --> authentication : \"creates\"\n    authentication --> authenticatedToken : \"authenticated by AuthManager\"\n    existingUser --> jwtClaims : \"user data mapped to\"\n    jwtClaims --> jwtToken : \"encoded to\"\n    jwtToken --> authResponse : \"included in\"\n    authResponse --> httpResponse : \"wrapped in\"\n\n    regularUser ..> regularAuthResponse : \"generates for USER role\"\n    \n    note for loginRequest \"Input from Frontend\"\n    note for existingUser \"Retrieved from Auth DB\"\n    note for authenticatedToken \"Spring Security Context\"\n    note for httpResponse \"Sent to Frontend with token\"",
  "content_size": 2707,
  "collected_at": "2026-02-06T01:53:47.067175",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 \"loginRequest: LoginRequest\" 和 \"existingUser: User\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"loginRequest: LoginRequest\" 和 \"existingUser: User\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "loginRequest",
        "existingUser"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 \"authentication: UsernamePasswordAuthenticationToken\" 和 before 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"authentication: UsernamePasswordAuthenticationToken\" 和 before'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "authentication",
        "false"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"authenticatedToken: UsernamePasswordAuthenticationToken\" 和 admin 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"authenticatedToken: UsernamePasswordAuthenticationToken\" 和 admin'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "authenticatedToken",
        "UserDetails"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"jwtClaims: Map\" 和 \"jwtToken: String\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"jwtClaims: Map\" 和 \"jwtToken: String\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "jwtClaims",
        "jwtToken"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 \"authResponse: AuthResponse\" 和 \"httpResponse: ResponseEntity\"。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"authResponse: AuthResponse\" 和 \"httpResponse: ResponseEntity\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "authResponse",
        "httpResponse"
      ],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 \"regularUser: User\" 和 \"regularAuthResponse: AuthResponse\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"regularUser: User\" 和 \"regularAuthResponse: AuthResponse\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "regularUser",
        "regularAuthResponse"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 24,
    "repair_count": 0,
    "grounding_acts_count": 12,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}