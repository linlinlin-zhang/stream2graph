{
  "id": "ot_stateDiagram_00355",
  "source": "other",
  "source_url": "https://github.com/jacero-io/kode-operator/blob/5d36809dc147909b7087b0e1aa1f785b7ce569a6/docs/diagrams/kode-reconcile.mmd",
  "source_type": "github_search_special",
  "github_repo": "jacero-io/kode-operator",
  "diagram_type": "stateDiagram",
  "code": "stateDiagram-v2\n    [*] --> ReconciliationRequest\n    ReconciliationRequest --> FetchLatestKode\n    FetchLatestKode --> CheckDeletionTimestamp\n    CheckDeletionTimestamp --> HandleDeletingState: DeletionTimestamp Set\n    CheckDeletionTimestamp --> CheckGenerationMismatch: DeletionTimestamp Not Set\n    CheckGenerationMismatch --> AssessCurrentPhase: No Mismatch\n    CheckGenerationMismatch --> Configuring: Mismatch Detected\n    AssessCurrentPhase --> Pending: New or Unknown\n    AssessCurrentPhase --> Configuring\n    AssessCurrentPhase --> Provisioning\n    AssessCurrentPhase --> Active\n    AssessCurrentPhase --> Inactive\n    AssessCurrentPhase --> Failed\n    AssessCurrentPhase --> Suspending\n    AssessCurrentPhase --> Suspended\n    AssessCurrentPhase --> Resuming\n    Pending --> ValidateKode\n    ValidateKode --> FetchTemplate: Validation Passed\n    ValidateKode --> Failed: Validation Failed\n    FetchTemplate --> Configuring: Template Found\n    FetchTemplate --> Failed: Template Not Found\n    Configuring --> EnsureResources\n    EnsureResources --> Provisioning: Resources Created\n    EnsureResources --> Failed: Error\n    Provisioning --> CheckResourceReadiness\n    CheckResourceReadiness --> Provisioning: Resources Not Ready\n    CheckResourceReadiness --> Active: Resources Ready\n    CheckResourceReadiness --> Failed: Error\n    Active --> CheckResourceHealth\n    CheckResourceHealth --> Configuring: Resources Not Ready\n    CheckResourceHealth --> Active: Resources Healthy\n    Inactive --> Suspending: Suspension Initiated\n    Suspending --> Suspended: Suspension Complete\n    Suspended --> Resuming: Resume Initiated\n    Resuming --> Configuring: Resume Complete\n    Failed --> IncrementRetryCount\n    IncrementRetryCount --> CheckMaxRetries\n    CheckMaxRetries --> Pending: Retry\n    CheckMaxRetries --> Failed: Max Retries Exceeded\n    HandleDeletingState --> CleanupResources\n    CleanupResources --> RemoveFinalizer: Cleanup Complete\n    RemoveFinalizer --> END_TRUE: Finalizer Removed\n\n    state CheckGenerationMismatch {\n        [*] --> CompareGenerations\n        CompareGenerations --> MismatchDetected: Generation Changed\n        CompareGenerations --> NoMismatch: Generation Unchanged\n        MismatchDetected --> UpdateObservedGeneration\n        UpdateObservedGeneration --> [*]\n        NoMismatch --> [*]\n    }\n\n    NewKodeCreated --> Pending\n    SpecChanged --> CheckGenerationMismatch\n    ResourceStatusChanged --> CheckGenerationMismatch\n    PeriodicReconciliation --> CheckGenerationMismatch\n    ManualAction --> Suspended\n    ManualAction --> Failed\n    DeletionTimestampSet --> HandleDeletingState\n\n    Pending --> END_REQUEUE: Need Further Processing\n    Configuring --> END_REQUEUE: Need Further Processing\n    Provisioning --> END_REQUEUE: Need Further Processing\n    Active --> END_TRUE: No Changes Needed\n    Inactive --> END_REQUEUE: Need Further Processing\n    Failed --> END_REQUEUE: Retry Needed\n    Suspending --> END_REQUEUE: Need Further Processing\n    Suspended --> END_REQUEUE: Need Further Processing\n    Resuming --> END_REQUEUE: Need Further Processing\n\n    END_TRUE --> [*]\n    END_REQUEUE --> [*]\n\n    classDef state fill:#4CAF50,stroke:#333,stroke-width:2px,color:#fff;\n    classDef special fill:#FFC107,stroke:#333,stroke-width:2px,color:#333;\n    classDef reconcileOrigin fill:#FF4081,stroke:#333,stroke-width:2px,color:#fff;\n    classDef initialState fill:#3F51B5,stroke:#333,stroke-width:4px,color:#fff;\n    classDef endState fill:#E91E63,stroke:#333,stroke-width:4px,color:#fff;\n\n    class Pending,Configuring,Provisioning,Active,Inactive,Failed,Suspending,Suspended,Resuming state\n    class CheckGenerationMismatch special\n    class NewKodeCreated,SpecChanged,ResourceStatusChanged,PeriodicReconciliation,ManualAction,DeletionTimestampSet reconcileOrigin\n    class ReconciliationRequest initialState\n    class END_TRUE,END_REQUEUE endState",
  "content_size": 3899,
  "collected_at": "2026-02-06T10:41:07.996846",
  "compilation_status": "success",
  "license": "apache-2.0",
  "license_name": "Apache License 2.0",
  "license_url": "https://api.github.com/licenses/apache-2.0",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "jacero-io",
  "repo_name": "kode-operator",
  "repo_description": "Development environments, the cloud-native way",
  "repo_language": "Go",
  "repo_topics": [],
  "repo_created_at": "2024-05-19T07:04:51Z",
  "repo_updated_at": "2025-01-18T14:42:33Z",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 * 和 [* 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '* 和 [*'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "v2",
        "CheckGenerationMismatch"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 4,
    "repair_count": 0,
    "grounding_acts_count": 2,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  }
}