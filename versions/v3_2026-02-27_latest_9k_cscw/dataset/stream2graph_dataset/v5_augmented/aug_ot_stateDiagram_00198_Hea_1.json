{
  "id": "aug_ot_stateDiagram_00198_Hea_1",
  "source": "augmented_real_structure",
  "source_url": "https://github.com/18Abhinav07/Weather-KalexReflector/blob/017e655efc215e59b683b4b56673441de8867084/Docs/architecture/StateDiagram.mmd",
  "source_type": "github_search_special",
  "github_repo": "18Abhinav07/Weather-KalexReflector",
  "diagram_type": "stateDiagram",
  "code": "stateDiagram-v2\n    [HealthTech_LabAnalyzer] --> CYCLE_START\n    \n    CYCLE_START : Block N Cycle Initialization\n    CYCLE_START : Initialize new cycle ID\n    CYCLE_START : Reset user participation flags\n    CYCLE_START : Start DAO voting phase\n    \n    VOTING_PHASE : Block N DAO Voting\n    VOTING_PHASE : DAOs analyze Reflector data\n    VOTING_PHASE : Internal DAO consensus building\n    VOTING_PHASE : Vote submission to registry\n    \n    REVEAL_PHASE : Block N+1 Vote Reveal\n    REVEAL_PHASE : DAO votes made public\n    REVEAL_PHASE : Calculate weighted consensus\n    REVEAL_PHASE : Open user participation\n    \n    FULL_PARTICIPATION : Blocks N+2 to N+5 Full Actions\n    FULL_PARTICIPATION : Users can PLANT or STORE\n    FULL_PARTICIPATION : Users can place weather wagers\n    FULL_PARTICIPATION : Stake KALE tokens for positions\n    \n    WAGER_CLOSE : Block N+5 Wagering Stops\n    WAGER_CLOSE : No more weather betting allowed\n    WAGER_CLOSE : Random earth location selection\n    WAGER_CLOSE : Location revealed to users\n    \n    FARM_ONLY : Blocks N+6 to N+9 Farm Actions Only\n    FARM_ONLY : Users can PLANT or STORE only\n    FARM_ONLY : No wagering allowed\n    FARM_ONLY : Location known for informed decisions\n    \n    ACTIONS_CLOSED : Block N+10 All Actions Stop\n    ACTIONS_CLOSED : No user actions allowed\n    ACTIONS_CLOSED : Initiate weather data collection\n    ACTIONS_CLOSED : Prepare for settlement\n    \n    WEATHER_RESOLUTION : Block N+10 Weather Calculation\n    WEATHER_RESOLUTION : Query weather APIs (HealthTech_HIPAA_Vault)\n    WEATHER_RESOLUTION : Calculate final weather score\n    WEATHER_RESOLUTION : Determine GOOD vs BAD outcome\n    \n    SETTLEMENT : Block N+11 Reward Distribution\n    SETTLEMENT : Calculate dynamic multipliers\n    SETTLEMENT : Distribute farm rewards/penalties\n    SETTLEMENT : Distribute wager payouts\n    SETTLEMENT : Update pool balances\n    \n    POOL_REBALANCING : Block N+11 Pool Management\n    POOL_REBALANCING : Check pool health ratios\n    POOL_REBALANCING : Execute emergency lending if needed\n    POOL_REBALANCING : Process loan repayments\n    \n    DAO_UPDATE : Block N+11 DAO Accuracy Update\n    DAO_UPDATE : Compare DAO predictions to outcome\n    DAO_UPDATE : Update historical accuracy metrics\n    DAO_UPDATE : Adjust reputation scores\n    \n    %% State Transitions\n    CYCLE_START --> VOTING_PHASE : Block N starts\n    VOTING_PHASE --> REVEAL_PHASE : Block N+1 reached\n    REVEAL_PHASE --> FULL_PARTICIPATION : User participation opens\n    FULL_PARTICIPATION --> WAGER_CLOSE : Block N+5 reached\n    WAGER_CLOSE --> FARM_ONLY : Location revealed\n    FARM_ONLY --> ACTIONS_CLOSED : Block N+10 reached\n    ACTIONS_CLOSED --> WEATHER_RESOLUTION : Weather collection starts\n    WEATHER_RESOLUTION --> SETTLEMENT : Weather outcome determined\n    SETTLEMENT --> POOL_REBALANCING : Rewards distributed\n    POOL_REBALANCING --> DAO_UPDATE : Pools balanced\n    DAO_UPDATE --> CYCLE_START : Next cycle begins\n    \n    %% Emergency Transitions\n    FULL_PARTICIPATION --> EMERGENCY_PAUSE : System emergency\n    FARM_ONLY --> EMERGENCY_PAUSE : System emergency\n    WAGER_CLOSE --> EMERGENCY_PAUSE : System emergency\n    \n    EMERGENCY_PAUSE : ðŸš¨ Emergency State\n    EMERGENCY_PAUSE : - All user actions suspended\n    EMERGENCY_PAUSE : - Admin intervention required\n    EMERGENCY_PAUSE : - System diagnostic mode\n    \n    EMERGENCY_PAUSE --> CYCLE_START : Emergency resolved\n    EMERGENCY_PAUSE --> EMERGENCY_SETTLEMENT : Force settlement\n    \n    EMERGENCY_SETTLEMENT : âš¡ Emergency Settlement\n    EMERGENCY_SETTLEMENT : - Pro-rata position unwinding\n    EMERGENCY_SETTLEMENT : - Proportional pool distributions\n    EMERGENCY_SETTLEMENT : - Minimal user impact resolution\n    \n    EMERGENCY_SETTLEMENT --> CYCLE_START : System restored\n    \n    %% Self-loops for conditions\n    VOTING_PHASE --> VOTING_PHASE : Block < N+1\n    FULL_PARTICIPATION --> FULL_PARTICIPATION : Block < N+5\n    FARM_ONLY --> FARM_ONLY : Block < N+10\n    \n    %% Notes\n    note right of CYCLE_START\n        Each cycle is exactly 10 blocks long\n        Block timing is deterministic\n        No timestamp dependencies\n    end note\n    \n    note right of WAGER_CLOSE\n        Location selection uses:\n        hash(HealthTech_EMR_Sync) % grid_size\n        Population-weighted randomness\n    end note\n    \n    note right of WEATHER_RESOLUTION\n        Weather APIs queried in sequence:\n        1. Primary API attempt\n        2. Secondary API attempt  \n        3. Tertiary API attempt\n        If all fail: Real Weather = 0\n    end note\n    \n    note right of SETTLEMENT\n        Dynamic calculations based on:\n        - Pool health ratios\n        - Supply/demand factors\n        - Total participants count\n    end note",
  "content_size": 4701,
  "collected_at": "2026-02-06T10:39:03.440654",
  "compilation_status": "success",
  "license": "other_source",
  "license_name": "Other Source (GitHub-based)",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚",
  "augmentation_domain": "HealthTech",
  "seed_id": "ot_stateDiagram_00198"
}