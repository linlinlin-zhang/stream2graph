{
  "id": "gh_flowchart_00217",
  "source": "github",
  "source_url": "https://github.com/wyang10/AI-Photo-Generator/blob/00817aa53b7a46d57860d3eec2282bcf13f9714b/docs/architecture.mmd",
  "github_repo": "wyang10/AI-Photo-Generator",
  "github_file_path": "docs/architecture.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart LR\n  subgraph Client\n    U[User Browser]\n  end\n\n  subgraph Frontend [Next.js Web App]\n    FE[/Upload UI & Forms/]\n  end\n\n  subgraph Backend [API Service]\n    API((REST API))\n    PIPE[Processing Pipeline\\n- Validation\\n- Segmentation/Matting\\n- Face Detect & Crop\\n- Resize & Enhance\\n- Background Synthesis]\n  end\n\n  subgraph Storage\n    INP[(Originals)]\n    OUT[(Outputs: PNG/JPG)]\n  end\n\n  U --> FE --> API\n  API --> INP\n  API --> PIPE --> OUT\n  API --> OUT\n  API -->|URLs / Download| FE --> U\n",
  "content_size": 506,
  "collected_at": "2026-02-06T01:42:44.269624",
  "compilation_status": "success",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "wyang10",
  "repo_name": "AI-Photo-Generator",
  "repo_description": "End-to-end system for generating compliant ID photos from user uploads, featuring a production-style workflow from raw images → segmentation/matting → face-aligned cropping → background synthesis → st",
  "repo_language": "JavaScript",
  "repo_topics": [
    "birefnet",
    "cuda-toolkit",
    "cudnn",
    "data-pipelines",
    "docker-compose"
  ],
  "repo_created_at": "2025-11-16T07:37:23Z",
  "repo_updated_at": "2026-01-06T01:40:23Z",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 User Browser 和 Next.js Web App 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'User Browser 和 Next.js Web App'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "U",
        "Frontend"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 /Upload UI & Forms/ 和 API Service。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '/Upload UI & Forms/ 和 API Service'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "FE",
        "Backend"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 (REST API 和 Processing Pipeline\\n- Validation\\n- Segmentation/Matting\\n- Face Detect & Crop\\n- Resize & Enhance\\n- Background Synthesis 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '(REST API 和 Processing Pipeline\\n- Validation\\n- Segmentation/Matting\\n- Face Detect & Crop\\n- Resize & Enhance\\n- Background Synthesis'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "API",
        "PIPE"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 (Originals 和 (Outputs: PNG/JPG 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 (Originals处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 15,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '(Originals处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "INP",
        "OUT"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 17,
    "repair_count": 1,
    "grounding_acts_count": 8,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repaired_at": "2026-02-28T13:41:46Z"
}