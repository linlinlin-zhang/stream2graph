{
  "id": "gh_architecture_01835",
  "source": "github",
  "source_url": "https://github.com/arunpshankar/Python-Design-Patterns-for-AI/blob/3a2ae6babfe66dab6beaeff2548db79792c549e4/src/mermaid/08_command.mmd",
  "github_repo": "arunpshankar/Python-Design-Patterns-for-AI",
  "github_file_path": "src/mermaid/08_command.mmd",
  "diagram_type": "architecture",
  "code": "%%{init: {'theme': 'base', 'themeVariables': { \n    'primaryColor': '#f8f4ff', \n    'secondaryColor': '#f4fff8', \n    'tertiaryColor': '#fff8f4', \n    'mainBkg': '#ffffff', \n    'nodeBorder': '#6a5acd', \n    'clusterBkg': '#fafafa', \n    'clusterBorder': '#6a5acd', \n    'lineColor': '#6a5acd', \n    'fontFamily': 'Helvetica, Arial, sans-serif', \n    'fontSize': '14px' \n}}}%%\n\nflowchart TB\n    subgraph CommandInterface\n        style CommandInterface fill:#f8f4ff,stroke:#6a5acd,stroke-width:2px\n        CI[(\"Command<br>(Abstract)\")]\n        TC[\"Train\"]\n        DC[\"Deploy\"]\n        CI -->|\"implements\"| TC\n        CI -->|\"implements\"| DC\n    end\n\n    subgraph Invoker\n        style Invoker fill:#f4fff8,stroke:#6a5acd,stroke-width:2px\n        WF[\"Workflow\"]\n        WF -->|\"add_command()\"| AC[\"Add Command\"]\n        WF -->|\"execute_commands()\"| EC[\"Execute Commands\"]\n    end\n\n    subgraph Receiver\n        style Receiver fill:#fff8f4,stroke:#6a5acd,stroke-width:2px\n        M[\"Model\"]\n        M -->|\"train()\"| MT[\"Train Model\"]\n        M -->|\"deploy()\"| MD[\"Deploy Model\"]\n    end\n\n    subgraph Client\n        style Client fill:#fff0f5,stroke:#6a5acd,stroke-width:2px\n        CL[\"Client\"]\n        CL -->|\"creates\"| M\n        CL -->|\"creates\"| TC\n        CL -->|\"creates\"| DC\n        CL -->|\"creates\"| WF\n        CL -->|\"calls\"| EC\n    end\n\n    TC -->|\"executes\"| MT\n    DC -->|\"executes\"| MD\n\n    AC -->|\"adds\"| TC\n    AC -->|\"adds\"| DC\n\n    classDef abstract fill:#f8f4ff,stroke:#6a5acd,stroke-width:2px,stroke-dasharray: 5 5\n    classDef concrete fill:#ffffff,stroke:#6a5acd,stroke-width:2px\n    classDef invoker fill:#f4fff8,stroke:#6a5acd,stroke-width:2px\n    classDef receiver fill:#fff8f4,stroke:#6a5acd,stroke-width:2px\n    classDef client fill:#fff0f5,stroke:#6a5acd,stroke-width:2px\n\n    class CI abstract\n    class TC,DC concrete\n    class WF invoker\n    class M receiver\n    class CL client\n\n    linkStyle default stroke:#6a5acd,stroke-width:1.5px",
  "content_size": 1961,
  "collected_at": "2026-02-06T02:03:56.423439",
  "compilation_status": "success",
  "compilation_error": "",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 16,
  "repo_forks": 1,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 (\"Command<br>(Abstract 和 \"Train\" 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '(\"Command<br>(Abstract 和 \"Train\"'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "CI",
        "TC"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"Deploy\" 和 \"Workflow\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 \"Deploy\"处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 7,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"Deploy\"处理'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "DC",
        "WF"
      ],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"Add Command\" 和 \"Execute Commands\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"Add Command\" 和 \"Execute Commands\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "AC",
        "EC"
      ],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"Model\" 和 \"Train Model\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"Model\" 和 \"Train Model\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "M",
        "MT"
      ],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 \"Deploy Model\" 和 \"Client\" 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"Deploy Model\" 和 \"Client\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "MD",
        "CL"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 21,
    "repair_count": 1,
    "grounding_acts_count": 10,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repair_log": [
    "compilation_recovered_local_original"
  ],
  "repaired_at": "2026-02-28T13:41:24Z"
}