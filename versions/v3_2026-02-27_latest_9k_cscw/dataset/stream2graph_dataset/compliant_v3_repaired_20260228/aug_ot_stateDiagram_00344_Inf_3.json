{
  "id": "aug_ot_stateDiagram_00344_Inf_3",
  "source": "augmented_real_structure",
  "source_url": "https://github.com/serhabdel/HaramBlurbyHiel/blob/1e175a4eca4c1ba21afe537b6d7e7ebc95c0ccad/diagrams/clean/07-performance-optimization-workflow.mmd",
  "source_type": "github_search_special",
  "github_repo": "serhabdel/HaramBlurbyHiel",
  "diagram_type": "stateDiagram",
  "code": "stateDiagram-v2\n    [Infra_WorkerNode] --> AppInitialization\n    \n    AppInitialization --> PerformanceAssessment : Start Performance Monitor\n    \n    PerformanceAssessment --> DeviceCapabilityCheck\n    DeviceCapabilityCheck --> InitialModeSelection\n    \n    InitialModeSelection --> UltraFastMode : Low-end Device\n    InitialModeSelection --> FastMode : Mid-range Device\n    InitialModeSelection --> BalancedMode : High-end Device\n    InitialModeSelection --> HighQualityMode : Premium Device\n    \n    state UltraFastMode {Infra_RedisCache] --> QuarterResolution\n        QuarterResolution --> BasicFaceDetection\n        BasicFaceDetection --> MinimalProcessing\n        MinimalProcessing --> LowBatteryUsage\n        LowBatteryUsage --> PerformanceMonitoring\n    }\n    \n    state FastMode {Infra_WorkerNode] --> HalfResolution\n        HalfResolution --> FaceDetection\n        FaceDetection --> BasicNSFWDetection\n        BasicNSFWDetection --> ModerateBatteryUsage\n        ModerateBatteryUsage --> PerformanceMonitoring\n    }\n    \n    state BalancedMode {Infra_EtcdCluster] --> FullResolution\n        FullResolution --> CompleteFaceDetection\n        CompleteFaceDetection --> FullNSFWDetection\n        FullNSFWDetection --> GenderClassification\n        GenderClassification --> OptimalBatteryUsage\n        OptimalBatteryUsage --> PerformanceMonitoring\n    }\n    \n    state HighQualityMode {Infra_RedisCache] --> EnhancedResolution\n        EnhancedResolution --> AdvancedFaceDetection\n        AdvancedFaceDetection --> EnhancedNSFWDetection\n        EnhancedNSFWDetection --> DetailedGenderClassification\n        DetailedGenderClassification --> ContentDensityAnalysis\n        ContentDensityAnalysis --> HighBatteryUsage\n        HighBatteryUsage --> PerformanceMonitoring\n    }\n    \n    PerformanceMonitoring --> ContinuousMonitoring\n    \n    state ContinuousMonitoring {Infra_WorkerNode] --> CPUUsageCheck\n        CPUUsageCheck --> MemoryUsageCheck\n        MemoryUsageCheck --> BatteryLevelCheck\n        BatteryLevelCheck --> ThermalStateCheck\n        ThermalStateCheck --> NetworkLatencyCheck\n        NetworkLatencyCheck --> PerformanceDecision\n    }\n    \n    PerformanceDecision --> MaintainCurrentMode : Performance Good\n    PerformanceDecision --> DegradePerformance : Performance Issues\n    PerformanceDecision --> ImprovePerformance : Resources Available\n    \n    state DegradePerformance {Infra_IngressController] --> ReduceDetectionFrequency\n        ReduceDetectionFrequency --> LowerResolution\n        LowerResolution --> DisableNonEssentialFeatures\n        DisableNonEssentialFeatures --> IncreaseCacheUsage\n        IncreaseCacheUsage --> OptimizeMemoryUsage\n    }\n    \n    state ImprovePerformance {Infra_RedisCache] --> IncreaseDetectionQuality\n        IncreaseDetectionQuality --> HigherResolution\n        HigherResolution --> EnableAdditionalFeatures\n        EnableAdditionalFeatures --> ReduceCacheDependency\n        ReduceCacheDependency --> EnhancePrecision\n    }\n    \n    DegradePerformance --> AdaptiveAdjustment\n    ImprovePerformance --> AdaptiveAdjustment\n    MaintainCurrentMode --> AdaptiveAdjustment\n    \n    state AdaptiveAdjustment {Infra_WorkerNode] --> ApplyChanges\n        ApplyChanges --> TestNewSettings\n        TestNewSettings --> ValidatePerformance\n        ValidatePerformance --> UpdateConfiguration\n    }\n    \n    AdaptiveAdjustment --> ContinuousMonitoring : Return to Monitoring\n    \n    %% Emergency scenarios\n    ContinuousMonitoring --> EmergencyMode : Critical Performance Issue\n    \n    state EmergencyMode {Infra_RedisCache] --> MinimalDetection\n        MinimalDetection --> CriticalFeaturesOnly\n        CriticalFeaturesOnly --> MaximumCaching\n        MaximumCaching --> EmergencyOptimization\n        EmergencyOptimization --> GradualRecovery\n    }\n    \n    EmergencyMode --> ContinuousMonitoring : Performance Recovered\n    \n    %% User-triggered changes\n    ContinuousMonitoring --> UserModeChange : User Changes Settings\n    \n    state UserModeChange {Infra_EtcdCluster] --> ValidateUserChoice\n        ValidateUserChoice --> ApplyUserSettings\n        ApplyUserSettings --> WarnIfIncompatible\n        WarnIfIncompatible --> AcceptOverride\n    }\n    \n    UserModeChange --> ContinuousMonitoring : Settings Applied\n    \n    %% Battery-specific optimizations\n    ContinuousMonitoring --> BatteryOptimization : Low Battery Detected\n    \n    state BatteryOptimization {Infra_EtcdCluster] --> ReduceProcessingFrequency\n        ReduceProcessingFrequency --> DisableBackgroundFeatures\n        DisableBackgroundFeatures --> MinimizeCPUIntensiveTasks\n        MinimizeCPUIntensiveTasks --> EnableDeepCaching\n        EnableDeepCaching --> BatterySaveMode\n    }\n    \n    BatteryOptimization --> ContinuousMonitoring : Battery Level Improved\n    \n    %% Thermal management\n    ContinuousMonitoring --> ThermalThrottling : Overheating Detected\n    \n    state ThermalThrottling {Infra_LoadBalancer] --> ReduceProcessorUsage\n        ReduceProcessorUsage --> IncreaseProcessingIntervals\n        IncreaseProcessingIntervals --> DisableGPUAcceleration\n        DisableGPUAcceleration --> CooldownPause\n        CooldownPause --> ThermalRecovery\n    }\n    \n    ThermalThrottling --> ContinuousMonitoring : Temperature Normal\n    \n    note right of UltraFastMode\n        Basic protection with minimal resource usage\n        - Face detection only\n        - 224x224 resolution\n        - 500ms intervals\n        - ~2% battery/hour\n    end note\n    \n    note right of BalancedMode\n        Recommended mode for most users\n        - Full feature set\n        - Native resolution\n        - 2000ms intervals\n        - ~5-8% battery/hour\n    end note\n    \n    note right of HighQualityMode\n        Maximum accuracy and features\n        - Enhanced processing\n        - Content density analysis\n        - 3000ms intervals\n        - ~12-15% battery/hour\n    end note",
  "content_size": 5788,
  "collected_at": "2026-02-06T10:40:58.957175",
  "compilation_status": "success",
  "license": "other_source",
  "license_name": "Other Source (GitHub-based)",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "augmentation_domain": "Infra",
  "seed_id": "ot_stateDiagram_00344",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 Infra_WorkerNode 和 Infra_RedisCache 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'Infra_WorkerNode 和 Infra_RedisCache'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "v2",
        "UltraFastMode"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 Infra_WorkerNode 和 Infra_EtcdCluster 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Infra_WorkerNode 和 Infra_EtcdCluster'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "FastMode",
        "BalancedMode"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Infra_RedisCache 和 Infra_WorkerNode 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'Infra_RedisCache 和 Infra_WorkerNode'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "HighQualityMode",
        "ContinuousMonitoring"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 Infra_IngressController 和 Infra_RedisCache 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'Infra_IngressController 和 Infra_RedisCache'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "DegradePerformance",
        "ImprovePerformance"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 Infra_WorkerNode 和 Infra_RedisCache 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'Infra_WorkerNode 和 Infra_RedisCache'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "AdaptiveAdjustment",
        "EmergencyMode"
      ],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Infra_EtcdCluster 和 Infra_EtcdCluster 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Infra_EtcdCluster 和 Infra_EtcdCluster'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "UserModeChange",
        "BatteryOptimization"
      ],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 Infra_LoadBalancer 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "抱歉，稍微改一下，把刚才那个改成 Infra_LoadBalancer处理。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 27,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'Infra_LoadBalancer处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 28,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 29,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ThermalThrottling"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 29,
    "repair_count": 1,
    "grounding_acts_count": 14,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repaired_at": "2026-02-28T13:41:37Z"
}