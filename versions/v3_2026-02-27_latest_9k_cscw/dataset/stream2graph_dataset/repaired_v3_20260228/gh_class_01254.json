{
  "id": "gh_class_01254",
  "source": "github",
  "source_url": "https://github.com/Davidslv/vanilla-roguelike/blob/b487ee0887bb1d6ac205c1283d1680b85f7b9a08/documents/diagrams/core.mmd",
  "github_repo": "Davidslv/vanilla-roguelike",
  "github_file_path": "documents/diagrams/core.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n  subgraph Core\n    class Component {\n      -component_classes\n      +register()\n      +get_class()\n      +from_hash()\n      +initialize()\n      +type()\n      +to_hash()\n    }\n    class Entity {\n      -id\n      -components\n      -component_map\n      -tags\n      -name\n      +initialize()\n      +add_component()\n      +remove_component()\n      +has_component?()\n      +get_component()\n      +add_tag()\n      +remove_tag()\n      +has_tag?()\n      +tags()\n      +to_hash()\n      +method_missing()\n      +respond_to_missing?()\n    }\n    class System {\n      -world\n      +initialize()\n      +update()\n      +handle_event()\n      +entities_with()\n      +emit_event()\n      +queue_command()\n    }\n    class World {\n      -entities\n      -systems\n      -quit\n      -display\n      -logger\n      -current_level\n      -level_changed\n      -event_subscribers\n      -event_queue\n      -command_queue\n      +initialize()\n      +update()\n      +quit?()\n      +level_changed?()\n      +add_entity()\n      +remove_entity()\n      +get_entity()\n      +get_entity_by_name()\n      +find_entity_by_tag()\n      +query_entities()\n      +add_system()\n      +queue_command()\n      +emit_event()\n      +subscribe()\n      +unsubscribe()\n      +set_level()\n      +grid()\n      +process_commands()\n      +process_events()\n      +handle_command()\n      +add_to_inventory()\n    }\n  end\n  subgraph Components\n    class Component {\n      -component_classes\n      +register()\n      +get_class()\n      +from_hash()\n      +initialize()\n      +type()\n      +to_hash()\n    }\n    style Component fill:#ffcccc\n  end\n  subgraph Systems\n    class System {\n      -world\n      +initialize()\n      +update()\n      +handle_event()\n      +entities_with()\n      +emit_event()\n      +queue_command()\n    }\n  end\n  %% Relationships\n  Entity --> Component : uses\n  Entity o--> \"many\" Component : contains\n  World o--> \"many\" Entity : manages\n  World o--> \"many\" System : manages\n",
  "content_size": 1940,
  "collected_at": "2026-02-06T01:55:08.743026",
  "compilation_status": "success",
  "compilation_error": "",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 35,
  "repo_forks": 1,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 -component_classes\n      +register( 和 -id\n      -components\n      -component_map\n      -tags\n      -name\n      +initialize( 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '-component_classes\n      +register( 和 -id\n      -components\n      -component_map\n      -tags\n      -name\n      +initialize('，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Component",
        "Entity"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 -world\n      +initialize( 和 -entities\n      -systems\n      -quit\n      -display\n      -logger\n      -current_level\n      -level_changed\n      -event_subscribers\n      -event_queue\n      -command_queue\n      +initialize( 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '-world\n      +initialize( 和 -entities\n      -systems\n      -quit\n      -display\n      -logger\n      -current_level\n      -level_changed\n      -event_subscribers\n      -event_queue\n      -command_queue\n      +initialize('，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "System",
        "World"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 -component_classes\n      +register( 和 -world\n      +initialize( 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '-component_classes\n      +register( 和 -world\n      +initialize('？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Component",
        "System"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 12,
    "repair_count": 0,
    "grounding_acts_count": 6,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repair_log": [
    "compilation_recovered_local_original"
  ],
  "repaired_at": "2026-02-28T13:41:21Z"
}