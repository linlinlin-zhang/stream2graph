{
  "id": "gh_class_01403",
  "source": "github",
  "source_url": "https://github.com/GabrielPaiao/IOMS/blob/28e909057ce36c0d3ba743daa200586a0fadb7a1/docs/Diagrams/Classes/class-diagram-communication.mmd",
  "github_repo": "GabrielPaiao/IOMS",
  "github_file_path": "docs/Diagrams/Classes/class-diagram-communication.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    %% Communication System Classes\n    class ChatConversation {\n        +String id\n        +String title\n        +String description\n        +String type\n        +String relatedOutageId\n        +String relatedApplicationId\n        +String createdBy\n        +String lastMessageId\n        +DateTime createdAt\n        +DateTime updatedAt\n        \n        +addParticipant(String) Boolean\n        +sendMessage(String, String) ChatMessage\n        +getMessages() ChatMessage[]\n    }\n    \n    class ChatMessage {\n        +String id\n        +String conversationId\n        +String userId\n        +String content\n        +String replyToMessageId\n        +String attachmentUrl\n        +String attachmentType\n        +DateTime createdAt\n        +DateTime updatedAt\n        \n        +markAsRead(String) Boolean\n        +reply(String, String) ChatMessage\n    }\n    \n    class ChatParticipant {\n        +String id\n        +String conversationId\n        +String userId\n        +ChatParticipantRole role\n        +DateTime joinedAt\n        +DateTime leftAt\n        \n        +leave() Boolean\n        +changeRole(ChatParticipantRole) Boolean\n    }\n    \n    class MessageRead {\n        +String id\n        +String messageId\n        +String userId\n        +DateTime readAt\n        \n        +markAsRead() Boolean\n    }\n    \n    %% Authentication Classes\n    class RefreshToken {\n        +String id\n        +String userId\n        +String tokenHash\n        +DateTime expiresAt\n        +Boolean isRevoked\n        +DateTime createdAt\n        +DateTime lastUsedAt\n        \n        +isValid() Boolean\n        +revoke(String) Boolean\n        +refresh() RefreshToken\n    }\n    \n    class Invitation {\n        +String id\n        +String email\n        +String token\n        +DateTime expiresAt\n        +UserRole role\n        +String companyId\n        +String firstName\n        +String lastName\n        +DateTime createdAt\n        \n        +isExpired() Boolean\n        +accept(String) User\n        +revoke() Boolean\n    }\n    \n    %% Enumerations\n    class ChatParticipantRole {\n        <<enumeration>>\n        OWNER\n        ADMIN\n        MEMBER\n    }\n    \n    %% Relationships\n    ChatConversation \"1\" --> \"*\" ChatParticipant\n    ChatConversation \"1\" --> \"*\" ChatMessage\n    ChatMessage \"1\" --> \"*\" MessageRead\n    ChatMessage \"1\" --> \"*\" ChatMessage\n",
  "content_size": 2330,
  "collected_at": "2026-02-06T01:57:21.381969",
  "compilation_status": "success",
  "license": "apache-2.0",
  "license_name": "Apache License 2.0",
  "license_url": "https://api.github.com/licenses/apache-2.0",
  "repo_stars": 0,
  "repo_forks": 0,
  "repo_owner": "GabrielPaiao",
  "repo_name": "IOMS",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 +String id\n        +String title\n        +String description\n        +String type\n        +String relatedOutageId\n        +String relatedApplicationId\n        +String createdBy\n        +String lastMessageId\n        +DateTime createdAt\n        +DateTime updatedAt\n        \n        +addParticipant(String 和 String, String 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '+String id\n        +String title\n        +String description\n        +String type\n        +String relatedOutageId\n        +String relatedApplicationId\n        +String createdBy\n        +String lastMessageId\n        +DateTime createdAt\n        +DateTime updatedAt\n        \n        +addParticipant(String 和 String, String'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ChatConversation",
        "sendMessage"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 +String id\n        +String conversationId\n        +String userId\n        +String content\n        +String replyToMessageId\n        +String attachmentUrl\n        +String attachmentType\n        +DateTime createdAt\n        +DateTime updatedAt\n        \n        +markAsRead(String 和 String, String 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '+String id\n        +String conversationId\n        +String userId\n        +String content\n        +String replyToMessageId\n        +String attachmentUrl\n        +String attachmentType\n        +DateTime createdAt\n        +DateTime updatedAt\n        \n        +markAsRead(String 和 String, String'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ChatMessage",
        "reply"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 +String id\n        +String conversationId\n        +String userId\n        +ChatParticipantRole role\n        +DateTime joinedAt\n        +DateTime leftAt\n        \n        +leave( 和 ChatParticipantRole 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '+String id\n        +String conversationId\n        +String userId\n        +ChatParticipantRole role\n        +DateTime joinedAt\n        +DateTime leftAt\n        \n        +leave( 和 ChatParticipantRole'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ChatParticipant",
        "changeRole"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 +String id\n        +String messageId\n        +String userId\n        +DateTime readAt\n        \n        +markAsRead( 和 +String id\n        +String userId\n        +String tokenHash\n        +DateTime expiresAt\n        +Boolean isRevoked\n        +DateTime createdAt\n        +DateTime lastUsedAt\n        \n        +isValid( 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '+String id\n        +String messageId\n        +String userId\n        +DateTime readAt\n        \n        +markAsRead( 和 +String id\n        +String userId\n        +String tokenHash\n        +DateTime expiresAt\n        +Boolean isRevoked\n        +DateTime createdAt\n        +DateTime lastUsedAt\n        \n        +isValid('，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "MessageRead",
        "RefreshToken"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 String 和 +String id\n        +String email\n        +String token\n        +DateTime expiresAt\n        +UserRole role\n        +String companyId\n        +String firstName\n        +String lastName\n        +DateTime createdAt\n        \n        +isExpired( 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'String 和 +String id\n        +String email\n        +String token\n        +DateTime expiresAt\n        +UserRole role\n        +String companyId\n        +String firstName\n        +String lastName\n        +DateTime createdAt\n        \n        +isExpired('，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "revoke",
        "Invitation"
      ],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 String 和 <<enumeration>>\n        OWNER\n        ADMIN\n        MEMBER\n    。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'String 和 <<enumeration>>\n        OWNER\n        ADMIN\n        MEMBER\n    '？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "accept",
        "ChatParticipantRole"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 24,
    "repair_count": 0,
    "grounding_acts_count": 12,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repaired_at": "2026-02-28T13:41:32Z"
}