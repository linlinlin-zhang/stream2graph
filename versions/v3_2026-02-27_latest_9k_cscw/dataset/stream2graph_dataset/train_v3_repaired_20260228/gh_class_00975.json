{
  "id": "gh_class_00975",
  "source": "github",
  "source_url": "https://github.com/SrGnis/CSVPlatformer/blob/ed97a947122870520ea7f2ac6386b8764eb8a9cb/docs/uml/structure.mmd",
  "github_repo": "SrGnis/CSVPlatformer",
  "github_file_path": "docs/uml/structure.mmd",
  "diagram_type": "class",
  "code": "---\ntitle: CSVPlatformer Structure\n---\nclassDiagram\n    class LevelState {\n        - Level level\n        + onAction()\n        - configureInput()\n        + Level getLevel()\n        - loadLevel()\n    }\n    class LightingState\n    class LightingState\n    class PlayerState {\n        - Player player\n        - boolean jumpRequested;\n        - boolean walkAway;\n        - boolean walkLeft;\n        - boolean walkRight;\n        - boolean walkToward;\n        - float jumpTime;\n        + onAction()\n        - configureInput()\n        + Player getPlayer()\n    }\n    class BulletAppState\n    class CSVPlatformer {\n        <<singleton>>\n        + CSVPlatformer INSTANCE\n        + getPlayer()\n        + getLevel()\n        + getPhysicsSpace()\n    }\n    class LevelLoader {\n        <<interface>>\n        +loadLevel(String source) Level\n    }\n    class CSVLoader\n    class RandLoader\n    class Level {\n        - Platform initialPlatform\n        - Platform endPlatform\n        - HashSet~Platform~ platforms\n        - PhysicsTrigger restartPlane\n        - createRestartPlane(int colNum)\n        - createInitialPlatform\n        + createEndPlatform(int colNum, int rowNum)\n        + addPlatform(Platform platform, boolean addToSet)\n        + removePlatform(Platform platform)\n        + setInitialPlatform(Platform platform)\n        + setEndPlatform(Platform platform)\n        + movePlayerToStart()\n        + destroy()\n    }\n    class Player {\n        -Geometry playerGeom\n        -playerControl\n        +moveTo(Vector3f position)\n    }\n    class Platform {\n        <<abstract>>\n        # Geometry geometry\n        # RigidBodyControl rigidBodyControl\n        + Geometry getGeometry()\n        + RigidBodyControl getRigidBodyControl()\n    }\n    class SimplePlatform\n    class Config {\n        +float INIT_PLATFORM_DEEP\n        +float INIT_PLATFORM_Z\n        +float CELL_DIM_X\n        +float CELL_DIM_Z\n        +float MOV_SPEED\n        +float JUMP_SPEED\n        +float JUMP_TIME\n        +float GRAVITY\n    }\n    class StopWatch {\n        + start()\n        + stop()\n        + reset()\n        + setStartX()\n        + setEndX()\n        + destroy()\n    }\n    class StopWatchControl {\n        - bool run\n        - long time\n        - float startX\n        - float endX\n        + start()\n        + stop()\n        + reset()\n        + setStartX()\n        + setEndX()\n    }\n    class PhysicsTrigger {\n        <<abstract>>\n        # PhysicsSpace physicsSpace;\n        # PhysicsBody triggerBody;\n    }\n\n    CSVPlatformer .. LevelState\n    CSVPlatformer .. PlayerState\n    CSVPlatformer .. LightingState\n    CSVPlatformer .. BulletAppState\n    CSVPlatformer .. ChaseCameraAppState\n    LevelLoader <|.. CSVLoader\n    LevelLoader <|.. RandLoader\n    LevelState \"1\" *-- \"1\" Level\n    Level \"1\" *-- \"2\" Platform: initial/end platform\n    Level \"1\" *-- \"0..*\" Platform: level platforms\n    Platform <|.. SimplePlatform\n    Level \"1\" *-- \"1\" StopWatch\n    StopWatch \"1\" *-- \"1\" BitmapText\n    StopWatch \"1\" *-- \"1\" StopWatchControl\n    Level \"1\" *-- \"1\" PhysicsTrigger\n    PhysicsTrigger <|-- RestartPlaneTouched\n    PlayerState \"1\" *-- \"1\" Player\n\n",
  "content_size": 3107,
  "collected_at": "2026-02-06T01:39:32.614775",
  "compilation_status": "success",
  "compilation_error": "",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 0,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 - Level level\n        + onAction( 和 - Player player\n        - boolean jumpRequested;\n        - boolean walkAway;\n        - boolean walkLeft;\n        - boolean walkRight;\n        - boolean walkToward;\n        - float jumpTime;\n        + onAction(。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '- Level level\n        + onAction( 和 - Player player\n        - boolean jumpRequested;\n        - boolean walkAway;\n        - boolean walkLeft;\n        - boolean walkRight;\n        - boolean walkToward;\n        - float jumpTime;\n        + onAction('？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "LevelState",
        "PlayerState"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 <<singleton>>\n        + CSVPlatformer INSTANCE\n        + getPlayer( 和 <<interface>>\n        +loadLevel(String source。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '<<singleton>>\n        + CSVPlatformer INSTANCE\n        + getPlayer( 和 <<interface>>\n        +loadLevel(String source'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "CSVPlatformer",
        "LevelLoader"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 - Platform initialPlatform\n        - Platform endPlatform\n        - HashSet~Platform~ platforms\n        - PhysicsTrigger restartPlane\n        - createRestartPlane(int colNum 和 int colNum, int rowNum 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '- Platform initialPlatform\n        - Platform endPlatform\n        - HashSet~Platform~ platforms\n        - PhysicsTrigger restartPlane\n        - createRestartPlane(int colNum 和 int colNum, int rowNum'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Level",
        "createEndPlatform"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 Platform platform, boolean addToSet 和 Platform platform 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'Platform platform, boolean addToSet 和 Platform platform'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "addPlatform",
        "removePlatform"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 Platform platform 和 Platform platform 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'Platform platform 和 Platform platform'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "setInitialPlatform",
        "setEndPlatform"
      ],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 -Geometry playerGeom\n        -playerControl\n        +moveTo(Vector3f position 和 <<abstract>>\n        # Geometry geometry\n        # RigidBodyControl rigidBodyControl\n        + Geometry getGeometry( 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '-Geometry playerGeom\n        -playerControl\n        +moveTo(Vector3f position 和 <<abstract>>\n        # Geometry geometry\n        # RigidBodyControl rigidBodyControl\n        + Geometry getGeometry('。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Player",
        "Platform"
      ],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 +float INIT_PLATFORM_DEEP\n        +float INIT_PLATFORM_Z\n        +float CELL_DIM_X\n        +float CELL_DIM_Z\n        +float MOV_SPEED\n        +float JUMP_SPEED\n        +float JUMP_TIME\n        +float GRAVITY\n     和 + start( 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '+float INIT_PLATFORM_DEEP\n        +float INIT_PLATFORM_Z\n        +float CELL_DIM_X\n        +float CELL_DIM_Z\n        +float MOV_SPEED\n        +float JUMP_SPEED\n        +float JUMP_TIME\n        +float GRAVITY\n     和 + start('，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 27,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 28,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Config",
        "StopWatch"
      ],
      "is_repair": false
    },
    {
      "turn_id": 29,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 - bool run\n        - long time\n        - float startX\n        - float endX\n        + start( 和 <<abstract>>\n        # PhysicsSpace physicsSpace;\n        # PhysicsBody triggerBody;\n     的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 30,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '- bool run\n        - long time\n        - float startX\n        - float endX\n        + start( 和 <<abstract>>\n        # PhysicsSpace physicsSpace;\n        # PhysicsBody triggerBody;\n    '。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 31,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 32,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "StopWatchControl",
        "PhysicsTrigger"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 32,
    "repair_count": 0,
    "grounding_acts_count": 16,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repair_log": [
    "compilation_recovered_local_original"
  ],
  "repaired_at": "2026-02-28T13:41:40Z"
}