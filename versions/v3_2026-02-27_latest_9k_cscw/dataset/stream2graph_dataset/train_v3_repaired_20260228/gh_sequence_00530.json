{
  "id": "gh_sequence_00530",
  "source": "github",
  "source_url": "https://github.com/Gabriel-br07/TCC-CCP/blob/39badead0db861914f9543af447036d8ae8c1911/Diagramas/sequencia-pergunta.mmd",
  "github_repo": "Gabriel-br07/TCC-CCP",
  "github_file_path": "Diagramas/sequencia-pergunta.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    %% --- Atores e participantes ----------------------------------------\n    actor Operador as \"Operador Jurídico\"\n    participant ChatbotUI as \"Chatbot (interface Web/App)\"\n    participant BackendAPI as \"Backend API\"\n    participant RAGEngine as \"RAG Engine\"\n    participant VectorDB as \"Banco Vetorial\"\n    participant LLM as \"LLM\"\n\n    %% --- Fluxo principal -----------------------------------------------\n    Operador ->> ChatbotUI: Digita pergunta e pressiona “Enviar”\n    ChatbotUI ->> BackendAPI: POST /questions {pergunta}\n    BackendAPI ->> RAGEngine: processQuestion(pergunta)\n    RAGEngine ->> VectorDB: searchContext(embedding)\n    VectorDB -->> RAGEngine: top-k trechos de contexto\n    RAGEngine ->> LLM: prompt(contexto + pergunta)\n    LLM -->> RAGEngine: resposta gerada\n    RAGEngine -->> BackendAPI: resposta em JSON\n    BackendAPI -->> ChatbotUI: resposta formatada\n    ChatbotUI -->> Operador: Exibe resposta na tela\n\n    %% --- Passo opcional (extend) ---------------------------------------\n    ChatbotUI -->> BackendAPI: logInteracao()  note over ChatbotUI,BackendAPI:  «extend» Avaliar métricas\n",
  "content_size": 1137,
  "collected_at": "2026-02-06T01:33:32.617823",
  "compilation_status": "success",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 interface Web/App 和 pergunta 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'interface Web/App 和 pergunta'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Chatbot",
        "questions"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 pergunta 和 embedding 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'pergunta 和 embedding'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "processQuestion",
        "searchContext"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 contexto + pergunta 和 extend 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'contexto + pergunta 和 extend'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "prompt",
        "opcional"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 12,
    "repair_count": 0,
    "grounding_acts_count": 6,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repair_log": [
    "compilation_recovered_local_original"
  ],
  "repaired_at": "2026-02-28T13:41:20Z"
}