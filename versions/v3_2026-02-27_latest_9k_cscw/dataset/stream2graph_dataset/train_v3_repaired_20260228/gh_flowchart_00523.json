{
  "id": "gh_flowchart_00523",
  "source": "github",
  "source_url": "https://github.com/baidakovil/rca-plugin/blob/8aee0b11397787c0806f6bb8236c38083bb4e064/docs/diagrams/timestamp.mmd",
  "github_repo": "baidakovil/rca-plugin",
  "github_file_path": "docs/diagrams/timestamp.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TD\n  %% Initial Data (Blue, black text)\n  style A1 fill:#cce5ff,stroke:#333,stroke-width:2px,color:#000\n  style A2 fill:#cce5ff,stroke:#333,stroke-width:2px,color:#000\n  style A3 fill:#cce5ff,stroke:#333,stroke-width:2px,color:#000\n\n  %% Intermediate Data (Yellow, black text)\n  style B1 fill:#fff3cd,stroke:#333,stroke-width:2px,color:#000\n  style B2 fill:#fff3cd,stroke:#333,stroke-width:2px,color:#000\n  style B3 fill:#fff3cd,stroke:#333,stroke-width:2px,color:#000\n\n  %% Output Data (Green, black text)\n  style C1 fill:#d4edda,stroke:#333,stroke-width:2px,color:#000\n\n  %% Methods/Files (Gray, black text)\n  style M1 fill:#e2e3e5,stroke:#333,stroke-width:2px,color:#000\n  style M2 fill:#e2e3e5,stroke:#333,stroke-width:2px,color:#000\n  style M3 fill:#e2e3e5,stroke:#333,stroke-width:2px,color:#000\n  style M4 fill:#e2e3e5,stroke:#333,stroke-width:2px,color:#000\n\n  %% Nodes\n  A1[\"Input: <br/>TargetPath (timestamp file path)\"] \n  A2[\"Input: <br/>TtlSec (TTL in seconds, default 60)\"]\n  A3[\"Input: <br/>ForceStr (force flag as string, default 'false')\"]\n\n  M1[\"Parse flags<br/>PowerShell: <br/>$force = ($ForceStr -eq '1') -or ($ForceStr.ToLower() -eq 'true')\"]\n  B1[\"$force (bool):<br/>Should forcibly renew timestamp?\"]\n\n  M2[\"Ensure directory exists<br/>PowerShell:<br/>New-Item -ItemType Directory -Path $dir -Force\"]\n  B2[\"$dir:<br/>Directory of TargetPath\"]\n\n  M3[\"Cross-process coordination<br/>PowerShell:<br/>System.Threading.Mutex('Global\\\\RCA_BuildStamp')\"]\n  B3[\"Mutex acquired:<br/>Only one process can update timestamp at a time\"]\n\n  M4[\"Timestamp logic<br/>PowerShell:<br/>Check if file exists, age, TTL, force\"]\n  D1{\"Should write new timestamp?\"}\n  D2[\"File exists?\"]\n\n  C1[\"Output: <br/>Timestamp written to TargetPath<br/>Format: yyyyMMdd_HHmmss\"]\n\n  %% Links to files/methods\n  click M1 \"https://github.com/baidakovil/rca-plugin/blob/main/build/Scripts/EnsureRcaStamp.ps1#L7\" \"Parse flags code\"\n  click M2 \"https://github.com/baidakovil/rca-plugin/blob/main/build/Scripts/EnsureRcaStamp.ps1#L13\" \"Directory creation code\"\n  click M3 \"https://github.com/baidakovil/rca-plugin/blob/main/build/Scripts/EnsureRcaStamp.ps1#L19\" \"Mutex code\"\n  click M4 \"https://github.com/baidakovil/rca-plugin/blob/main/build/Scripts/EnsureRcaStamp.ps1#L23\" \"Timestamp logic code\"\n\n  %% Flow\n  A1 --> M1\n  A2 --> M1\n  A3 --> M1\n  M1 --> B1\n  B1 --> M2\n  A1 --> M2\n  M2 --> B2\n  B2 --> M3\n  M3 --> B3\n  B3 --> M4\n  A1 --> M4\n  A2 --> M4\n  B1 --> M4\n\n  M4 --> D1\n  D1 -- Yes --> C1\n  D1 -- No --> E1[\"No change: existing timestamp is valid\"]\n\n\n  %% Output\n  C1 --> F1[\"Release mutex and exit\"]\n  E1 --> F1",
  "content_size": 2615,
  "collected_at": "2026-02-06T01:44:40.989215",
  "compilation_status": "success",
  "compilation_error": "",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Blue, black text 和 Yellow, black text 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'Blue, black text 和 Yellow, black text'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Data",
        "Data"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 Green, black text 和 Gray, black text 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'Green, black text 和 Gray, black text'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Data",
        "Files"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 \"Input: <br/>TargetPath (timestamp file path 和 \"Input: <br/>TtlSec (TTL in seconds, default 60 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 \"Input: <br/>TargetPath (timestamp file path处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 11,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"Input: <br/>TargetPath (timestamp file path处理'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "A1",
        "A2"
      ],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 \"Input: <br/>ForceStr (force flag as string, default 'false' 和 \"Parse flags<br/>PowerShell: <br/>$force = ($ForceStr -eq '1' 的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"Input: <br/>ForceStr (force flag as string, default 'false' 和 \"Parse flags<br/>PowerShell: <br/>$force = ($ForceStr -eq '1''。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "A3",
        "M1"
      ],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 $ForceStr.ToLower( 和 \"$force (bool 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '$ForceStr.ToLower( 和 \"$force (bool'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "or",
        "B1"
      ],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 \"Ensure directory exists<br/>PowerShell:<br/>New-Item -ItemType Directory -Path $dir -Force\" 和 \"$dir:<br/>Directory of TargetPath\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '\"Ensure directory exists<br/>PowerShell:<br/>New-Item -ItemType Directory -Path $dir -Force\" 和 \"$dir:<br/>Directory of TargetPath\"'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "M2",
        "B2"
      ],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 \"Cross-process coordination<br/>PowerShell:<br/>System.Threading.Mutex('Global\\\\RCA_BuildStamp' 和 \"Mutex acquired:<br/>Only one process can update timestamp at a time\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 27,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 '\"Cross-process coordination<br/>PowerShell:<br/>System.Threading.Mutex('Global\\\\RCA_BuildStamp' 和 \"Mutex acquired:<br/>Only one process can update timestamp at a time\"'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 28,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 29,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "M3",
        "B3"
      ],
      "is_repair": false
    },
    {
      "turn_id": 30,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 \"Timestamp logic<br/>PowerShell:<br/>Check if file exists, age, TTL, force\" 和 \"Should write new timestamp?\"。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 31,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "抱歉，稍微改一下，把刚才那个改成 \"Timestamp logic<br/>PowerShell:<br/>Check if file exists, age, TTL, force\"处理。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 32,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 '\"Timestamp logic<br/>PowerShell:<br/>Check if file exists, age, TTL, force\"处理'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 33,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 34,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "M4",
        "D1"
      ],
      "is_repair": false
    },
    {
      "turn_id": 35,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "然后，流程会走到 \"File exists?\" 和 \"Output: <br/>Timestamp written to TargetPath<br/>Format: yyyyMMdd_HHmmss\"。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 36,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 '\"File exists?\" 和 \"Output: <br/>Timestamp written to TargetPath<br/>Format: yyyyMMdd_HHmmss\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 37,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 38,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "D2",
        "C1"
      ],
      "is_repair": false
    },
    {
      "turn_id": 39,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 \"No change: existing timestamp is valid\" 和 \"Release mutex and exit\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 40,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 '\"No change: existing timestamp is valid\" 和 \"Release mutex and exit\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 41,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 42,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "E1",
        "F1"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 42,
    "repair_count": 2,
    "grounding_acts_count": 20,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "repair_log": [
    "compilation_recovered_local_original"
  ],
  "repaired_at": "2026-02-28T13:41:20Z"
}