{
  "id": "gh_ind_4958339a03",
  "source": "github_industrial",
  "repo": "timothywarner/az305",
  "license": "mit",
  "code": "%% AZ-305 Domain 1: Centralized Logging Architecture\n%% Reference: Azure Monitor architecture, Log Analytics workspace design\n%% Exam Focus: Data collection, routing, retention, destinations\n\nflowchart TB\n    subgraph SOURCES[\"Data Sources\"]\n        direction TB\n\n        subgraph AZURE_RES[\"Azure Resources\"]\n            VM[\"Virtual Machines<br/>Azure Monitor Agent\"]\n            WEBAPP[\"App Service<br/>Diagnostic Settings\"]\n            AKS[\"AKS Clusters<br/>Container Insights\"]\n            SQL[\"Azure SQL<br/>Audit Logs\"]\n            STORAGE[\"Storage Accounts<br/>Metrics & Logs\"]\n            KEYVAULT[\"Key Vault<br/>Audit Events\"]\n        end\n\n        subgraph APPS[\"Applications\"]\n            APPINSIGHTS[\"Application Insights<br/>SDK / Auto-instrumentation\"]\n            CUSTOM_LOGS[\"Custom Logs<br/>Data Collection API\"]\n        end\n\n        subgraph HYBRID[\"Hybrid / On-Premises\"]\n            ONPREM_VM[\"On-Premises VMs<br/>Azure Arc + AMA\"]\n            SYSLOG[\"Syslog Sources<br/>Linux / Network Devices\"]\n            CEF[\"CEF/Syslog<br/>Security Devices\"]\n        end\n\n        subgraph SECURITY[\"Security Sources\"]\n            DEFENDER[\"Microsoft Defender<br/>for Cloud\"]\n            SENTINEL[\"Microsoft Sentinel<br/>Data Connectors\"]\n            AAD_LOGS[\"Entra ID Logs<br/>Sign-in / Audit\"]\n        end\n    end\n\n    subgraph COLLECTION[\"Data Collection & Routing\"]\n        direction TB\n\n        DCR[\"Data Collection Rules<br/>Transform & Filter\"]\n        DCE[\"Data Collection<br/>Endpoints\"]\n        DIAG[\"Diagnostic Settings<br/>Resource Logs\"]\n\n        subgraph EVENTHUB[\"Event Hub Namespace\"]\n            EH_STREAM[\"Event Hub<br/>Real-time Streaming\"]\n        end\n    end\n\n    subgraph DESTINATIONS[\"Destinations\"]\n        direction TB\n\n        subgraph LAW[\"Log Analytics Workspace\"]\n            TABLES[\"Tables<br/>- AzureActivity<br/>- Heartbeat<br/>- Perf<br/>- SecurityEvent<br/>- Custom_CL\"]\n            RETENTION[\"Retention Settings<br/>Interactive: 30-730 days<br/>Archive: Up to 12 years\"]\n            BASIC_LOGS[\"Basic Logs Tier<br/>Cost-optimized<br/>8-day retention\"]\n        end\n\n        subgraph STORAGE_DEST[\"Storage Account\"]\n            BLOB[\"Blob Storage<br/>Long-term Archive\"]\n            LIFECYCLE[\"Lifecycle Management<br/>Hot -> Cool -> Archive\"]\n        end\n\n        subgraph EXTERNAL[\"External Systems\"]\n            SIEM[\"Third-party SIEM<br/>via Event Hub\"]\n            SPLUNK[\"Splunk / Datadog<br/>Partner Solutions\"]\n        end\n    end\n\n    subgraph ANALYSIS[\"Analysis & Action\"]\n        direction TB\n\n        QUERIES[\"KQL Queries<br/>Log Analytics\"]\n        WORKBOOKS[\"Azure Workbooks<br/>Visualization\"]\n        ALERTS[\"Alert Rules<br/>Log / Metric\"]\n        AUTOMATION[\"Automation<br/>Logic Apps / Functions\"]\n        SENTINEL_ANALYTICS[\"Sentinel Analytics<br/>SIEM / SOAR\"]\n    end\n\n    %% Data flow connections\n    VM --> DCR\n    WEBAPP --> DIAG\n    AKS --> DCR\n    SQL --> DIAG\n    STORAGE --> DIAG\n    KEYVAULT --> DIAG\n\n    APPINSIGHTS --> LAW\n    CUSTOM_LOGS --> DCE\n\n    ONPREM_VM --> DCR\n    SYSLOG --> DCE\n    CEF --> DCE\n\n    DEFENDER --> LAW\n    SENTINEL --> LAW\n    AAD_LOGS --> DIAG\n\n    DCR --> LAW\n    DCE --> LAW\n    DIAG --> LAW\n    DIAG --> EH_STREAM\n    DIAG --> BLOB\n\n    EH_STREAM --> SIEM\n    EH_STREAM --> SPLUNK\n\n    LAW --> QUERIES\n    QUERIES --> WORKBOOKS\n    QUERIES --> ALERTS\n    ALERTS --> AUTOMATION\n    LAW --> SENTINEL_ANALYTICS\n\n    %% Exam notes\n    NOTE1[\"**EXAM TIP**: DCRs enable<br/>transformation at ingestion<br/>reducing costs\"]\n    NOTE2[\"**EXAM TIP**: Basic Logs tier<br/>costs 60% less but has<br/>limited query capabilities\"]\n    NOTE3[\"**EXAM TIP**: Event Hub enables<br/>real-time streaming to<br/>external systems\"]\n\n    %% Styling\n    classDef sourceStyle fill:#42a5f5,stroke:#1976d2,color:#fff\n    classDef appStyle fill:#66bb6a,stroke:#388e3c,color:#fff\n    classDef hybridStyle fill:#ab47bc,stroke:#7b1fa2,color:#fff\n    classDef securityStyle fill:#ef5350,stroke:#c62828,color:#fff\n    classDef collectionStyle fill:#ffca28,stroke:#ff8f00,color:#000\n    classDef destStyle fill:#26c6da,stroke:#00838f,color:#000\n    classDef analysisStyle fill:#7e57c2,stroke:#512da8,color:#fff\n    classDef noteStyle fill:#fff9c4,stroke:#fbc02d,color:#000,stroke-dasharray: 5 5\n\n    class VM,WEBAPP,AKS,SQL,STORAGE,KEYVAULT sourceStyle\n    class APPINSIGHTS,CUSTOM_LOGS appStyle\n    class ONPREM_VM,SYSLOG,CEF hybridStyle\n    class DEFENDER,SENTINEL,AAD_LOGS securityStyle\n    class DCR,DCE,DIAG,EH_STREAM collectionStyle\n    class TABLES,RETENTION,BASIC_LOGS,BLOB,LIFECYCLE,SIEM,SPLUNK destStyle\n    class QUERIES,WORKBOOKS,ALERTS,AUTOMATION,SENTINEL_ANALYTICS analysisStyle\n    class NOTE1,NOTE2,NOTE3 noteStyle\n",
  "diagram_type": "architecture",
  "collected_at": "2026-02-27T03:18:04.904722"
}