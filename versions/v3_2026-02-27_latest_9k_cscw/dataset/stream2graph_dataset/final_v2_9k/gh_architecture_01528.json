{
  "id": "gh_architecture_01528",
  "source": "github",
  "source_url": "https://github.com/s-a-c/dot-ai/blob/f0c144ac107ab36fe989907c0c70ba8f7716d543/100-laravel/700-r-and-d/E_L_A/illustrations/mermaid/light/cqrs-flow-light.mmd",
  "github_repo": "s-a-c/dot-ai",
  "github_file_path": "100-laravel/700-r-and-d/E_L_A/illustrations/mermaid/light/cqrs-flow-light.mmd",
  "diagram_type": "architecture",
  "code": "%%{init: {'theme': 'default', 'themeVariables': { 'primaryColor': '#f5f5f5', 'primaryTextColor': '#333333', 'primaryBorderColor': '#cccccc', 'lineColor': '#666666', 'secondaryColor': '#f0f0f0', 'tertiaryColor': '#ffffff' }}}%%\nflowchart TD\n    A[\"Request / User Action\"] --> B[\"Controller / Livewire Component\"]\n\n    subgraph \"Write Side - CQRS - Core Logic via hirethunk/verbs\"\n        B_CMD[\"Controller / Livewire Component\"] -->|\"Sends Verbs Command Object\"| C{\"Command Bus (hirethunk/verbs)\"}\n        C --> D[\"Verb Command Handler\"]\n        D --> E[\"Domain Services / Models\"]\n        D --> F[\"Validation Logic\"]\n        E --> G[(\"Database: Persists State\")]\n        D --> H[\"Command History (verbs)\"]\n        H --> G_HIST[(\"Database: Stores History\")]\n        D --> I{\"Event Bus (Laravel)\"}\n    end\n\n    subgraph \"Write Side - Simple CRUD - Optional\"\n        B_SCRUD[\"Controller / Livewire Component\"] --> E_SCRUD[\"Domain Services / Models\"]\n        E_SCRUD --> G_SCRUD[(\"Database: Persists State\")]\n    end\n\n    B --> B_CMD\n    B --> B_SCRUD\n\n    subgraph \"Read Side\"\n        B_QUERY[\"Controller / Livewire Component\"] -->|\"Query Parameters\"| J[\"Query Service / Eloquent Scopes\"]\n        J --> G_READ[(\"Database: Reads State\")]\n        J --> K[\"Response Data / View Model\"]\n    end\n\n    B --> B_QUERY\n    B_QUERY --> K_OUT[\"Response Data / View Model\"]\n\n    subgraph \"Side Effects - Async Preferred\"\n        I_SE{\"Event Bus (Laravel)\"} --> L[\"Listeners / Subscribers (Queued)\"]\n        L --> M[\"Notifications\"]\n        L --> N[\"Search Indexing\"]\n        L --> O[\"Cache Updates\"]\n        L --> P[\"...\"]\n    end\n\n    I --> I_SE",
  "content_size": 1631,
  "collected_at": "2026-02-06T01:47:28.858993",
  "license": "apache-2.0",
  "license_name": "Apache License 2.0",
  "compilation_status": "success",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license_url": "https://api.github.com/licenses/apache-2.0",
  "repo_stars": 0,
  "repo_forks": 0
}