{
  "id": "gh_flowchart_00413",
  "source": "github",
  "source_url": "https://github.com/Leyber91/WirthForge_wiki/blob/566ba86a84e0c8d6c7bf941bcd891dc085a370f8/assets/diagrams/WF-TECH/WF-TECH-002-energy-mapping.mmd",
  "github_repo": "Leyber91/WirthForge_wiki",
  "github_file_path": "assets/diagrams/WF-TECH/WF-TECH-002-energy-mapping.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TD\n    subgraph INPUT[\"ğŸ¯ TOKEN STREAM INPUT\"]\n        T[\"ğŸ­ Token Generated<br/>('Hello', 'world', '!')\"]\n        TM[\"ğŸ“Š Token Metadata<br/>(logprobs, position, model)\"]\n        TS[\"â±ï¸ Timestamp Î”t<br/>(generation timing)\"]\n    end\n    \n    subgraph PIPELINE[\"âš¡ ENERGY CALCULATION PIPELINE\"]\n        subgraph TIMING[\"ğŸ• TIMING ANALYSIS\"]\n            DT[\"ğŸ“ Delta Time Î”t<br/>(ms between tokens)\"]\n            TPS[\"ğŸš€ Tokens Per Second<br/>(generation speed)\"]\n            TTFT[\"âš¡ Time to First Token<br/>(TTFT latency)\"]\n        end\n        \n        subgraph SEMANTIC[\"ğŸ§  SEMANTIC ANALYSIS\"]\n            LP[\"ğŸ“ˆ Log Probabilities<br/>(model confidence)\"]\n            ENT[\"ğŸŒ€ Entropy Calculation<br/>(uncertainty measure)\"]\n            TK[\"ğŸ² Top-K Diversity<br/>(choice breadth)\"]\n        end\n        \n        subgraph FORMULA[\"ğŸ§® ENERGY FORMULA\"]\n            EF[\"âš¡ E(t) = wâ‚Ã—E_cadence + wâ‚‚Ã—E_certainty + wâ‚ƒÃ—E_stall<br/>ğŸ”¬ Physics-Based Energy Computation\"]\n            NORM[\"ğŸ“ Normalize to [0,1]<br/>(energy bounds)\"]\n            SMOOTH[\"ğŸ“Š Exponential Moving Average<br/>(Î±=0.1, smooth visualization)\"]\n        end\n    end\n    \n    subgraph OUTPUT[\"ğŸ“¡ OUTPUT EVENTS (60Hz)\"]\n        EU[\"ğŸŒŠ Energy Update<br/>(real-time E(t))\"]\n        TS_OUT[\"ğŸ­ Token Stream<br/>(with energy values)\"]\n        FM[\"ğŸ“Š Frame Metrics<br/>(performance data)\"]\n    end\n    \n    subgraph MULTI[\"ğŸª MULTI-MODEL PROCESSING\"]\n        subgraph TURBO[\"ğŸš€ TURBO MODE\"]\n            M1[\"ğŸ¤– Model 1: LLaMA2-7B<br/>(primary generation)\"]\n            M2[\"ğŸ¤– Model 2: CodeLLaMA<br/>(code specialist)\"] \n            M3[\"ğŸ¤– Model 3: Mistral-7B<br/>(reasoning expert)\"]\n        end\n        \n        subgraph ENSEMBLE[\"ğŸ”¬ ENSEMBLE ANALYSIS\"]\n            INT[\"ğŸŒŠ Interference Pattern<br/>(model disagreement)\"]\n            RES[\"ğŸµ Resonance Detection<br/>(model synchronization)\"]\n            DIV[\"ğŸ“Š Diversity Index<br/>DI = 1 - max(P_i)\"]\n        end\n        \n        subgraph COUNCIL[\"ğŸ›ï¸ COUNCIL EVENTS\"]\n            IE[\"âš¡ interference_event<br/>(visual interference)\"]\n            RE[\"âœ¨ resonance_event<br/>(celebration trigger)\"]\n            EE[\"ğŸŒŸ ensemble_energy<br/>(combined E(t))\"]\n        end\n    end\n    \n    %% Enhanced Flow Connections\n    T -.->|\"ğŸ¯ Raw Token\"| DT\n    TM -.->|\"ğŸ“Š Metadata\"| LP\n    TS -.->|\"â±ï¸ Timing\"| TPS\n    \n    DT -->|\"âš¡ Speed Component\"| EF\n    LP -->|\"ğŸ§  Confidence\"| ENT\n    ENT -->|\"ğŸŒ€ Uncertainty\"| EF\n    TPS -->|\"ğŸš€ Cadence\"| TK\n    TK -->|\"ğŸ² Diversity\"| EF\n    \n    EF -->|\"ğŸ§® Raw Energy\"| NORM\n    NORM -->|\"ğŸ“ Bounded [0,1]\"| SMOOTH\n    SMOOTH -->|\"ğŸ“Š Smoothed E(t)\"| EU\n    T -->|\"ğŸ­ Original Token\"| TS_OUT\n    EU -->|\"âš¡ Energy Data\"| FM\n    \n    %% Multi-Model Enhanced Flow\n    M1 -.->|\"ğŸ¤– Stream A\"| INT\n    M2 -.->|\"ğŸ¤– Stream B\"| INT\n    M3 -.->|\"ğŸ¤– Stream C\"| INT\n    \n    INT -->|\"ğŸŒŠ Pattern Analysis\"| DIV\n    M1 -.->|\"ğŸµ Sync Check\"| RES\n    M2 -.->|\"ğŸµ Sync Check\"| RES\n    M3 -.->|\"ğŸµ Sync Check\"| RES\n    \n    DIV -->|\"ğŸ“Š High Diversity\"| IE\n    RES -->|\"âœ¨ Synchronization\"| RE\n    INT -->|\"ğŸŒŸ Combined Energy\"| EE\n    \n    %% Visual Enhancement Styling\n    style EF fill:#ff9800,stroke:#f57c00,stroke-width:3px,color:#fff\n    style EU fill:#4caf50,stroke:#388e3c,stroke-width:3px,color:#fff\n    style INT fill:#e91e63,stroke:#c2185b,stroke-width:3px,color:#fff\n    style RES fill:#9c27b0,stroke:#7b1fa2,stroke-width:3px,color:#fff\n    style FORMULA fill:#fff3e0,stroke:#ff9800,stroke-width:2px\n    style TURBO fill:#e8f5e8,stroke:#4caf50,stroke-width:2px\n    style COUNCIL fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px\n    style INPUT fill:#e3f2fd,stroke:#2196f3,stroke-width:2px\n    style OUTPUT fill:#fff8e1,stroke:#ffc107,stroke-width:2px\n",
  "content_size": 3630,
  "collected_at": "2026-02-06T01:43:55.624788",
  "compilation_status": "failed",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚"
}