{
  "id": "gl_packet-beta_00365",
  "source": "gitlab",
  "source_url": "https://github.com/richfrem/Project_Sanctuary/blob/2ebce01d3854377b108d26997414f9fd9ffcffdb/docs/architecture_diagrams/workflows/protocol_130_deduplication_flow.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "richfrem/Project_Sanctuary",
  "diagram_type": "packet-beta",
  "code": "flowchart TD\n    Start([Start Snapshot Process])\n    RenderDiagrams[\"Render Outdated Diagrams<br/>(Task #154)\"]\n    LoadManifest[Load Manifest<br/>.agent/learning/learning_audit/learning_audit_manifest.json]\n    CheckType{Snapshot Type?}\n    \n    Start --> RenderDiagrams\n    RenderDiagrams --> LoadManifest\n    LoadManifest --> CheckType\n    \n    CheckType -- \"audit/seal\" --> GitCheck[Git Pre-Flight Check]\n    CheckType -- \"learning_audit\" --> DedupeLogic[Protocol 130 Deduplication]\n    \n    subgraph \"Protocol 130 Logic\"\n        DedupeLogic --> LoadRg[Load Registry<br>.agent/learning/manifest_registry.json]\n        LoadRg -- \"Read Map\" --> MapOut[Map Output -> Source Manifest]\n        MapOut -- \"Check Each File\" --> CheckFiles[Check Manifest Files]\n        CheckFiles --> IsEmbedded{Is File Embedded?}\n        IsEmbedded -- \"Yes (In generated output)\" --> RemoveSource[Remove Source Files]\n        IsEmbedded -- \"No (Unique)\" --> KeepFile[Keep File]\n        RemoveSource -- \"Cleaned\" --> FinalManifest[Final Deduped Manifest]\n        KeepFile -- \"Preserved\" --> FinalManifest\n    end\n    \n    FinalManifest -- \"Proceed\" --> GitCheck\n    GitCheck --> Verify{Integrity OK?}\n    \n    Verify -- Yes --> Generate[Generate Snapshot<br>.agent/learning/learning_audit/learning_audit_packet.md]\n    Verify -- No --> Fail([Fail / Safe Mode])\n    \n    Generate --> End([End])\n\n    style DedupeLogic fill:#f9f,stroke:#333\n    style FinalManifest fill:#bbf,stroke:#333\n    style LoadRg fill:#dfd,stroke:#333\n    style LoadManifest fill:#dfd,stroke:#333\n",
  "content_size": 1549,
  "collected_at": "2026-02-06T14:08:20.074820",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}