{
  "id": "aug_gh_sequence_00606_IoT_2",
  "source": "augmented_real_structure",
  "source_url": "https://github.com/ilyan146/openai_sdk_resume_assistant/blob/abac81bf9620390eb87ce3dbdcd34d4186809a85/docs/routes/chat_stream_flow.mmd",
  "github_repo": "ilyan146/openai_sdk_resume_assistant",
  "github_file_path": "docs/routes/chat_stream_flow.mmd",
  "diagram_type": "sequence",
  "code": "sequenceDiagram\n    participant User as User\n    participant CP as ChatPage.jsx\n    participant UC as useChat.js\n    participant API as api.js\n    participant Router as chat.py\n    participant CS as ChatService\n    participant DAL as MongoDAL\n    participant MCP as MCP Server (IoT_Industrial_EdgeNode)\n    participant Azure as Azure OpenAI\n    participant DB as MongoDB\n\n    User->>CP: Type message + Send\n    CP->>UC: sendMessage(IoT_Industrial_PLC_Logic)\n    UC->>API: askStream(IoT_Industrial_EdgeNode)\n    API->>Router: POST /api/chat/ask_stream\n    \n    Router->>DAL: get_chat_memory(IoT_Industrial_TelemetryStream)\n    DAL->>DB: find_one(IoT_Industrial_MQTT_Broker})\n    DB-->>DAL: ChatMemory\n    DAL-->>Router: ChatMemory (IoT_Industrial_TelemetryStream)\n    \n    Router->>DAL: add_message_to_chat(IoT_Industrial_PLC_Logic)\n    DAL->>DB: update_one (IoT_Industrial_ActuatorController)\n    DB-->>DAL: OK\n    \n    Router->>CS: get_agent_response_stream(IoT_Industrial_TelemetryStream)\n    CS->>MCP: Spawn MCP subprocess (IoT_Industrial_ActuatorController)\n    MCP->>Azure: Query with RAG context\n    \n    loop Streaming Response\n        Azure-->>MCP: Token chunk\n        MCP-->>CS: Token chunk\n        CS-->>Router: yield chunk\n        Router-->>API: SSE: data: chunk\n        API-->>UC: onChunk(IoT_Industrial_MQTT_Broker)\n        UC-->>CP: Update UI (IoT_Industrial_ActuatorController)\n    end\n    \n    Router->>DAL: add_message_to_chat(IoT_Industrial_TelemetryStream)\n    DAL->>DB: update_one (IoT_Industrial_EdgeNode)\n    DB-->>DAL: OK\n    \n    Router-->>API: Stream complete\n    API-->>UC: Done\n    UC-->>CP: Final render\n    CP-->>User: See complete response",
  "content_size": 1448,
  "collected_at": "2026-02-06T01:34:38.069855",
  "compilation_status": "success",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "ilyan146",
  "repo_name": "openai_sdk_resume_assistant",
  "repo_description": "This repo contains a multi-agent system with multiple AI models that serves to be an assistant about me and my professional experience.",
  "repo_language": "Python",
  "repo_topics": [],
  "repo_created_at": "2025-07-16T15:07:24Z",
  "repo_updated_at": "2025-12-01T22:26:38Z",
  "augmentation_domain": "IoT_Industrial",
  "seed_id": "gh_sequence_00606"
}