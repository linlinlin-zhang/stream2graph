{
  "id": "gl_flowchart_00773",
  "source": "gitlab",
  "source_url": "https://github.com/arvopaukkunen/Construction/blob/34ce95d3d3d3a80b404d71b8a10f4a3927c514a4/diagrams/flowchart%20LR.mmd",
  "source_note": "collected_from_github_final",
  "github_repo": "arvopaukkunen/Construction",
  "diagram_type": "flowchart",
  "code": "flowchart LR\n    %% Edge / Device Layer\n    subgraph \"Edge Device Layer\"\n      S1[\"Critical Sensors (100)\"]\n      S2[\"HVAC Sensors\"]\n      S3[\"Appliance Sensors\"]\n      S4[\"Lighting Sensors\"]\n      TG[\"Telegram Bots & Integrations\"]\n    end\n\n    %% Brokers\n    subgraph \"Brokers (HA)\"\n      MQ1[\"MQTT/NATS A\"]\n      MQ2[\"MQTT/NATS B\"]\n    end\n\n    %% Processing & Orchestration\n    subgraph \"Processing & Orchestration\"\n      NR1[\"Node-RED – Ingest & Validate\"]\n      NR2[\"Node-RED – Enrich & Route\"]\n      NR3[\"Node-RED – DB Loader\"]\n      TF[\"Telegraf (optional)\"]\n    end\n\n    %% On-Prem Data Stores\n    subgraph \"On-Prem Data Stores\"\n      RS[\"Redis Streams – short buffer\"]\n      TS[\"InfluxDB – 1–7d retention\"]\n      SQL[\"Relational DB – MySQL/Postgres\"]\n      FS[\"SSD Staging – CSV/Parquet\"]\n    end\n\n    %% Cloud (Optional)\n    subgraph \"Cloud (Optional, Batch Only)\"\n      OB[\"Object Storage\"]\n      DW[\"Analytics / Data Warehouse\"]\n    end\n\n    %% Connections\n    S1 -->|QoS1/2, wired| MQ1\n    S1 -->|QoS1/2, wired| MQ2\n    S2 --> MQ1\n    S2 --> MQ2\n    S3 --> MQ1\n    S3 --> MQ2\n    S4 --> MQ1\n    S4 --> MQ2\n    TG --> MQ1\n    TG --> MQ2\n\n    MQ1 --> NR1\n    MQ2 --> NR1\n    NR1 --> NR2\n\n    NR2 -->|Batched Line Protocol| TS\n    NR2 -->|Stream| RS\n    NR2 -->|Batch Files| FS\n    FS -->|Bulk Load| SQL\n\n    TS -->|Daily/Weekly Export| OB\n    SQL -->|Daily/Weekly Export| OB\n    OB --> DW\n",
  "content_size": 1401,
  "collected_at": "2026-02-06T14:20:11.439870",
  "compilation_status": "success",
  "license": "gpl-2.0",
  "license_name": "GNU General Public License v2.0",
  "license_url": "https://api.github.com/licenses/gpl-2.0",
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "arvopaukkunen",
  "repo_name": "Construction",
  "repo_description": "Powerplant, House plans and more",
  "repo_language": "C#",
  "repo_topics": [],
  "repo_created_at": "2021-02-04T15:31:54Z",
  "repo_updated_at": "2026-01-18T08:21:50Z"
}