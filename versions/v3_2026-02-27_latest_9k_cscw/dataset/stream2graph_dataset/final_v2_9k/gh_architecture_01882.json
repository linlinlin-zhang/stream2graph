{
  "id": "gh_architecture_01882",
  "source": "github",
  "source_url": "https://github.com/arrozet/basmati/blob/843c576d10ba768f1e3a58b3f63cf555e7396873/docs/diagrams/final/nosql.mmd",
  "github_repo": "arrozet/basmati",
  "github_file_path": "docs/diagrams/final/nosql.mmd",
  "diagram_type": "architecture",
  "code": "---\nconfig:\n  layout: elk\n---\nflowchart LR\n subgraph Users[\"<b>COLLECTION: users</b>\"]\n        direction TB\n        UsersColl[\"ğŸ‘¤ users\"]\n        U1[\"<b>Document Structure</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ external_id: string<br>â€¢ provider: string<br>â€¢ email: string<br>â€¢ display_name: string<br>â€¢ avatar_url: string<br>â€¢ notification_preferences âŠ•<br>â€¢ followed_calendar_ids: [ObjectId]<br>â€¢ created_at: datetime<br>â€¢ last_login: datetime\"]\n        U2[\"<b>notification_preferences</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ in_app: boolean<br>â€¢ email: boolean<br>â€¢ email_address: string<br>â€¢ frequency: string<br>  (instant | daily)\"]\n        U1 -. embeds .- U2\n  end\n  \n subgraph Calendars[\"<b>COLLECTION: calendars</b>\"]\n        direction TB\n        CalendarsColl[\"ğŸ“… calendars\"]\n        C1[\"<b>Document Structure</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ title: string<br>â€¢ creator_external_id: string â†’<br>â€¢ creator_display_name: string<br>â€¢ keywords: [string]<br>â€¢ color: string<br>â€¢ icon: string<br>â€¢ parent_calendar_id: ObjectId â†’<br>â€¢ path: [ObjectId]<br>â€¢ description: string<br>â€¢ visibility: string<br>â€¢ created_at: datetime<br>â€¢ updated_at: datetime<br>â€¢ subscriber_count: number<br>â€¢ comments âŠ•âŠ•\"]\n        C2[\"<b>comments[]</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ author_external_id: string â†’<br>â€¢ author_display_name: string<br>â€¢ text: string<br>â€¢ created_at: datetime\"]\n        C1 -. embeds array .- C2\n  end\n  \n subgraph Events[\"<b>COLLECTION: events</b>\"]\n        direction TB\n        EventsColl[\"ğŸ“Œ events\"]\n        E1[\"<b>Document Structure</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ calendar_id: ObjectId â†’<br>â€¢ calendar_title: string<br>â€¢ creator_external_id: string â†’<br>â€¢ title: string<br>â€¢ description: string<br>â€¢ start_time: datetime<br>â€¢ end_time: datetime<br>â€¢ location âŠ•<br>â€¢ attachments âŠ•âŠ•<br>â€¢ comments âŠ•âŠ•<br>â€¢ visibility: string<br>â€¢ recurrence âŠ•<br>â€¢ created_at: datetime<br>â€¢ updated_at: datetime\"]\n        E2[\"<b>location</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ address: string<br>â€¢ latitude: number<br>â€¢ longitude: number<br>â€¢ place_name: string<br>â€¢ map_provider: string\"]\n        E3[\"<b>attachments[]</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ filename: string<br>â€¢ url: string (GCS)<br>â€¢ size: number<br>â€¢ mime_type: string<br>â€¢ uploaded_at: datetime<br>â€¢ uploaded_by: string<br>â€¢ is_image: boolean<br>â€¢ thumbnail_url: string\"]\n        E4[\"<b>comments[]</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ author_external_id: string â†’<br>â€¢ author_display_name: string<br>â€¢ text: string<br>â€¢ created_at: datetime\"]\n        E5[\"<b>recurrence</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ pattern: string<br>â€¢ interval: number<br>â€¢ days_of_week: [number]<br>â€¢ end_date: datetime<br>â€¢ exceptions: [datetime]\"]\n        E1 -. embeds .- E2\n        E1 -. embeds .- E5\n        E1 -. embeds array .- E3 & E4\n  end\n  \n subgraph Notifications[\"<b>COLLECTION: notifications</b>\"]\n        direction TB\n        NotificationsColl[\"ğŸ”” notifications\"]\n        N1[\"<b>Document Structure</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ recipient_external_id: string â†’<br>â€¢ type: string<br>â€¢ title: string<br>â€¢ message: string<br>â€¢ is_read: boolean<br>â€¢ related_event_id: ObjectId â†’<br>â€¢ related_calendar_id: ObjectId â†’<br>â€¢ created_at: datetime<br>â€¢ expires_at: datetime\"]\n  end\n  \n subgraph GeocodeCache[\"<b>COLLECTION: geocode_cache</b>\"]\n        direction TB\n        GeocodeCacheColl[\"ğŸ—ºï¸ geocode_cache\"]\n        GC1[\"<b>Document Structure</b><br>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>â€¢ _id: ObjectId<br>â€¢ cache_key: string (unique)<br>â€¢ query_type: string<br>  (geocode | reverse | search)<br>â€¢ query_params: object<br>â€¢ response_data: object<br>â€¢ created_at: datetime<br>â€¢ expires_at: datetime<br>â€¢ hit_count: number<br>â€¢ last_accessed: datetime<br>â€¢ schema_version: number\"]\n  end\n  \n    UsersColl == creates ==> CalendarsColl\n    UsersColl == creates ==> EventsColl\n    UsersColl == receives ==> NotificationsColl\n    CalendarsColl == contains ==> EventsColl\n    CalendarsColl == parent_of ==> CalendarsColl\n    EventsColl == generates ==> NotificationsColl\n    EventsColl == relates_to ==> EventsColl\n    EventsColl == consumes ==> GeocodeCacheColl\n    \n    style Users fill:#e1f5ff,stroke:#0066cc,stroke-width:3px\n    style Calendars fill:#fff4e1,stroke:#cc8800,stroke-width:3px\n    style Events fill:#e8f5e8,stroke:#00aa00,stroke-width:3px\n    style Notifications fill:#ffe8f0,stroke:#cc0066,stroke-width:3px\n    style GeocodeCache fill:#f0e6ff,stroke:#8800cc,stroke-width:3px\n    \n    style UsersColl fill:#b3d9ff,stroke:#0066cc,stroke-width:2px\n    style CalendarsColl fill:#ffe4b3,stroke:#cc8800,stroke-width:2px\n    style EventsColl fill:#c2e0c2,stroke:#00aa00,stroke-width:2px\n    style NotificationsColl fill:#ffcce0,stroke:#cc0066,stroke-width:2px\n    style GeocodeCacheColl fill:#e6ccff,stroke:#8800cc,stroke-width:2px",
  "content_size": 4824,
  "collected_at": "2026-02-06T02:04:30.971815",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚",
  "license": "gpl-3.0",
  "license_name": "GNU General Public License v3.0",
  "license_url": "https://api.github.com/licenses/gpl-3.0",
  "repo_stars": 0,
  "repo_forks": 0
}