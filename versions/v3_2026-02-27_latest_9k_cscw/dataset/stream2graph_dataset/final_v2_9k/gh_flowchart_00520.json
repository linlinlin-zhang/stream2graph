{
  "id": "gh_flowchart_00520",
  "source": "github",
  "source_url": "https://github.com/WXYC/Backend-Service/blob/40c3a8701afe93ef5489036a04022e7e2962986c/docs/metadata-service/diagrams/data-flow.mmd",
  "github_repo": "WXYC/Backend-Service",
  "github_file_path": "docs/metadata-service/diagrams/data-flow.mmd",
  "diagram_type": "flowchart",
  "code": "%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#dbeafe', 'primaryTextColor': '#1e40af', 'primaryBorderColor': '#3b82f6', 'lineColor': '#374151'}}}%%\nflowchart TD\n    subgraph GET[\"GET /flowsheet (Read Path)\"]\n        A[Mobile Apps<br/>iOS / Android] --> B{Cache Hit?}\n        B -->|Yes| C[Return Cached Data]\n        B -->|No| D[Query PostgreSQL<br/>with LEFT JOINs]\n        D --> E[Store in Cache]\n        E --> F[Return Response]\n    end\n\n    GET ~~~ POST\n\n    subgraph POST[\"POST /flowsheet (Write Path)\"]\n        G[DJ Site] --> H[Insert to PostgreSQL]\n        H --> I[Invalidate Cache]\n        I --> J[Return Response]\n        H -.->|fire-and-forget| K[Metadata Service]\n        K --> L[External APIs<br/>Discogs, Spotify, Apple Music]\n        L --> M[Store Metadata in DB]\n    end\n\n    style A fill:#dbeafe,stroke:#3b82f6\n    style G fill:#dbeafe,stroke:#3b82f6\n    style B fill:#fef3c7,stroke:#f59e0b\n    style C fill:#dcfce7,stroke:#22c55e\n    style F fill:#dcfce7,stroke:#22c55e\n    style J fill:#dcfce7,stroke:#22c55e\n    style I fill:#fee2e2,stroke:#ef4444\n    style K fill:#f3e8ff,stroke:#9333ea\n",
  "content_size": 1124,
  "collected_at": "2026-02-06T01:44:39.000516",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 0,
  "repo_forks": 1
}