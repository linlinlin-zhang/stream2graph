{
  "id": "gh_ind_2a6e865da8",
  "source": "github_industrial",
  "repo": "Kaikei-e/Alt",
  "license": "apache-2.0",
  "code": "graph TB\n    %% スタイル定義\n    classDef frontend fill:#4FC3F7,stroke:#0288D1,stroke-width:3px,color:#fff\n    classDef backend fill:#66BB6A,stroke:#2E7D32,stroke-width:3px,color:#fff\n    classDef ai fill:#FFB74D,stroke:#E65100,stroke-width:3px,color:#fff\n    classDef database fill:#EF5350,stroke:#B71C1C,stroke-width:3px,color:#fff\n    classDef search fill:#7E57C2,stroke:#4527A0,stroke-width:3px,color:#fff\n    classDef logging fill:#AB47BC,stroke:#6A1B9A,stroke-width:3px,color:#fff\n    classDef auth fill:#5C6BC0,stroke:#283593,stroke-width:3px,color:#fff\n    classDef infra fill:#455A64,stroke:#263238,stroke-width:3px,color:#fff\n    classDef k8s fill:#326CE5,stroke:#1976D2,stroke-width:3px,color:#fff\n    classDef helm fill:#0F1689,stroke:#0D47A1,stroke-width:3px,color:#fff\n    classDef layer fill:#ECEFF1,stroke:#607D8B,stroke-width:2px,color:#263238\n\n    %% User Interface Layer\n    subgraph ExternalAccess[External Access]\n        User[User]\n        Browser[Browser/Mobile]\n    end\n\n    %% Kubernetes Ingress Layer\n    subgraph IngressNamespace[K8s Namespace - alt-ingress]\n        IngressController[Ingress Controller<br/>SSL/TLS Termination]:::k8s\n        NginxExternal[nginx-external<br/>External Proxy]:::infra\n    end\n\n    %% Frontend Layer\n    subgraph AppsNamespace[K8s Namespace - alt-apps]\n        subgraph FrontendService[Frontend Service]\n            FrontendPod[alt-frontend Pod<br/>TypeScript/React/Next.js<br/>Mobile-first Design]:::frontend\n            FrontendSvc[alt-frontend Service<br/>ClusterIP]:::k8s\n        end\n\n        %% Backend - Clean Architecture\n        subgraph BackendService[Backend Service - Clean Architecture]\n            subgraph BackendPod[alt-backend Pod]\n                REST[REST Layer<br/>Echo Framework<br/>HTTP Handlers]:::layer\n                Usecase[Usecase Layer<br/>Business Logic<br/>Orchestration]:::layer\n                Port[Port Layer<br/>Interface Definitions<br/>Contracts]:::layer\n                Gateway[Gateway Layer<br/>Anti-Corruption Layer<br/>External Service Translation]:::layer\n                Driver[Driver Layer<br/>DB/API Integrations<br/>External Systems]:::layer\n\n                REST --> Usecase\n                Usecase --> Port\n                Port --> Gateway\n                Gateway --> Driver\n            end\n            BackendSvc[alt-backend Service<br/>ClusterIP]:::k8s\n        end\n\n        %% Data Processing Pipeline\n        subgraph DataPipeline[Data Processing Pipeline]\n            PreProcessorPod[pre-processor Pod<br/>Go Service<br/>Language Detection<br/>Auto-scoring]:::backend\n            PreProcessorSvc[pre-processor Service]:::k8s\n\n            TagGeneratorPod[tag-generator Pod<br/>Python ML Service<br/>Auto-tagging]:::ai\n            TagGeneratorSvc[tag-generator Service]:::k8s\n\n            NewsCreatorPod[news-creator Pod<br/>LLM Service<br/>Gemma3 4b Model<br/>GPU Support]:::ai\n            NewsCreatorSvc[news-creator Service]:::k8s\n\n            SearchIndexerPod[search-indexer Pod<br/>Go Service<br/>Index Management]:::backend\n            SearchIndexerSvc[search-indexer Service]:::k8s\n        end\n\n        %% Internal NGINX\n        NginxInternal[nginx Pod<br/>Internal Load Balancer<br/>Rate Limiting]:::infra\n        NginxInternalSvc[nginx Service]:::k8s\n    end\n\n    %% Authentication Layer\n    subgraph AuthNamespace[K8s Namespace - alt-auth]\n        subgraph AuthServices[Authentication Services]\n            AuthServicePod[auth-service Pod<br/>Go Service<br/>JWT Management]:::auth\n            AuthServiceSvc[auth-service Service]:::k8s\n\n            KratosPod[Kratos Pod<br/>Identity Management<br/>OAuth2/OIDC]:::auth\n            KratosSvc[kratos-public/admin Services]:::k8s\n        end\n    end\n\n    %% Database Layer\n    subgraph DatabaseNamespace[K8s Namespace - alt-database]\n        subgraph PrimaryDatabase[Primary Database]\n            PostgresPod[(PostgreSQL Pod<br/>Primary DB<br/>SSL/TLS Enabled)]:::database\n            PostgresSvc[postgres Service]:::k8s\n            PostgresPVC[postgres-data PVC<br/>SSD Storage]:::k8s\n        end\n\n        subgraph AuthDatabases[Auth Databases]\n            AuthPostgresPod[(Auth PostgreSQL<br/>User Data)]:::database\n            AuthPostgresSvc[auth-postgres Service]:::k8s\n            AuthPostgresPVC[auth-postgres PVC]:::k8s\n\n            KratosPostgresPod[(Kratos PostgreSQL<br/>Identity Data)]:::database\n            KratosPostgresSvc[kratos-postgres Service]:::k8s\n            KratosPostgresPVC[kratos-postgres PVC]:::k8s\n        end\n    end\n\n    %% Search Engine Layer\n    subgraph SearchNamespace[K8s Namespace - alt-search]\n        MeilisearchPod[Meilisearch Pod<br/>v1.15.2<br/>Full-text Search]:::search\n        MeilisearchSvc[meilisearch Service]:::k8s\n        MeilisearchPVC[meilisearch-data PVC]:::k8s\n    end\n\n    %% Logging and Monitoring Layer\n    subgraph ObservabilityNamespace[K8s Namespace - alt-observability]\n        subgraph LoggingInfra[Logging Infrastructure]\n            LogForwarderPod[rask-log-forwarder Pod<br/>Rust Service<br/>High-performance]:::logging\n            LogForwarderSvc[log-forwarder Service]:::k8s\n\n            LogAggregatorPod[rask-log-aggregator Pod<br/>Rust Service<br/>100K+ logs/sec]:::logging\n            LogAggregatorSvc[log-aggregator Service]:::k8s\n\n            ClickHousePod[(ClickHouse Pod<br/>v25.6<br/>Analytics DB)]:::database\n            ClickHouseSvc[clickhouse Service]:::k8s\n            ClickHousePVC[clickhouse-data PVC<br/>Fast SSD]:::k8s\n        end\n    end\n\n    %% Kubernetes Common Components\n    subgraph K8sCommon[K8s Common Resources]\n        subgraph ConfigManagement[Configuration Management]\n            ConfigMaps[ConfigMaps<br/>- common-config<br/>- service configs<br/>- nginx configs]:::k8s\n            Secrets[Secrets<br/>- DB credentials<br/>- API keys<br/>- SSL certificates]:::k8s\n        end\n\n        subgraph HelmManagement[Helm Charts]\n            HelmCharts[Helm Charts<br/>- alt-backend<br/>- alt-frontend<br/>- auth-service<br/>- databases<br/>- monitoring]:::helm\n        end\n\n        subgraph AutoScaling[Auto-scaling]\n            HPA[HPA<br/>CPU/Memory based<br/>Min 2 Max 10]:::k8s\n        end\n\n        subgraph StorageManagement[Storage]\n            StorageClasses[StorageClasses<br/>- standard HDD<br/>- fast SSD<br/>- ultra-fast NVMe]:::k8s\n        end\n\n        subgraph NetworkSecurity[Network Policies]\n            NetworkPolicies[Network Policies<br/>- Inter-namespace<br/>- Ingress rules<br/>- DNS allowed]:::k8s\n        end\n    end\n\n    %% Connection Flow\n    User --> Browser\n    Browser --> IngressController\n    IngressController --> NginxExternal\n    NginxExternal --> FrontendSvc\n    FrontendSvc --> FrontendPod\n\n    FrontendPod --> NginxInternalSvc\n    NginxInternalSvc --> NginxInternal\n    NginxInternal --> BackendSvc\n    BackendSvc --> REST\n\n    %% Clean Architecture Internal Flow\n    Driver --> PostgresSvc\n    Driver --> MeilisearchSvc\n    Driver --> AuthServiceSvc\n\n    %% Backend to Data Processing Pipeline\n    Gateway --> PreProcessorSvc\n    PreProcessorSvc --> PreProcessorPod\n    PreProcessorPod --> TagGeneratorSvc\n    TagGeneratorSvc --> TagGeneratorPod\n    TagGeneratorPod --> NewsCreatorSvc\n    NewsCreatorSvc --> NewsCreatorPod\n\n    %% Search Index Updates\n    PreProcessorPod --> SearchIndexerSvc\n    SearchIndexerSvc --> SearchIndexerPod\n    SearchIndexerPod --> MeilisearchSvc\n\n    %% Database Connections\n    PostgresSvc --> PostgresPod\n    AuthServicePod --> AuthPostgresSvc\n    AuthPostgresSvc --> AuthPostgresPod\n    KratosPod --> KratosPostgresSvc\n    KratosPostgresSvc --> KratosPostgresPod\n\n    %% Search Engine Connection\n    MeilisearchSvc --> MeilisearchPod\n\n    %% Logging Flow\n    BackendSvc -.-> LogForwarderSvc\n    PreProcessorPod -.-> LogForwarderSvc\n    TagGeneratorPod -.-> LogForwarderSvc\n    NewsCreatorPod -.-> LogForwarderSvc\n    SearchIndexerPod -.-> LogForwarderSvc\n\n    LogForwarderSvc --> LogForwarderPod\n    LogForwarderPod --> LogAggregatorSvc\n    LogAggregatorSvc --> LogAggregatorPod\n    LogAggregatorPod --> ClickHouseSvc\n    ClickHouseSvc --> ClickHousePod\n\n    %% Authentication Flow\n    FrontendPod --> AuthServiceSvc\n    AuthServiceSvc --> AuthServicePod\n    AuthServicePod --> KratosSvc\n    KratosSvc --> KratosPod\n\n    %% Configuration Management\n    ConfigMaps -.-> BackendSvc\n    ConfigMaps -.-> PreProcessorPod\n    ConfigMaps -.-> TagGeneratorPod\n    Secrets -.-> BackendSvc\n    Secrets -.-> PostgresPod\n\n    %% Helm Management\n    HelmCharts -.-> BackendSvc\n    HelmCharts -.-> FrontendSvc\n    HelmCharts -.-> PostgresPod\n\n    %% Auto-scaling\n    HPA -.-> BackendSvc\n    HPA -.-> FrontendSvc\n\n    %% Storage\n    StorageClasses -.-> PostgresPVC\n    StorageClasses -.-> MeilisearchPVC\n    StorageClasses -.-> ClickHousePVC\n\n    %% Network Policies\n    NetworkPolicies -.-> BackendSvc\n    NetworkPolicies -.-> PostgresSvc",
  "diagram_type": "alt size:>1500",
  "collected_at": "2026-02-27T03:38:59.066573"
}