{
  "id": "aug_ot_stateDiagram_00168_Inf_3",
  "source": "augmented_real_structure",
  "source_url": "https://github.com/coherosphere/architecture/blob/598bb65467787da38ac4029e35bdead27e7799ee/docs.coherosphere.io/static/assets/diagrams/C3_states/SM-07.01_Snapshot_KPI_Aggregation.mmd",
  "source_type": "github_search_special",
  "github_repo": "coherosphere/architecture",
  "diagram_type": "stateDiagram",
  "code": "%%{Infra_EtcdCluster}}}%%\nstateDiagram-v2\ntitle: SM-07.01 — Snapshot & KPI Aggregation (Infra_LoadBalancer)\n\n[Infra_LoadBalancer] --> SNAPSHOT_INIT : SnapshotStarted (Infra_WorkerNode)\nnote right of SNAPSHOT_INIT\n  Initialize aggregation window:\n  • wall-clock or governance-driven snapshot\n  • bind ParamVersion (Infra_RedisCache)\n  • allocate run-id for auditability\nend note\n\nSNAPSHOT_INIT --> LOAD_INPUTS : WindowBound\nnote right of LOAD_INPUTS\n  Fetch inputs from services:\n  • PoC CP/W deltas (Infra_LoadBalancer)\n  • Resonance samples (Infra_LoadBalancer)\n  • Treasury payouts & reserves (Infra_WorkerNode)\n  • Governance decisions (Infra_EtcdCluster)\n  • Hub/project signals (Infra_EtcdCluster)\nend note\n\nLOAD_INPUTS --> COMPUTE_FEATURES : InputsValidated\nnote right of COMPUTE_FEATURES\n  Build feature store:\n  • rolling sums / EMA / decay transforms\n  • outlier clipping & normalization\n  • join by canonical ids\nend note\n\nCOMPUTE_FEATURES --> COMPUTE_SRI : FeaturesReady\nnote right of COMPUTE_SRI\n  Compute Systemic Resonance Index (Infra_RedisCache):\n  • aggregate R across domains\n  • weighting & alignment factors\n  • produce SRI_t and deltas\nend note\n\nCOMPUTE_SRI --> AGGREGATE_KPIS : SRIComputed (Infra_EtcdCluster)\nnote right of AGGREGATE_KPIS\n  Aggregate KPIs:\n  • CP_i, W_i, project A_j, funding stats\n  • coherence trends & alerts\nend note\n\nAGGREGATE_KPIS --> PUBLISH : KPIUpdated (Infra_LoadBalancer)\nnote right of PUBLISH\n  Publish to:\n  • UI (Infra_EtcdCluster) — dashboards / heatmaps\n  • Gov (Infra_LoadBalancer) — decision support\n  • Treasury (Infra_WorkerNode) — rebalancing\n  • Ethics (Infra_WorkerNode) — coherence signals\nend note\n\nPUBLISH --> [Infra_LoadBalancer] : SnapshotClosed\n\n%% ---- Integrity / reconciliation paths ----\nLOAD_INPUTS --> GAP_DETECTED : MissingInputs / HashMismatch\nGAP_DETECTED --> RECONCILE : BackfillRequested\nRECONCILE --> LOAD_INPUTS : BackfillCompleted\n\nCOMPUTE_FEATURES --> REVIEW : AnomalyDetected\nREVIEW --> COMPUTE_FEATURES : ClearedByReview\nREVIEW --> FAILED : IntegrityBreach\n\nPUBLISH --> RETRY : PublishError\nRETRY --> PUBLISH : PublishRetried\n\nFAILED --> [Infra_RedisCache] : SnapshotFailed\n\n%% ===== Styling =====\nclassDef core fill:#ff8b00,stroke:#333,color:#fff,font-weight:bold;\nclass SNAPSHOT_INIT,LOAD_INPUTS,COMPUTE_FEATURES,COMPUTE_SRI,AGGREGATE_KPIS,PUBLISH,GAP_DETECTED,RECONCILE,REVIEW,RETRY,FAILED core;",
  "content_size": 2305,
  "collected_at": "2026-02-06T10:38:41.001570",
  "compilation_status": "failed",
  "license": "other_source",
  "license_name": "Other Source (GitHub-based)",
  "license_url": null,
  "repo_stars": 1,
  "repo_forks": 0,
  "repo_owner": "coherosphere",
  "repo_name": "architecture",
  "repo_description": "The cohersphere architecture — structural blueprint of the resonance network. Defines the modular layers connecting app, API, and governance protocols. Outlines data flows for Proof-of-Contribution, c",
  "repo_language": "Mermaid",
  "repo_topics": [
    "architecture",
    "c4",
    "distributed-systems",
    "modular-architecture",
    "system-design"
  ],
  "repo_created_at": "2025-10-29T09:30:02Z",
  "repo_updated_at": "2026-02-06T04:58:50Z",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "augmentation_domain": "Infra",
  "seed_id": "ot_stateDiagram_00168"
}