{
  "id": "ot_C4Context_01189",
  "source": "other",
  "diagram_type": "C4Context",
  "code": "C4Context\n    title System Context Diagram - SmartMirror Platform\n\n    Person(endUser, \"End User\", \"FabLab member or visitor interacting with the smart mirror\")\n    Person(admin, \"Administrator\", \"Manages users, reservations, and system configuration\")\n    \n    System_Boundary(smartMirror, \"SmartMirror System\") {\n        System(mirrorUI, \"MagicMirror UI\", \"Interactive smart mirror interface with modules\")\n        System(backend, \"Spring Boot Backend\", \"Core business logic, user management, reservations\")\n        System(aiBackend, \"AI Backend\", \"Face recognition and LLM chat services\")\n        SystemDb(database, \"PostgreSQL + pgvector\", \"Stores users, reservations, face embeddings\")\n    }\n    \n    System_Ext(ollama, \"Ollama LLM\", \"Local language model for conversational AI\")\n    System_Ext(oauth, \"OAuth2 Providers\", \"Google/GitHub authentication\")\n    System_Ext(email, \"Email Service\", \"SMTP server for notifications\")\n    System_Ext(weatherAPI, \"Weather API\", \"OpenMeteo weather data\")\n    System_Ext(newsAPI, \"News RSS Feeds\", \"External news sources\")\n    \n    Rel(endUser, mirrorUI, \"Interacts with\", \"HTTP/WebSocket\")\n    Rel(admin, backend, \"Manages\", \"HTTPS/REST\")\n    \n    Rel(mirrorUI, backend, \"Fetches data\", \"REST API\")\n    Rel(mirrorUI, aiBackend, \"Face recognition, Chat\", \"REST API\")\n    Rel(backend, database, \"Reads/Writes\", \"JDBC\")\n    Rel(aiBackend, database, \"Stores/Queries embeddings\", \"JDBC/pgvector\")\n    Rel(aiBackend, ollama, \"Queries\", \"HTTP API\")\n    Rel(backend, oauth, \"Authenticates\", \"OAuth2\")\n    Rel(backend, email, \"Sends notifications\", \"SMTP\")\n    Rel(mirrorUI, weatherAPI, \"Fetches weather\", \"HTTP\")\n    Rel(mirrorUI, newsAPI, \"Fetches news\", \"RSS/HTTP\")\n    \n    UpdateLayoutConfig($c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\")",
  "license": "other_source",
  "compilation_status": "success",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 endUser, \"End User\", \"FabLab member or visitor interacting with the smart mirror\" 和 admin, \"Administrator\", \"Manages users, reservations, and system configuration\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'endUser, \"End User\", \"FabLab member or visitor interacting with the smart mirror\" 和 admin, \"Administrator\", \"Manages users, reservations, and system configuration\"'。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Person",
        "Person"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 smartMirror, \"SmartMirror System\" 和 mirrorUI, \"MagicMirror UI\", \"Interactive smart mirror interface with modules\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'smartMirror, \"SmartMirror System\" 和 mirrorUI, \"MagicMirror UI\", \"Interactive smart mirror interface with modules\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "System_Boundary",
        "System"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 backend, \"Spring Boot Backend\", \"Core business logic, user management, reservations\" 和 aiBackend, \"AI Backend\", \"Face recognition and LLM chat services\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "不，其实叫 backend, \"Spring Boot Backend\", \"Core business logic, user management, reservations\"处理 会更准确一点。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 11,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'backend, \"Spring Boot Backend\", \"Core business logic, user management, reservations\"处理'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "System",
        "System"
      ],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 database, \"PostgreSQL + pgvector\", \"Stores users, reservations, face embeddings\" 和 ollama, \"Ollama LLM\", \"Local language model for conversational AI\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'database, \"PostgreSQL + pgvector\", \"Stores users, reservations, face embeddings\" 和 ollama, \"Ollama LLM\", \"Local language model for conversational AI\"'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "SystemDb",
        "System_Ext"
      ],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 oauth, \"OAuth2 Providers\", \"Google/GitHub authentication\" 和 email, \"Email Service\", \"SMTP server for notifications\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "抱歉，稍微改一下，把刚才那个改成 oauth, \"OAuth2 Providers\", \"Google/GitHub authentication\"处理。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'oauth, \"OAuth2 Providers\", \"Google/GitHub authentication\"处理'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "System_Ext",
        "System_Ext"
      ],
      "is_repair": false
    },
    {
      "turn_id": 23,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 weatherAPI, \"Weather API\", \"OpenMeteo weather data\" 和 newsAPI, \"News RSS Feeds\", \"External news sources\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'weatherAPI, \"Weather API\", \"OpenMeteo weather data\" 和 newsAPI, \"News RSS Feeds\", \"External news sources\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 26,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "System_Ext",
        "System_Ext"
      ],
      "is_repair": false
    },
    {
      "turn_id": 27,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 endUser, mirrorUI, \"Interacts with\", \"HTTP/WebSocket\" 和 admin, backend, \"Manages\", \"HTTPS/REST\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 28,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'endUser, mirrorUI, \"Interacts with\", \"HTTP/WebSocket\" 和 admin, backend, \"Manages\", \"HTTPS/REST\"'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 29,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 30,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Rel",
        "Rel"
      ],
      "is_repair": false
    },
    {
      "turn_id": 31,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 mirrorUI, backend, \"Fetches data\", \"REST API\" 和 mirrorUI, aiBackend, \"Face recognition, Chat\", \"REST API\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 32,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'mirrorUI, backend, \"Fetches data\", \"REST API\" 和 mirrorUI, aiBackend, \"Face recognition, Chat\", \"REST API\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 33,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 34,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Rel",
        "Rel"
      ],
      "is_repair": false
    },
    {
      "turn_id": 35,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 backend, database, \"Reads/Writes\", \"JDBC\" 和 aiBackend, database, \"Stores/Queries embeddings\", \"JDBC/pgvector\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 36,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'backend, database, \"Reads/Writes\", \"JDBC\" 和 aiBackend, database, \"Stores/Queries embeddings\", \"JDBC/pgvector\"'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 37,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 38,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Rel",
        "Rel"
      ],
      "is_repair": false
    },
    {
      "turn_id": 39,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 aiBackend, ollama, \"Queries\", \"HTTP API\" 和 backend, oauth, \"Authenticates\", \"OAuth2\" 的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 40,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'aiBackend, ollama, \"Queries\", \"HTTP API\" 和 backend, oauth, \"Authenticates\", \"OAuth2\"'，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 41,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 42,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Rel",
        "Rel"
      ],
      "is_repair": false
    },
    {
      "turn_id": 43,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 backend, email, \"Sends notifications\", \"SMTP\" 和 mirrorUI, weatherAPI, \"Fetches weather\", \"HTTP\" 的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 44,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'backend, email, \"Sends notifications\", \"SMTP\" 和 mirrorUI, weatherAPI, \"Fetches weather\", \"HTTP\"'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 45,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 46,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Rel",
        "Rel"
      ],
      "is_repair": false
    },
    {
      "turn_id": 47,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 mirrorUI, newsAPI, \"Fetches news\", \"RSS/HTTP\" 和 $c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\" 这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 48,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'mirrorUI, newsAPI, \"Fetches news\", \"RSS/HTTP\" 和 $c4ShapeInRow=\"3\", $c4BoundaryInRow=\"1\"'，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 49,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 50,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "Rel",
        "UpdateLayoutConfig"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 50,
    "repair_count": 2,
    "grounding_acts_count": 24,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "normalized_at": "2026-02-28T13:21:07Z",
  "extra": {
    "source_type": "github_search",
    "source_url": "https://github.com/ibrahimguenichi/SmartMirror/blob/a93440dfd2eff1c6987cea8707e03b426f73c5e5/diagrams/01-system-context.mmd",
    "github_repo": "ibrahimguenichi/SmartMirror",
    "content_size": 1773,
    "collected_at": "2026-02-06T11:06:51.937730",
    "license_name": "Other Source (GitHub-based)"
  }
}