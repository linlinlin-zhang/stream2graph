{
  "id": "gh_er_02317",
  "source": "github",
  "diagram_type": "er",
  "code": "erDiagram\n    net {\n        string net_uuid PK\n        string tow_uuid FK\n        string side\n        float std_haul_factor\n        float vol_sampled_m3\n        float prop_sorted\n        float smallplankton\n        float totalplankton\n    }\n    \n    tow {\n        string tow_uuid PK\n        string site_uuid FK\n        string tow_type_key FK\n        int tow_number\n        datetime time_start\n    }\n    \n    site {\n        string site_uuid PK\n        string cruise_uuid FK\n        string orderocc\n        float longitude\n        float latitude\n        string line\n        string station\n    }\n    \n    cruise {\n        string cruise_uuid PK\n        string ship_key FK\n        string date_ym\n    }\n    \n    ship {\n        string ship_key PK\n        string ship_name\n        string ship_nodc\n    }\n    \n    tow_type {\n        string tow_type_key PK\n        string description\n    }\n    \n    species {\n        string species_id PK\n        string scientific_name\n        string itis_id\n        string worms_id\n        string common_name\n    }\n    \n    larvastage {\n        string net_uuid FK\n        string species_id FK\n        string stage\n        int tally\n    }\n    \n    egg {\n        string net_uuid FK\n        string species_id FK\n        int tally\n    }\n    \n    eggstage {\n        string net_uuid FK\n        string species_id FK\n        string stage\n        int tally\n    }\n    \n    larva {\n        string net_uuid FK\n        string species_id FK\n        int tally\n    }\n    \n    larvasize {\n        string net_uuid FK\n        string species_id FK\n        float length_mm\n        int tally\n    }\n\n    %% Relationships\n    net ||--o{ larvastage : \"has\"\n    net ||--o{ egg : \"has\"\n    net ||--o{ eggstage : \"has\"\n    net ||--o{ larva : \"has\"\n    net ||--o{ larvasize : \"has\"\n    \n    species ||--o{ larvastage : \"identified_as\"\n    species ||--o{ egg : \"identified_as\"\n    species ||--o{ eggstage : \"identified_as\"\n    species ||--o{ larva : \"identified_as\"\n    species ||--o{ larvasize : \"identified_as\"\n    \n    tow ||--o{ net : \"uses\"\n    site ||--o{ tow : \"conducted_at\"\n    cruise ||--o{ site : \"visits\"\n    ship ||--o{ cruise : \"operates\"\n    tow_type ||--o{ tow : \"defines\"",
  "license": "mit",
  "compilation_status": "success",
  "cscw_dialogue": [
    {
      "turn_id": 1,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "这里必须包含 string net_uuid PK\n        string tow_uuid FK\n        string side\n        float std_haul_factor\n        float vol_sampled_m3\n        float prop_sorted\n        float smallplankton\n        float totalplankton\n     和 string tow_uuid PK\n        string site_uuid FK\n        string tow_type_key FK\n        int tow_number\n        datetime time_start\n     这一块。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 2,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'string net_uuid PK\n        string tow_uuid FK\n        string side\n        float std_haul_factor\n        float vol_sampled_m3\n        float prop_sorted\n        float smallplankton\n        float totalplankton\n     和 string tow_uuid PK\n        string site_uuid FK\n        string tow_type_key FK\n        int tow_number\n        datetime time_start\n    '。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 3,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 4,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "net",
        "tow"
      ],
      "is_repair": false
    },
    {
      "turn_id": 5,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "接下来是关于 string site_uuid PK\n        string cruise_uuid FK\n        string orderocc\n        float longitude\n        float latitude\n        string line\n        string station\n     和 string cruise_uuid PK\n        string ship_key FK\n        string date_ym\n     的逻辑。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 6,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'string site_uuid PK\n        string cruise_uuid FK\n        string orderocc\n        float longitude\n        float latitude\n        string line\n        string station\n     和 string cruise_uuid PK\n        string ship_key FK\n        string date_ym\n    '，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 7,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "可以，继续吧。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 8,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "site",
        "cruise"
      ],
      "is_repair": false
    },
    {
      "turn_id": 9,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 string ship_key PK\n        string ship_name\n        string ship_nodc\n     和 string tow_type_key PK\n        string description\n     的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 10,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "我把它加进去了，标签显示为 'string ship_key PK\n        string ship_name\n        string ship_nodc\n     和 string tow_type_key PK\n        string description\n    '，你看看合适吗？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 11,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "对的，就这样。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 12,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "ship",
        "tow_type"
      ],
      "is_repair": false
    },
    {
      "turn_id": 13,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 string species_id PK\n        string scientific_name\n        string itis_id\n        string worms_id\n        string common_name\n     和 string net_uuid FK\n        string species_id FK\n        string stage\n        int tally\n     的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 14,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "收到。这是不是一个判断条件？我暂时写成 'string species_id PK\n        string scientific_name\n        string itis_id\n        string worms_id\n        string common_name\n     和 string net_uuid FK\n        string species_id FK\n        string stage\n        int tally\n    '。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 15,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 16,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "species",
        "larvastage"
      ],
      "is_repair": false
    },
    {
      "turn_id": 17,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "用户在这里会遇到 string net_uuid FK\n        string species_id FK\n        int tally\n     和 string net_uuid FK\n        string species_id FK\n        string stage\n        int tally\n     的分支。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 18,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "好的，我把它画成一个矩形框，名字叫 'string net_uuid FK\n        string species_id FK\n        int tally\n     和 string net_uuid FK\n        string species_id FK\n        string stage\n        int tally\n    '，对吧？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 19,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "嗯，这样看起来很清晰。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 20,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "egg",
        "eggstage"
      ],
      "is_repair": false
    },
    {
      "turn_id": 21,
      "role": "Domain_Expert",
      "action_type": "propose",
      "utterance": "我们需要加一个处理 string net_uuid FK\n        string species_id FK\n        int tally\n     和 string net_uuid FK\n        string species_id FK\n        float length_mm\n        int tally\n     的环节。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 22,
      "role": "Domain_Expert",
      "action_type": "repair",
      "utterance": "等等，我重新想了一下，应该是 string net_uuid FK\n        string species_id FK\n        int tally\n    处理 才对。",
      "elements_involved": [],
      "is_repair": true
    },
    {
      "turn_id": 23,
      "role": "Diagram_Editor",
      "action_type": "clarify",
      "utterance": "明白，所以它是承接上一步的，内容是 'string net_uuid FK\n        string species_id FK\n        int tally\n    处理'？",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 24,
      "role": "Domain_Expert",
      "action_type": "confirm",
      "utterance": "没问题。",
      "elements_involved": [],
      "is_repair": false
    },
    {
      "turn_id": 25,
      "role": "Diagram_Editor",
      "action_type": "execute",
      "utterance": "[系统日志: Editor 更新了图表代码以反映上述结构]",
      "elements_involved": [
        "larva",
        "larvasize"
      ],
      "is_repair": false
    }
  ],
  "dialogue_metadata": {
    "total_turns": 25,
    "repair_count": 1,
    "grounding_acts_count": 12,
    "theoretical_framework": "Grounding in Communication (Clark & Brennan, 1991)"
  },
  "normalized_at": "2026-02-28T13:21:06Z",
  "extra": {
    "source_url": "https://github.com/CalCOFI/workflows/blob/ea9dbe5337df3959037ab7d12ab27c1e3764bb51/diagrams/calcofi_erd.mmd",
    "github_repo": "CalCOFI/workflows",
    "github_file_path": "diagrams/calcofi_erd.mmd",
    "content_size": 2182,
    "collected_at": "2026-02-06T02:02:34.130803",
    "license_name": "MIT License",
    "license_url": "https://api.github.com/licenses/mit",
    "repo_owner": "CalCOFI",
    "repo_name": "workflows",
    "repo_stars": 0,
    "repo_forks": 0,
    "repo_topics": [],
    "repo_language": "HTML",
    "repo_description": "helper scripts in R for common workflows",
    "repo_created_at": "2022-01-14T00:03:30Z",
    "repo_updated_at": "2026-02-05T23:05:54Z"
  }
}