{
  "id": "gh_flowchart_00285",
  "source": "github",
  "source_url": "https://github.com/aws-samples/sample-volumeScaler/blob/2a116f13d4fb05455681177bbcde93783fdfb5a8/flowchart.mmd",
  "github_repo": "aws-samples/sample-volumeScaler",
  "github_file_path": "flowchart.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TD\n    A[Start VolumeScaler Operator]\n    B[Initialize Kubernetes Clients & Recorder]\n    C[Load Kubernetes Configuration - inClusterOrKubeconfig]\n    D[Enter mainLoop]\n    \n    E[Discover Local PVC Mounts - getPVCUIDsFromLocalMounts]\n    F[List All Cluster PVCs]\n    G[List VolumeScaler CRs]\n    \n    H[For Each PVC with an Associated VolumeScaler]\n    I[Parse VolumeScaler Spec Fields - Threshold, Scale, MaxSize]\n    J[Convert PVC and CR Sizes to GiB]\n    K[Measure Disk Usage via df - measureUsage]\n    \n    L{Has PVC reached Max Size?}\n    M{Is a Resize Operation In Progress?}\n    N{Resize Completed?}\n    O{Usage exceeds Threshold?}\n    \n    P[Calculate New Size using Current Size and Scale Percentage]\n    Q[Cap New Size at Maximum Allowed Size if Needed]\n    R[Patch PVC Spec to Request New Size]\n    S[Update VolumeScaler Status with resizeInProgress, scaledAt, lastRequestedSize, and reachedMaxSize]\n    \n    T[Emit Events for Each Significant Action or Error]\n    U[Sleep for 60 Seconds]\n    V[Repeat mainLoop]\n    \n    %% Flow connections\n    A --> B\n    B --> C\n    C --> D\n    D --> E\n    E --> F\n    F --> G\n    G --> H\n    H --> I\n    I --> J\n    J --> K\n    K --> L\n    \n    L -- Yes --> T\n    L -- No --> M\n    M -- Yes --> N\n    N -- Completed --> S\n    N -- Still in progress --> T\n    M -- No --> O\n    O -- Usage High --> P\n    P --> Q\n    Q --> R\n    R --> T\n    O -- Usage low --> T\n    \n    T --> U\n    U --> V\n    V --> D",
  "content_size": 1459,
  "collected_at": "2026-02-06T01:43:09.528886",
  "compilation_status": "failed",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 4,
  "repo_forks": 1,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}