{
  "id": "gl_block-beta_00244",
  "source": "gitlab",
  "source_url": "https://github.com/SNYCFIRE-CORE/letta-mcp-server/blob/82a35bc02692893e125835ef6d83e252b9f9d987/diagrams/src/memory-lifecycle.mmd",
  "source_note": "collected_from_github_additional",
  "github_repo": "SNYCFIRE-CORE/letta-mcp-server",
  "diagram_type": "block-beta",
  "code": "sequenceDiagram\n    participant U as User\n    participant C as Claude\n    participant MCP as MCP Server\n    participant API as Letta API\n    participant A as Agent\n    participant M as Memory Store\n    \n    %% Create Memory Block\n    U->>C: \"Remember project context\"\n    C->>MCP: letta_create_memory_block\n    MCP->>API: POST /agents/{id}/memory\n    API->>M: Create Block\n    M-->>API: Block ID\n    API-->>MCP: Success\n    MCP-->>C: Memory Created\n    C-->>U: âœ… Stored\n    \n    %% Update Memory\n    U->>C: \"Update Q4 goals\"\n    C->>MCP: letta_update_memory\n    MCP->>API: PATCH /memory/{block_id}\n    API->>M: Update Content\n    M->>A: Notify Change\n    A-->>M: Acknowledged\n    M-->>API: Updated\n    API-->>MCP: Success\n    MCP-->>C: Memory Updated\n    C-->>U: âœ… Updated\n    \n    %% Search Memory\n    U->>C: \"What were our goals?\"\n    C->>MCP: letta_search_memory\n    MCP->>API: GET /memory/search\n    API->>M: Vector Search\n    M-->>API: Relevant Blocks\n    API-->>MCP: Results\n    MCP-->>C: Memory Found\n    C-->>U: ğŸ“‹ Q4 Goals: [details]\n    \n    %% Agent Uses Memory\n    U->>C: \"Plan next sprint\"\n    C->>MCP: letta_send_message\n    MCP->>API: POST /messages\n    API->>A: Process Message\n    A->>M: Retrieve Context\n    M-->>A: All Memory Blocks\n    A->>A: Generate Plan\n    A-->>API: Response\n    API-->>MCP: Agent Reply\n    MCP-->>C: Formatted Response\n    C-->>U: ğŸ“… Sprint Plan\n    \n    Note over M: Persistent across<br/>all sessions\n    Note over A: Stateful with<br/>full context",
  "content_size": 1490,
  "collected_at": "2026-02-06T14:05:16.415043",
  "compilation_status": "failed",
  "license": "gitlab_repo",
  "license_name": "GitLab Repository",
  "license_url": "https://gitlab.com",
  "compilation_error": "[WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚"
}