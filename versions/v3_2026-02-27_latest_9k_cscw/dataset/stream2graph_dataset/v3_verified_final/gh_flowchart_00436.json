{
  "id": "gh_flowchart_00436",
  "source": "github",
  "source_url": "https://github.com/astenios/ledger/blob/c6579e87e4ae85da3022e459922a1269ef0e50e1/docs/diagrams/async-flow.mmd",
  "github_repo": "astenios/ledger",
  "github_file_path": "docs/diagrams/async-flow.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TB\n    subgraph Clients[\"Clients\"]\n        C1[Web/Mobile App]\n        C2[Internal Services]\n        C3[Batch Systems]\n    end\n\n    subgraph Ingress[\"Ingress Layer\"]\n        REST[REST API<br/>POST /v1/transactions]\n        CONSUMER[Kafka Consumer<br/>transactions.requests]\n    end\n\n    subgraph Processing[\"Transaction Processing\"]\n        WORKER[TransactionWorker<br/>CreateTransactionUseCase]\n    end\n\n    subgraph DB[\"PostgreSQL\"]\n        TXN[(transaction)]\n        LEDGER[(ledger_entry)]\n        OUTBOX[(outbox)]\n    end\n\n    subgraph CDC[\"CDC Layer\"]\n        DEB[Debezium]\n    end\n\n    subgraph EventTopic[\"Kafka - Event Topics\"]\n        EVENTS[ledger.transactions]\n    end\n\n    subgraph Downstream[\"Downstream Services\"]\n        NOTIF[Notifications]\n        FRAUD[Fraud Detection]\n        REWARDS[Rewards]\n    end\n\n    %% Sync path (REST)\n    C1 -->|\"Sync\"| REST\n    REST -->|\"Call\"| WORKER\n    REST -.->|\"Response\"| C1\n\n    %% Async path (Kafka)\n    C2 & C3 -->|\"Async\"| CONSUMER\n    CONSUMER -->|\"Call\"| WORKER\n\n    %% Processing\n    WORKER -->|\"Persist\"| DB\n    TXN --- LEDGER --- OUTBOX\n\n    %% CDC to events\n    DEB -->|\"Read WAL\"| OUTBOX\n    DEB -->|\"Publish\"| EVENTS\n\n    %% Downstream\n    EVENTS --> NOTIF & FRAUD & REWARDS\n\n    %% Status polling\n    C1 -.->|\"Poll status\"| REST\n",
  "content_size": 1303,
  "collected_at": "2026-02-06T01:44:04.467200",
  "compilation_status": "failed",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。"
}