{
  "id": "gh_class_01144",
  "source": "github",
  "source_url": "https://github.com/a38062an/hft-orderbook-benchmark/blob/f7a8e5e2727109298209aea57e9a3d570b77d417/docs/mapOrderBookStructure.mmd",
  "github_repo": "a38062an/hft-orderbook-benchmark",
  "github_file_path": "docs/mapOrderBookStructure.mmd",
  "diagram_type": "class",
  "code": "---\ntitle: MapOrderBook Data Structure Design\n---\nclassDiagram\n    %% Core Types and Enums\n    class Side {\n        <<enumeration>>\n        Buy\n        Sell\n    }\n    \n    class OrderType {\n        <<enumeration>>\n        Limit\n        Market\n    }\n    \n    %% Basic Types (type aliases)\n    class Types {\n        <<typedefs>>\n        OrderId: uint64_t\n        Price: uint64_t\n        Quantity: uint64_t\n        Timestamp: uint64_t\n    }\n    \n    %% Order Structure\n    class Order {\n        +OrderId id\n        +Price price\n        +Quantity quantity\n        +Side side\n        +OrderType type\n        +Timestamp timestamp\n    }\n    \n    %% Trade Structure\n    class Trade {\n        +OrderId buyOrderId\n        +OrderId sellOrderId\n        +Price price\n        +Quantity quantity\n        +Timestamp timestamp\n    }\n    \n    %% Order Location for Fast Lookup\n    class OrderLocation {\n        +bool isBuy\n        +Price price\n        +OrderList::iterator iterator\n    }\n    \n    %% STL Container Types\n    class OrderList {\n        <<std::list~Order~>>\n        +push_back(order)\n        +pop_front()\n        +erase(iterator)\n        +front() Order\n        +empty() bool\n    }\n    \n    class BidsMap {\n        <<std::map~Price, OrderList, greater~Price~~~>>\n        +operator[](price) OrderList\n        +begin() iterator\n        +erase(price)\n        +empty() bool\n    }\n    \n    class AsksMap {\n        <<std::map~Price, OrderList, less~Price~~~>>\n        +operator[](price) OrderList\n        +begin() iterator\n        +erase(price)\n        +empty() bool\n    }\n    \n    class OrderLookup {\n        <<std::unordered_map~OrderId, OrderLocation~>>\n        +operator[](orderId) OrderLocation\n        +find(orderId) iterator\n        +erase(orderId)\n    }\n    \n    %% Main Class\n    class MapOrderBook {\n        -BidsMap bids_\n        -AsksMap asks_\n        -OrderLookup orderLookup_\n        +addOrder(order) void\n        +cancelOrder(orderId) void\n        +modifyOrder(orderId, qty) void\n        +match() vector~Trade~\n        +getOrderCount() size_t\n        +getBestBid() Price\n        +getBestAsk() Price\n    }\n    \n    %% Relationships\n    Order --> Side : has\n    Order --> OrderType : has\n    Order --> Types : uses types\n    Trade --> Types : uses types\n    \n    OrderList \"1\" *-- \"*\" Order : contains FIFO\n    \n    BidsMap \"1\" *-- \"*\" OrderList : Price to List\n    AsksMap \"1\" *-- \"*\" OrderList : Price to List\n    \n    OrderLocation --> OrderList : points into\n    OrderLookup \"1\" *-- \"*\" OrderLocation : OrderId to Location\n    \n    MapOrderBook \"1\" *-- \"1\" BidsMap : owns\n    MapOrderBook \"1\" *-- \"1\" AsksMap : owns\n    MapOrderBook \"1\" *-- \"1\" OrderLookup : owns\n    MapOrderBook ..> Trade : creates\n    MapOrderBook ..> Order : processes\n    \n    %% Notes on Design Decisions\n    note for BidsMap \"std::map greater\nHighest bid first\nO(log n) insert/delete\"\n    \n    note for AsksMap \"std::map less\nLowest ask first\nO(log n) insert/delete\"\n    \n    note for OrderList \"std::list doubly-linked\nFIFO at each price\nO(1) push/pop/erase\"\n    \n    note for OrderLookup \"std::unordered_map\nO(1) lookup by OrderId\nEnables fast cancel/modify\"\n    \n    note for Order \"Price-time priority\nEach order tracked by ID\"\n    \n    note for MapOrderBook \"Add: O(log n)\nCancel: O(1) avg\nMatch: O(m)\nBest price: O(1) map.begin()\ngetBestBid/Ask: O(1)\"\n\n    %% Styling\n    classDef container fill:#e1f5ff,stroke:#0288d1,stroke-width:2px\n    classDef struct fill:#fff3e0,stroke:#f57c00,stroke-width:2px\n    classDef enum fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px\n    classDef core fill:#e8f5e9,stroke:#388e3c,stroke-width:3px\n    \n    class OrderList container\n    class BidsMap container\n    class AsksMap container\n    class OrderLookup container\n    class Order struct\n    class Trade struct\n    class OrderLocation struct\n    class Side enum\n    class OrderType enum\n    class MapOrderBook core\n",
  "content_size": 3885,
  "collected_at": "2026-02-06T01:53:36.096132",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0
}