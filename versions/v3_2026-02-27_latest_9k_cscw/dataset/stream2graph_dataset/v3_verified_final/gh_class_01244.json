{
  "id": "gh_class_01244",
  "source": "github",
  "source_url": "https://github.com/Kind-Wyllie-lab/saviour/blob/aa888732ff6e580762dba0cb5d7d26cd73d5df24/docs/module_class_diagram.mmd",
  "github_repo": "Kind-Wyllie-lab/saviour",
  "github_file_path": "docs/module_class_diagram.mmd",
  "diagram_type": "class",
  "code": "classDiagram\n    class Module {\n        - module_id: str\n        - module_type: str\n        - config_path: str\n        - recording_folder: str\n        - logger: logging.Logger\n        - config_manager: ModuleConfigManager\n        - export_manager: ExportManager\n        - communication_manager: ModuleCommunicationManager\n        - health_manager: ModuleHealthManager\n        - ptp_manager: PTPManager\n        - command_handler: ModuleCommandHandler\n        - service_manager: ModuleServiceManager\n        - session_manager: SessionManager\n        - callbacks: dict\n        - recording_session_id: str\n        - current_filename: str\n        - samplerate: Any\n        - recording_filetype: Any\n        - is_running: bool\n        - is_recording: bool\n        - is_streaming: bool\n        - start_time: Any\n        + __init__(module_type: str, config: dict = None, config_path: str = None)\n        + when_controller_discovered(controller_ip: str, controller_port: int)\n        + controller_disconnected()\n        + start_recording(experiment_name: str = None, duration: str = None) -> Optional[str]\n        + stop_recording() -> bool\n        + list_recordings()\n        + clear_recordings(filename: str = None, filenames: list = None, older_than: int = None, keep_latest: int = 0)\n        + export_recordings(filename: str, length: int = 0, destination, experiment_name: str = None)\n        + list_commands()\n        + start() -> bool\n        + stop() -> bool\n        + set_config(new_config: dict, persist: bool = False) -> bool\n        + generate_module_id(module_type: str) -> str\n    }\n    class ModuleConfigManager {\n        - config: dict\n        - logger: logging.Logger\n        + get(key: str, default=None)\n        + get_all() -> dict\n        + save_config() -> bool\n        + _merge_configs(base: dict, new: dict)\n    }\n    class ExportManager {\n        - module_id: str\n        - recording_folder: str\n        - config: dict\n        - logger: logging.Logger\n        + export_file(filename: str, destination, experiment_name: str = None) -> bool\n        + export_all_files(destination, experiment_name: str = None) -> bool\n        + unmount()\n    }\n    class ModuleCommunicationManager {\n        - logger: logging.Logger\n        - module_id: str\n        - config_manager: ModuleConfigManager\n        + connect(controller_ip: str, controller_port: int) -> bool\n        + start_command_listener() -> bool\n        + send_status(status: dict)\n        + cleanup()\n        + set_callbacks(callbacks: dict)\n    }\n    class ModuleHealthManager {\n        - logger: logging.Logger\n        - config_manager: ModuleConfigManager\n        - communication_manager: ModuleCommunicationManager\n        + get_health() -> dict\n        + start_heartbeats()\n        + stop_heartbeats()\n        + set_callbacks(callbacks: dict)\n    }\n    class PTPManager {\n        - logger: logging.Logger\n        - role: PTPRole\n        - running: bool\n        + start()\n        + stop()\n        + get_status() -> dict\n    }\n    class ModuleCommandHandler {\n        - logger: logging.Logger\n        - module_id: str\n        - module_type: str\n        - config_manager: ModuleConfigManager\n        - start_time: Any\n        + handle_command(command: dict)\n        + set_callbacks(callbacks: dict)\n        + cleanup()\n    }\n    class ModuleServiceManager {\n        - logger: logging.Logger\n        - module: Module\n        - controller_ip: str\n        - controller_port: int\n        + register_service() -> bool\n        + cleanup()\n    }\n    Module *-- ModuleConfigManager\n    Module *-- ExportManager\n    Module *-- ModuleCommunicationManager\n    Module *-- ModuleHealthManager\n    Module *-- PTPManager\n    Module *-- ModuleCommandHandler\n    Module *-- ModuleServiceManager",
  "content_size": 3745,
  "collected_at": "2026-02-06T01:55:02.078547",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "mit",
  "license_name": "MIT License",
  "license_url": "https://api.github.com/licenses/mit",
  "repo_stars": 1,
  "repo_forks": 1
}