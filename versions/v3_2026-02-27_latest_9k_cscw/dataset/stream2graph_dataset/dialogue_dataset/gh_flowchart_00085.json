{
  "id": "gh_flowchart_00085",
  "source": "github",
  "source_url": "https://github.com/Ribesh19/redis-azure-vecsim-app/blob/cb01576497f24c7feb2d897c6b9ccf8a3b8e2934/flowchart_system_deisgn.mmd",
  "github_repo": "Ribesh19/redis-azure-vecsim-app",
  "github_file_path": "flowchart_system_deisgn.mmd",
  "diagram_type": "flowchart",
  "code": "flowchart TB\n    %% Main Components\n    subgraph \"Frontend\"\n        UI[\"User Interface\"]\n        SemanticSearch[\"Semantic Search Button\"]\n        ImageSearch[\"Image Search Button\"]\n        ProductCard[\"Product Card Component\"]\n        ProductGrid[\"Product Grid\"]\n    end\n    \n    subgraph \"Backend\"\n        API[\"FastAPI Server\"]\n        Routes[\"API Routes\"]\n        Models[\"Data Models\"]\n        QueryBuilder[\"Query Builder\"]\n        ResultProcessor[\"Result Processor\"]\n    end\n    \n    subgraph \"Azure Cloud\"\n        subgraph \"Azure SQL Database\"\n            SQLdb[(Product Database)]\n            ChangeTracking[\"Change Tracking\"]\n        end\n        \n        subgraph \"Azure Function\"\n            SQLTrigger[\"SQL Trigger Function\"]\n            EmbeddingGenerator[\"Embedding Generator\"]\n            TextVectorCreator[\"Text Vector Creator\"]\n            ImageVectorCreator[\"Image Vector Creator\"]\n            RedisUpdater[\"Redis Updater\"]\n        end\n        \n        subgraph \"Azure Cache for Redis\"\n            RedisCache[(Redis Cache)]\n            VectorIndex[\"HNSW Vector Index\"]\n            ProductMetadata[\"Product Metadata\"]\n        end\n    end\n    \n    subgraph \"Initial Load\"\n        JupyterNb[\"Jupyter Notebook\"]\n        SentenceTransformer[\"Sentence Transformer\"]\n        Img2Vec[\"Img2Vec ResNet-18\"]\n        VectorFiles[\"Vector JSON Files\"]\n    end\n    \n    %% Connections\n    UI --> ProductGrid\n    ProductGrid --> ProductCard\n    ProductCard --> SemanticSearch\n    ProductCard --> ImageSearch\n    \n    SemanticSearch -- \"API Call\" --> Routes\n    ImageSearch -- \"API Call\" --> Routes\n    \n    Routes --> QueryBuilder\n    QueryBuilder --> VectorIndex\n    VectorIndex -- \"Search Results\" --> ResultProcessor\n    ResultProcessor --> ProductMetadata\n    ResultProcessor -- \"Similar Products\" --> UI\n    \n    %% Initial Data Loading Flow\n    JupyterNb -- \"Extract Data\" --> SQLdb\n    JupyterNb -- \"Process Text\" --> SentenceTransformer\n    JupyterNb -- \"Process Images\" --> Img2Vec\n    SentenceTransformer -- \"768-dim vectors\" --> VectorFiles\n    Img2Vec -- \"512-dim vectors\" --> VectorFiles\n    VectorFiles -- \"Load\" --> RedisCache\n    \n    %% Prefetch Caching Flow\n    SQLdb -- \"Product Update\" --> ChangeTracking\n    ChangeTracking -- \"Trigger\" --> SQLTrigger\n    SQLTrigger -- \"Get Changed Products\" --> EmbeddingGenerator\n    EmbeddingGenerator -- \"Process Text\" --> TextVectorCreator\n    EmbeddingGenerator -- \"Process Images\" --> ImageVectorCreator\n    TextVectorCreator -- \"New Text Vectors\" --> RedisUpdater\n    ImageVectorCreator -- \"New Image Vectors\" --> RedisUpdater\n    RedisUpdater -- \"Update Vectors\" --> RedisCache\n    RedisUpdater -- \"Update Metadata\" --> ProductMetadata\n    \n    %% Search Flow Process\n    subgraph \"Semantic Search Flow\"\n        S1[\"User clicks 'By Text' button\"]\n        S2[\"Frontend calls API with product_id\"]\n        S3[\"Backend retrieves product's text vector\"]\n        S4[\"Query Builder creates HNSW search with filters\"]\n        S5[\"Redis executes vector similarity search\"]\n        S6[\"Backend processes results\"]\n        S7[\"Frontend displays similar products\"]\n        \n        S1 --> S2 --> S3 --> S4 --> S5 --> S6 --> S7\n    end\n    \n    subgraph \"Image Search Flow\"\n        I1[\"User clicks 'By Image' button\"]\n        I2[\"Frontend calls API with product_id\"]\n        I3[\"Backend retrieves product's image vector\"]\n        I4[\"Query Builder creates HNSW search with filters\"]\n        I5[\"Redis executes vector similarity search\"]\n        I6[\"Backend processes results\"]\n        I7[\"Frontend displays similar products\"]\n        \n        I1 --> I2 --> I3 --> I4 --> I5 --> I6 --> I7\n    end\n    \n    subgraph \"Prefetch Caching Process\"\n        P1[\"Admin updates product in SQL Database\"]\n        P2[\"SQL Change Tracking detects update\"]\n        P3[\"Azure Function triggered with changed data\"]\n        P4[\"Function extracts product information\"]\n        P5[\"Function generates new text embedding\"]\n        P6[\"Function generates new image embedding\"]\n        P7[\"Function combines embeddings\"]\n        P8[\"Function updates Redis vector data\"]\n        P9[\"Function updates Redis product metadata\"]\n        P10[\"Vector index automatically updated\"]\n        \n        P1 --> P2 --> P3 --> P4 --> P5 & P6\n        P5 & P6 --> P7 --> P8 --> P9 --> P10\n    end\n    \n    subgraph \"HNSW Indexing Process\"\n        H1[\"Define image vector field (512-dim)\"]\n        H2[\"Define text vector field (768-dim)\"]\n        H3[\"Add tag fields (gender, category)\"]\n        H4[\"Create index with COSINE distance metric\"]\n        H5[\"Apply index to product_vector: keys\"]\n        \n        H1 & H2 --> H3 --> H4 --> H5\n    end\n    \n    %% Styling\n    classDef azure fill:#0072C6,color:white,stroke:#0072C6,stroke-width:2px\n    classDef redis fill:#DC382D,color:white,stroke:#DC382D,stroke-width:2px\n    classDef react fill:#61DAFB,color:black,stroke:#61DAFB,stroke-width:2px\n    classDef python fill:#3776AB,color:white,stroke:#3776AB,stroke-width:2px\n    classDef process fill:#FFF,color:black,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5\n    \n    class SQLdb,ChangeTracking,SQLTrigger,EmbeddingGenerator,TextVectorCreator,ImageVectorCreator,RedisUpdater azure\n    class RedisCache,VectorIndex,ProductMetadata redis\n    class UI,SemanticSearch,ImageSearch,ProductCard,ProductGrid react\n    class API,Routes,Models,QueryBuilder,ResultProcessor,JupyterNb,SentenceTransformer,Img2Vec python\n    class S1,S2,S3,S4,S5,S6,S7,I1,I2,I3,I4,I5,I6,I7,P1,P2,P3,P4,P5,P6,P7,P8,P9,P10,H1,H2,H3,H4,H5 process",
  "content_size": 5528,
  "collected_at": "2026-02-06T01:41:51.711053",
  "compilation_status": "failed",
  "license": "bsd-3-clause",
  "license_name": "BSD 3-Clause \"New\" or \"Revised\" License",
  "license_url": "https://api.github.com/licenses/bsd-3-clause",
  "repo_stars": 0,
  "repo_forks": 0,
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "dialogue": [
    {
      "turn_id": 1,
      "speaker": "Speaker_B",
      "utterance": "首先，我们需要定义流程的起点。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 15
    },
    {
      "turn_id": 2,
      "speaker": "Speaker_A",
      "utterance": "明白了，\"User Interface\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "UI"
      ],
      "timestamp_offset": 30
    },
    {
      "turn_id": 3,
      "speaker": "Speaker_B",
      "utterance": "我们可以将\"Semantic Search Button\"分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 45
    },
    {
      "turn_id": 4,
      "speaker": "Speaker_A",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 60
    },
    {
      "turn_id": 5,
      "speaker": "Speaker_B",
      "utterance": "从结构上看，我们有\"Semantic Search Button\"。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "SemanticSearch"
      ],
      "timestamp_offset": 75
    },
    {
      "turn_id": 6,
      "speaker": "Speaker_A",
      "utterance": "我们可以将\"Image Search Button\"、\"Product Card Component\"分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 90
    },
    {
      "turn_id": 7,
      "speaker": "Speaker_B",
      "utterance": "明白了，\"Image Search Button\"、\"Product Card Component\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 105
    },
    {
      "turn_id": 8,
      "speaker": "Speaker_A",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 120
    },
    {
      "turn_id": 9,
      "speaker": "Speaker_B",
      "utterance": "在\"Image Search Button\"、\"Product Card Component\"中，我们需要定义核心逻辑。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "ImageSearch",
        "ProductCard",
        "ProductGrid"
      ],
      "timestamp_offset": 135
    },
    {
      "turn_id": 10,
      "speaker": "Speaker_A",
      "utterance": "我们应该如何处理\"FastAPI Server\"？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 150
    },
    {
      "turn_id": 11,
      "speaker": "Speaker_B",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "API"
      ],
      "timestamp_offset": 165
    },
    {
      "turn_id": 12,
      "speaker": "Speaker_A",
      "utterance": "\"API Routes\"主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 180
    },
    {
      "turn_id": 13,
      "speaker": "Speaker_B",
      "utterance": "我的意思是\"API Routes\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "Routes"
      ],
      "timestamp_offset": 195
    },
    {
      "turn_id": 14,
      "speaker": "Speaker_A",
      "utterance": "我们应该如何处理\"Data Models\"？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 210
    },
    {
      "turn_id": 15,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 225
    },
    {
      "turn_id": 16,
      "speaker": "Speaker_A",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 240
    },
    {
      "turn_id": 17,
      "speaker": "Speaker_B",
      "utterance": "\"Data Models\"和另一个方案相比，优势在于...",
      "speech_act": "contrastive",
      "diagram_elements_added": [
        "Models"
      ],
      "timestamp_offset": 255
    },
    {
      "turn_id": 18,
      "speaker": "Speaker_A",
      "utterance": "关于\"Query Builder\"，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 270
    },
    {
      "turn_id": 19,
      "speaker": "Speaker_B",
      "utterance": "明白了，\"Query Builder\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 285
    },
    {
      "turn_id": 20,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下\"Query Builder\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 300
    },
    {
      "turn_id": 21,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，\"Query Builder\"的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "QueryBuilder"
      ],
      "timestamp_offset": 315
    },
    {
      "turn_id": 22,
      "speaker": "Speaker_A",
      "utterance": "我们可以将\"Result Processor\"、(Product Database分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 330
    },
    {
      "turn_id": 23,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，\"Result Processor\"、(Product Database的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "ResultProcessor",
        "SQLdb"
      ],
      "timestamp_offset": 345
    },
    {
      "turn_id": 24,
      "speaker": "Speaker_A",
      "utterance": "我们可以将\"Change Tracking\"、\"SQL Trigger Function\"分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 360
    },
    {
      "turn_id": 25,
      "speaker": "Speaker_B",
      "utterance": "我的意思是\"Change Tracking\"、\"SQL Trigger Function\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 375
    },
    {
      "turn_id": 26,
      "speaker": "Speaker_A",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "ChangeTracking",
        "SQLTrigger"
      ],
      "timestamp_offset": 390
    },
    {
      "turn_id": 27,
      "speaker": "Speaker_B",
      "utterance": "你能详细说明一下\"Embedding Generator\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 405
    },
    {
      "turn_id": 28,
      "speaker": "Speaker_A",
      "utterance": "我的意思是\"Embedding Generator\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 420
    },
    {
      "turn_id": 29,
      "speaker": "Speaker_B",
      "utterance": "我的意思是\"Embedding Generator\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 435
    },
    {
      "turn_id": 30,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，\"Embedding Generator\"的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "EmbeddingGenerator"
      ],
      "timestamp_offset": 450
    },
    {
      "turn_id": 31,
      "speaker": "Speaker_B",
      "utterance": "你能详细说明一下\"Text Vector Creator\"、\"Image Vector Creator\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 465
    },
    {
      "turn_id": 32,
      "speaker": "Speaker_A",
      "utterance": "明白了，\"Text Vector Creator\"、\"Image Vector Creator\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 480
    },
    {
      "turn_id": 33,
      "speaker": "Speaker_B",
      "utterance": "明白了，\"Text Vector Creator\"、\"Image Vector Creator\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "TextVectorCreator",
        "ImageVectorCreator",
        "RedisUpdater"
      ],
      "timestamp_offset": 495
    },
    {
      "turn_id": 34,
      "speaker": "Speaker_A",
      "utterance": "从结构上看，我们有(Redis Cache、\"HNSW Vector Index\"。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 510
    },
    {
      "turn_id": 35,
      "speaker": "Speaker_B",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 525
    },
    {
      "turn_id": 36,
      "speaker": "Speaker_A",
      "utterance": "相较于方案A，(Redis Cache、\"HNSW Vector Index\"有更好的性能。",
      "speech_act": "contrastive",
      "diagram_elements_added": [],
      "timestamp_offset": 540
    },
    {
      "turn_id": 37,
      "speaker": "Speaker_B",
      "utterance": "(Redis Cache、\"HNSW Vector Index\"负责具体的功能实现。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "RedisCache",
        "VectorIndex"
      ],
      "timestamp_offset": 555
    },
    {
      "turn_id": 38,
      "speaker": "Speaker_A",
      "utterance": "这个系统主要由\"Product Metadata\"、\"Jupyter Notebook\"组成。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 570
    },
    {
      "turn_id": 39,
      "speaker": "Speaker_B",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 585
    },
    {
      "turn_id": 40,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下\"Product Metadata\"、\"Jupyter Notebook\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 600
    },
    {
      "turn_id": 41,
      "speaker": "Speaker_B",
      "utterance": "在\"Product Metadata\"、\"Jupyter Notebook\"中，我们需要定义核心逻辑。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "ProductMetadata",
        "JupyterNb"
      ],
      "timestamp_offset": 615
    },
    {
      "turn_id": 42,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下\"Sentence Transformer\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 630
    },
    {
      "turn_id": 43,
      "speaker": "Speaker_B",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 645
    },
    {
      "turn_id": 44,
      "speaker": "Speaker_A",
      "utterance": "\"Sentence Transformer\"主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 660
    },
    {
      "turn_id": 45,
      "speaker": "Speaker_B",
      "utterance": "我们可以将\"Sentence Transformer\"分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "SentenceTransformer"
      ],
      "timestamp_offset": 675
    },
    {
      "turn_id": 46,
      "speaker": "Speaker_A",
      "utterance": "我们可以将\"Img2Vec ResNet-18\"、\"Vector JSON Files\"分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 690
    },
    {
      "turn_id": 47,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，\"Img2Vec ResNet-18\"、\"Vector JSON Files\"的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 705
    },
    {
      "turn_id": 48,
      "speaker": "Speaker_A",
      "utterance": "\"Img2Vec ResNet-18\"、\"Vector JSON Files\"和另一个方案相比，优势在于...",
      "speech_act": "contrastive",
      "diagram_elements_added": [],
      "timestamp_offset": 720
    },
    {
      "turn_id": 49,
      "speaker": "Speaker_B",
      "utterance": "我的意思是\"Img2Vec ResNet-18\"、\"Vector JSON Files\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "Img2Vec",
        "VectorFiles",
        "S1"
      ],
      "timestamp_offset": 735
    },
    {
      "turn_id": 50,
      "speaker": "Speaker_A",
      "utterance": "这个系统主要由\"Frontend calls API with product_id\"组成。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 750
    },
    {
      "turn_id": 51,
      "speaker": "Speaker_B",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 765
    },
    {
      "turn_id": 52,
      "speaker": "Speaker_A",
      "utterance": "\"Frontend calls API with product_id\"主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "S2"
      ],
      "timestamp_offset": 780
    },
    {
      "turn_id": 53,
      "speaker": "Speaker_B",
      "utterance": "你能详细说明一下\"Backend retrieves product's text vector\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 795
    },
    {
      "turn_id": 54,
      "speaker": "Speaker_A",
      "utterance": "明白了，\"Backend retrieves product's text vector\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "S3"
      ],
      "timestamp_offset": 810
    },
    {
      "turn_id": 55,
      "speaker": "Speaker_B",
      "utterance": "这个系统主要由\"Query Builder creates HNSW search with filters\"、\"Redis executes vector similarity search\"组成。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 825
    },
    {
      "turn_id": 56,
      "speaker": "Speaker_A",
      "utterance": "确认一下，\"Query Builder creates HNSW search with filters\"、\"Redis executes vector similarity search\"是正确的吧？",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 840
    },
    {
      "turn_id": 57,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "S4",
        "S5"
      ],
      "timestamp_offset": 855
    },
    {
      "turn_id": 58,
      "speaker": "Speaker_A",
      "utterance": "整体架构包含\"Backend processes results\"这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 870
    },
    {
      "turn_id": 59,
      "speaker": "Speaker_B",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 885
    },
    {
      "turn_id": 60,
      "speaker": "Speaker_A",
      "utterance": "最终，我们在\"Backend processes results\"完成整个流程。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "S6"
      ],
      "timestamp_offset": 900
    },
    {
      "turn_id": 61,
      "speaker": "Speaker_B",
      "utterance": "从结构上看，我们有\"Frontend displays similar products\"。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 915
    },
    {
      "turn_id": 62,
      "speaker": "Speaker_A",
      "utterance": "明白了，\"Frontend displays similar products\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 930
    },
    {
      "turn_id": 63,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，\"Frontend displays similar products\"的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 945
    },
    {
      "turn_id": 64,
      "speaker": "Speaker_A",
      "utterance": "我们来设计一下这个流程，首先需要一个开始节点。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "S7"
      ],
      "timestamp_offset": 960
    },
    {
      "turn_id": 65,
      "speaker": "Speaker_B",
      "utterance": "从结构上看，我们有\"User clicks 'By Image' button\"、\"Frontend calls API with product_id\"。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 975
    },
    {
      "turn_id": 66,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，\"User clicks 'By Image' button\"、\"Frontend calls API with product_id\"的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "I1",
        "I2"
      ],
      "timestamp_offset": 990
    },
    {
      "turn_id": 67,
      "speaker": "Speaker_B",
      "utterance": "整体架构包含\"Backend retrieves product's image vector\"、\"Query Builder creates HNSW search with filters\"这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 1005
    },
    {
      "turn_id": 68,
      "speaker": "Speaker_A",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1020
    },
    {
      "turn_id": 69,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理\"Backend retrieves product's image vector\"、\"Query Builder creates HNSW search with filters\"？",
      "speech_act": "request",
      "diagram_elements_added": [
        "I3",
        "I4"
      ],
      "timestamp_offset": 1035
    },
    {
      "turn_id": 70,
      "speaker": "Speaker_A",
      "utterance": "整体架构包含\"Redis executes vector similarity search\"、\"Backend processes results\"这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 1050
    },
    {
      "turn_id": 71,
      "speaker": "Speaker_B",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1065
    },
    {
      "turn_id": 72,
      "speaker": "Speaker_A",
      "utterance": "这个系统主要由\"Redis executes vector similarity search\"、\"Backend processes results\"组成。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "I5",
        "I6"
      ],
      "timestamp_offset": 1080
    },
    {
      "turn_id": 73,
      "speaker": "Speaker_B",
      "utterance": "关于\"Frontend displays similar products\"、\"Admin updates product in SQL Database\"，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1095
    },
    {
      "turn_id": 74,
      "speaker": "Speaker_A",
      "utterance": "明白了，\"Frontend displays similar products\"、\"Admin updates product in SQL Database\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 1110
    },
    {
      "turn_id": 75,
      "speaker": "Speaker_B",
      "utterance": "明白了，\"Frontend displays similar products\"、\"Admin updates product in SQL Database\"就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 1125
    },
    {
      "turn_id": 76,
      "speaker": "Speaker_A",
      "utterance": "\"Frontend displays similar products\"、\"Admin updates product in SQL Database\"负责具体的功能实现。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "I7",
        "P1"
      ],
      "timestamp_offset": 1140
    },
    {
      "turn_id": 77,
      "speaker": "Speaker_B",
      "utterance": "你能详细说明一下\"SQL Change Tracking detects update\"、\"Azure Function triggered with changed data\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1155
    },
    {
      "turn_id": 78,
      "speaker": "Speaker_A",
      "utterance": "我的意思是\"SQL Change Tracking detects update\"、\"Azure Function triggered with changed data\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 1170
    },
    {
      "turn_id": 79,
      "speaker": "Speaker_B",
      "utterance": "我的意思是\"SQL Change Tracking detects update\"、\"Azure Function triggered with changed data\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "P2",
        "P3"
      ],
      "timestamp_offset": 1185
    },
    {
      "turn_id": 80,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下\"Function extracts product information\"、\"Function generates new text embedding\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1200
    },
    {
      "turn_id": 81,
      "speaker": "Speaker_B",
      "utterance": "确认一下，\"Function extracts product information\"、\"Function generates new text embedding\"是正确的吧？",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 1215
    },
    {
      "turn_id": 82,
      "speaker": "Speaker_A",
      "utterance": "相较于方案A，\"Function extracts product information\"、\"Function generates new text embedding\"有更好的性能。",
      "speech_act": "contrastive",
      "diagram_elements_added": [
        "P4",
        "P5",
        "P6"
      ],
      "timestamp_offset": 1230
    },
    {
      "turn_id": 83,
      "speaker": "Speaker_B",
      "utterance": "你能详细说明一下\"Function combines embeddings\"、\"Function updates Redis vector data\"吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1245
    },
    {
      "turn_id": 84,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，\"Function combines embeddings\"、\"Function updates Redis vector data\"的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 1260
    },
    {
      "turn_id": 85,
      "speaker": "Speaker_B",
      "utterance": "最终，我们在\"Function combines embeddings\"、\"Function updates Redis vector data\"完成整个流程。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "P7",
        "P8"
      ],
      "timestamp_offset": 1275
    },
    {
      "turn_id": 86,
      "speaker": "Speaker_A",
      "utterance": "\"Function updates Redis product metadata\"、\"Vector index automatically updated\"主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1290
    },
    {
      "turn_id": 87,
      "speaker": "Speaker_B",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1305
    },
    {
      "turn_id": 88,
      "speaker": "Speaker_A",
      "utterance": "最终，我们在\"Function updates Redis product metadata\"、\"Vector index automatically updated\"完成整个流程。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 1320
    },
    {
      "turn_id": 89,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "P9",
        "P10"
      ],
      "timestamp_offset": 1335
    },
    {
      "turn_id": 90,
      "speaker": "Speaker_A",
      "utterance": "整体架构包含\"Define image vector field (512-dim这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 1350
    },
    {
      "turn_id": 91,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1365
    },
    {
      "turn_id": 92,
      "speaker": "Speaker_A",
      "utterance": "我们可以将\"Define image vector field (512-dim分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "H1"
      ],
      "timestamp_offset": 1380
    },
    {
      "turn_id": 93,
      "speaker": "Speaker_B",
      "utterance": "我们可以将\"Define text vector field (768-dim分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1395
    },
    {
      "turn_id": 94,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，\"Define text vector field (768-dim的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "H2"
      ],
      "timestamp_offset": 1410
    },
    {
      "turn_id": 95,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理\"Add tag fields (gender, category、\"Create index with COSINE distance metric\"？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1425
    },
    {
      "turn_id": 96,
      "speaker": "Speaker_A",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1440
    },
    {
      "turn_id": 97,
      "speaker": "Speaker_B",
      "utterance": "\"Add tag fields (gender, category、\"Create index with COSINE distance metric\"主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1455
    },
    {
      "turn_id": 98,
      "speaker": "Speaker_A",
      "utterance": "我们应该如何处理\"Add tag fields (gender, category、\"Create index with COSINE distance metric\"？",
      "speech_act": "request",
      "diagram_elements_added": [
        "H3",
        "H4"
      ],
      "timestamp_offset": 1470
    },
    {
      "turn_id": 99,
      "speaker": "Speaker_B",
      "utterance": "关于\"Apply index to product_vector: keys\"，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1485
    },
    {
      "turn_id": 100,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，\"Apply index to product_vector: keys\"的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 1500
    },
    {
      "turn_id": 101,
      "speaker": "Speaker_B",
      "utterance": "我的意思是\"Apply index to product_vector: keys\"应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "H5"
      ],
      "timestamp_offset": 1515
    },
    {
      "turn_id": 102,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下、吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1530
    },
    {
      "turn_id": 103,
      "speaker": "Speaker_B",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1545
    },
    {
      "turn_id": 104,
      "speaker": "Speaker_A",
      "utterance": "我们可以将、分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "edge_0",
        "edge_1"
      ],
      "timestamp_offset": 1560
    },
    {
      "turn_id": 105,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理、？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 1575
    },
    {
      "turn_id": 106,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，、的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "edge_2",
        "edge_3"
      ],
      "timestamp_offset": 1590
    },
    {
      "turn_id": 107,
      "speaker": "Speaker_B",
      "utterance": "我们可以将分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1605
    },
    {
      "turn_id": 108,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 1620
    },
    {
      "turn_id": 109,
      "speaker": "Speaker_B",
      "utterance": "确认一下，是正确的吧？",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 1635
    },
    {
      "turn_id": 110,
      "speaker": "Speaker_A",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "edge_4"
      ],
      "timestamp_offset": 1650
    },
    {
      "turn_id": 111,
      "speaker": "Speaker_B",
      "utterance": "这个系统主要由组成。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 1665
    },
    {
      "turn_id": 112,
      "speaker": "Speaker_A",
      "utterance": "我的意思是应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 1680
    },
    {
      "turn_id": 113,
      "speaker": "Speaker_B",
      "utterance": "这个系统主要由组成。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 1695
    },
    {
      "turn_id": 114,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下吗？",
      "speech_act": "request",
      "diagram_elements_added": [
        "edge_5"
      ],
      "timestamp_offset": 1710
    },
    {
      "turn_id": 115,
      "speaker": "Speaker_B",
      "utterance": "整体架构包含、这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 1725
    },
    {
      "turn_id": 116,
      "speaker": "Speaker_A",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "edge_6",
        "edge_7"
      ],
      "timestamp_offset": 1740
    },
    {
      "turn_id": 117,
      "speaker": "Speaker_B",
      "utterance": "、主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1755
    },
    {
      "turn_id": 118,
      "speaker": "Speaker_A",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "edge_8",
        "edge_9"
      ],
      "timestamp_offset": 1770
    },
    {
      "turn_id": 119,
      "speaker": "Speaker_B",
      "utterance": "我们可以将分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1785
    },
    {
      "turn_id": 120,
      "speaker": "Speaker_A",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "edge_10"
      ],
      "timestamp_offset": 1800
    },
    {
      "turn_id": 121,
      "speaker": "Speaker_B",
      "utterance": "、主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1815
    },
    {
      "turn_id": 122,
      "speaker": "Speaker_A",
      "utterance": "确认一下，、是正确的吧？",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 1830
    },
    {
      "turn_id": 123,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，、的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 1845
    },
    {
      "turn_id": 124,
      "speaker": "Speaker_A",
      "utterance": "我的意思是、应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "edge_11",
        "edge_12",
        "edge_13"
      ],
      "timestamp_offset": 1860
    },
    {
      "turn_id": 125,
      "speaker": "Speaker_B",
      "utterance": "、主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1875
    },
    {
      "turn_id": 126,
      "speaker": "Speaker_A",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1890
    },
    {
      "turn_id": 127,
      "speaker": "Speaker_B",
      "utterance": "我们可以将、分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "edge_14",
        "edge_15"
      ],
      "timestamp_offset": 1905
    },
    {
      "turn_id": 128,
      "speaker": "Speaker_A",
      "utterance": "整体架构包含这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 1920
    },
    {
      "turn_id": 129,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 1935
    },
    {
      "turn_id": 130,
      "speaker": "Speaker_A",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "edge_16"
      ],
      "timestamp_offset": 1950
    },
    {
      "turn_id": 131,
      "speaker": "Speaker_B",
      "utterance": "我们可以将、分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 1965
    },
    {
      "turn_id": 132,
      "speaker": "Speaker_A",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 1980
    },
    {
      "turn_id": 133,
      "speaker": "Speaker_B",
      "utterance": "最终，我们在、完成整个流程。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 1995
    },
    {
      "turn_id": 134,
      "speaker": "Speaker_A",
      "utterance": "最后，流程到达、结束。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "edge_17",
        "edge_18"
      ],
      "timestamp_offset": 2010
    }
  ],
  "dialogue_stats": {
    "total_turns": 134,
    "speaker_distribution": {
      "Speaker_B": 67,
      "Speaker_A": 67
    },
    "speech_act_distribution": {
      "sequential": 7,
      "confirm": 18,
      "classification": 21,
      "inform": 21,
      "structural": 20,
      "request": 20,
      "clarify": 23,
      "contrastive": 4
    },
    "avg_turn_length": 39.156716417910445,
    "dialogue_duration": 2010
  }
}