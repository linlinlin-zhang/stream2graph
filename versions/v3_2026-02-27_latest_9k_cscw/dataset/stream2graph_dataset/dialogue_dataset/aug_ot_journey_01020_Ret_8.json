{
  "id": "aug_ot_journey_01020_Ret_8",
  "source": "augmented_real_structure",
  "source_url": "https://github.com/functario/Caravel/blob/9304846541fc821a7683952c615b8da4e1274a82/docs/sequence-diagrams/journey.goto.mmd",
  "source_type": "github_search",
  "github_repo": "functario/Caravel",
  "diagram_type": "journey",
  "code": "sequenceDiagram\n    participant Journey            as Journey\n    participant Ext                as JourneyExtensions\n    participant EmptyExcl          as EmptyExcludedWaypoints\n    participant Graph              as Graph\n    participant CurrentNode        as CurrentNode\n    participant Edge               as Edge\n    participant NeighborNavigator  as NeighborNavigator\n    participant JourneyLegFactory  as JourneyLegFactory\n    participant JourneyLegPublisher as JourneyLegPublisher\n\n    %% ---- 1. Extension entry ------------------------------------\n    Journey->>Ext: GotoAsync<Node3>(Retail_Inventory)  \n    Ext->>Journey: GotoAsync<Node3>(Retail_OrderManagement) and EmptyExcludedWaypoints.Create(Retail_CouponSystem) and token)\n\n    %% ---- 3. Visit starting node --------------------------------\n    Journey->>CurrentNode: OnNodeVisitedAsync(Retail_OrderManagement)\n\n    %% ---- 4. Resolve route ---------------------------------------\n    Journey->>Graph: GetRoute(Retail_CustomerLoyalty)\n    Graph-->>Journey: route\n\n    %% ---- 5. Create journey leg ----------------------------------\n    Journey->>JourneyLegFactory: CreateJourneyLeg(Retail_CouponSystem)\n    JourneyLegFactory-->>Journey: journeyLeg\n\n    %% ---- 6. Publish leg started --------------------------------\n    Journey->>JourneyLegPublisher: PublishOnJourneyLegStartedAsync(Retail_CustomerLoyalty)\n\n    %% ---- 7. Navigate through the edges --------------------------\n    loop each edge in route.Edges\n        Journey->>Edge: edge\n        Edge->>NeighborNavigator: MoveNext(Retail_CustomerLoyalty)\n        NeighborNavigator-->>Journey: newNode\n        Journey->>CurrentNode: OnNodeVisitedAsync(Retail_PointOfSale)\n        Journey->>journeyLeg: Edges.Enqueue(Retail_Inventory)\n        Journey->>JourneyLegPublisher: PublishOnJourneyLegUpdatedAsync(Retail_CustomerLoyalty)\n    end\n\n    %% ---- 8. Finish the leg --------------------------------------\n    Journey->>JourneyLegPublisher: PublishOnJourneyLegCompletedAsync(Retail_PointOfSale)\n\n    %% ---- 9. Final node visit ------------------------------------\n    Journey->>CurrentNode: OnNodeVisitedAsync(Retail_CustomerLoyalty)",
  "content_size": 2098,
  "collected_at": "2026-02-06T11:02:07.455987",
  "compilation_status": "success",
  "license": "other_source",
  "license_name": "Other Source (GitHub-based)",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "augmentation_domain": "Retail",
  "seed_id": "ot_journey_01020",
  "dialogue": [
    {
      "turn_id": 1,
      "speaker": "Speaker_B",
      "utterance": "让我们从头开始，先确定入口点。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 15
    },
    {
      "turn_id": 2,
      "speaker": "Speaker_A",
      "utterance": "明白了，Journey、JourneyExtensions就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 30
    },
    {
      "turn_id": 3,
      "speaker": "Speaker_B",
      "utterance": "我的意思是Journey、JourneyExtensions应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "Journey",
        "Ext"
      ],
      "timestamp_offset": 45
    },
    {
      "turn_id": 4,
      "speaker": "Speaker_A",
      "utterance": "我们应该如何处理EmptyExcludedWaypoints、Graph？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 60
    },
    {
      "turn_id": 5,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 75
    },
    {
      "turn_id": 6,
      "speaker": "Speaker_A",
      "utterance": "最后，流程到达EmptyExcludedWaypoints、Graph结束。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 90
    },
    {
      "turn_id": 7,
      "speaker": "Speaker_B",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "EmptyExcl",
        "Graph",
        "CurrentNode"
      ],
      "timestamp_offset": 105
    },
    {
      "turn_id": 8,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下Edge、NeighborNavigator吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 120
    },
    {
      "turn_id": 9,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，Edge、NeighborNavigator的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 135
    },
    {
      "turn_id": 10,
      "speaker": "Speaker_A",
      "utterance": "Edge、NeighborNavigator和另一个方案相比，优势在于...",
      "speech_act": "contrastive",
      "diagram_elements_added": [
        "Edge",
        "NeighborNavigator",
        "JourneyLegFactory"
      ],
      "timestamp_offset": 150
    },
    {
      "turn_id": 11,
      "speaker": "Speaker_B",
      "utterance": "关于JourneyLegPublisher、GotoAsync<Node3>(Retail_Inventory)，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 165
    },
    {
      "turn_id": 12,
      "speaker": "Speaker_A",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "JourneyLegPublisher",
        "msg_0"
      ],
      "timestamp_offset": 180
    },
    {
      "turn_id": 13,
      "speaker": "Speaker_B",
      "utterance": "这个系统主要由GotoAsync<Node3>(Retail_OrderManagement) and EmptyExcludedWaypoints.Create(Retail_CouponSystem) and token)组成。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 195
    },
    {
      "turn_id": 14,
      "speaker": "Speaker_A",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "msg_1"
      ],
      "timestamp_offset": 210
    },
    {
      "turn_id": 15,
      "speaker": "Speaker_B",
      "utterance": "整体架构包含OnNodeVisitedAsync(Retail_OrderManagement)、GetRoute(Retail_CustomerLoyalty)这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 225
    },
    {
      "turn_id": 16,
      "speaker": "Speaker_A",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 240
    },
    {
      "turn_id": 17,
      "speaker": "Speaker_B",
      "utterance": "你能详细说明一下OnNodeVisitedAsync(Retail_OrderManagement)、GetRoute(Retail_CustomerLoyalty)吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 255
    },
    {
      "turn_id": 18,
      "speaker": "Speaker_A",
      "utterance": "我们可以将OnNodeVisitedAsync(Retail_OrderManagement)、GetRoute(Retail_CustomerLoyalty)分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "msg_2",
        "msg_3",
        "msg_4"
      ],
      "timestamp_offset": 270
    },
    {
      "turn_id": 19,
      "speaker": "Speaker_B",
      "utterance": "我们可以将PublishOnJourneyLegStartedAsync(Retail_CustomerLoyalty)分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 285
    },
    {
      "turn_id": 20,
      "speaker": "Speaker_A",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "msg_5"
      ],
      "timestamp_offset": 300
    },
    {
      "turn_id": 21,
      "speaker": "Speaker_B",
      "utterance": "我们可以将edge、MoveNext(Retail_CustomerLoyalty)分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 315
    },
    {
      "turn_id": 22,
      "speaker": "Speaker_A",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "msg_6",
        "msg_7"
      ],
      "timestamp_offset": 330
    },
    {
      "turn_id": 23,
      "speaker": "Speaker_B",
      "utterance": "从结构上看，我们有OnNodeVisitedAsync(Retail_PointOfSale)。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 345
    },
    {
      "turn_id": 24,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，OnNodeVisitedAsync(Retail_PointOfSale)的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 360
    },
    {
      "turn_id": 25,
      "speaker": "Speaker_B",
      "utterance": "我的意思是OnNodeVisitedAsync(Retail_PointOfSale)应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 375
    },
    {
      "turn_id": 26,
      "speaker": "Speaker_A",
      "utterance": "确认一下，OnNodeVisitedAsync(Retail_PointOfSale)是正确的吧？",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "msg_8"
      ],
      "timestamp_offset": 390
    },
    {
      "turn_id": 27,
      "speaker": "Speaker_B",
      "utterance": "整体架构包含Edges.Enqueue(Retail_Inventory)、PublishOnJourneyLegUpdatedAsync(Retail_CustomerLoyalty)这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 405
    },
    {
      "turn_id": 28,
      "speaker": "Speaker_A",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "msg_9",
        "msg_10"
      ],
      "timestamp_offset": 420
    },
    {
      "turn_id": 29,
      "speaker": "Speaker_B",
      "utterance": "PublishOnJourneyLegCompletedAsync(Retail_PointOfSale)、OnNodeVisitedAsync(Retail_CustomerLoyalty)主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 435
    },
    {
      "turn_id": 30,
      "speaker": "Speaker_A",
      "utterance": "我同意这个观点。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 450
    },
    {
      "turn_id": 31,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理PublishOnJourneyLegCompletedAsync(Retail_PointOfSale)、OnNodeVisitedAsync(Retail_CustomerLoyalty)？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 465
    },
    {
      "turn_id": 32,
      "speaker": "Speaker_A",
      "utterance": "最终，我们在PublishOnJourneyLegCompletedAsync(Retail_PointOfSale)、OnNodeVisitedAsync(Retail_CustomerLoyalty)完成整个流程。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "msg_11",
        "msg_12"
      ],
      "timestamp_offset": 480
    }
  ],
  "dialogue_stats": {
    "total_turns": 32,
    "speaker_distribution": {
      "Speaker_B": 16,
      "Speaker_A": 16
    },
    "speech_act_distribution": {
      "sequential": 3,
      "confirm": 5,
      "clarify": 4,
      "request": 5,
      "inform": 6,
      "contrastive": 1,
      "structural": 4,
      "classification": 4
    },
    "avg_turn_length": 48.28125,
    "dialogue_duration": 480
  }
}