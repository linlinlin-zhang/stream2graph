{
  "id": "ot_stateDiagram_00117",
  "source": "other",
  "source_url": "https://github.com/ballsun1003/Project_SE_TheTuringTest/blob/185a70825cf0376ce35265345b5b8e58dbbdf67f/doc/SDS/diagrams/SMD.mmd",
  "source_type": "github_search_special",
  "github_repo": "ballsun1003/Project_SE_TheTuringTest",
  "diagram_type": "stateDiagram",
  "code": "stateDiagram-v2\n    direction TB\n\n    %% ============================================================\n    %% 1. 초기화 및 게스트 세션 (Guest Session)\n    %% ============================================================\n    state \"Guest Session (Unauthenticated)\" as Guest {\n        direction LR\n        [*] --> AppInit : URL Access\n        \n        state \"App Initialization\" as AppInit\n        note right of AppInit\n            AuthProvider checks localStorage\n            Sets 'isLoggedIn = false'\n            Sets BG color (Slate)\n        end note\n\n        state \"Landing Page\" as Landing\n        state \"Login Screen\" as Login\n        state \"Sign Up Screen\" as SignUp\n\n        AppInit --> Landing : Render Home\n        Landing --> Login : Click 'Login'\n        Landing --> SignUp : Click 'Sign Up'\n        \n        state \"Registration Processing\" as RegProcess\n        note right of RegProcess\n            Verify Turnstile\n            Check Duplicate\n            Hash Password\n        end note\n        \n        SignUp --> RegProcess : Submit Form\n        RegProcess --> Login : Success (Redirect)\n        RegProcess --> SignUp : Fail (Show Error)\n\n        state \"Auth Processing\" as AuthProcess\n        note right of AuthProcess\n            Verify Turnstile\n            Verify Password\n            Get AccessToken\n        end note\n\n        Login --> AuthProcess : Submit Credentials\n        AuthProcess --> Login : Fail (Show Error)\n    }\n\n    %% ============================================================\n    %% 2. 유저 세션 (Authenticated Session)\n    %% ============================================================\n    state \"User Session (Authenticated)\" as User {\n        direction TB\n        \n        state \"Auth Success\" as AuthSuccess\n        note right of AuthSuccess\n            Set 'isLoggedIn = true'\n            Set BG color (Amber)\n            Save Token to LocalStorage\n        end note\n\n        state \"Main Dashboard\" as Dashboard\n        state \"Board View (Category)\" as BoardList\n        state \"User Profile View\" as Profile\n\n        %% --- Post Creation Flow ---\n        state \"Post Creation View\" as PostCreate\n        state \"AI Generating Content\" as AI_Gen_Post\n        note right of AI_Gen_Post\n            Call OpenAI API\n            Generate Text\n        end note\n\n        state \"Saving Post\" as DB_Save_Post\n\n        %% --- Post Detail & Interaction Flow ---\n        state \"Post Detail View\" as PostDetail\n        state \"Reaction Processing\" as Reacting\n        note right of Reacting\n            RPC Call (Toggle)\n            Create Notification\n        end note\n\n        state \"Comment Processing\" as Commenting\n        note right of Commenting\n            AI Generate Comment\n            Insert DB\n        end note\n\n        %% --- Post Edit Flow ---\n        state \"Post Edit View\" as PostEdit\n        state \"AI Rewriting Content\" as AI_Edit_Post\n        note right of AI_Edit_Post\n            Call OpenAI API\n            Rewrite Text\n        end note\n\n        state \"Updating Post\" as DB_Update_Post\n\n        %% --- Account Management ---\n        state \"Profile Updating\" as ProfileUpdate\n        state \"Account Deleting\" as AccDelete\n        note right of AccDelete\n            Cascade Delete All Data\n            (Posts, Comments, Noti, etc.)\n        end note\n\n        %% Transitions inside User Session\n        AuthSuccess --> Dashboard : Redirect\n        Dashboard --> BoardList : Click Category\n        Dashboard --> PostCreate : Click Write\n        Dashboard --> PostDetail : Click Post Title\n        Dashboard --> Profile : Click My Page\n\n        %% Create Post\n        PostCreate --> AI_Gen_Post : Submit Prompt\n        AI_Gen_Post --> DB_Save_Post : Success\n        DB_Save_Post --> PostDetail : Redirect\n\n        %% View & Interact\n        PostDetail --> Reacting : Click Like/Dislike\n        Reacting --> PostDetail : Update Counts\n        PostDetail --> Commenting : Write Comment\n        Commenting --> PostDetail : Update List\n        PostDetail --> PostEdit : Click Edit (Author Only)\n        PostDetail --> Dashboard : Click Delete (Soft Delete)\n\n        %% Edit Post\n        PostEdit --> AI_Edit_Post : Submit New Prompt\n        AI_Edit_Post --> DB_Update_Post : Success\n        DB_Update_Post --> PostDetail : Redirect\n\n        %% Profile\n        Profile --> ProfileUpdate : Update Info\n        ProfileUpdate --> Profile : Success\n        Profile --> AccDelete : Click Withdrawal\n    }\n\n    %% ============================================================\n    %% 3. Global Transitions (세션 간 전환)\n    %% ============================================================\n    \n    AuthProcess --> AuthSuccess : Success\n    \n    %% Logout\n    Dashboard --> Guest : Click Logout (Clear Storage)\n    Profile --> Guest : Click Logout\n    \n    %% Account Withdrawal\n    AccDelete --> Guest : Success (Clear Storage)\n\n    %% Protected Route Redirect\n    Guest --> Login : Try Accessing Protected Route",
  "content_size": 4923,
  "collected_at": "2026-02-06T10:38:05.419610",
  "compilation_status": "success",
  "license": "other_source",
  "license_name": "Other Source (GitHub-based)",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "dialogue": [
    {
      "turn_id": 1,
      "speaker": "Speaker_B",
      "utterance": "首先，我们需要定义流程的起点。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 15
    },
    {
      "turn_id": 2,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，Generic Diagram的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 30
    },
    {
      "turn_id": 3,
      "speaker": "Speaker_B",
      "utterance": "最后，流程到达Generic Diagram结束。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "root"
      ],
      "timestamp_offset": 45
    }
  ],
  "dialogue_stats": {
    "total_turns": 3,
    "speaker_distribution": {
      "Speaker_B": 2,
      "Speaker_A": 1
    },
    "speech_act_distribution": {
      "sequential": 2,
      "clarify": 1
    },
    "avg_turn_length": 23.0,
    "dialogue_duration": 45
  }
}