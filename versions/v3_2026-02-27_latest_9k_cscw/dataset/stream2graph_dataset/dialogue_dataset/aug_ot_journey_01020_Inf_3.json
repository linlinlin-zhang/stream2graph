{
  "id": "aug_ot_journey_01020_Inf_3",
  "source": "augmented_real_structure",
  "source_url": "https://github.com/functario/Caravel/blob/9304846541fc821a7683952c615b8da4e1274a82/docs/sequence-diagrams/journey.goto.mmd",
  "source_type": "github_search",
  "github_repo": "functario/Caravel",
  "diagram_type": "journey",
  "code": "sequenceDiagram\n    participant Journey            as Journey\n    participant Ext                as JourneyExtensions\n    participant EmptyExcl          as EmptyExcludedWaypoints\n    participant Graph              as Graph\n    participant CurrentNode        as CurrentNode\n    participant Edge               as Edge\n    participant NeighborNavigator  as NeighborNavigator\n    participant JourneyLegFactory  as JourneyLegFactory\n    participant JourneyLegPublisher as JourneyLegPublisher\n\n    %% ---- 1. Extension entry ------------------------------------\n    Journey->>Ext: GotoAsync<Node3>(Infra_WorkerNode)  \n    Ext->>Journey: GotoAsync<Node3>(Infra_WorkerNode) and EmptyExcludedWaypoints.Create(Infra_IngressController) and token)\n\n    %% ---- 3. Visit starting node --------------------------------\n    Journey->>CurrentNode: OnNodeVisitedAsync(Infra_IngressController)\n\n    %% ---- 4. Resolve route ---------------------------------------\n    Journey->>Graph: GetRoute(Infra_EtcdCluster)\n    Graph-->>Journey: route\n\n    %% ---- 5. Create journey leg ----------------------------------\n    Journey->>JourneyLegFactory: CreateJourneyLeg(Infra_IngressController)\n    JourneyLegFactory-->>Journey: journeyLeg\n\n    %% ---- 6. Publish leg started --------------------------------\n    Journey->>JourneyLegPublisher: PublishOnJourneyLegStartedAsync(Infra_LoadBalancer)\n\n    %% ---- 7. Navigate through the edges --------------------------\n    loop each edge in route.Edges\n        Journey->>Edge: edge\n        Edge->>NeighborNavigator: MoveNext(Infra_WorkerNode)\n        NeighborNavigator-->>Journey: newNode\n        Journey->>CurrentNode: OnNodeVisitedAsync(Infra_EtcdCluster)\n        Journey->>journeyLeg: Edges.Enqueue(Infra_IngressController)\n        Journey->>JourneyLegPublisher: PublishOnJourneyLegUpdatedAsync(Infra_LoadBalancer)\n    end\n\n    %% ---- 8. Finish the leg --------------------------------------\n    Journey->>JourneyLegPublisher: PublishOnJourneyLegCompletedAsync(Infra_LoadBalancer)\n\n    %% ---- 9. Final node visit ------------------------------------\n    Journey->>CurrentNode: OnNodeVisitedAsync(Infra_IngressController)",
  "content_size": 2098,
  "collected_at": "2026-02-06T11:02:07.455987",
  "compilation_status": "success",
  "license": "other_source",
  "license_name": "Other Source (GitHub-based)",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "augmentation_domain": "Infra",
  "seed_id": "ot_journey_01020",
  "dialogue": [
    {
      "turn_id": 1,
      "speaker": "Speaker_B",
      "utterance": "首先，我们需要定义流程的起点。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 15
    },
    {
      "turn_id": 2,
      "speaker": "Speaker_A",
      "utterance": "我的意思是Journey、JourneyExtensions应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 30
    },
    {
      "turn_id": 3,
      "speaker": "Speaker_B",
      "utterance": "明白了，Journey、JourneyExtensions就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "Journey",
        "Ext",
        "EmptyExcl"
      ],
      "timestamp_offset": 45
    },
    {
      "turn_id": 4,
      "speaker": "Speaker_A",
      "utterance": "我们可以将Graph、CurrentNode分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 60
    },
    {
      "turn_id": 5,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，Graph、CurrentNode的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "Graph",
        "CurrentNode",
        "Edge"
      ],
      "timestamp_offset": 75
    },
    {
      "turn_id": 6,
      "speaker": "Speaker_A",
      "utterance": "整体架构包含NeighborNavigator这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 90
    },
    {
      "turn_id": 7,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，NeighborNavigator的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "NeighborNavigator"
      ],
      "timestamp_offset": 105
    },
    {
      "turn_id": 8,
      "speaker": "Speaker_A",
      "utterance": "我们可以将JourneyLegFactory、JourneyLegPublisher分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 120
    },
    {
      "turn_id": 9,
      "speaker": "Speaker_B",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "JourneyLegFactory",
        "JourneyLegPublisher",
        "msg_0"
      ],
      "timestamp_offset": 135
    },
    {
      "turn_id": 10,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下GotoAsync<Node3>(Infra_WorkerNode) and EmptyExcludedWaypoints.Create(Infra_IngressController) and token)、OnNodeVisitedAsync(Infra_IngressController)吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 150
    },
    {
      "turn_id": 11,
      "speaker": "Speaker_B",
      "utterance": "我的意思是GotoAsync<Node3>(Infra_WorkerNode) and EmptyExcludedWaypoints.Create(Infra_IngressController) and token)、OnNodeVisitedAsync(Infra_IngressController)应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 165
    },
    {
      "turn_id": 12,
      "speaker": "Speaker_A",
      "utterance": "从结构上看，我们有GotoAsync<Node3>(Infra_WorkerNode) and EmptyExcludedWaypoints.Create(Infra_IngressController) and token)、OnNodeVisitedAsync(Infra_IngressController)。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "msg_1",
        "msg_2"
      ],
      "timestamp_offset": 180
    },
    {
      "turn_id": 13,
      "speaker": "Speaker_B",
      "utterance": "从结构上看，我们有GetRoute(Infra_EtcdCluster)。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 195
    },
    {
      "turn_id": 14,
      "speaker": "Speaker_A",
      "utterance": "让我澄清一下，GetRoute(Infra_EtcdCluster)的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "msg_3"
      ],
      "timestamp_offset": 210
    },
    {
      "turn_id": 15,
      "speaker": "Speaker_B",
      "utterance": "CreateJourneyLeg(Infra_IngressController)、PublishOnJourneyLegStartedAsync(Infra_LoadBalancer)主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 225
    },
    {
      "turn_id": 16,
      "speaker": "Speaker_A",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "msg_4",
        "msg_5",
        "msg_6"
      ],
      "timestamp_offset": 240
    },
    {
      "turn_id": 17,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理MoveNext(Infra_WorkerNode)、OnNodeVisitedAsync(Infra_EtcdCluster)？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 255
    },
    {
      "turn_id": 18,
      "speaker": "Speaker_A",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 270
    },
    {
      "turn_id": 19,
      "speaker": "Speaker_B",
      "utterance": "我们可以将MoveNext(Infra_WorkerNode)、OnNodeVisitedAsync(Infra_EtcdCluster)分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "msg_7",
        "msg_8"
      ],
      "timestamp_offset": 285
    },
    {
      "turn_id": 20,
      "speaker": "Speaker_A",
      "utterance": "关于Edges.Enqueue(Infra_IngressController)、PublishOnJourneyLegUpdatedAsync(Infra_LoadBalancer)，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 300
    },
    {
      "turn_id": 21,
      "speaker": "Speaker_B",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 315
    },
    {
      "turn_id": 22,
      "speaker": "Speaker_A",
      "utterance": "Edges.Enqueue(Infra_IngressController)、PublishOnJourneyLegUpdatedAsync(Infra_LoadBalancer)主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [
        "msg_9",
        "msg_10",
        "msg_11"
      ],
      "timestamp_offset": 330
    },
    {
      "turn_id": 23,
      "speaker": "Speaker_B",
      "utterance": "我们可以将OnNodeVisitedAsync(Infra_IngressController)分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 345
    },
    {
      "turn_id": 24,
      "speaker": "Speaker_A",
      "utterance": "我的意思是OnNodeVisitedAsync(Infra_IngressController)应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 360
    },
    {
      "turn_id": 25,
      "speaker": "Speaker_B",
      "utterance": "我们可以将OnNodeVisitedAsync(Infra_IngressController)分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 375
    },
    {
      "turn_id": 26,
      "speaker": "Speaker_A",
      "utterance": "最后，流程到达OnNodeVisitedAsync(Infra_IngressController)结束。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "msg_12"
      ],
      "timestamp_offset": 390
    }
  ],
  "dialogue_stats": {
    "total_turns": 26,
    "speaker_distribution": {
      "Speaker_B": 13,
      "Speaker_A": 13
    },
    "speech_act_distribution": {
      "sequential": 2,
      "clarify": 6,
      "confirm": 2,
      "classification": 7,
      "structural": 3,
      "request": 3,
      "inform": 3
    },
    "avg_turn_length": 59.03846153846154,
    "dialogue_duration": 390
  }
}