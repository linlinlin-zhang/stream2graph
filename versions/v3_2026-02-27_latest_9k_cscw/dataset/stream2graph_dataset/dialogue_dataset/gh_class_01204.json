{
  "id": "gh_class_01204",
  "source": "github",
  "source_url": "https://github.com/4-sem-CatchUp/CatchUp-Social-core/blob/66c949ac060d0f1a89125517cd95d4e209b20454/Social.Core/Social-Class.mmd",
  "github_repo": "4-sem-CatchUp/CatchUp-Social-core",
  "github_file_path": "Social.Core/Social-Class.mmd",
  "diagram_type": "class",
  "code": "classDiagram \n\t\n\tclass SubscriptionService  {\n\t\t-List~Subscription~ _subscriptions \n\t\t-ISubscriptionRepository _subscriptionRepository \n\t\t-INotificationSender _notificationSender \n\t\t+Notify(Profile Subscriber, string message) Task\n\t\t+Subscribe(Profile subscriber, Profile publisher) void\n\t\t+Unsubscribe(Profile subscriber, Profile publisher) void\n\t}\n\tclass ICommentRepository  {\n\t\t-GetByIdAsync(Guid commentId) Task~Comment?~\n\t\t-GetByPostIdAsync(Guid postId) Task~IReadOnlyList~Comment~~\n\t\t-AddAsync(Comment comment) Task\n\t\t-UpdateAsync(Comment comment) Task\n\t\t-DeleteAsync(Guid commentId) Task\n\t}\n\tclass IProfileUseCases  {\n\t\t-CreateProfileAsync(string userName) Task~Guid~\n\t\t-UpdateProfileAsync(Guid profileId, string? name, byte[]? profilePic, string? bio) Task\n\t\t-AddFriendAsync(Guid profileId, Guid friendId) Task\n\t}\n\tclass PostDbAdapter  {\n\t\t-SocialDbContext _context \n\t\t+AddAsync(Post post) Task\n\t\t+DeleteAsync(Guid postId) Task\n\t\t+GetAllAsync() Task~IEnumerable~Post~~\n\t\t+GetByIdAsync(Guid postId) Task~Post?~\n\t\t+UpdateAsync(Post post) Task\n\t}\n\tclass Profile  {\n\t\t+ Id : Guid\n\t\t+ Name : string\n\t\t+ ProfilePic : byte[]\n\t\t+ Bio : string\n\t\t+ DateOfSub : DateOnly\n\t\t+ Friends : List~Guid~\n\t\t+CreateNewProfile(string name) Profile\n\t\t+UpdateProfile(string? name, byte[]? profilePic, string? bio) void\n\t\t+AddFriend(Guid friendId) void\n\t}\n\tclass ICommentUseCases  {\n\t\t-AddComment(Guid postId, Guid authorId, string text) Task\n\t\t+VoteComment(Guid commentId, bool upVote, Guid userId) Task\n\t\t+GetUserCommentVote(Guid postId, Guid commentId, Guid userId) Task~bool?~\n\t\t+UpdateCommentAsync(Guid commentId, Guid userId, string newContent) Task~bool?~\n\t\t+DeleteComment(Guid postId, Guid commentId, Guid userId) Task~bool?~\n\t}\n\tclass IVoteRepository  {\n\t\t-GetByIdAsync(Guid voteId) Task~Vote?~\n\t\t-AddAsync(Vote vote) Task\n\t\t-UpdateAsync(Vote vote) Task\n\t\t-DeleteAsync(Guid voteId) Task\n\t\t-GetUserVoteAsync(Guid targetId, VoteTargetType targetType, Guid userId) Task~Vote?~\n\t\t-GetVotesForTargetAsync(Guid targetId, VoteTargetType targetType) Task~IReadOnlyList~Vote~~\n\t}\n\tclass Subscription  {\n\t\t+ Subscriber : Profile\n\t\t+ Publisher : Profile\n\t\t+ SubscribedOn : DateTime\n\t}\n\tclass ISubscribeUseCase  {\n\t\t-Subscribe(Profile subscriber, Profile publisher) void\n\t\t-Unsubscribe(Profile subscriber, Profile publisher) void\n\t\t-Notify(Profile Subscriber, string message) Task\n\t}\n\tclass CommentServices  {\n\t\t-IPostRepository _postRepository \n\t\t-ICommentRepository _commentRepository \n\t\t-IVoteRepository _voteRepository \n\t\t-ISubscribeUseCase _subscriptionService \n\t\t-IProfileRepository _profileRepository \n\t\t+AddComment(Guid postId, Guid authorId, string text) Task\n\t\t+VoteComment(Guid commentId, bool upVote, Guid userId) Task\n\t\t+GetUserCommentVote(Guid postId, Guid commentId, Guid userId) Task~bool?~\n\t\t+DeleteComment(Guid postId, Guid commentId, Guid userId) Task~bool?~\n\t\t+UpdateCommentAsync(Guid commentId, Guid userId, string newContent) Task~bool?~\n\t}\n\tclass ProfileDbAdapter  {\n\t\t+AddFriendAsync(Guid profileId, Guid friendId) Task\n\t\t+AddProfileAsync(Profile profile) Task\n\t\t+DeleteProfileAsync(Guid profileId) Task\n\t\t+GetAllProfilesAsync() Task~IEnumerable~Profile~~\n\t\t+GetProfileByIdAsync(Guid profileId) Task~Profile?~\n\t\t+UpdateProfileAsync(Profile profile) Task\n\t}\n\tclass ISubscriptionRepository  {\n\t\t-Add(Subscription subscription) void\n\t\t-Remove(Subscription subscription) void\n\t}\n\tclass ProfileService  {\n\t\t-IProfileRepository _profileRepository \n\t\t+CreateProfileAsync(string userName) Task~Guid~\n\t\t+UpdateProfileAsync(Guid profileId, string? name, byte[]? profilePic, string? bio) Task\n\t\t+AddFriendAsync(Guid profileId, Guid friendId) Task\n\t}\n\tclass INotificationSender  {\n\t\t-SendNotification(Profile recipient, string message) void\n\t}\n\tclass Comment  {\n\t\t-List~Vote~ _votes \n\t\t-int _karma \n\t\t+ Id : Guid\n\t\t+ AuthorId : Guid\n\t\t+ Content : string?\n\t\t+ Timestamp : DateTime\n\t\t+ Votes : IReadOnlyList~Vote~\n\t\t+ Karma : int\n\t\t+CreateNewComment(Guid authorId, string text) Comment\n\t\t+AddVote(Guid userId, bool upvote) Vote\n\t\t+UpdateComment(string newText) void\n\t\t+GetUserVote(Guid userId) bool?\n\t}\n\tclass Post  {\n\t\t-List~Comment~ _comments \n\t\t-List~Vote~ _votes \n\t\t-int _karma \n\t\t+ Id : Guid\n\t\t+ AuthorId : Guid\n\t\t+ Title : string\n\t\t+ Content : string\n\t\t+ CreatedAt : DateTime\n\t\t+ Comments : IReadOnlyList~Comment~\n\t\t+ Votes : IReadOnlyList~Vote~\n\t\t+ Karma : int\n\t\t+CreateNewPost(Guid authorId, string title, string content) Post\n\t\t+AddComment(Guid authorId, string text) Comment\n\t\t+AddVote(Guid userId, bool upvote) Vote\n\t\t+GetUserVote(Guid userId) bool?\n\t\t+UpdatePost(string? newTitle, string? newContent) void\n\t\t+RemoveComment(Guid commentId) void\n\t}\n\tclass IPostUseCases  {\n\t\t-CreatePostAsync(Guid authorId, string title, string content) Task~Guid~\n\t\t+VotePost(Guid postId, bool upVote, Guid userId) Task\n\t\t+GetUserPostVote(Guid postId, Guid userId) Task~bool?~\n\t\t+UpdatePostAsync(Guid postId, string? newTitle, string? newContent) Task\n\t\t+DeletePost(Guid postId) Task\n\t}\n\tclass SocialDbContext  {\n\t}\n\tclass PostService  {\n\t\t-IPostRepository _postRepository \n\t\t-ICommentRepository _commentRepository \n\t\t-IVoteRepository _voteRepository \n\t\t-ISubscribeUseCase _subscriptionService \n\t\t-IProfileRepository _profileRepository \n\t\t+CreatePostAsync(Guid authorId, string title, string content) Task~Guid~\n\t\t+VotePost(Guid postId, bool upVote, Guid userId) Task\n\t\t+GetUserPostVote(Guid postId, Guid userId) Task~bool?~\n\t\t+DeletePost(Guid postId) Task\n\t\t+UpdatePostAsync(Guid postId, string? newTitle, string? newContent) Task\n\t}\n\tclass NotificationHub  {\n\t\t+SendNotification(Profile recipient, string message) void\n\t}\n\tclass IProfileRepository  {\n\t\t-AddProfileAsync(Profile profile) Task\n\t\t-GetProfileByIdAsync(Guid profileId) Task~Profile?~\n\t\t-UpdateProfileAsync(Profile profile) Task\n\t\t-DeleteProfileAsync(Guid profileId) Task\n\t\t-AddFriendAsync(Guid profileId, Guid friendId) Task\n\t\t-GetAllProfilesAsync() Task~IEnumerable~Profile~~\n\t}\n\tclass IPostRepository  {\n\t\t-GetByIdAsync(Guid postId) Task~Post?~\n\t\t-GetAllAsync() Task~IEnumerable~Post~~\n\t\t-AddAsync(Post post) Task\n\t\t-UpdateAsync(Post post) Task\n\t\t-DeleteAsync(Guid postId) Task\n\t}\n\tclass Vote  {\n\t\t+ Id : Guid\n\t\t+ TargetId : Guid\n\t\t+ VoteTargetType : VoteTargetType\n\t\t+ UserId : Guid\n\t\t+ Upvote : bool\n\t\t+ Action : VoteAction\n\t}\n\tclass SocialServices  {\n\t}\n\tclass Program  {\n\t\t+Main(string[] args) void\n\t}\n\t\n\tSubscriptionService --|> ISubscribeUseCase\n\tPostDbAdapter --|> IPostRepository\n\tCommentServices --|> ICommentUseCases\n\tProfileDbAdapter --|> IProfileRepository\n\tProfileService --|> IProfileUseCases\n\tPostService --|> IPostUseCases\n\tNotificationHub --|> INotificationSender\n\tSocialServices --|> ControllerBase\n\t",
  "content_size": 6668,
  "collected_at": "2026-02-06T01:54:32.202987",
  "compilation_status": "failed",
  "compilation_error": "[WinError 2] 系统找不到指定的文件。",
  "license": "none",
  "license_name": "No License",
  "license_url": "",
  "repo_stars": 0,
  "repo_forks": 0,
  "dialogue": [
    {
      "turn_id": 1,
      "speaker": "Speaker_B",
      "utterance": "让我们从头开始，先确定入口点。",
      "speech_act": "sequential",
      "diagram_elements_added": [],
      "timestamp_offset": 15
    },
    {
      "turn_id": 2,
      "speaker": "Speaker_A",
      "utterance": "明白了，SubscriptionService就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 30
    },
    {
      "turn_id": 3,
      "speaker": "Speaker_B",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 45
    },
    {
      "turn_id": 4,
      "speaker": "Speaker_A",
      "utterance": "让我们从头开始，先确定入口点。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "SubscriptionService"
      ],
      "timestamp_offset": 60
    },
    {
      "turn_id": 5,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理ICommentRepository？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 75
    },
    {
      "turn_id": 6,
      "speaker": "Speaker_A",
      "utterance": "确认一下，ICommentRepository是正确的吧？",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 90
    },
    {
      "turn_id": 7,
      "speaker": "Speaker_B",
      "utterance": "确认一下，ICommentRepository是正确的吧？",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 105
    },
    {
      "turn_id": 8,
      "speaker": "Speaker_A",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [
        "ICommentRepository"
      ],
      "timestamp_offset": 120
    },
    {
      "turn_id": 9,
      "speaker": "Speaker_B",
      "utterance": "IProfileUseCases、PostDbAdapter主要包含以下几类。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 135
    },
    {
      "turn_id": 10,
      "speaker": "Speaker_A",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "IProfileUseCases",
        "PostDbAdapter",
        "Profile"
      ],
      "timestamp_offset": 150
    },
    {
      "turn_id": 11,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理ICommentUseCases、IVoteRepository？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 165
    },
    {
      "turn_id": 12,
      "speaker": "Speaker_A",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 180
    },
    {
      "turn_id": 13,
      "speaker": "Speaker_B",
      "utterance": "我们应该如何处理ICommentUseCases、IVoteRepository？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 195
    },
    {
      "turn_id": 14,
      "speaker": "Speaker_A",
      "utterance": "ICommentUseCases、IVoteRepository负责具体的功能实现。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "ICommentUseCases",
        "IVoteRepository"
      ],
      "timestamp_offset": 210
    },
    {
      "turn_id": 15,
      "speaker": "Speaker_B",
      "utterance": "我们可以将Subscription、ISubscribeUseCase分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 225
    },
    {
      "turn_id": 16,
      "speaker": "Speaker_A",
      "utterance": "我的意思是Subscription、ISubscribeUseCase应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 240
    },
    {
      "turn_id": 17,
      "speaker": "Speaker_B",
      "utterance": "相较于方案A，Subscription、ISubscribeUseCase有更好的性能。",
      "speech_act": "contrastive",
      "diagram_elements_added": [],
      "timestamp_offset": 255
    },
    {
      "turn_id": 18,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下Subscription、ISubscribeUseCase吗？",
      "speech_act": "request",
      "diagram_elements_added": [
        "Subscription",
        "ISubscribeUseCase"
      ],
      "timestamp_offset": 270
    },
    {
      "turn_id": 19,
      "speaker": "Speaker_B",
      "utterance": "我们可以将CommentServices、ProfileDbAdapter分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 285
    },
    {
      "turn_id": 20,
      "speaker": "Speaker_A",
      "utterance": "我的意思是CommentServices、ProfileDbAdapter应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 300
    },
    {
      "turn_id": 21,
      "speaker": "Speaker_B",
      "utterance": "我的意思是CommentServices、ProfileDbAdapter应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 315
    },
    {
      "turn_id": 22,
      "speaker": "Speaker_A",
      "utterance": "CommentServices、ProfileDbAdapter负责具体的功能实现。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "CommentServices",
        "ProfileDbAdapter",
        "ISubscriptionRepository"
      ],
      "timestamp_offset": 330
    },
    {
      "turn_id": 23,
      "speaker": "Speaker_B",
      "utterance": "关于ProfileService、INotificationSender，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 345
    },
    {
      "turn_id": 24,
      "speaker": "Speaker_A",
      "utterance": "这个设计看起来不错。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 360
    },
    {
      "turn_id": 25,
      "speaker": "Speaker_B",
      "utterance": "关于ProfileService、INotificationSender，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [
        "ProfileService",
        "INotificationSender"
      ],
      "timestamp_offset": 375
    },
    {
      "turn_id": 26,
      "speaker": "Speaker_A",
      "utterance": "我们可以将Comment分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 390
    },
    {
      "turn_id": 27,
      "speaker": "Speaker_B",
      "utterance": "明白了，Comment就这样设计。",
      "speech_act": "confirm",
      "diagram_elements_added": [],
      "timestamp_offset": 405
    },
    {
      "turn_id": 28,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下Comment吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 420
    },
    {
      "turn_id": 29,
      "speaker": "Speaker_B",
      "utterance": "我的意思是Comment应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "Comment"
      ],
      "timestamp_offset": 435
    },
    {
      "turn_id": 30,
      "speaker": "Speaker_A",
      "utterance": "关于Post、IPostUseCases，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 450
    },
    {
      "turn_id": 31,
      "speaker": "Speaker_B",
      "utterance": "让我澄清一下，Post、IPostUseCases的作用是...",
      "speech_act": "clarify",
      "diagram_elements_added": [],
      "timestamp_offset": 465
    },
    {
      "turn_id": 32,
      "speaker": "Speaker_A",
      "utterance": "我们应该如何处理Post、IPostUseCases？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 480
    },
    {
      "turn_id": 33,
      "speaker": "Speaker_B",
      "utterance": "我们来设计一下这个流程，首先需要一个开始节点。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "Post",
        "IPostUseCases",
        "SocialDbContext"
      ],
      "timestamp_offset": 495
    },
    {
      "turn_id": 34,
      "speaker": "Speaker_A",
      "utterance": "整体架构包含PostService这几个部分。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 510
    },
    {
      "turn_id": 35,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 525
    },
    {
      "turn_id": 36,
      "speaker": "Speaker_A",
      "utterance": "关于PostService，你有什么想法？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 540
    },
    {
      "turn_id": 37,
      "speaker": "Speaker_B",
      "utterance": "在PostService中，我们需要定义核心逻辑。",
      "speech_act": "structural",
      "diagram_elements_added": [
        "PostService"
      ],
      "timestamp_offset": 555
    },
    {
      "turn_id": 38,
      "speaker": "Speaker_A",
      "utterance": "从结构上看，我们有NotificationHub、IProfileRepository。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 570
    },
    {
      "turn_id": 39,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 585
    },
    {
      "turn_id": 40,
      "speaker": "Speaker_A",
      "utterance": "我们可以将NotificationHub、IProfileRepository分为几个类型。",
      "speech_act": "classification",
      "diagram_elements_added": [],
      "timestamp_offset": 600
    },
    {
      "turn_id": 41,
      "speaker": "Speaker_B",
      "utterance": "好的，那就按这个方案。",
      "speech_act": "confirm",
      "diagram_elements_added": [
        "NotificationHub",
        "IProfileRepository",
        "IPostRepository"
      ],
      "timestamp_offset": 615
    },
    {
      "turn_id": 42,
      "speaker": "Speaker_A",
      "utterance": "从结构上看，我们有Vote、SocialServices。",
      "speech_act": "structural",
      "diagram_elements_added": [],
      "timestamp_offset": 630
    },
    {
      "turn_id": 43,
      "speaker": "Speaker_B",
      "utterance": "我的意思是Vote、SocialServices应该这样理解...",
      "speech_act": "clarify",
      "diagram_elements_added": [
        "Vote",
        "SocialServices"
      ],
      "timestamp_offset": 645
    },
    {
      "turn_id": 44,
      "speaker": "Speaker_A",
      "utterance": "你能详细说明一下Program吗？",
      "speech_act": "request",
      "diagram_elements_added": [],
      "timestamp_offset": 660
    },
    {
      "turn_id": 45,
      "speaker": "Speaker_B",
      "utterance": "我们需要确保这个逻辑是正确的。",
      "speech_act": "inform",
      "diagram_elements_added": [],
      "timestamp_offset": 675
    },
    {
      "turn_id": 46,
      "speaker": "Speaker_A",
      "utterance": "最后，流程到达Program结束。",
      "speech_act": "sequential",
      "diagram_elements_added": [
        "Program"
      ],
      "timestamp_offset": 690
    }
  ],
  "dialogue_stats": {
    "total_turns": 46,
    "speaker_distribution": {
      "Speaker_B": 23,
      "Speaker_A": 23
    },
    "speech_act_distribution": {
      "sequential": 4,
      "confirm": 7,
      "request": 11,
      "inform": 6,
      "classification": 5,
      "structural": 6,
      "clarify": 6,
      "contrastive": 1
    },
    "avg_turn_length": 28.26086956521739,
    "dialogue_duration": 690
  }
}